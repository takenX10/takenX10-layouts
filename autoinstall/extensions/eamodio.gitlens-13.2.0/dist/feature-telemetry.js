"use strict";var za=Object.defineProperty;var s=(Ye,z)=>za(Ye,"name",{value:z,configurable:!0});exports.id=913;exports.ids=[913];exports.modules={616:(Ye,z,N)=>{N.r(z),N.d(z,{OpenTelemetryProvider:()=>xt});var V;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(V||(V={}));var Vt=typeof globalThis=="object"?globalThis:global,D="1.3.0",Ke=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Ht(e){var t=new Set([e]),r=new Set,n=e.match(Ke);if(!n)return function(){return!1};var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(a.prerelease!=null)return s(function(_){return _===e},"isExactmatch");function i(u){return r.add(u),!1}s(i,"_reject");function o(u){return t.add(u),!0}return s(o,"_accept"),s(function(_){if(t.has(_))return!0;if(r.has(_))return!1;var c=_.match(Ke);if(!c)return i(_);var E={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return E.prerelease!=null||a.major!==E.major?i(_):a.major===0?a.minor===E.minor&&a.patch<=E.patch?o(_):i(_):a.minor<=E.minor?o(_):i(_)},"isCompatible")}s(Ht,"_makeCompatibilityCheck");var jt=Ht(D),Ft=D.split(".")[0],H=Symbol.for("opentelemetry.js.api."+Ft),j=Vt;function Q(e,t,r,n){var a;n===void 0&&(n=!1);var i=j[H]=(a=j[H])!==null&&a!==void 0?a:{version:D};if(!n&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(o.stack||o.message),!1}if(i.version!==D){var o=new Error("@opentelemetry/api: All API registration versions must match");return r.error(o.stack||o.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+D+"."),!0}s(Q,"registerGlobal");function M(e){var t,r,n=(t=j[H])===null||t===void 0?void 0:t.version;if(!(!n||!jt(n)))return(r=j[H])===null||r===void 0?void 0:r[e]}s(M,"getGlobal");function Z(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+D+".");var r=j[H];r&&delete r[e]}s(Z,"unregisterGlobal");var Xt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Yt=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Kt=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return s(e,"DiagComponentLogger"),e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return F("verbose",this._namespace,t)},e}();function F(e,t,r){var n=M("diag");if(n)return r.unshift(t),n[e].apply(n,Yt([],Xt(r),!1))}s(F,"logProxy");var p;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(p||(p={}));function kt(e,t){e<p.NONE?e=p.NONE:e>p.ALL&&(e=p.ALL),t=t||{};function r(n,a){var i=t[n];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return s(r,"_filterFunc"),{error:r("error",p.ERROR),warn:r("warn",p.WARN),info:r("info",p.INFO),debug:r("debug",p.DEBUG),verbose:r("verbose",p.VERBOSE)}}s(kt,"createLogLevelDiagLogger");var Wt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},zt=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Qt="diag",y=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var u=M("diag");if(u)return u[a].apply(u,zt([],Wt(i),!1))}}s(t,"_logProxy");var r=this,n=s(function(a,i){var o,u,_;if(i===void 0&&(i={logLevel:p.INFO}),a===r){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var E=M("diag"),S=kt((u=i.logLevel)!==null&&u!==void 0?u:p.INFO,a);if(E&&!i.suppressOverrideMessage){var l=(_=new Error().stack)!==null&&_!==void 0?_:"<failed to generate stacktrace>";E.warn("Current logger will be overwritten from "+l),S.warn("Current logger will overwrite one already registered from "+l)}return Q("diag",S,r,!0)},"setLogger");r.setLogger=n,r.disable=function(){Z(Qt,r)},r.createComponentLogger=function(a){return new Kt(a)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return s(e,"DiagAPI"),e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),Zt=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Jt=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qt=function(){function e(t){this._entries=t?new Map(t):new Map}return s(e,"BaggageImpl"),e.prototype.getEntry=function(t){var r=this._entries.get(t);if(r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=Zt(t,2),n=r[0],a=r[1];return[n,a]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=new e(this._entries);try{for(var o=Jt(n),u=o.next();!u.done;u=o.next()){var _=u.value;i._entries.delete(_)}}catch(c){t={error:c}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}(),$t=Symbol("BaggageEntryMetadata"),er=y.instance();function tr(e){return e===void 0&&(e={}),new qt(new Map(Object.entries(e)))}s(tr,"createBaggage");function rr(e){return typeof e!="string"&&(er.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:$t,toString:function(){return e}}}s(rr,"baggageEntryMetadataFromString");var nr="=",le=";",J=",",pe="baggage",ar=180,ir=4096,or=8192,sr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function ur(e){return e.reduce(function(t,r){var n=""+t+(t!==""?J:"")+r;return n.length>or?t:n},"")}s(ur,"serializeKeyPairs");function _r(e){return e.getAllEntries().map(function(t){var r=sr(t,2),n=r[0],a=r[1],i=encodeURIComponent(n)+"="+encodeURIComponent(a.value);return a.metadata!==void 0&&(i+=le+a.metadata.toString()),i})}s(_r,"getKeyPairs");function ke(e){var t=e.split(le);if(!(t.length<=0)){var r=t.shift();if(r){var n=r.split(nr);if(n.length===2){var a=decodeURIComponent(n[0].trim()),i=decodeURIComponent(n[1].trim()),o;return t.length>0&&(o=rr(t.join(le))),{key:a,value:i,metadata:o}}}}}s(ke,"parsePairKeyValue");function We(e){return typeof e!="string"||e.length===0?{}:e.split(J).map(function(t){return ke(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,r){return t[r.key]=r.value,t},{})}s(We,"parseKeyPairsIntoRecord");var cr=N(2037),O;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(O||(O={}));var Er=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},fr=",",lr=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function pr(e){return lr.indexOf(e)>-1}s(pr,"isEnvVarANumber");var dr=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Tr(e){return dr.indexOf(e)>-1}s(Tr,"isEnvVarAList");var de=1/0,Te=128,ze={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:p.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:de,OTEL_ATTRIBUTE_COUNT_LIMIT:Te,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:de,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Te,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"otlp",OTEL_TRACES_SAMPLER:O.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Sr(e,t,r,n,a){if(n===void 0&&(n=-1/0),a===void 0&&(a=1/0),typeof r[e]<"u"){var i=Number(r[e]);isNaN(i)||(i<n?t[e]=n:i>a?t[e]=a:t[e]=i)}}s(Sr,"parseNumber");function Ar(e,t,r,n){n===void 0&&(n=fr);var a=r[e];typeof a=="string"&&(t[e]=a.split(n).map(function(i){return i.trim()}))}s(Ar,"parseStringList");var hr={ALL:p.ALL,VERBOSE:p.VERBOSE,DEBUG:p.DEBUG,INFO:p.INFO,WARN:p.WARN,ERROR:p.ERROR,NONE:p.NONE};function vr(e,t,r){var n=r[e];if(typeof n=="string"){var a=hr[n.toUpperCase()];a!=null&&(t[e]=a)}}s(vr,"setLogLevelFromEnv");function Se(e){var t={};for(var r in ze){var n=r;switch(n){case"OTEL_LOG_LEVEL":vr(n,t,e);break;default:if(pr(n))Sr(n,t,e);else if(Tr(n))Ar(n,t,e);else{var a=e[n];typeof a<"u"&&a!==null&&(t[n]=String(a))}}}return t}s(Se,"parseEnvironment");function Or(){return Se(typeof process<"u"?process.env:Er)}s(Or,"getEnvWithoutDefaults");function d(){var e=Se(process.env);return Object.assign({HOSTNAME:cr.hostname()},ze,e)}s(d,"getEnv");var f=y.instance(),mr=function(){function e(){var t=this;this._promise=new Promise(function(r,n){t._resolve=r,t._reject=n})}return s(e,"Deferred"),Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),Rr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},gr=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},Ae=function(){function e(t,r){this._callback=t,this._that=r,this._isCalled=!1,this._deferred=new mr}return s(e,"BindOnceFuture"),Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,r=this,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,gr([this._that],Rr(n),!1))).then(function(i){return r._deferred.resolve(i)},function(i){return r._deferred.reject(i)})}catch(i){this._deferred.reject(i)}}return this._deferred.promise},e}(),P;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(P||(P={}));var Nr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Qe=1e4;function yr(e){e===void 0&&(e={});var t={};return Object.entries(e).forEach(function(r){var n=Nr(r,2),a=n[0],i=n[1];typeof i<"u"?t[a]=String(i):f.warn('Header "'+a+'" has wrong value and will be ignored')}),t}s(yr,"parseHeaders");function Pr(e,t){return e.endsWith("/")||(e=e+"/"),e+t}s(Pr,"appendResourcePathToUrl");function Ir(e){try{var t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch{return f.warn("Could not parse export URL: '"+e+"'"),e}}s(Ir,"appendRootPathToUrlIfNeeded");function Cr(e){return typeof e=="number"?e<=0?Ze(e,Qe):e:Lr()}s(Cr,"configureExporterTimeout");function Lr(){var e,t=Number((e=d().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:d().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?Ze(t,Qe):t}s(Lr,"getExporterTimeoutFromEnv");function Ze(e,t){return f.warn("Timeout must be greater than 0",e),t}s(Ze,"invalidTimeout");var br=function(){function e(t){t===void 0&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new Ae(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:1/0,this.timeoutMillis=Cr(t.timeoutMillis),this.onInit(t)}return s(e,"OTLPExporterBase"),e.prototype.export=function(t,r){if(this._shutdownOnce.isCalled){r({code:P.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:P.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(function(){r({code:P.SUCCESS})}).catch(function(n){r({code:P.FAILED,error:n})})},e.prototype._export=function(t){var r=this;return new Promise(function(n,a){try{f.debug("items to be sent",t),r.send(t,n,a)}catch(i){a(i)}})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return f.debug("shutdown started"),this.onShutdown(),Promise.all(this._sendingPromises).then(function(){})},e}(),Je=N(7310),qe=N(3685),$e=N(5687),Dr=N(9796),Mr=N(2781),w;(function(e){e.NONE="none",e.GZIP="gzip"})(w||(w={}));var wr=function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),he=function(e){wr(t,e);function t(r,n,a){var i=e.call(this,r)||this;return i.name="OTLPExporterError",i.data=a,i.code=n,i}return s(t,"OTLPExporterError"),t}(Error),q=function(){return q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},q.apply(this,arguments)};function Ur(e,t,r,n,a){var i=e.timeoutMillis,o=new Je.URL(e.url),u,_=Number(process.versions.node.split(".")[0]),c=setTimeout(function(){u=!0,_>=14?l.destroy():l.abort()},i),E={hostname:o.hostname,port:o.port,path:o.pathname,method:"POST",headers:q({"Content-Type":r},e.headers),agent:e.agent},S=o.protocol==="http:"?qe.request:$e.request,l=S(E,function(T){var g="";T.on("data",function(v){return g+=v}),T.on("aborted",function(){if(u){var v=new he("Request Timeout");a(v)}}),T.on("end",function(){if(!u){if(T.statusCode&&T.statusCode<299)f.debug("statusCode: "+T.statusCode,g),n();else{var v=new he(T.statusMessage,T.statusCode,g);a(v)}clearTimeout(c)}})});switch(l.on("error",function(T){if(u){var g=new he("Request Timeout",T.code);a(g)}else clearTimeout(c),a(T)}),e.compression){case w.GZIP:{l.setHeader("Content-Encoding","gzip");var h=Br(t);h.on("error",a).pipe(Dr.createGzip()).on("error",a).pipe(l);break}default:l.end(t);break}}s(Ur,"sendWithHttp");function Br(e){var t=new Mr.Readable;return t.push(e),t.push(null),t}s(Br,"readableFromBuffer");function xr(e){if(e.httpAgentOptions&&e.keepAlive===!1){f.warn("httpAgentOptions is used only when keepAlive is true");return}if(!(e.keepAlive===!1||!e.url))try{var t=new Je.URL(e.url),r=t.protocol==="http:"?qe.Agent:$e.Agent;return new r(q({keepAlive:!0},e.httpAgentOptions))}catch(n){f.error("collector exporter failed to create http agent. err: "+n.message);return}}s(xr,"createHttpAgent");function Gr(e){if(e)return e;var t=d().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||d().OTEL_EXPORTER_OTLP_COMPRESSION;return t===w.GZIP?w.GZIP:w.NONE}s(Gr,"configureCompression");var Vr=function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hr=function(e){Vr(t,e);function t(r){r===void 0&&(r={});var n=e.call(this,r)||this;return n.DEFAULT_HEADERS={},r.metadata&&f.warn("Metadata cannot be set when using http"),n.headers=Object.assign(n.DEFAULT_HEADERS,yr(r.headers),We(d().OTEL_EXPORTER_OTLP_HEADERS)),n.agent=xr(r),n.compression=Gr(r.compression),n}return s(t,"OTLPExporterNodeBase"),t.prototype.onInit=function(r){},t.prototype.send=function(r,n,a){var i=this;if(this._shutdownOnce.isCalled){f.debug("Shutdown already started. Cannot send objects");return}var o=this.convert(r),u=new Promise(function(c,E){Ur(i,JSON.stringify(o),"application/json",c,E)}).then(n,a);this._sendingPromises.push(u);var _=s(function(){var c=i._sendingPromises.indexOf(u);i._sendingPromises.splice(c,1)},"popPromise");u.then(_,_)},t.prototype.onShutdown=function(){},t}(br),jr=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function $(e){return Object.keys(e).map(function(t){return et(t,e[t])})}s($,"toAttributes");function et(e,t){return{key:e,value:tt(t)}}s(et,"toKeyValue");function tt(e){var t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(tt)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(function(r){var n=jr(r,2),a=n[0],i=n[1];return et(a,i)})}}:{}}s(tt,"toAnyValue");function Qa(e){var t,r=(t=e.match(/[\da-f]{2}/gi))===null||t===void 0?void 0:t.map(function(n){return parseInt(n,16)});return r&&new Uint8Array(r)}s(Qa,"hexToBuf");function Fr(e){return("0"+e.toString(16)).slice(-2)}s(Fr,"i2hex");function Za(e){if(!(e==null||e.length===0))return Array.from(e).map(Fr).join("")}s(Za,"bufToHex");var Xr=N(4074),ee=Xr.performance,ve=9,X=Math.pow(10,ve);function te(e){var t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(ve))*X;return[r,n]}s(te,"numberToHrtime");function rt(){var e=ee.timeOrigin;if(typeof e!="number"){var t=ee;e=t.timing&&t.timing.fetchStart}return e}s(rt,"getTimeOrigin");function Yr(e){var t=te(rt()),r=te(typeof e=="number"?e:ee.now()),n=t[0]+r[0],a=t[1]+r[1];return a>X&&(a-=X,n+=1),[n,a]}s(Yr,"hrTime");function Oe(e){if(nt(e))return e;if(typeof e=="number")return e<rt()?Yr(e):te(e);if(e instanceof Date)return te(e.getTime());throw TypeError("Invalid input type")}s(Oe,"timeInputToHrTime");function Kr(e,t){var r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=X),[r,n]}s(Kr,"hrTimeDuration");function Ja(e){var t=ve,r=""+"0".repeat(t)+e[1]+"Z",n=r.substr(r.length-t-1),a=new Date(e[0]*1e3).toISOString();return a.replace("000Z",n)}s(Ja,"hrTimeToTimeStamp");function me(e){return e[0]*X+e[1]}s(me,"hrTimeToNanoseconds");function qa(e){return Math.round(e[0]*1e3+e[1]/1e6)}s(qa,"hrTimeToMilliseconds");function $a(e){return Math.round(e[0]*1e6+e[1]/1e3)}s($a,"hrTimeToMicroseconds");function nt(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}s(nt,"isTimeInputHrTime");function kr(e){return nt(e)||typeof e=="number"||e instanceof Date}s(kr,"isTimeInput");function at(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}s(at,"intValue");var Wr=Buffer.alloc(8),zr=Buffer.alloc(16);function Y(e){var t;e.length===16?t=Wr:e.length===32?t=zr:t=Buffer.alloc(e.length/2);for(var r=0,n=0;n<e.length;n+=2){var a=at(e.charCodeAt(n)),i=at(e.charCodeAt(n+1));t.writeUInt8(a<<4|i,r++)}return t.toString("base64")}s(Y,"hexToBase64");function Qr(e,t){var r=e.spanContext(),n=e.status,a=t?e.parentSpanId:e.parentSpanId!=null?Y(e.parentSpanId):void 0;return{traceId:t?r.traceId:Y(r.traceId),spanId:t?r.spanId:Y(r.spanId),parentSpanId:a,name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:me(e.startTime),endTimeUnixNano:me(e.endTime),attributes:$(e.attributes),droppedAttributesCount:0,events:e.events.map(Jr),droppedEventsCount:0,status:{code:n.code,message:n.message},links:e.links.map(function(i){return Zr(i,t)}),droppedLinksCount:0}}s(Qr,"sdkSpanToOtlpSpan");function Zr(e,t){return{attributes:e.attributes?$(e.attributes):[],spanId:t?e.context.spanId:Y(e.context.spanId),traceId:t?e.context.traceId:Y(e.context.traceId),droppedAttributesCount:0}}s(Zr,"toOtlpLink");function Jr(e){return{attributes:e.attributes?$(e.attributes):[],name:e.name,timeUnixNano:me(e.time),droppedAttributesCount:0}}s(Jr,"toOtlpSpanEvent");var qr=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$r=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function en(e,t){return{resourceSpans:rn(e,t)}}s(en,"createExportTraceServiceRequest");function tn(e){var t,r,n=new Map;try{for(var a=qr(e),i=a.next();!i.done;i=a.next()){var o=i.value,u=n.get(o.resource);u||(u=new Map,n.set(o.resource,u));var _=o.instrumentationLibrary.name+"@"+(o.instrumentationLibrary.version||"")+":"+(o.instrumentationLibrary.schemaUrl||""),c=u.get(_);c||(c=[],u.set(_,c)),c.push(o)}}catch(E){t={error:E}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}s(tn,"createResourceMap");function rn(e,t){for(var r=tn(e),n=[],a=r.entries(),i=a.next();!i.done;){for(var o=$r(i.value,2),u=o[0],_=o[1],c=[],E=_.values(),S=E.next();!S.done;){var l=S.value;if(l.length>0){var h=l[0].instrumentationLibrary,T=h.name,g=h.version,v=h.schemaUrl,Xe=l.map(function(fe){return Qr(fe,t)});c.push({scope:{name:T,version:g},spans:Xe,schemaUrl:v})}S=E.next()}var Ee={resource:{attributes:$(u.attributes),droppedAttributesCount:0},scopeSpans:c,schemaUrl:void 0};n.push(Ee),i=a.next()}return n}s(rn,"spanRecordsToResourceSpans");var nn=function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),it="v1/traces",an="http://localhost:4318/"+it,on=function(e){nn(t,e);function t(r){r===void 0&&(r={});var n=e.call(this,r)||this;return n.headers=Object.assign(n.headers,We(d().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return s(t,"OTLPTraceExporter"),t.prototype.convert=function(r){return en(r,!0)},t.prototype.getDefaultUrl=function(r){return typeof r.url=="string"?r.url:d().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?Ir(d().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):d().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?Pr(d().OTEL_EXPORTER_OTLP_ENDPOINT,it):an},t}(Hr),A={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},ei={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},ti={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},ri={EC2:"ec2",FARGATE:"fargate"},ni={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},ai={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},sn={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},un="1.8.0",U,Re=(U={},U[A.TELEMETRY_SDK_NAME]="opentelemetry",U[A.PROCESS_RUNTIME_NAME]="node",U[A.TELEMETRY_SDK_LANGUAGE]=sn.NODEJS,U[A.TELEMETRY_SDK_VERSION]=un,U);function _n(){return"unknown_service:"+process.argv0}s(_n,"defaultServiceName");var ge=function(){function e(t){this.attributes=t}return s(e,"Resource"),e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[A.SERVICE_NAME]=_n(),t[A.TELEMETRY_SDK_LANGUAGE]=Re[A.TELEMETRY_SDK_LANGUAGE],t[A.TELEMETRY_SDK_NAME]=Re[A.TELEMETRY_SDK_NAME],t[A.TELEMETRY_SDK_VERSION]=Re[A.TELEMETRY_SDK_VERSION],t))},e.prototype.merge=function(t){if(!t||!Object.keys(t.attributes).length)return this;var r=Object.assign({},this.attributes,t.attributes);return new e(r)},e.EMPTY=new e({}),e}();function Ne(e){return Symbol.for(e)}s(Ne,"createContextKey");var cn=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,a){var i=new e(r._currentContext);return i._currentContext.set(n,a),i},r.deleteValue=function(n){var a=new e(r._currentContext);return a._currentContext.delete(n),a}}return s(e,"BaseContext"),e}(),En=new cn,fn=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},ln=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},pn=function(){function e(){}return s(e,"NoopContextManager"),e.prototype.active=function(){return En},e.prototype.with=function(t,r,n){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return r.call.apply(r,ln([n],fn(a),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),dn=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Tn=function(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},ye="context",Sn=new pn,Pe=function(){function e(){}return s(e,"ContextAPI"),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Q(ye,t,y.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,Tn([t,r,n],dn(i),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return M(ye)||Sn},e.prototype.disable=function(){this._getContextManager().disable(),Z(ye,y.instance())},e}(),m;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(m||(m={}));var ot="0000000000000000",st="00000000000000000000000000000000",ut={traceId:st,spanId:ot,traceFlags:m.NONE},K=function(){function e(t){t===void 0&&(t=ut),this._spanContext=t}return s(e,"NonRecordingSpan"),e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}(),Ie=Ne("OpenTelemetry Context Key SPAN");function Ce(e){return e.getValue(Ie)||void 0}s(Ce,"getSpan");function An(){return Ce(Pe.getInstance().active())}s(An,"getActiveSpan");function Le(e,t){return e.setValue(Ie,t)}s(Le,"setSpan");function hn(e){return e.deleteValue(Ie)}s(hn,"deleteSpan");function vn(e,t){return Le(e,new K(t))}s(vn,"setSpanContext");function _t(e){var t;return(t=Ce(e))===null||t===void 0?void 0:t.spanContext()}s(_t,"getSpanContext");var On=/^([0-9a-f]{32})$/i,mn=/^[0-9a-f]{16}$/i;function ct(e){return On.test(e)&&e!==st}s(ct,"isValidTraceId");function Rn(e){return mn.test(e)&&e!==ot}s(Rn,"isValidSpanId");function re(e){return ct(e.traceId)&&Rn(e.spanId)}s(re,"isSpanContextValid");function gn(e){return new K(e)}s(gn,"wrapSpanContext");var Et=Pe.getInstance(),ft=function(){function e(){}return s(e,"NoopTracer"),e.prototype.startSpan=function(t,r,n){var a=Boolean(r?.root);if(a)return new K;var i=n&&_t(n);return Nn(i)&&re(i)?new K(i):new K},e.prototype.startActiveSpan=function(t,r,n,a){var i,o,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(i=r,u=n):(i=r,o=n,u=a);var _=o??Et.active(),c=this.startSpan(t,i,_),E=Le(_,c);return Et.with(E,u,void 0,c)}},e}();function Nn(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}s(Nn,"isSpanContext");var yn=new ft,Pn=function(){function e(t,r,n,a){this._provider=t,this.name=r,this.version=n,this.options=a}return s(e,"ProxyTracer"),e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):yn},e}(),In=function(){function e(){}return s(e,"NoopTracerProvider"),e.prototype.getTracer=function(t,r,n){return new ft},e}(),Cn=new In,lt=function(){function e(){}return s(e,"ProxyTracerProvider"),e.prototype.getTracer=function(t,r,n){var a;return(a=this.getDelegateTracer(t,r,n))!==null&&a!==void 0?a:new Pn(this,t,r,n)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Cn},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,n){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,r,n)},e}(),be="trace",Ln=function(){function e(){this._proxyTracerProvider=new lt,this.wrapSpanContext=gn,this.isSpanContextValid=re,this.deleteSpan=hn,this.getSpan=Ce,this.getActiveSpan=An,this.getSpanContext=_t,this.setSpan=Le,this.setSpanContext=vn}return s(e,"TraceAPI"),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=Q(be,this._proxyTracerProvider,y.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return M(be)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){Z(be,y.instance()),this._proxyTracerProvider=new lt},e}(),R=Ln.getInstance(),I=Pe.getInstance(),bn=function(){function e(){}return s(e,"NoopTextMapPropagator"),e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}(),Dn={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},Mn={set:function(e,t,r){e!=null&&(e[t]=r)}},De=Ne("OpenTelemetry Baggage Key");function wn(e){return e.getValue(De)||void 0}s(wn,"getBaggage");function Un(e,t){return e.setValue(De,t)}s(Un,"setBaggage");function Bn(e){return e.deleteValue(De)}s(Bn,"deleteBaggage");var Me="propagation",xn=new bn,Gn=function(){function e(){this.createBaggage=tr,this.getBaggage=wn,this.setBaggage=Un,this.deleteBaggage=Bn}return s(e,"PropagationAPI"),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return Q(Me,t,y.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=Mn),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=Dn),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Z(Me,y.instance())},e.prototype._getGlobalPropagator=function(){return M(Me)||xn},e}(),ne=Gn.getInstance(),Vn="[object Object]",Hn="[object Null]",jn="[object Undefined]",Fn=Function.prototype,pt=Fn.toString,Xn=pt.call(Object),Yn=Kn(Object.getPrototypeOf,Object),dt=Object.prototype,Tt=dt.hasOwnProperty,C=Symbol?Symbol.toStringTag:void 0,St=dt.toString;function Kn(e,t){return function(r){return e(t(r))}}s(Kn,"overArg");function At(e){if(!kn(e)||Wn(e)!==Vn)return!1;var t=Yn(e);if(t===null)return!0;var r=Tt.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&pt.call(r)===Xn}s(At,"isPlainObject");function kn(e){return e!=null&&typeof e=="object"}s(kn,"isObjectLike");function Wn(e){return e==null?e===void 0?jn:Hn:C&&C in Object(e)?zn(e):Qn(e)}s(Wn,"baseGetTag");function zn(e){var t=Tt.call(e,C),r=e[C],n=!1;try{e[C]=void 0,n=!0}catch{}var a=St.call(e);return n&&(t?e[C]=r:delete e[C]),a}s(zn,"getRawTag");function Qn(e){return St.call(e)}s(Qn,"objectToString");var Zn=20;function Jn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.shift(),n=new WeakMap;e.length>0;)r=ht(r,e.shift(),0,n);return r}s(Jn,"merge");function we(e){return ae(e)?e.slice():e}s(we,"takeValue");function ht(e,t,r,n){r===void 0&&(r=0);var a;if(!(r>Zn)){if(r++,ie(e)||ie(t)||Ot(t))a=we(t);else if(ae(e)){if(a=e.slice(),ae(t))for(var i=0,o=t.length;i<o;i++)a.push(we(t[i]));else if(k(t))for(var u=Object.keys(t),i=0,o=u.length;i<o;i++){var _=u[i];a[_]=we(t[_])}}else if(k(e))if(k(t)){if(!qn(e,t))return t;a=Object.assign({},e);for(var u=Object.keys(t),i=0,o=u.length;i<o;i++){var _=u[i],c=t[_];if(ie(c))typeof c>"u"?delete a[_]:a[_]=c;else{var E=a[_],S=c;if(vt(e,_,n)||vt(t,_,n))delete a[_];else{if(k(E)&&k(S)){var l=n.get(E)||[],h=n.get(S)||[];l.push({obj:e,key:_}),h.push({obj:t,key:_}),n.set(E,l),n.set(S,h)}a[_]=ht(a[_],c,r,n)}}}}else a=t;return a}}s(ht,"mergeTwoObjects");function vt(e,t,r){for(var n=r.get(e[t])||[],a=0,i=n.length;a<i;a++){var o=n[a];if(o.key===t&&o.obj===e)return!0}return!1}s(vt,"wasObjectReferenced");function ae(e){return Array.isArray(e)}s(ae,"isArray");function Ot(e){return typeof e=="function"}s(Ot,"isFunction");function k(e){return!ie(e)&&!ae(e)&&!Ot(e)&&typeof e=="object"}s(k,"isObject");function ie(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}s(ie,"isPrimitive");function qn(e,t){return!(!At(e)||!At(t))}s(qn,"shouldMerge");var $n=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ea=function(){function e(t){t===void 0&&(t={});var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,a){return n.concat(a)},[])))}return s(e,"CompositePropagator"),e.prototype.inject=function(t,r,n){var a,i;try{for(var o=$n(this._propagators),u=o.next();!u.done;u=o.next()){var _=u.value;try{_.inject(t,r,n)}catch(c){f.warn("Failed to inject with "+_.constructor.name+". Err: "+c.message)}}}catch(c){a={error:c}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}},e.prototype.extract=function(t,r,n){return this._propagators.reduce(function(a,i){try{return i.extract(a,r,n)}catch(o){f.warn("Failed to inject with "+i.constructor.name+". Err: "+o.message)}return a},t)},e.prototype.fields=function(){return this._fields.slice()},e}(),Ue=Ne("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function mt(e){return e.setValue(Ue,!0)}s(mt,"suppressTracing");function ii(e){return e.deleteValue(Ue)}s(ii,"unsuppressTracing");function Be(e){return e.getValue(Ue)===!0}s(Be,"isTracingSuppressed");var xe="[_0-9a-z-*/]",ta="[a-z]"+xe+"{0,255}",ra="[a-z0-9]"+xe+"{0,240}@[a-z]"+xe+"{0,13}",na=new RegExp("^(?:"+ta+"|"+ra+")$"),aa=/^[ -~]{0,255}[!-~]$/,ia=/,|=/;function oa(e){return na.test(e)}s(oa,"validateKey");function sa(e){return aa.test(e)&&!ia.test(e)}s(sa,"validateValue");var Rt=32,ua=512,gt=",",Nt="=",_a=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return s(e,"TraceState"),e.prototype.set=function(t,r){var n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n},e.prototype.unset=function(t){var r=this._clone();return r._internalState.delete(t),r},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(r,n){return r.push(n+Nt+t.get(n)),r},[]).join(gt)},e.prototype._parse=function(t){t.length>ua||(this._internalState=t.split(gt).reverse().reduce(function(r,n){var a=n.trim(),i=a.indexOf(Nt);if(i!==-1){var o=a.slice(0,i),u=a.slice(i+1,n.length);oa(o)&&sa(u)&&r.set(o,u)}return r},new Map),this._internalState.size>Rt&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Rt))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),Ge="traceparent",Ve="tracestate",ca="00",Ea="(?!ff)[\\da-f]{2}",fa="(?![0]{32})[\\da-f]{32}",la="(?![0]{16})[\\da-f]{16}",pa="[\\da-f]{2}",da=new RegExp("^\\s?("+Ea+")-("+fa+")-("+la+")-("+pa+")(-.*)?\\s?$");function Ta(e){var t=da.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}s(Ta,"parseTraceParent");var Sa=function(){function e(){}return s(e,"W3CTraceContextPropagator"),e.prototype.inject=function(t,r,n){var a=R.getSpanContext(t);if(!(!a||Be(t)||!re(a))){var i=ca+"-"+a.traceId+"-"+a.spanId+"-0"+Number(a.traceFlags||m.NONE).toString(16);n.set(r,Ge,i),a.traceState&&n.set(r,Ve,a.traceState.serialize())}},e.prototype.extract=function(t,r,n){var a=n.get(r,Ge);if(!a)return t;var i=Array.isArray(a)?a[0]:a;if(typeof i!="string")return t;var o=Ta(i);if(!o)return t;o.isRemote=!0;var u=n.get(r,Ve);if(u){var _=Array.isArray(u)?u.join(","):u;o.traceState=new _a(typeof _=="string"?_:void 0)}return R.setSpanContext(t,o)},e.prototype.fields=function(){return[Ge,Ve]},e}(),Aa=function(){function e(){}return s(e,"W3CBaggagePropagator"),e.prototype.inject=function(t,r,n){var a=ne.getBaggage(t);if(!(!a||Be(t))){var i=_r(a).filter(function(u){return u.length<=ir}).slice(0,ar),o=ur(i);o.length>0&&n.set(r,pe,o)}},e.prototype.extract=function(t,r,n){var a=n.get(r,pe),i=Array.isArray(a)?a.join(J):a;if(!i)return t;var o={};if(i.length===0)return t;var u=i.split(J);return u.forEach(function(_){var c=ke(_);if(c){var E={value:c.value};c.metadata&&(E.metadata=c.metadata),o[c.key]=E}}),Object.entries(o).length===0?t:ne.setBaggage(t,ne.createBaggage(o))},e.prototype.fields=function(){return[pe]},e}(),oe;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(oe||(oe={}));var yt=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ha=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i};function se(e){var t,r,n={};if(typeof e!="object"||e==null)return n;try{for(var a=yt(Object.entries(e)),i=a.next();!i.done;i=a.next()){var o=ha(i.value,2),u=o[0],_=o[1];if(!va(u)){f.warn("Invalid attribute key: "+u);continue}if(!Pt(_)){f.warn("Invalid attribute value set for key: "+u);continue}Array.isArray(_)?n[u]=_.slice():n[u]=_}}catch(c){t={error:c}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}s(se,"sanitizeAttributes");function va(e){return typeof e=="string"&&e.length>0}s(va,"isAttributeKey");function Pt(e){return e==null?!0:Array.isArray(e)?Oa(e):It(e)}s(Pt,"isAttributeValue");function Oa(e){var t,r,n;try{for(var a=yt(e),i=a.next();!i.done;i=a.next()){var o=i.value;if(o!=null){if(!n){if(It(o)){n=typeof o;continue}return!1}if(typeof o!==n)return!1}}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!0}s(Oa,"isHomogeneousAttributeValueArray");function It(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}s(It,"isValidPrimitiveAttributeValue");var He;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(He||(He={}));var L={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},oi={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},si={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},ui={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},_i={INSERT:"insert",EDIT:"edit",DELETE:"delete"},ci={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},Ei={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},fi={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},li={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},pi={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},di={QUEUE:"queue",TOPIC:"topic"},Ti={RECEIVE:"receive",PROCESS:"process"},Si={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},Ai={SENT:"SENT",RECEIVED:"RECEIVED"},ma="exception",Ra=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ga=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Na=function(){function e(t,r,n,a,i,o,u,_,c){u===void 0&&(u=[]),c===void 0&&(c=ee),this.attributes={},this.links=[],this.events=[],this.status={code:He.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this._clock=c,this.name=n,this._spanContext=a,this.parentSpanId=o,this.kind=i,this.links=u,this.startTime=Oe(_??c.now()),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return s(e,"Span"),e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(f.warn("Invalid attribute key: "+t),this):Pt(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=this._truncateToSize(r),this):(f.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var r,n;try{for(var a=Ra(Object.entries(t)),i=a.next();!i.done;i=a.next()){var o=ga(i.value,2),u=o[0],_=o[1];this.setAttribute(u,_)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return this},e.prototype.addEvent=function(t,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return f.warn("No events allowed."),this;this.events.length>=this._spanLimits.eventCountLimit&&(f.warn("Dropping extra events."),this.events.shift()),kr(r)&&(typeof n>"u"&&(n=r),r=void 0),typeof n>"u"&&(n=this._clock.now());var a=se(r);return this.events.push({name:t,attributes:a,time:Oe(n)}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){f.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=Oe(t??this._clock.now()),this._duration=Kr(this.startTime,this.endTime),this._duration[0]<0&&(f.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,r){r===void 0&&(r=this._clock.now());var n={};typeof t=="string"?n[L.EXCEPTION_MESSAGE]=t:t&&(t.code?n[L.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[L.EXCEPTION_TYPE]=t.name),t.message&&(n[L.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[L.EXCEPTION_STACKTRACE]=t.stack)),n[L.EXCEPTION_TYPE]||n[L.EXCEPTION_MESSAGE]?this.addEvent(ma,n,r):f.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&f.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,r){return t.length<=r?t:t.substr(0,r)},e.prototype._truncateToSize=function(t){var r=this,n=this._attributeValueLengthLimit;return n<=0?(f.warn("Attribute value limit must be positive, got "+n),t):typeof t=="string"?this._truncateToLimitUtil(t,n):Array.isArray(t)?t.map(function(a){return typeof a=="string"?r._truncateToLimitUtil(a,n):a}):t},e}(),B;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(B||(B={}));var ue=function(){function e(){}return s(e,"AlwaysOffSampler"),e.prototype.shouldSample=function(){return{decision:B.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),x=function(){function e(){}return s(e,"AlwaysOnSampler"),e.prototype.shouldSample=function(){return{decision:B.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}();function ya(){return function(e){f.error(Pa(e))}}s(ya,"loggingErrorHandler");function Pa(e){return typeof e=="string"?e:JSON.stringify(Ia(e))}s(Pa,"stringifyException");function Ia(e){for(var t={},r=e;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!t[n]){var a=r[n];a&&(t[n]=String(a))}}),r=Object.getPrototypeOf(r);return t}s(Ia,"flattenException");var Ct=ya();function hi(e){Ct=e}s(hi,"setGlobalErrorHandler");function W(e){try{Ct(e)}catch{}}s(W,"globalErrorHandler");var je=function(){function e(t){var r,n,a,i;this._root=t.root,this._root||(W(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new x),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new x,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new ue,this._localParentSampled=(a=t.localParentSampled)!==null&&a!==void 0?a:new x,this._localParentNotSampled=(i=t.localParentNotSampled)!==null&&i!==void 0?i:new ue}return s(e,"ParentBasedSampler"),e.prototype.shouldSample=function(t,r,n,a,i,o){var u=R.getSpanContext(t);return!u||!re(u)?this._root.shouldSample(t,r,n,a,i,o):u.isRemote?u.traceFlags&m.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,a,i,o):this._remoteParentNotSampled.shouldSample(t,r,n,a,i,o):u.traceFlags&m.SAMPLED?this._localParentSampled.shouldSample(t,r,n,a,i,o):this._localParentNotSampled.shouldSample(t,r,n,a,i,o)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Lt=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return s(e,"TraceIdRatioBasedSampler"),e.prototype.shouldSample=function(t,r){return{decision:ct(r)&&this._accumulate(r)<this._upperBound?B.RECORD_AND_SAMPLED:B.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var r=0,n=0;n<t.length/8;n++){var a=n*8,i=parseInt(t.slice(a,a+8),16);r=(r^i)>>>0}return r},e}(),Ca=d(),La=O.AlwaysOn,G=1;function bt(){return{sampler:Dt(Ca),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:d().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:d().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:d().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:d().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:d().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:d().OTEL_SPAN_EVENT_COUNT_LIMIT}}}s(bt,"loadDefaultConfig");function Dt(e){switch(e===void 0&&(e=d()),e.OTEL_TRACES_SAMPLER){case O.AlwaysOn:return new x;case O.AlwaysOff:return new ue;case O.ParentBasedAlwaysOn:return new je({root:new x});case O.ParentBasedAlwaysOff:return new je({root:new ue});case O.TraceIdRatio:return new Lt(Mt(e));case O.ParentBasedTraceIdRatio:return new je({root:new Lt(Mt(e))});default:return f.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+La+'".'),new x}}s(Dt,"buildSamplerFromEnv");function Mt(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return f.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+G+"."),G;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(f.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+G+"."),G):t<0||t>1?(f.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+G+"."),G):t}s(Mt,"getSamplerProbabilityFromEnv");function ba(e){var t={sampler:Dt()},r=bt(),n=Object.assign({},r,t,e);return n.generalLimits=Object.assign({},r.generalLimits,e.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,e.spanLimits||{}),n}s(ba,"mergeConfig");function Da(e){var t,r,n,a,i,o,u,_,c,E,S,l,h=Object.assign({},e.spanLimits),T=Or();return h.attributeCountLimit=(o=(i=(a=(r=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&r!==void 0?r:(n=e.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&a!==void 0?a:T.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&i!==void 0?i:T.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:Te,h.attributeValueLengthLimit=(l=(S=(E=(_=(u=e.spanLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&_!==void 0?_:(c=e.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&E!==void 0?E:T.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&S!==void 0?S:T.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&l!==void 0?l:de,Object.assign({},e,{spanLimits:h})}s(Da,"reconfigureLimits");var Ma=8,wt=16,wa=function(){function e(){this.generateTraceId=Ut(wt),this.generateSpanId=Ut(Ma)}return s(e,"RandomIdGenerator"),e}(),_e=Buffer.allocUnsafe(wt);function Ut(e){return s(function(){for(var r=0;r<e/4;r++)_e.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<e&&!(_e[r]>0);r++)r===e-1&&(_e[e-1]=1);return _e.toString("hex",0,e)},"generateId")}s(Ut,"getIdGenerator");var Ua=function(){function e(t,r,n){this._tracerProvider=n;var a=ba(r);this._sampler=a.sampler,this._generalLimits=a.generalLimits,this._spanLimits=a.spanLimits,this._idGenerator=r.idGenerator||new wa,this.resource=n.resource,this.instrumentationLibrary=t}return s(e,"Tracer"),e.prototype.startSpan=function(t,r,n){var a,i;r===void 0&&(r={}),n===void 0&&(n=I.active()),r.root&&(n=R.deleteSpan(n));var o=R.getSpan(n);if(Be(n)){f.debug("Instrumentation suppressed, returning Noop Span");var u=R.wrapSpanContext(ut);return u}var _=o?.spanContext(),c=this._idGenerator.generateSpanId(),E,S,l;!_||!R.isSpanContextValid(_)?E=this._idGenerator.generateTraceId():(E=_.traceId,S=_.traceState,l=_.spanId);var h=(a=r.kind)!==null&&a!==void 0?a:V.INTERNAL,T=((i=r.links)!==null&&i!==void 0?i:[]).map(function(Gt){return{context:Gt.context,attributes:se(Gt.attributes)}}),g=se(r.attributes),v=this._sampler.shouldSample(n,E,t,h,g,T),Xe=v.decision===oe.RECORD_AND_SAMPLED?m.SAMPLED:m.NONE,Ee={traceId:E,spanId:c,traceFlags:Xe,traceState:S};if(v.decision===oe.NOT_RECORD){f.debug("Recording is off, propagating context in a non-recording span");var u=R.wrapSpanContext(Ee);return u}var fe=new Na(this,n,t,Ee,h,l,T,r.startTime),Wa=se(Object.assign(g,v.attributes));return fe.setAttributes(Wa),fe},e.prototype.startActiveSpan=function(t,r,n,a){var i,o,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(i=r,u=n):(i=r,o=n,u=a);var _=o??I.active(),c=this.startSpan(t,i,_),E=R.setSpan(_,c);return I.with(E,u,void 0,c)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}(),ce=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ba=function(){function e(t){this._spanProcessors=t}return s(e,"MultiSpanProcessor"),e.prototype.forceFlush=function(){var t,r,n=[];try{for(var a=ce(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;n.push(o.forceFlush())}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return new Promise(function(u){Promise.all(n).then(function(){u()}).catch(function(_){W(_||new Error("MultiSpanProcessor: forceFlush failed")),u()})})},e.prototype.onStart=function(t,r){var n,a;try{for(var i=ce(this._spanProcessors),o=i.next();!o.done;o=i.next()){var u=o.value;u.onStart(t,r)}}catch(_){n={error:_}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}},e.prototype.onEnd=function(t){var r,n;try{for(var a=ce(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;o.onEnd(t)}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.shutdown=function(){var t,r,n=[];try{for(var a=ce(this._spanProcessors),i=a.next();!i.done;i=a.next()){var o=i.value;n.push(o.shutdown())}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return new Promise(function(u,_){Promise.all(n).then(function(){u()},_)})},e}(),xa=function(){function e(){}return s(e,"NoopSpanProcessor"),e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}();function Ga(e){e.unref()}s(Ga,"unrefTimer");var Va=function(){function e(t,r){this._exporter=t,this._finishedSpans=[];var n=d();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Ae(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(f.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return s(e,"BatchSpanProcessorBase"),e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&m.SAMPLED&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())},e.prototype._flushAll=function(){var t=this;return new Promise(function(r,n){for(var a=[],i=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),o=0,u=i;o<u;o++)a.push(t._flushOneBatch());Promise.all(a).then(function(){r()}).catch(n)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var a=setTimeout(function(){n(new Error("Timeout"))},t._exportTimeoutMillis);I.with(mt(I.active()),function(){t._exporter.export(t._finishedSpans.splice(0,t._maxExportBatchSize),function(i){var o;clearTimeout(a),i.code===P.SUCCESS?r():n((o=i.error)!==null&&o!==void 0?o:new Error("BatchSpanProcessor: span export failed"))})})})},e.prototype._maybeStartTimer=function(){var t=this;this._timer===void 0&&(this._timer=setTimeout(function(){t._flushOneBatch().then(function(){t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(r){W(r)})},this._scheduledDelayMillis),Ga(this._timer))},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}(),Ha=function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bt=function(e){Ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return s(t,"BatchSpanProcessor"),t.prototype.onShutdown=function(){},t}(Va),b;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(b||(b={}));var ja=function(){function e(t){t===void 0&&(t={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=Jn({},bt(),Da(t));this.resource=(r=n.resource)!==null&&r!==void 0?r:ge.empty(),this.resource=ge.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var a=this._buildExporterFromEnv();if(a!==void 0){var i=new Bt(a);this.activeSpanProcessor=i}else this.activeSpanProcessor=new xa}return s(e,"BasicTracerProvider"),e.prototype.getTracer=function(t,r,n){var a=t+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(a)||this._tracers.set(a,new Ua({name:t,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(a)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return f.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new Ba(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),R.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&I.setGlobalContextManager(t.contextManager),t.propagator&&ne.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(a){var i,o=setTimeout(function(){a(new Error("Span processor did not completed within timeout period of "+t+" ms")),i=b.timeout},t);n.forceFlush().then(function(){clearTimeout(o),i!==b.timeout&&(i=b.resolved,a(i))}).catch(function(u){clearTimeout(o),i=b.error,a(u)})})});return new Promise(function(n,a){Promise.all(r).then(function(i){var o=i.filter(function(u){return u!==b.resolved});o.length>0?a(o):n()}).catch(function(i){return a([i])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var r;return(r=this.constructor._registeredPropagators.get(t))===null||r===void 0?void 0:r()},e.prototype._getSpanExporter=function(t){var r;return(r=this.constructor._registeredExporters.get(t))===null||r===void 0?void 0:r()},e.prototype._buildPropagatorFromEnv=function(){var t=this,r=Array.from(new Set(d().OTEL_PROPAGATORS)),n=r.map(function(i){var o=t._getPropagator(i);return o||f.warn('Propagator "'+i+'" requested through environment variable is unavailable.'),o}),a=n.reduce(function(i,o){return o&&i.push(o),i},[]);if(a.length!==0)return r.length===1?a[0]:new ea({propagators:a})},e.prototype._buildExporterFromEnv=function(){var t=d().OTEL_TRACES_EXPORTER;if(t!=="none"){var r=this._getSpanExporter(t);return r||f.error('Exporter "'+t+'" requested through environment variable is unavailable.'),r}},e._registeredPropagators=new Map([["tracecontext",function(){return new Sa}],["baggage",function(){return new Aa}]]),e._registeredExporters=new Map,e}();function Fa(e,t){return new Promise(function(r){I.with(mt(I.active()),function(){e.export(t,function(n){r(n)})})})}s(Fa,"_export");var Xa={_export:Fa},Ya=function(){function e(t){this._exporter=t,this._shutdownOnce=new Ae(this._shutdown,this)}return s(e,"SimpleSpanProcessor"),e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onStart=function(t,r){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&m.SAMPLED&&Xa._export(this._exporter,[t]).then(function(r){var n;r.code!==P.SUCCESS&&W((n=r.error)!==null&&n!==void 0?n:new Error("SimpleSpanProcessor: span export failed (status "+r+")"))}).catch(function(r){W(r)})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}(),Ka=Object.defineProperty,ka=s((e,t,r)=>t in e?Ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,"__defNormalProp"),Fe=s((e,t,r)=>(ka(e,typeof t!="symbol"?t+"":t,r),r),"__publicField");class xt{constructor(t,r,n){Fe(this,"_globalAttributes",{}),Fe(this,"provider"),Fe(this,"tracer"),this.provider=new ja({resource:new ge({[A.SERVICE_NAME]:"gitlens",[A.SERVICE_VERSION]:t.extensionVersion,[A.DEPLOYMENT_ENVIRONMENT]:t.env,[A.DEVICE_ID]:t.machineId,[A.OS_TYPE]:t.platform,"extension.id":t.extensionId,"session.id":t.sessionId,language:t.language,"vscode.edition":t.vscodeEdition,"vscode.version":t.vscodeVersion,"vscode.host":t.vscodeHost,"vscode.remoteName":t.vscodeRemoteName,"vscode.shell":t.vscodeShell,"vscode.uiKind":t.vscodeUIKind})});const a=new on({url:n?"https://otel-dev.gitkraken.com:4318/v1/traces":"https://otel.gitkraken.com:4318/v1/traces",compression:"gzip",httpAgentOptions:r?.options});this.provider.addSpanProcessor(n?new Ya(a):new Bt(a)),this.tracer=this.provider.getTracer(t.extensionId)}dispose(){this.provider.shutdown()}sendEvent(t,r,n,a){const i=this.tracer.startSpan(t,{attributes:this._globalAttributes,kind:V.INTERNAL,startTime:n??Date.now()});r!=null&&i.setAttributes(r),i.end(a)}startEvent(t,r,n){const a=this.tracer.startSpan(t,{attributes:this._globalAttributes,kind:V.INTERNAL,startTime:n??Date.now()});return r!=null&&a.setAttributes(r),a}setGlobalAttributes(t){this._globalAttributes=Object.fromEntries(t)}}s(xt,"OpenTelemetryProvider")}};
