/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var VH=Object.create;var $l=Object.defineProperty,WH=Object.defineProperties,GH=Object.getOwnPropertyDescriptor,zH=Object.getOwnPropertyDescriptors,KH=Object.getOwnPropertyNames,_S=Object.getOwnPropertySymbols,QH=Object.getPrototypeOf,bS=Object.prototype.hasOwnProperty,YH=Object.prototype.propertyIsEnumerable;var xS=(e,t,r)=>t in e?$l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t)=>{for(var r in t||(t={}))bS.call(t,r)&&xS(e,r,t[r]);if(_S)for(var r of _S(t))YH.call(t,r)&&xS(e,r,t[r]);return e},Ne=(e,t)=>WH(e,zH(t)),SS=e=>$l(e,"__esModule",{value:!0});var Fe=(e,t)=>()=>(e&&(t=e(e=0)),t);var $=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),yy=(e,t)=>{SS(e);for(var r in t)$l(e,r,{get:t[r],enumerable:!0})},JH=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of KH(t))!bS.call(e,n)&&n!=="default"&&$l(e,n,{get:()=>t[n],enumerable:!(r=GH(t,n))||r.enumerable});return e},ie=e=>JH(SS($l(e!=null?VH(QH(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var GS=$((GZ,WS)=>{var Rc=1e3,Ac=Rc*60,Oc=Ac*60,ca=Oc*24,lq=ca*7,dq=ca*365.25;WS.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return fq(e);if(r==="number"&&isFinite(e))return t.long?mq(e):pq(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function fq(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*dq;case"weeks":case"week":case"w":return r*lq;case"days":case"day":case"d":return r*ca;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Oc;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ac;case"seconds":case"second":case"secs":case"sec":case"s":return r*Rc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function pq(e){var t=Math.abs(e);return t>=ca?Math.round(e/ca)+"d":t>=Oc?Math.round(e/Oc)+"h":t>=Ac?Math.round(e/Ac)+"m":t>=Rc?Math.round(e/Rc)+"s":e+"ms"}function mq(e){var t=Math.abs(e);return t>=ca?Sp(e,t,ca,"day"):t>=Oc?Sp(e,t,Oc,"hour"):t>=Ac?Sp(e,t,Ac,"minute"):t>=Rc?Sp(e,t,Rc,"second"):e+" ms"}function Sp(e,t,r,n){var o=t>=r*1.5;return Math.round(e/r)+" "+n+(o?"s":"")}});var Iy=$((zZ,zS)=>{function hq(e){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=o,r.enabled=s,r.humanize=GS(),r.destroy=u,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function t(l){let d=0;for(let f=0;f<l.length;f++)d=(d<<5)-d+l.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(l){let d,f=null;function p(...m){if(!p.enabled)return;let h=p,g=Number(new Date),v=g-(d||g);h.diff=v,h.prev=d,h.curr=g,d=g,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let w=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(E,b)=>{if(E==="%%")return"%";w++;let I=r.formatters[b];if(typeof I=="function"){let T=m[w];E=I.call(h,T),m.splice(w,1),w--}return E}),r.formatArgs.call(h,m),(h.log||r.log).apply(h,m)}return p.namespace=l,p.useColors=r.useColors(),p.color=r.selectColor(l),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f===null?r.enabled(l):f,set:m=>{f=m}}),typeof r.init=="function"&&r.init(p),p}function n(l,d){let f=r(this.namespace+(typeof d=="undefined"?":":d)+l);return f.log=this.log,f}function o(l){r.save(l),r.names=[],r.skips=[];let d,f=(typeof l=="string"?l:"").split(/[\s,]+/),p=f.length;for(d=0;d<p;d++)!f[d]||(l=f[d].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.substr(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function i(){let l=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(l))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}zS.exports=hq});var KS=$((cn,Pp)=>{cn.formatArgs=vq;cn.save=yq;cn.load=wq;cn.useColors=gq;cn.storage=Cq();cn.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();cn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gq(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function vq(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Pp.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}cn.log=console.debug||console.log||(()=>{});function yq(e){try{e?cn.storage.setItem("debug",e):cn.storage.removeItem("debug")}catch{}}function wq(){let e;try{e=cn.storage.getItem("debug")}catch{}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function Cq(){try{return localStorage}catch{}}Pp.exports=Iy()(cn);var{formatters:Eq}=Pp.exports;Eq.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var YS=$((KZ,QS)=>{"use strict";QS.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),o=t.indexOf("--");return n!==-1&&(o===-1||n<o)}});var ZS=$((QZ,XS)=>{"use strict";var _q=require("os"),JS=require("tty"),On=YS(),{env:sr}=process,Ki;On("no-color")||On("no-colors")||On("color=false")||On("color=never")?Ki=0:(On("color")||On("colors")||On("color=true")||On("color=always"))&&(Ki=1);"FORCE_COLOR"in sr&&(sr.FORCE_COLOR==="true"?Ki=1:sr.FORCE_COLOR==="false"?Ki=0:Ki=sr.FORCE_COLOR.length===0?1:Math.min(parseInt(sr.FORCE_COLOR,10),3));function Ty(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function ky(e,t){if(Ki===0)return 0;if(On("color=16m")||On("color=full")||On("color=truecolor"))return 3;if(On("color=256"))return 2;if(e&&!t&&Ki===void 0)return 0;let r=Ki||0;if(sr.TERM==="dumb")return r;if(process.platform==="win32"){let n=_q.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in sr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in sr)||sr.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in sr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(sr.TEAMCITY_VERSION)?1:0;if(sr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in sr){let n=parseInt((sr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(sr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(sr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(sr.TERM)||"COLORTERM"in sr?1:r}function bq(e){let t=ky(e,e&&e.isTTY);return Ty(t)}XS.exports={supportsColor:bq,stdout:Ty(ky(!0,JS.isatty(1))),stderr:Ty(ky(!0,JS.isatty(2)))}});var t0=$((lr,Tp)=>{var xq=require("tty"),Ip=require("util");lr.init=Rq;lr.log=Tq;lr.formatArgs=Pq;lr.save=kq;lr.load=Dq;lr.useColors=Sq;lr.destroy=Ip.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");lr.colors=[6,2,3,4,5,1];try{let e=ZS();e&&(e.stderr||e).level>=2&&(lr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}lr.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function Sq(){return"colors"in lr.inspectOpts?Boolean(lr.inspectOpts.colors):xq.isatty(process.stderr.fd)}function Pq(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,o="[3"+(n<8?n:"8;5;"+n),i=`  ${o};1m${t} [0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(o+"m+"+Tp.exports.humanize(this.diff)+"[0m")}else e[0]=Iq()+t+" "+e[0]}function Iq(){return lr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Tq(...e){return process.stderr.write(Ip.format(...e)+`
`)}function kq(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Dq(){return process.env.DEBUG}function Rq(e){e.inspectOpts={};let t=Object.keys(lr.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=lr.inspectOpts[t[r]]}Tp.exports=Iy()(lr);var{formatters:e0}=Tp.exports;e0.o=function(e){return this.inspectOpts.colors=this.useColors,Ip.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};e0.O=function(e){return this.inspectOpts.colors=this.useColors,Ip.inspect(e,this.inspectOpts)}});var r0=$((YZ,Dy)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Dy.exports=KS():Dy.exports=t0()});var o0=$((JZ,n0)=>{var Yl;n0.exports=function(){if(!Yl){try{Yl=r0()("follow-redirects")}catch{}typeof Yl!="function"&&(Yl=function(){})}Yl.apply(null,arguments)}});var Nc=$((XZ,Ny)=>{var ua=require("url"),Ry=ua.URL,Aq=require("http"),Oq=require("https"),i0=require("stream").Writable,Nq=require("assert"),s0=o0(),la=["abort","aborted","connect","error","socket","timeout"],Ay=Object.create(null);la.forEach(function(e){Ay[e]=function(t,r,n){this._redirectable.emit(e,t,r,n)}});var a0=kp("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Lq=kp("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),Fq=kp("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Mq=kp("ERR_STREAM_WRITE_AFTER_END","write after end");function un(e,t){i0.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}un.prototype=Object.create(i0.prototype);un.prototype.abort=function(){l0(this._currentRequest),this.emit("abort")};un.prototype.write=function(e,t,r){if(this._ending)throw new Mq;if(!(typeof e=="string"||typeof e=="object"&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof t=="function"&&(r=t,t=null),e.length===0){r&&r();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new Fq),this.abort())};un.prototype.end=function(e,t,r){if(typeof e=="function"?(r=e,e=t=null):typeof t=="function"&&(r=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,o=this._currentRequest;this.write(e,t,function(){n._ended=!0,o.end(null,null,r)}),this._ending=!0}};un.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};un.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};un.prototype.setTimeout=function(e,t){var r=this;function n(s){s.setTimeout(e),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),i()},e),n(s)}function i(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",i),r.removeListener("error",i),r.removeListener("response",i),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",o)}return t&&this.on("timeout",t),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",n),this.on("abort",i),this.on("error",i),this.on("response",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){un.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(un.prototype,e,{get:function(){return this._currentRequest[e]}})});un.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};un.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t){this.emit("error",new TypeError("Unsupported protocol "+e));return}if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);this._currentUrl=ua.format(this._options),n._redirectable=this;for(var o=0;o<la.length;o++)n.on(la[o],Ay[la[o]]);if(this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(u){if(n===s._currentRequest)if(u)s.emit("error",u);else if(i<a.length){var l=a[i++];n.finished||n.write(l.data,l.encoding,c)}else s._ended&&n.end()})()}};un.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(r&&this._options.followRedirects!==!1&&t>=300&&t<400){if(l0(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new Lq);return}((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Oy(/^content-/i,this._options.headers));var n=Oy(/^host$/i,this._options.headers),o=ua.parse(this._currentUrl),i=n||o.host,s=/^\w+:/.test(r)?this._currentUrl:ua.format(Object.assign(o,{host:i})),a;try{a=ua.resolve(s,r)}catch(l){this.emit("error",new a0(l));return}s0("redirecting to",a),this._isRedirect=!0;var c=ua.parse(a);if(Object.assign(this._options,c),(c.protocol!==o.protocol||!jq(c.host,i))&&Oy(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var u={headers:e.headers};try{this._options.beforeRedirect.call(null,this._options,u)}catch(l){this.emit("error",l);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(l){this.emit("error",new a0(l))}}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]};function c0(e){var t={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(e).forEach(function(n){var o=n+":",i=r[o]=e[n],s=t[n]=Object.create(i);function a(u,l,d){if(typeof u=="string"){var f=u;try{u=u0(new Ry(f))}catch{u=ua.parse(f)}}else Ry&&u instanceof Ry?u=u0(u):(d=l,l=u,u={protocol:o});return typeof l=="function"&&(d=l,l=null),l=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},u,l),l.nativeProtocols=r,Nq.equal(l.protocol,o,"protocol mismatch"),s0("options",l),new un(l,d)}function c(u,l,d){var f=s.request(u,l,d);return f.end(),f}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),t}function Uq(){}function u0(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return e.port!==""&&(t.port=Number(e.port)),t}function Oy(e,t){var r;for(var n in t)e.test(n)&&(r=t[n],delete t[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function kp(e,t){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=t+": "+n.message,this.cause=n):this.message=t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}function l0(e){for(var t=0;t<la.length;t++)e.removeListener(la[t],Ay[la[t]]);e.on("error",Uq),e.abort()}function jq(e,t){if(e===t)return!0;let r=e.length-t.length-1;return r>0&&e[r]==="."&&e.endsWith(t)}Ny.exports=c0({http:Aq,https:Oq});Ny.exports.wrap=c0});var Lc=$((ZZ,f0)=>{"use strict";var d0=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);f0.exports=e=>e?Object.keys(e).map(t=>[d0.has(t)?d0.get(t):t,e[t]]).reduce((t,r)=>(t[r[0]]=r[1],t),Object.create(null)):{}});var m0=$((eee,p0)=>{"use strict";p0.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Dp=$((tee,h0)=>{"use strict";h0.exports=lt;lt.Node=da;lt.create=lt;function lt(e){var t=this;if(t instanceof lt||(t=new lt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){t.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}lt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};lt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};lt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};lt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Hq(this,arguments[e]);return this.length};lt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)qq(this,arguments[e]);return this.length};lt.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};lt.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};lt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};lt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};lt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};lt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};lt.prototype.map=function(e,t){t=t||this;for(var r=new lt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};lt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new lt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};lt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=e(r,n.value,o),n=n.next;return r};lt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=e(r,n.value,o),n=n.prev;return r};lt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};lt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};lt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new lt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(;o!==null&&n<t;n++,o=o.next)r.push(o.value);return r};lt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new lt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,o=this.tail;o!==null&&n>t;n--)o=o.prev;for(;o!==null&&n>e;n--,o=o.prev)r.push(o.value);return r};lt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(var i=[],n=0;o&&n<t;n++)i.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=$q(this,o,r[n]);return i};lt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function $q(e,t,r){var n=t===e.head?new da(r,null,t,e):new da(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function Hq(e,t){e.tail=new da(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function qq(e,t){e.head=new da(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function da(e,t,r,n){if(!(this instanceof da))return new da(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{m0()(lt)}catch{}});var Fc=$((ree,x0)=>{"use strict";var Bq=require("events"),g0=require("stream"),Jl=Dp(),v0=require("string_decoder").StringDecoder,ci=Symbol("EOF"),Xl=Symbol("maybeEmitEnd"),Qi=Symbol("emittedEnd"),Rp=Symbol("emittingEnd"),Ap=Symbol("closed"),y0=Symbol("read"),Ly=Symbol("flush"),w0=Symbol("flushChunk"),Br=Symbol("encoding"),ui=Symbol("decoder"),Op=Symbol("flowing"),Zl=Symbol("paused"),ed=Symbol("resume"),Dr=Symbol("bufferLength"),C0=Symbol("bufferPush"),Fy=Symbol("bufferShift"),Er=Symbol("objectMode"),_r=Symbol("destroyed"),E0=global._MP_NO_ITERATOR_SYMBOLS_!=="1",Vq=E0&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Wq=E0&&Symbol.iterator||Symbol("iterator not implemented"),_0=e=>e==="end"||e==="finish"||e==="prefinish",Gq=e=>e instanceof ArrayBuffer||typeof e=="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0,zq=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e);x0.exports=class b0 extends g0{constructor(t){super();this[Op]=!1,this[Zl]=!1,this.pipes=new Jl,this.buffer=new Jl,this[Er]=t&&t.objectMode||!1,this[Er]?this[Br]=null:this[Br]=t&&t.encoding||null,this[Br]==="buffer"&&(this[Br]=null),this[ui]=this[Br]?new v0(this[Br]):null,this[ci]=!1,this[Qi]=!1,this[Rp]=!1,this[Ap]=!1,this.writable=!0,this.readable=!0,this[Dr]=0,this[_r]=!1}get bufferLength(){return this[Dr]}get encoding(){return this[Br]}set encoding(t){if(this[Er])throw new Error("cannot set encoding in objectMode");if(this[Br]&&t!==this[Br]&&(this[ui]&&this[ui].lastNeed||this[Dr]))throw new Error("cannot change encoding");this[Br]!==t&&(this[ui]=t?new v0(t):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[ui].write(r)))),this[Br]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[Er]}set objectMode(t){this[Er]=this[Er]||!!t}write(t,r,n){if(this[ci])throw new Error("write after end");return this[_r]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[Er]&&!Buffer.isBuffer(t)&&(zq(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):Gq(t)?t=Buffer.from(t):typeof t!="string"&&(this.objectMode=!0)),!this.objectMode&&!t.length?(this[Dr]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof t=="string"&&!this[Er]&&!(r===this[Br]&&!this[ui].lastNeed)&&(t=Buffer.from(t,r)),Buffer.isBuffer(t)&&this[Br]&&(t=this[ui].write(t)),this.flowing?(this[Dr]!==0&&this[Ly](!0),this.emit("data",t)):this[C0](t),this[Dr]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(t){if(this[_r])return null;try{return this[Dr]===0||t===0||t>this[Dr]?null:(this[Er]&&(t=null),this.buffer.length>1&&!this[Er]&&(this.encoding?this.buffer=new Jl([Array.from(this.buffer).join("")]):this.buffer=new Jl([Buffer.concat(Array.from(this.buffer),this[Dr])])),this[y0](t||null,this.buffer.head.value))}finally{this[Xl]()}}[y0](t,r){return t===r.length||t===null?this[Fy]():(this.buffer.head.value=r.slice(t),r=r.slice(0,t),this[Dr]-=t),this.emit("data",r),!this.buffer.length&&!this[ci]&&this.emit("drain"),r}end(t,r,n){return typeof t=="function"&&(n=t,t=null),typeof r=="function"&&(n=r,r="utf8"),t&&this.write(t,r),n&&this.once("end",n),this[ci]=!0,this.writable=!1,(this.flowing||!this[Zl])&&this[Xl](),this}[ed](){this[_r]||(this[Zl]=!1,this[Op]=!0,this.emit("resume"),this.buffer.length?this[Ly]():this[ci]?this[Xl]():this.emit("drain"))}resume(){return this[ed]()}pause(){this[Op]=!1,this[Zl]=!0}get destroyed(){return this[_r]}get flowing(){return this[Op]}get paused(){return this[Zl]}[C0](t){return this[Er]?this[Dr]+=1:this[Dr]+=t.length,this.buffer.push(t)}[Fy](){return this.buffer.length&&(this[Er]?this[Dr]-=1:this[Dr]-=this.buffer.head.value.length),this.buffer.shift()}[Ly](t){do;while(this[w0](this[Fy]()));!t&&!this.buffer.length&&!this[ci]&&this.emit("drain")}[w0](t){return t?(this.emit("data",t),this.flowing):!1}pipe(t,r){if(this[_r])return;let n=this[Qi];r=r||{},t===process.stdout||t===process.stderr?r.end=!1:r.end=r.end!==!1;let o={dest:t,opts:r,ondrain:i=>this[ed]()};return this.pipes.push(o),t.on("drain",o.ondrain),this[ed](),n&&o.opts.end&&o.dest.end(),t}addListener(t,r){return this.on(t,r)}on(t,r){try{return super.on(t,r)}finally{t==="data"&&!this.pipes.length&&!this.flowing?this[ed]():_0(t)&&this[Qi]&&(super.emit(t),this.removeAllListeners(t))}}get emittedEnd(){return this[Qi]}[Xl](){!this[Rp]&&!this[Qi]&&!this[_r]&&this.buffer.length===0&&this[ci]&&(this[Rp]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ap]&&this.emit("close"),this[Rp]=!1)}emit(t,r){if(t!=="error"&&t!=="close"&&t!==_r&&this[_r])return;if(t==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(o=>o.dest.write(r)===!1&&this.pause())}else if(t==="end"){if(this[Qi]===!0)return;this[Qi]=!0,this.readable=!1,this[ui]&&(r=this[ui].end(),r&&(this.pipes.forEach(o=>o.dest.write(r)),super.emit("data",r))),this.pipes.forEach(o=>{o.dest.removeListener("drain",o.ondrain),o.opts.end&&o.dest.end()})}else if(t==="close"&&(this[Ap]=!0,!this[Qi]&&!this[_r]))return;let n=new Array(arguments.length);if(n[0]=t,n[1]=r,arguments.length>2)for(let o=2;o<arguments.length;o++)n[o]=arguments[o];try{return super.emit.apply(this,n)}finally{_0(t)?this.removeAllListeners(t):this[Xl]()}}collect(){let t=[];this[Er]||(t.dataLength=0);let r=this.promise();return this.on("data",n=>{t.push(n),this[Er]||(t.dataLength+=n.length)}),r.then(()=>t)}concat(){return this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(t=>this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this[Br]?t.join(""):Buffer.concat(t,t.dataLength))}promise(){return new Promise((t,r)=>{this.on(_r,()=>r(new Error("stream destroyed"))),this.on("end",()=>t()),this.on("error",n=>r(n))})}[Vq](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[ci])return Promise.resolve({done:!0});let n=null,o=null,i=u=>{this.removeListener("data",s),this.removeListener("end",a),o(u)},s=u=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),n({value:u,done:!!this[ci]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),n({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((u,l)=>{o=l,n=u,this.once(_r,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[Wq](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(t){return this[_r]?(t?this.emit("error",t):this.emit(_r),this):(this[_r]=!0,this.buffer=new Jl,this[Dr]=0,typeof this.close=="function"&&!this[Ap]&&this.close(),t?this.emit("error",t):this.emit(_r),this)}static isStream(t){return!!t&&(t instanceof b0||t instanceof g0||t instanceof Bq&&(typeof t.pipe=="function"||typeof t.write=="function"&&typeof t.end=="function"))}}});var P0=$((nee,S0)=>{var Kq=require("zlib").constants||{ZLIB_VERNUM:4736};S0.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},Kq))});var Wy=$(ln=>{"use strict";var My=require("assert"),Yi=require("buffer").Buffer,I0=require("zlib"),fa=ln.constants=P0(),Qq=Fc(),T0=Yi.concat,pa=Symbol("_superWrite"),td=class extends Error{constructor(t){super("zlib: "+t.message);this.code=t.code,this.errno=t.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+t.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},Yq=Symbol("opts"),rd=Symbol("flushFlag"),k0=Symbol("finishFlushFlag"),Uy=Symbol("fullFlushFlag"),bt=Symbol("handle"),Np=Symbol("onError"),Mc=Symbol("sawError"),jy=Symbol("level"),$y=Symbol("strategy"),Hy=Symbol("ended"),oee=Symbol("_defaultFullFlush"),qy=class extends Qq{constructor(t,r){if(!t||typeof t!="object")throw new TypeError("invalid options for ZlibBase constructor");super(t);this[Mc]=!1,this[Hy]=!1,this[Yq]=t,this[rd]=t.flush,this[k0]=t.finishFlush;try{this[bt]=new I0[r](t)}catch(n){throw new td(n)}this[Np]=n=>{this[Mc]||(this[Mc]=!0,this.close(),this.emit("error",n))},this[bt].on("error",n=>this[Np](new td(n))),this.once("end",()=>this.close)}close(){this[bt]&&(this[bt].close(),this[bt]=null,this.emit("close"))}reset(){if(!this[Mc])return My(this[bt],"zlib binding closed"),this[bt].reset()}flush(t){this.ended||(typeof t!="number"&&(t=this[Uy]),this.write(Object.assign(Yi.alloc(0),{[rd]:t})))}end(t,r,n){return t&&this.write(t,r),this.flush(this[k0]),this[Hy]=!0,super.end(null,null,n)}get ended(){return this[Hy]}write(t,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof t=="string"&&(t=Yi.from(t,r)),this[Mc])return;My(this[bt],"zlib binding closed");let o=this[bt]._handle,i=o.close;o.close=()=>{};let s=this[bt].close;this[bt].close=()=>{},Yi.concat=u=>u;let a;try{let u=typeof t[rd]=="number"?t[rd]:this[rd];a=this[bt]._processChunk(t,u),Yi.concat=T0}catch(u){Yi.concat=T0,this[Np](new td(u))}finally{this[bt]&&(this[bt]._handle=o,o.close=i,this[bt].close=s,this[bt].removeAllListeners("error"))}this[bt]&&this[bt].on("error",u=>this[Np](new td(u)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[pa](Yi.from(a[0]));for(let u=1;u<a.length;u++)c=this[pa](a[u])}else c=this[pa](Yi.from(a));return n&&n(),c}[pa](t){return super.write(t)}},Ji=class extends qy{constructor(t,r){t=t||{},t.flush=t.flush||fa.Z_NO_FLUSH,t.finishFlush=t.finishFlush||fa.Z_FINISH;super(t,r);this[Uy]=fa.Z_FULL_FLUSH,this[jy]=t.level,this[$y]=t.strategy}params(t,r){if(!this[Mc]){if(!this[bt])throw new Error("cannot switch params when binding is closed");if(!this[bt].params)throw new Error("not supported in this implementation");if(this[jy]!==t||this[$y]!==r){this.flush(fa.Z_SYNC_FLUSH),My(this[bt],"zlib binding closed");let n=this[bt].flush;this[bt].flush=(o,i)=>{this.flush(o),i()};try{this[bt].params(t,r)}finally{this[bt].flush=n}this[bt]&&(this[jy]=t,this[$y]=r)}}}},D0=class extends Ji{constructor(t){super(t,"Deflate")}},R0=class extends Ji{constructor(t){super(t,"Inflate")}},By=Symbol("_portable"),A0=class extends Ji{constructor(t){super(t,"Gzip");this[By]=t&&!!t.portable}[pa](t){return this[By]?(this[By]=!1,t[9]=255,super[pa](t)):super[pa](t)}},O0=class extends Ji{constructor(t){super(t,"Gunzip")}},N0=class extends Ji{constructor(t){super(t,"DeflateRaw")}},L0=class extends Ji{constructor(t){super(t,"InflateRaw")}},F0=class extends Ji{constructor(t){super(t,"Unzip")}},Vy=class extends qy{constructor(t,r){t=t||{},t.flush=t.flush||fa.BROTLI_OPERATION_PROCESS,t.finishFlush=t.finishFlush||fa.BROTLI_OPERATION_FINISH;super(t,r);this[Uy]=fa.BROTLI_OPERATION_FLUSH}},M0=class extends Vy{constructor(t){super(t,"BrotliCompress")}},U0=class extends Vy{constructor(t){super(t,"BrotliDecompress")}};ln.Deflate=D0;ln.Inflate=R0;ln.Gzip=A0;ln.Gunzip=O0;ln.DeflateRaw=N0;ln.InflateRaw=L0;ln.Unzip=F0;typeof I0.BrotliCompress=="function"?(ln.BrotliCompress=M0,ln.BrotliDecompress=U0):ln.BrotliCompress=ln.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Uc=$((see,j0)=>{var Jq=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;j0.exports=Jq!=="win32"?e=>e:e=>e&&e.replace(/\\/g,"/")});var Lp=$((cee,$0)=>{"use strict";var Xq=Fc(),Gy=Uc(),zy=Symbol("slurp");$0.exports=class extends Xq{constructor(t,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=t,this.startBlockSize=512*Math.ceil(t.size/512),this.blockRemain=this.startBlockSize,this.remain=t.size,this.type=t.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Gy(t.path),this.mode=t.mode,this.mode&&(this.mode=this.mode&4095),this.uid=t.uid,this.gid=t.gid,this.uname=t.uname,this.gname=t.gname,this.size=t.size,this.mtime=t.mtime,this.atime=t.atime,this.ctime=t.ctime,this.linkpath=Gy(t.linkpath),this.uname=t.uname,this.gname=t.gname,r&&this[zy](r),n&&this[zy](n,!0)}write(t){let r=t.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,o=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,o-r),this.ignore?!0:n>=r?super.write(t):super.write(t.slice(0,n))}[zy](t,r){for(let n in t)t[n]!==null&&t[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?Gy(t[n]):t[n])}}});var Ky=$(Fp=>{"use strict";Fp.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Fp.code=new Map(Array.from(Fp.name).map(e=>[e[1],e[0]]))});var V0=$((lee,B0)=>{"use strict";var Zq=(e,t)=>{if(Number.isSafeInteger(e))e<0?t2(e,t):e2(e,t);else throw Error("cannot encode number outside of javascript safe integer range");return t},e2=(e,t)=>{t[0]=128;for(var r=t.length;r>1;r--)t[r-1]=e&255,e=Math.floor(e/256)},t2=(e,t)=>{t[0]=255;var r=!1;e=e*-1;for(var n=t.length;n>1;n--){var o=e&255;e=Math.floor(e/256),r?t[n-1]=H0(o):o===0?t[n-1]=0:(r=!0,t[n-1]=q0(o))}},r2=e=>{let t=e[0],r=t===128?o2(e.slice(1,e.length)):t===255?n2(e):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},n2=e=>{for(var t=e.length,r=0,n=!1,o=t-1;o>-1;o--){var i=e[o],s;n?s=H0(i):i===0?s=i:(n=!0,s=q0(i)),s!==0&&(r-=s*Math.pow(256,t-o-1))}return r},o2=e=>{for(var t=e.length,r=0,n=t-1;n>-1;n--){var o=e[n];o!==0&&(r+=o*Math.pow(256,t-n-1))}return r},H0=e=>(255^e)&255,q0=e=>(255^e)+1&255;B0.exports={encode:Zq,parse:r2}});var $c=$((dee,z0)=>{"use strict";var Qy=Ky(),jc=require("path").posix,W0=V0(),Yy=Symbol("slurp"),dn=Symbol("type"),G0=class{constructor(t,r,n,o){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[dn]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(t)?this.decode(t,r||0,n,o):t&&this.set(t)}decode(t,r,n,o){if(r||(r=0),!t||!(t.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=ma(t,r,100),this.mode=Xi(t,r+100,8),this.uid=Xi(t,r+108,8),this.gid=Xi(t,r+116,8),this.size=Xi(t,r+124,12),this.mtime=Jy(t,r+136,12),this.cksum=Xi(t,r+148,12),this[Yy](n),this[Yy](o,!0),this[dn]=ma(t,r+156,1),this[dn]===""&&(this[dn]="0"),this[dn]==="0"&&this.path.substr(-1)==="/"&&(this[dn]="5"),this[dn]==="5"&&(this.size=0),this.linkpath=ma(t,r+157,100),t.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=ma(t,r+265,32),this.gname=ma(t,r+297,32),this.devmaj=Xi(t,r+329,8),this.devmin=Xi(t,r+337,8),t[r+475]!==0){let s=ma(t,r+345,155);this.path=s+"/"+this.path}else{let s=ma(t,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=Jy(t,r+476,12),this.ctime=Jy(t,r+488,12)}let i=8*32;for(let s=r;s<r+148;s++)i+=t[s];for(let s=r+156;s<r+512;s++)i+=t[s];this.cksumValid=i===this.cksum,this.cksum===null&&i===8*32&&(this.nullBlock=!0)}[Yy](t,r){for(let n in t)t[n]!==null&&t[n]!==void 0&&!(r&&n==="path")&&(this[n]=t[n])}encode(t,r){if(t||(t=this.block=Buffer.alloc(512),r=0),r||(r=0),!(t.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,o=i2(this.path||"",n),i=o[0],s=o[1];this.needPax=o[2],this.needPax=ha(t,r,100,i)||this.needPax,this.needPax=Zi(t,r+100,8,this.mode)||this.needPax,this.needPax=Zi(t,r+108,8,this.uid)||this.needPax,this.needPax=Zi(t,r+116,8,this.gid)||this.needPax,this.needPax=Zi(t,r+124,12,this.size)||this.needPax,this.needPax=Xy(t,r+136,12,this.mtime)||this.needPax,t[r+156]=this[dn].charCodeAt(0),this.needPax=ha(t,r+157,100,this.linkpath)||this.needPax,t.write("ustar\x0000",r+257,8),this.needPax=ha(t,r+265,32,this.uname)||this.needPax,this.needPax=ha(t,r+297,32,this.gname)||this.needPax,this.needPax=Zi(t,r+329,8,this.devmaj)||this.needPax,this.needPax=Zi(t,r+337,8,this.devmin)||this.needPax,this.needPax=ha(t,r+345,n,s)||this.needPax,t[r+475]!==0?this.needPax=ha(t,r+345,155,s)||this.needPax:(this.needPax=ha(t,r+345,130,s)||this.needPax,this.needPax=Xy(t,r+476,12,this.atime)||this.needPax,this.needPax=Xy(t,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=t[c];for(let c=r+156;c<r+512;c++)a+=t[c];return this.cksum=a,Zi(t,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(t){for(let r in t)t[r]!==null&&t[r]!==void 0&&(this[r]=t[r])}get type(){return Qy.name.get(this[dn])||this[dn]}get typeKey(){return this[dn]}set type(t){Qy.code.has(t)?this[dn]=Qy.code.get(t):this[dn]=t}},i2=(e,t)=>{let r=100,n=e,o="",i,s=jc.parse(e).root||".";if(Buffer.byteLength(n)<r)i=[n,o,!1];else{o=jc.dirname(n),n=jc.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(o)<=t?i=[n,o,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(o)<=t?i=[n.substr(0,r-1),o,!0]:(n=jc.join(jc.basename(o),n),o=jc.dirname(o));while(o!==s&&!i);i||(i=[e.substr(0,r-1),"",!0])}return i},ma=(e,t,r)=>e.slice(t,t+r).toString("utf8").replace(/\0.*/,""),Jy=(e,t,r)=>s2(Xi(e,t,r)),s2=e=>e===null?null:new Date(e*1e3),Xi=(e,t,r)=>e[t]&128?W0.parse(e.slice(t,t+r)):c2(e,t,r),a2=e=>isNaN(e)?null:e,c2=(e,t,r)=>a2(parseInt(e.slice(t,t+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),u2={12:8589934591,8:2097151},Zi=(e,t,r,n)=>n===null?!1:n>u2[r]||n<0?(W0.encode(n,e.slice(t,t+r)),!0):(l2(e,t,r,n),!1),l2=(e,t,r,n)=>e.write(d2(n,r),t,r,"ascii"),d2=(e,t)=>f2(Math.floor(e).toString(8),t),f2=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0",Xy=(e,t,r,n)=>n===null?!1:Zi(e,t,r,n.getTime()/1e3),p2=new Array(156).join("\0"),ha=(e,t,r,n)=>n===null?!1:(e.write(n+p2,t,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);z0.exports=G0});var Up=$((fee,K0)=>{"use strict";var m2=$c(),h2=require("path"),Mp=class{constructor(t,r){this.atime=t.atime||null,this.charset=t.charset||null,this.comment=t.comment||null,this.ctime=t.ctime||null,this.gid=t.gid||null,this.gname=t.gname||null,this.linkpath=t.linkpath||null,this.mtime=t.mtime||null,this.path=t.path||null,this.size=t.size||null,this.uid=t.uid||null,this.uname=t.uname||null,this.dev=t.dev||null,this.ino=t.ino||null,this.nlink=t.nlink||null,this.global=r||!1}encode(){let t=this.encodeBody();if(t==="")return null;let r=Buffer.byteLength(t),n=512*Math.ceil(1+r/512),o=Buffer.allocUnsafe(n);for(let i=0;i<512;i++)o[i]=0;new m2({path:("PaxHeader/"+h2.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(t,512,r,"utf8");for(let i=r+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(t){if(this[t]===null||this[t]===void 0)return"";let r=this[t]instanceof Date?this[t].getTime()/1e3:this[t],n=" "+(t==="dev"||t==="ino"||t==="nlink"?"SCHILY.":"")+t+"="+r+`
`,o=Buffer.byteLength(n),i=Math.floor(Math.log(o)/Math.log(10))+1;return o+i>=Math.pow(10,i)&&(i+=1),i+o+n}};Mp.parse=(e,t,r)=>new Mp(g2(v2(e),t),r);var g2=(e,t)=>t?Object.keys(e).reduce((r,n)=>(r[n]=e[n],r),t):e,v2=e=>e.replace(/\n$/,"").split(`
`).reduce(y2,Object.create(null)),y2=(e,t)=>{let r=parseInt(t,10);if(r!==Buffer.byteLength(t)+1)return e;t=t.substr((r+" ").length);let n=t.split("="),o=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!o)return e;let i=n.join("=");return e[o]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(o)?new Date(i*1e3):/^[0-9]+$/.test(i)?+i:i,e};K0.exports=Mp});var Hc=$((pee,Q0)=>{Q0.exports=e=>{let t=e.length-1,r=-1;for(;t>-1&&e.charAt(t)==="/";)r=t,t--;return r===-1?e:e.slice(0,r)}});var jp=$((mee,Y0)=>{"use strict";Y0.exports=e=>class extends e{warn(t,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||t,n.tarCode=t,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${t}: ${r}`),n))}}});var ew=$((hee,J0)=>{"use strict";var $p=["|","<",">","?",":"],Zy=$p.map(e=>String.fromCharCode(61440+e.charCodeAt(0))),w2=new Map($p.map((e,t)=>[e,Zy[t]])),C2=new Map(Zy.map((e,t)=>[e,$p[t]]));J0.exports={encode:e=>$p.reduce((t,r)=>t.split(r).join(w2.get(r)),e),decode:e=>Zy.reduce((t,r)=>t.split(r).join(C2.get(r)),e)}});var tw=$((gee,Z0)=>{var{isAbsolute:E2,parse:X0}=require("path").win32;Z0.exports=e=>{let t="",r=X0(e);for(;E2(e)||r.root;){let n=e.charAt(0)==="/"&&e.slice(0,4)!=="//?/"?"/":r.root;e=e.substr(n.length),t+=n,r=X0(e)}return[t,e]}});var tP=$((vee,eP)=>{"use strict";eP.exports=(e,t,r)=>(e&=4095,r&&(e=(e|384)&~18),t&&(e&256&&(e|=64),e&32&&(e|=8),e&4&&(e|=1)),e)});var lw=$((Cee,gP)=>{"use strict";var rP=Fc(),nP=Up(),oP=$c(),No=require("fs"),iP=require("path"),Lo=Uc(),_2=Hc(),sP=(e,t)=>t?(e=Lo(e).replace(/^\.(\/|$)/,""),_2(t)+"/"+e):Lo(e),b2=16*1024*1024,aP=Symbol("process"),cP=Symbol("file"),uP=Symbol("directory"),rw=Symbol("symlink"),lP=Symbol("hardlink"),nd=Symbol("header"),Hp=Symbol("read"),nw=Symbol("lstat"),qp=Symbol("onlstat"),ow=Symbol("onread"),iw=Symbol("onreadlink"),sw=Symbol("openfile"),aw=Symbol("onopenfile"),es=Symbol("close"),Bp=Symbol("mode"),cw=Symbol("awaitDrain"),uw=Symbol("ondrain"),Fo=Symbol("prefix"),dP=Symbol("hadError"),fP=jp(),x2=ew(),pP=tw(),mP=tP(),Vp=fP(class extends rP{constructor(t,r){r=r||{};super(r);if(typeof t!="string")throw new TypeError("path is required");this.path=Lo(t),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||b2,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Lo(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Lo(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[o,i]=pP(this.path);o&&(this.path=i,n=o)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=x2.decode(this.path.replace(/\\/g,"/")),t=t.replace(/\\/g,"/")),this.absolute=Lo(r.absolute||iP.resolve(this.cwd,t)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[qp](this.statCache.get(this.absolute)):this[nw]()}emit(t,...r){return t==="error"&&(this[dP]=!0),super.emit(t,...r)}[nw](){No.lstat(this.absolute,(t,r)=>{if(t)return this.emit("error",t);this[qp](r)})}[qp](t){this.statCache.set(this.absolute,t),this.stat=t,t.isFile()||(t.size=0),this.type=P2(t),this.emit("stat",t),this[aP]()}[aP](){switch(this.type){case"File":return this[cP]();case"Directory":return this[uP]();case"SymbolicLink":return this[rw]();default:return this.end()}}[Bp](t){return mP(t,this.type==="Directory",this.portable)}[Fo](t){return sP(t,this.prefix)}[nd](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new oP({path:this[Fo](this.path),linkpath:this.type==="Link"?this[Fo](this.linkpath):this.linkpath,mode:this[Bp](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new nP({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Fo](this.path),linkpath:this.type==="Link"?this[Fo](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[uP](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[nd](),this.end()}[rw](){No.readlink(this.absolute,(t,r)=>{if(t)return this.emit("error",t);this[iw](r)})}[iw](t){this.linkpath=Lo(t),this[nd](),this.end()}[lP](t){this.type="Link",this.linkpath=Lo(iP.relative(this.cwd,t)),this.stat.size=0,this[nd](),this.end()}[cP](){if(this.stat.nlink>1){let t=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(t)){let r=this.linkCache.get(t);if(r.indexOf(this.cwd)===0)return this[lP](r)}this.linkCache.set(t,this.absolute)}if(this[nd](),this.stat.size===0)return this.end();this[sw]()}[sw](){No.open(this.absolute,"r",(t,r)=>{if(t)return this.emit("error",t);this[aw](r)})}[aw](t){if(this.fd=t,this[dP])return this[es]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Hp]()}[Hp](){let{fd:t,buf:r,offset:n,length:o,pos:i}=this;No.read(t,r,n,o,i,(s,a)=>{if(s)return this[es](()=>this.emit("error",s));this[ow](a)})}[es](t){No.close(this.fd,t)}[ow](t){if(t<=0&&this.remain>0){let o=new Error("encountered unexpected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[es](()=>this.emit("error",o))}if(t>this.remain){let o=new Error("did not encounter expected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[es](()=>this.emit("error",o))}if(t===this.remain)for(let o=t;o<this.length&&t<this.blockRemain;o++)this.buf[o+this.offset]=0,t++,this.remain++;let r=this.offset===0&&t===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+t);this.write(r)?this[uw]():this[cw](()=>this[uw]())}[cw](t){this.once("drain",t)}write(t){if(this.blockRemain<t.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=t.length,this.blockRemain-=t.length,this.pos+=t.length,this.offset+=t.length,super.write(t)}[uw](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[es](t=>t?this.emit("error",t):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Hp]()}}),hP=class extends Vp{[nw](){this[qp](No.lstatSync(this.absolute))}[rw](){this[iw](No.readlinkSync(this.absolute))}[sw](){this[aw](No.openSync(this.absolute,"r"))}[Hp](){let t=!0;try{let{fd:r,buf:n,offset:o,length:i,pos:s}=this,a=No.readSync(r,n,o,i,s);this[ow](a),t=!1}finally{if(t)try{this[es](()=>{})}catch{}}}[cw](t){t()}[es](t){No.closeSync(this.fd),t()}},S2=fP(class extends rP{constructor(t,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=t,this.type=t.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Lo(t.path),this.mode=this[Bp](t.mode),this.uid=this.portable?null:t.uid,this.gid=this.portable?null:t.gid,this.uname=this.portable?null:t.uname,this.gname=this.portable?null:t.gname,this.size=t.size,this.mtime=this.noMtime?null:r.mtime||t.mtime,this.atime=this.portable?null:t.atime,this.ctime=this.portable?null:t.ctime,this.linkpath=Lo(t.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[o,i]=pP(this.path);o&&(this.path=i,n=o)}this.remain=t.size,this.blockRemain=t.startBlockSize,this.header=new oP({path:this[Fo](this.path),linkpath:this.type==="Link"?this[Fo](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new nP({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Fo](this.path),linkpath:this.type==="Link"?this[Fo](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),t.pipe(this)}[Fo](t){return sP(t,this.prefix)}[Bp](t){return mP(t,this.type==="Directory",this.portable)}write(t){let r=t.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(t)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Vp.Sync=hP;Vp.Tar=S2;var P2=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported";gP.exports=Vp});var Xp=$((_ee,xP)=>{"use strict";var dw=class{constructor(t,r){this.path=t||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},I2=Fc(),T2=Wy(),k2=Lp(),fw=lw(),D2=fw.Sync,R2=fw.Tar,A2=Dp(),vP=Buffer.alloc(1024),Wp=Symbol("onStat"),Gp=Symbol("ended"),Mo=Symbol("queue"),qc=Symbol("current"),ga=Symbol("process"),zp=Symbol("processing"),yP=Symbol("processJob"),Uo=Symbol("jobs"),pw=Symbol("jobDone"),Kp=Symbol("addFSEntry"),wP=Symbol("addTarEntry"),mw=Symbol("stat"),hw=Symbol("readdir"),Qp=Symbol("onreaddir"),Yp=Symbol("pipe"),CP=Symbol("entry"),gw=Symbol("entryOpt"),vw=Symbol("writeEntryClass"),EP=Symbol("write"),yw=Symbol("ondrain"),Jp=require("fs"),_P=require("path"),O2=jp(),ww=Uc(),Cw=O2(class extends I2{constructor(t){super(t);t=t||Object.create(null),this.opt=t,this.file=t.file||"",this.cwd=t.cwd||process.cwd(),this.maxReadSize=t.maxReadSize,this.preservePaths=!!t.preservePaths,this.strict=!!t.strict,this.noPax=!!t.noPax,this.prefix=ww(t.prefix||""),this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.readdirCache=t.readdirCache||new Map,this[vw]=fw,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),this.portable=!!t.portable,this.zip=null,t.gzip?(typeof t.gzip!="object"&&(t.gzip={}),this.portable&&(t.gzip.portable=!0),this.zip=new T2.Gzip(t.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[yw]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[yw]),this.noDirRecurse=!!t.noDirRecurse,this.follow=!!t.follow,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.filter=typeof t.filter=="function"?t.filter:r=>!0,this[Mo]=new A2,this[Uo]=0,this.jobs=+t.jobs||4,this[zp]=!1,this[Gp]=!1}[EP](t){return super.write(t)}add(t){return this.write(t),this}end(t){return t&&this.write(t),this[Gp]=!0,this[ga](),this}write(t){if(this[Gp])throw new Error("write after end");return t instanceof k2?this[wP](t):this[Kp](t),this.flowing}[wP](t){let r=ww(_P.resolve(this.cwd,t.path));if(!this.filter(t.path,t))t.resume();else{let n=new dw(t.path,r,!1);n.entry=new R2(t,this[gw](n)),n.entry.on("end",o=>this[pw](n)),this[Uo]+=1,this[Mo].push(n)}this[ga]()}[Kp](t){let r=ww(_P.resolve(this.cwd,t));this[Mo].push(new dw(t,r)),this[ga]()}[mw](t){t.pending=!0,this[Uo]+=1;let r=this.follow?"stat":"lstat";Jp[r](t.absolute,(n,o)=>{t.pending=!1,this[Uo]-=1,n?this.emit("error",n):this[Wp](t,o)})}[Wp](t,r){this.statCache.set(t.absolute,r),t.stat=r,this.filter(t.path,r)||(t.ignore=!0),this[ga]()}[hw](t){t.pending=!0,this[Uo]+=1,Jp.readdir(t.absolute,(r,n)=>{if(t.pending=!1,this[Uo]-=1,r)return this.emit("error",r);this[Qp](t,n)})}[Qp](t,r){this.readdirCache.set(t.absolute,r),t.readdir=r,this[ga]()}[ga](){if(!this[zp]){this[zp]=!0;for(let t=this[Mo].head;t!==null&&this[Uo]<this.jobs;t=t.next)if(this[yP](t.value),t.value.ignore){let r=t.next;this[Mo].removeNode(t),t.next=r}this[zp]=!1,this[Gp]&&!this[Mo].length&&this[Uo]===0&&(this.zip?this.zip.end(vP):(super.write(vP),super.end()))}}get[qc](){return this[Mo]&&this[Mo].head&&this[Mo].head.value}[pw](t){this[Mo].shift(),this[Uo]-=1,this[ga]()}[yP](t){if(!t.pending){if(t.entry){t===this[qc]&&!t.piped&&this[Yp](t);return}if(t.stat||(this.statCache.has(t.absolute)?this[Wp](t,this.statCache.get(t.absolute)):this[mw](t)),!!t.stat&&!t.ignore&&!(!this.noDirRecurse&&t.stat.isDirectory()&&!t.readdir&&(this.readdirCache.has(t.absolute)?this[Qp](t,this.readdirCache.get(t.absolute)):this[hw](t),!t.readdir))){if(t.entry=this[CP](t),!t.entry){t.ignore=!0;return}t===this[qc]&&!t.piped&&this[Yp](t)}}}[gw](t){return{onwarn:(r,n,o)=>this.warn(r,n,o),noPax:this.noPax,cwd:this.cwd,absolute:t.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[CP](t){this[Uo]+=1;try{return new this[vw](t.path,this[gw](t)).on("end",()=>this[pw](t)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[yw](){this[qc]&&this[qc].entry&&this[qc].entry.resume()}[Yp](t){t.piped=!0,t.readdir&&t.readdir.forEach(o=>{let i=t.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[Kp](s+o)});let r=t.entry,n=this.zip;n?r.on("data",o=>{n.write(o)||r.pause()}):r.on("data",o=>{super.write(o)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),bP=class extends Cw{constructor(t){super(t);this[vw]=D2}pause(){}resume(){}[mw](t){let r=this.follow?"statSync":"lstatSync";this[Wp](t,Jp[r](t.absolute))}[hw](t,r){this[Qp](t,Jp.readdirSync(t.absolute))}[Yp](t){let r=t.entry,n=this.zip;t.readdir&&t.readdir.forEach(o=>{let i=t.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[Kp](s+o)}),n?r.on("data",o=>{n.write(o)}):r.on("data",o=>{super[EP](o)})}};Cw.Sync=bP;xP.exports=Cw});var Yc=$(id=>{"use strict";var N2=Fc(),L2=require("events").EventEmitter,Vr=require("fs"),Ew=Vr.writev;if(!Ew){let e=process.binding("fs"),t=e.FSReqWrap||e.FSReqCallback;Ew=(r,n,o,i)=>{let s=(c,u)=>i(c,u,n),a=new t;a.oncomplete=s,e.writeBuffers(r,n,o,a)}}var Bc=Symbol("_autoClose"),io=Symbol("_close"),od=Symbol("_ended"),yt=Symbol("_fd"),SP=Symbol("_finished"),ts=Symbol("_flags"),_w=Symbol("_flush"),bw=Symbol("_handleChunk"),xw=Symbol("_makeBuf"),Zp=Symbol("_mode"),em=Symbol("_needDrain"),Vc=Symbol("_onerror"),Wc=Symbol("_onopen"),Sw=Symbol("_onread"),Gc=Symbol("_onwrite"),rs=Symbol("_open"),li=Symbol("_path"),va=Symbol("_pos"),jo=Symbol("_queue"),zc=Symbol("_read"),PP=Symbol("_readSize"),ns=Symbol("_reading"),tm=Symbol("_remain"),IP=Symbol("_size"),rm=Symbol("_write"),Kc=Symbol("_writing"),nm=Symbol("_defaultFlag"),Qc=Symbol("_errored"),Pw=class extends N2{constructor(t,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof t!="string")throw new TypeError("path must be a string");this[Qc]=!1,this[yt]=typeof r.fd=="number"?r.fd:null,this[li]=t,this[PP]=r.readSize||16*1024*1024,this[ns]=!1,this[IP]=typeof r.size=="number"?r.size:1/0,this[tm]=this[IP],this[Bc]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[yt]=="number"?this[zc]():this[rs]()}get fd(){return this[yt]}get path(){return this[li]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[rs](){Vr.open(this[li],"r",(t,r)=>this[Wc](t,r))}[Wc](t,r){t?this[Vc](t):(this[yt]=r,this.emit("open",r),this[zc]())}[xw](){return Buffer.allocUnsafe(Math.min(this[PP],this[tm]))}[zc](){if(!this[ns]){this[ns]=!0;let t=this[xw]();if(t.length===0)return process.nextTick(()=>this[Sw](null,0,t));Vr.read(this[yt],t,0,t.length,null,(r,n,o)=>this[Sw](r,n,o))}}[Sw](t,r,n){this[ns]=!1,t?this[Vc](t):this[bw](r,n)&&this[zc]()}[io](){if(this[Bc]&&typeof this[yt]=="number"){let t=this[yt];this[yt]=null,Vr.close(t,r=>r?this.emit("error",r):this.emit("close"))}}[Vc](t){this[ns]=!0,this[io](),this.emit("error",t)}[bw](t,r){let n=!1;return this[tm]-=t,t>0&&(n=super.write(t<r.length?r.slice(0,t):r)),(t===0||this[tm]<=0)&&(n=!1,this[io](),super.end()),n}emit(t,r){switch(t){case"prefinish":case"finish":break;case"drain":typeof this[yt]=="number"&&this[zc]();break;case"error":return this[Qc]?void 0:(this[Qc]=!0,super.emit(t,r));default:return super.emit(t,r)}}},TP=class extends Pw{[rs](){let t=!0;try{this[Wc](null,Vr.openSync(this[li],"r")),t=!1}finally{t&&this[io]()}}[zc](){let t=!0;try{if(!this[ns]){this[ns]=!0;do{let r=this[xw](),n=r.length===0?0:Vr.readSync(this[yt],r,0,r.length,null);if(!this[bw](n,r))break}while(!0);this[ns]=!1}t=!1}finally{t&&this[io]()}}[io](){if(this[Bc]&&typeof this[yt]=="number"){let t=this[yt];this[yt]=null,Vr.closeSync(t),this.emit("close")}}},Iw=class extends L2{constructor(t,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[Qc]=!1,this[Kc]=!1,this[od]=!1,this[em]=!1,this[jo]=[],this[li]=t,this[yt]=typeof r.fd=="number"?r.fd:null,this[Zp]=r.mode===void 0?438:r.mode,this[va]=typeof r.start=="number"?r.start:null,this[Bc]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[va]!==null?"r+":"w";this[nm]=r.flags===void 0,this[ts]=this[nm]?n:r.flags,this[yt]===null&&this[rs]()}emit(t,r){if(t==="error"){if(this[Qc])return;this[Qc]=!0}return super.emit(t,r)}get fd(){return this[yt]}get path(){return this[li]}[Vc](t){this[io](),this[Kc]=!0,this.emit("error",t)}[rs](){Vr.open(this[li],this[ts],this[Zp],(t,r)=>this[Wc](t,r))}[Wc](t,r){this[nm]&&this[ts]==="r+"&&t&&t.code==="ENOENT"?(this[ts]="w",this[rs]()):t?this[Vc](t):(this[yt]=r,this.emit("open",r),this[_w]())}end(t,r){return t&&this.write(t,r),this[od]=!0,!this[Kc]&&!this[jo].length&&typeof this[yt]=="number"&&this[Gc](null,0),this}write(t,r){return typeof t=="string"&&(t=Buffer.from(t,r)),this[od]?(this.emit("error",new Error("write() after end()")),!1):this[yt]===null||this[Kc]||this[jo].length?(this[jo].push(t),this[em]=!0,!1):(this[Kc]=!0,this[rm](t),!0)}[rm](t){Vr.write(this[yt],t,0,t.length,this[va],(r,n)=>this[Gc](r,n))}[Gc](t,r){t?this[Vc](t):(this[va]!==null&&(this[va]+=r),this[jo].length?this[_w]():(this[Kc]=!1,this[od]&&!this[SP]?(this[SP]=!0,this[io](),this.emit("finish")):this[em]&&(this[em]=!1,this.emit("drain"))))}[_w](){if(this[jo].length===0)this[od]&&this[Gc](null,0);else if(this[jo].length===1)this[rm](this[jo].pop());else{let t=this[jo];this[jo]=[],Ew(this[yt],t,this[va],(r,n)=>this[Gc](r,n))}}[io](){if(this[Bc]&&typeof this[yt]=="number"){let t=this[yt];this[yt]=null,Vr.close(t,r=>r?this.emit("error",r):this.emit("close"))}}},kP=class extends Iw{[rs](){let t;if(this[nm]&&this[ts]==="r+")try{t=Vr.openSync(this[li],this[ts],this[Zp])}catch(r){if(r.code==="ENOENT")return this[ts]="w",this[rs]();throw r}else t=Vr.openSync(this[li],this[ts],this[Zp]);this[Wc](null,t)}[io](){if(this[Bc]&&typeof this[yt]=="number"){let t=this[yt];this[yt]=null,Vr.closeSync(t),this.emit("close")}}[rm](t){let r=!0;try{this[Gc](null,Vr.writeSync(this[yt],t,0,t.length,this[va])),r=!1}finally{if(r)try{this[io]()}catch{}}}};id.ReadStream=Pw;id.ReadStreamSync=TP;id.WriteStream=Iw;id.WriteStreamSync=kP});var lm=$((See,FP)=>{"use strict";var F2=jp(),M2=$c(),U2=require("events"),j2=Dp(),$2=1024*1024,H2=Lp(),DP=Up(),q2=Wy(),Tw=Buffer.from([31,139]),Nn=Symbol("state"),ya=Symbol("writeEntry"),di=Symbol("readEntry"),kw=Symbol("nextEntry"),RP=Symbol("processEntry"),Ln=Symbol("extendedHeader"),sd=Symbol("globalExtendedHeader"),os=Symbol("meta"),AP=Symbol("emitMeta"),Pt=Symbol("buffer"),fi=Symbol("queue"),wa=Symbol("ended"),OP=Symbol("emittedEnd"),Ca=Symbol("emit"),Wr=Symbol("unzip"),om=Symbol("consumeChunk"),im=Symbol("consumeChunkSub"),Dw=Symbol("consumeBody"),NP=Symbol("consumeMeta"),LP=Symbol("consumeHeader"),sm=Symbol("consuming"),Rw=Symbol("bufferConcat"),Aw=Symbol("maybeEnd"),ad=Symbol("writing"),is=Symbol("aborted"),am=Symbol("onDone"),Ea=Symbol("sawValidEntry"),cm=Symbol("sawNullBlock"),um=Symbol("sawEOF"),B2=e=>!0;FP.exports=F2(class extends U2{constructor(t){t=t||{};super(t);this.file=t.file||"",this[Ea]=null,this.on(am,r=>{(this[Nn]==="begin"||this[Ea]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),t.ondone?this.on(am,t.ondone):this.on(am,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!t.strict,this.maxMetaEntrySize=t.maxMetaEntrySize||$2,this.filter=typeof t.filter=="function"?t.filter:B2,this.writable=!0,this.readable=!1,this[fi]=new j2,this[Pt]=null,this[di]=null,this[ya]=null,this[Nn]="begin",this[os]="",this[Ln]=null,this[sd]=null,this[wa]=!1,this[Wr]=null,this[is]=!1,this[cm]=!1,this[um]=!1,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),typeof t.onentry=="function"&&this.on("entry",t.onentry)}[LP](t,r){this[Ea]===null&&(this[Ea]=!1);let n;try{n=new M2(t,r,this[Ln],this[sd])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(n.nullBlock)this[cm]?(this[um]=!0,this[Nn]==="begin"&&(this[Nn]="header"),this[Ca]("eof")):(this[cm]=!0,this[Ca]("nullBlock"));else if(this[cm]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let o=n.type;if(/^(Symbolic)?Link$/.test(o)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(o)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let i=this[ya]=new H2(n,this[Ln],this[sd]);if(!this[Ea])if(i.remain){let s=()=>{i.invalid||(this[Ea]=!0)};i.on("end",s)}else this[Ea]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[Ca]("ignoredEntry",i),this[Nn]="ignore",i.resume()):i.size>0&&(this[os]="",i.on("data",s=>this[os]+=s),this[Nn]="meta"):(this[Ln]=null,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[Ca]("ignoredEntry",i),this[Nn]=i.remain?"ignore":"header",i.resume()):(i.remain?this[Nn]="body":(this[Nn]="header",i.end()),this[di]?this[fi].push(i):(this[fi].push(i),this[kw]())))}}}[RP](t){let r=!0;return t?Array.isArray(t)?this.emit.apply(this,t):(this[di]=t,this.emit("entry",t),t.emittedEnd||(t.on("end",n=>this[kw]()),r=!1)):(this[di]=null,r=!1),r}[kw](){do;while(this[RP](this[fi].shift()));if(!this[fi].length){let t=this[di];!t||t.flowing||t.size===t.remain?this[ad]||this.emit("drain"):t.once("drain",n=>this.emit("drain"))}}[Dw](t,r){let n=this[ya],o=n.blockRemain,i=o>=t.length&&r===0?t:t.slice(r,r+o);return n.write(i),n.blockRemain||(this[Nn]="header",this[ya]=null,n.end()),i.length}[NP](t,r){let n=this[ya],o=this[Dw](t,r);return this[ya]||this[AP](n),o}[Ca](t,r,n){!this[fi].length&&!this[di]?this.emit(t,r,n):this[fi].push([t,r,n])}[AP](t){switch(this[Ca]("meta",this[os]),t.type){case"ExtendedHeader":case"OldExtendedHeader":this[Ln]=DP.parse(this[os],this[Ln],!1);break;case"GlobalExtendedHeader":this[sd]=DP.parse(this[os],this[sd],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Ln]=this[Ln]||Object.create(null),this[Ln].path=this[os].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Ln]=this[Ln]||Object.create(null),this[Ln].linkpath=this[os].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+t.type)}}abort(t){this[is]=!0,this.emit("abort",t),this.warn("TAR_ABORT",t,{recoverable:!1})}write(t){if(this[is])return;if(this[Wr]===null&&t){if(this[Pt]&&(t=Buffer.concat([this[Pt],t]),this[Pt]=null),t.length<Tw.length)return this[Pt]=t,!0;for(let n=0;this[Wr]===null&&n<Tw.length;n++)t[n]!==Tw[n]&&(this[Wr]=!1);if(this[Wr]===null){let n=this[wa];this[wa]=!1,this[Wr]=new q2.Unzip,this[Wr].on("data",i=>this[om](i)),this[Wr].on("error",i=>this.abort(i)),this[Wr].on("end",i=>{this[wa]=!0,this[om]()}),this[ad]=!0;let o=this[Wr][n?"end":"write"](t);return this[ad]=!1,o}}this[ad]=!0,this[Wr]?this[Wr].write(t):this[om](t),this[ad]=!1;let r=this[fi].length?!1:this[di]?this[di].flowing:!0;return!r&&!this[fi].length&&this[di].once("drain",n=>this.emit("drain")),r}[Rw](t){t&&!this[is]&&(this[Pt]=this[Pt]?Buffer.concat([this[Pt],t]):t)}[Aw](){if(this[wa]&&!this[OP]&&!this[is]&&!this[sm]){this[OP]=!0;let t=this[ya];if(t&&t.blockRemain){let r=this[Pt]?this[Pt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${t.blockRemain} more bytes, only ${r} available)`,{entry:t}),this[Pt]&&t.write(this[Pt]),t.end()}this[Ca](am)}}[om](t){if(this[sm])this[Rw](t);else if(!t&&!this[Pt])this[Aw]();else{if(this[sm]=!0,this[Pt]){this[Rw](t);let r=this[Pt];this[Pt]=null,this[im](r)}else this[im](t);for(;this[Pt]&&this[Pt].length>=512&&!this[is]&&!this[um];){let r=this[Pt];this[Pt]=null,this[im](r)}this[sm]=!1}(!this[Pt]||this[wa])&&this[Aw]()}[im](t){let r=0,n=t.length;for(;r+512<=n&&!this[is]&&!this[um];)switch(this[Nn]){case"begin":case"header":this[LP](t,r),r+=512;break;case"ignore":case"body":r+=this[Dw](t,r);break;case"meta":r+=this[NP](t,r);break;default:throw new Error("invalid state: "+this[Nn])}r<n&&(this[Pt]?this[Pt]=Buffer.concat([t.slice(r),this[Pt]]):this[Pt]=t.slice(r))}end(t){this[is]||(this[Wr]?this[Wr].end(t):(this[wa]=!0,this.write(t)))}})});var dm=$((Pee,$P)=>{"use strict";var V2=Lc(),MP=lm(),Jc=require("fs"),W2=Yc(),UP=require("path"),Ow=Hc();$P.exports=(e,t,r)=>{typeof e=="function"?(r=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),typeof t=="function"&&(r=t,t=null),t?t=Array.from(t):t=[];let n=V2(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return t.length&&z2(n,t),n.noResume||G2(n),n.file&&n.sync?K2(n):n.file?Q2(n,r):jP(n)};var G2=e=>{let t=e.onentry;e.onentry=t?r=>{t(r),r.resume()}:r=>r.resume()},z2=(e,t)=>{let r=new Map(t.map(i=>[Ow(i),!0])),n=e.filter,o=(i,s)=>{let a=s||UP.parse(i).root||".",c=i===a?!1:r.has(i)?r.get(i):o(UP.dirname(i),a);return r.set(i,c),c};e.filter=n?(i,s)=>n(i,s)&&o(Ow(i)):i=>o(Ow(i))},K2=e=>{let t=jP(e),r=e.file,n=!0,o;try{let i=Jc.statSync(r),s=e.maxReadSize||16*1024*1024;if(i.size<s)t.end(Jc.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(o=Jc.openSync(r,"r");a<i.size;){let u=Jc.readSync(o,c,0,s,a);a+=u,t.write(c.slice(0,u))}t.end()}n=!1}finally{if(n&&o)try{Jc.closeSync(o)}catch{}}},Q2=(e,t)=>{let r=new MP(e),n=e.maxReadSize||16*1024*1024,o=e.file,i=new Promise((s,a)=>{r.on("error",a),r.on("end",s),Jc.stat(o,(c,u)=>{if(c)a(c);else{let l=new W2.ReadStream(o,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return t?i.then(t,t):i},jP=e=>new MP(e)});var GP=$((Iee,WP)=>{"use strict";var Y2=Lc(),fm=Xp(),HP=Yc(),qP=dm(),BP=require("path");WP.exports=(e,t,r)=>{if(typeof t=="function"&&(r=t),Array.isArray(e)&&(t=e,e={}),!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);let n=Y2(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?J2(n,t):n.file?X2(n,t,r):n.sync?Z2(n,t):eB(n,t)};var J2=(e,t)=>{let r=new fm.Sync(e),n=new HP.WriteStreamSync(e.file,{mode:e.mode||438});r.pipe(n),VP(r,t)},X2=(e,t,r)=>{let n=new fm(e),o=new HP.WriteStream(e.file,{mode:e.mode||438});n.pipe(o);let i=new Promise((s,a)=>{o.on("error",a),o.on("close",s),n.on("error",a)});return Nw(n,t),r?i.then(r,r):i},VP=(e,t)=>{t.forEach(r=>{r.charAt(0)==="@"?qP({file:BP.resolve(e.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>e.add(n)}):e.add(r)}),e.end()},Nw=(e,t)=>{for(;t.length;){let r=t.shift();if(r.charAt(0)==="@")return qP({file:BP.resolve(e.cwd,r.substr(1)),noResume:!0,onentry:n=>e.add(n)}).then(n=>Nw(e,t));e.add(r)}e.end()},Z2=(e,t)=>{let r=new fm.Sync(e);return VP(r,t),r},eB=(e,t)=>{let r=new fm(e);return Nw(r,t),r}});var Lw=$((Tee,ZP)=>{"use strict";var tB=Lc(),zP=Xp(),fn=require("fs"),KP=Yc(),QP=dm(),YP=require("path"),JP=$c();ZP.exports=(e,t,r)=>{let n=tB(e);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),n.sync?rB(n,t):oB(n,t,r)};var rB=(e,t)=>{let r=new zP.Sync(e),n=!0,o,i;try{try{o=fn.openSync(e.file,"r+")}catch(c){if(c.code==="ENOENT")o=fn.openSync(e.file,"w+");else throw c}let s=fn.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let l=0,d=0;l<512;l+=d){if(d=fn.readSync(o,a,l,a.length-l,i+l),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let c=new JP(a);if(!c.cksumValid)break;let u=512*Math.ceil(c.size/512);if(i+u+512>s.size)break;i+=u,e.mtimeCache&&e.mtimeCache.set(c.path,c.mtime)}n=!1,nB(e,r,i,o,t)}finally{if(n)try{fn.closeSync(o)}catch{}}},nB=(e,t,r,n,o)=>{let i=new KP.WriteStreamSync(e.file,{fd:n,start:r});t.pipe(i),iB(t,o)},oB=(e,t,r)=>{t=Array.from(t);let n=new zP(e),o=(s,a,c)=>{let u=(m,h)=>{m?fn.close(s,g=>c(m)):c(null,h)},l=0;if(a===0)return u(null,0);let d=0,f=Buffer.alloc(512),p=(m,h)=>{if(m)return u(m);if(d+=h,d<512&&h)return fn.read(s,f,d,f.length-d,l+d,p);if(l===0&&f[0]===31&&f[1]===139)return u(new Error("cannot append to compressed archives"));if(d<512)return u(null,l);let g=new JP(f);if(!g.cksumValid)return u(null,l);let v=512*Math.ceil(g.size/512);if(l+v+512>a||(l+=v+512,l>=a))return u(null,l);e.mtimeCache&&e.mtimeCache.set(g.path,g.mtime),d=0,fn.read(s,f,0,512,l,p)};fn.read(s,f,0,512,l,p)},i=new Promise((s,a)=>{n.on("error",a);let c="r+",u=(l,d)=>{if(l&&l.code==="ENOENT"&&c==="r+")return c="w+",fn.open(e.file,c,u);if(l)return a(l);fn.fstat(d,(f,p)=>{if(f)return fn.close(d,()=>a(f));o(d,p.size,(m,h)=>{if(m)return a(m);let g=new KP.WriteStream(e.file,{fd:d,start:h});n.pipe(g),g.on("error",a),g.on("close",s),XP(n,t)})})};fn.open(e.file,c,u)});return r?i.then(r,r):i},iB=(e,t)=>{t.forEach(r=>{r.charAt(0)==="@"?QP({file:YP.resolve(e.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>e.add(n)}):e.add(r)}),e.end()},XP=(e,t)=>{for(;t.length;){let r=t.shift();if(r.charAt(0)==="@")return QP({file:YP.resolve(e.cwd,r.substr(1)),noResume:!0,onentry:n=>e.add(n)}).then(n=>XP(e,t));e.add(r)}e.end()}});var tI=$((kee,eI)=>{"use strict";var sB=Lc(),aB=Lw();eI.exports=(e,t,r)=>{let n=sB(e);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),cB(n),aB(n,t,r)};var cB=e=>{let t=e.filter;e.mtimeCache||(e.mtimeCache=new Map),e.filter=t?(r,n)=>t(r,n)&&!(e.mtimeCache.get(r)>n.mtime):(r,n)=>!(e.mtimeCache.get(r)>n.mtime)}});var oI=$((Dee,nI)=>{var{promisify:rI}=require("util"),ss=require("fs"),uB=e=>{if(!e)e={mode:511,fs:ss};else if(typeof e=="object")e=X({mode:511,fs:ss},e);else if(typeof e=="number")e={mode:e,fs:ss};else if(typeof e=="string")e={mode:parseInt(e,8),fs:ss};else throw new TypeError("invalid options argument");return e.mkdir=e.mkdir||e.fs.mkdir||ss.mkdir,e.mkdirAsync=rI(e.mkdir),e.stat=e.stat||e.fs.stat||ss.stat,e.statAsync=rI(e.stat),e.statSync=e.statSync||e.fs.statSync||ss.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||ss.mkdirSync,e};nI.exports=uB});var sI=$((Ree,iI)=>{var lB=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:dB,parse:fB}=require("path"),pB=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=dB(e),lB==="win32"){let t=/[*|"<>?:]/,{root:r}=fB(e);if(t.test(e.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e};iI.exports=pB});var dI=$((Aee,lI)=>{var{dirname:aI}=require("path"),cI=(e,t,r=void 0)=>r===t?Promise.resolve():e.statAsync(t).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?cI(e,aI(t),t):void 0),uI=(e,t,r=void 0)=>{if(r!==t)try{return e.statSync(t).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?uI(e,aI(t),t):void 0}};lI.exports={findMade:cI,findMadeSync:uI}});var Uw=$((Oee,pI)=>{var{dirname:fI}=require("path"),Fw=(e,t,r)=>{t.recursive=!1;let n=fI(e);return n===e?t.mkdirAsync(e,t).catch(o=>{if(o.code!=="EISDIR")throw o}):t.mkdirAsync(e,t).then(()=>r||e,o=>{if(o.code==="ENOENT")return Fw(n,t).then(i=>Fw(e,t,i));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;return t.statAsync(e).then(i=>{if(i.isDirectory())return r;throw o},()=>{throw o})})},Mw=(e,t,r)=>{let n=fI(e);if(t.recursive=!1,n===e)try{return t.mkdirSync(e,t)}catch(o){if(o.code!=="EISDIR")throw o;return}try{return t.mkdirSync(e,t),r||e}catch(o){if(o.code==="ENOENT")return Mw(e,t,Mw(n,t,r));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(!t.statSync(e).isDirectory())throw o}catch{throw o}}};pI.exports={mkdirpManual:Fw,mkdirpManualSync:Mw}});var gI=$((Nee,hI)=>{var{dirname:mI}=require("path"),{findMade:mB,findMadeSync:hB}=dI(),{mkdirpManual:gB,mkdirpManualSync:vB}=Uw(),yB=(e,t)=>(t.recursive=!0,mI(e)===e?t.mkdirAsync(e,t):mB(t,e).then(n=>t.mkdirAsync(e,t).then(()=>n).catch(o=>{if(o.code==="ENOENT")return gB(e,t);throw o}))),wB=(e,t)=>{if(t.recursive=!0,mI(e)===e)return t.mkdirSync(e,t);let n=hB(t,e);try{return t.mkdirSync(e,t),n}catch(o){if(o.code==="ENOENT")return vB(e,t);throw o}};hI.exports={mkdirpNative:yB,mkdirpNativeSync:wB}});var CI=$((Lee,wI)=>{var vI=require("fs"),CB=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,jw=CB.replace(/^v/,"").split("."),yI=+jw[0]>10||+jw[0]==10&&+jw[1]>=12,EB=yI?e=>e.mkdir===vI.mkdir:()=>!1,_B=yI?e=>e.mkdirSync===vI.mkdirSync:()=>!1;wI.exports={useNative:EB,useNativeSync:_B}});var PI=$((Fee,SI)=>{var Xc=oI(),Zc=sI(),{mkdirpNative:EI,mkdirpNativeSync:_I}=gI(),{mkdirpManual:bI,mkdirpManualSync:xI}=Uw(),{useNative:bB,useNativeSync:xB}=CI(),eu=(e,t)=>(e=Zc(e),t=Xc(t),bB(t)?EI(e,t):bI(e,t)),SB=(e,t)=>(e=Zc(e),t=Xc(t),xB(t)?_I(e,t):xI(e,t));eu.sync=SB;eu.native=(e,t)=>EI(Zc(e),Xc(t));eu.manual=(e,t)=>bI(Zc(e),Xc(t));eu.nativeSync=(e,t)=>_I(Zc(e),Xc(t));eu.manualSync=(e,t)=>xI(Zc(e),Xc(t));SI.exports=eu});var OI=$((Mee,AI)=>{"use strict";var Fn=require("fs"),_a=require("path"),PB=Fn.lchown?"lchown":"chown",IB=Fn.lchownSync?"lchownSync":"chownSync",II=Fn.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),TI=(e,t,r)=>{try{return Fn[IB](e,t,r)}catch(n){if(n.code!=="ENOENT")throw n}},TB=(e,t,r)=>{try{return Fn.chownSync(e,t,r)}catch(n){if(n.code!=="ENOENT")throw n}},kB=II?(e,t,r,n)=>o=>{!o||o.code!=="EISDIR"?n(o):Fn.chown(e,t,r,n)}:(e,t,r,n)=>n,$w=II?(e,t,r)=>{try{return TI(e,t,r)}catch(n){if(n.code!=="EISDIR")throw n;TB(e,t,r)}}:(e,t,r)=>TI(e,t,r),DB=process.version,kI=(e,t,r)=>Fn.readdir(e,t,r),RB=(e,t)=>Fn.readdirSync(e,t);/^v4\./.test(DB)&&(kI=(e,t,r)=>Fn.readdir(e,r));var pm=(e,t,r,n)=>{Fn[PB](e,t,r,kB(e,t,r,o=>{n(o&&o.code!=="ENOENT"?o:null)}))},DI=(e,t,r,n,o)=>{if(typeof t=="string")return Fn.lstat(_a.resolve(e,t),(i,s)=>{if(i)return o(i.code!=="ENOENT"?i:null);s.name=t,DI(e,s,r,n,o)});if(t.isDirectory())Hw(_a.resolve(e,t.name),r,n,i=>{if(i)return o(i);let s=_a.resolve(e,t.name);pm(s,r,n,o)});else{let i=_a.resolve(e,t.name);pm(i,r,n,o)}},Hw=(e,t,r,n)=>{kI(e,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return n();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return n(o)}if(o||!i.length)return pm(e,t,r,n);let s=i.length,a=null,c=u=>{if(!a){if(u)return n(a=u);if(--s==0)return pm(e,t,r,n)}};i.forEach(u=>DI(e,u,t,r,c))})},AB=(e,t,r,n)=>{if(typeof t=="string")try{let o=Fn.lstatSync(_a.resolve(e,t));o.name=t,t=o}catch(o){if(o.code==="ENOENT")return;throw o}t.isDirectory()&&RI(_a.resolve(e,t.name),r,n),$w(_a.resolve(e,t.name),r,n)},RI=(e,t,r)=>{let n;try{n=RB(e,{withFileTypes:!0})}catch(o){if(o.code==="ENOENT")return;if(o.code==="ENOTDIR"||o.code==="ENOTSUP")return $w(e,t,r);throw o}return n&&n.length&&n.forEach(o=>AB(e,o,t,r)),$w(e,t,r)};AI.exports=Hw;Hw.sync=RI});var MI=$((Uee,Vw)=>{"use strict";var NI=PI(),Mn=require("fs"),mm=require("path"),LI=OI(),so=Uc(),qw=class extends Error{constructor(t,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=t}get name(){return"SylinkError"}},Bw=class extends Error{constructor(t,r){super(r+": Cannot cd into '"+t+"'");this.path=t,this.code=r}get name(){return"CwdError"}},hm=(e,t)=>e.get(so(t)),cd=(e,t,r)=>e.set(so(t),r),OB=(e,t)=>{Mn.stat(e,(r,n)=>{(r||!n.isDirectory())&&(r=new Bw(e,r&&r.code||"ENOTDIR")),t(r)})};Vw.exports=(e,t,r)=>{e=so(e);let n=t.umask,o=t.mode|448,i=(o&n)!=0,s=t.uid,a=t.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==t.processUid||a!==t.processGid),u=t.preserve,l=t.unlink,d=t.cache,f=so(t.cwd),p=(g,v)=>{g?r(g):(cd(d,e,!0),v&&c?LI(v,s,a,w=>p(w)):i?Mn.chmod(e,o,r):r())};if(d&&hm(d,e)===!0)return p();if(e===f)return OB(e,p);if(u)return NI(e,{mode:o}).then(g=>p(null,g),p);let h=so(mm.relative(f,e)).split("/");gm(f,h,o,d,l,f,null,p)};var gm=(e,t,r,n,o,i,s,a)=>{if(!t.length)return a(null,s);let c=t.shift(),u=so(mm.resolve(e+"/"+c));if(hm(n,u))return gm(u,t,r,n,o,i,s,a);Mn.mkdir(u,r,FI(u,t,r,n,o,i,s,a))},FI=(e,t,r,n,o,i,s,a)=>c=>{c?Mn.lstat(e,(u,l)=>{if(u)u.path=u.path&&so(u.path),a(u);else if(l.isDirectory())gm(e,t,r,n,o,i,s,a);else if(o)Mn.unlink(e,d=>{if(d)return a(d);Mn.mkdir(e,r,FI(e,t,r,n,o,i,s,a))});else{if(l.isSymbolicLink())return a(new qw(e,e+"/"+t.join("/")));a(c)}}):(s=s||e,gm(e,t,r,n,o,i,s,a))},NB=e=>{let t=!1,r="ENOTDIR";try{t=Mn.statSync(e).isDirectory()}catch(n){r=n.code}finally{if(!t)throw new Bw(e,r)}};Vw.exports.sync=(e,t)=>{e=so(e);let r=t.umask,n=t.mode|448,o=(n&r)!=0,i=t.uid,s=t.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==t.processUid||s!==t.processGid),c=t.preserve,u=t.unlink,l=t.cache,d=so(t.cwd),f=g=>{cd(l,e,!0),g&&a&&LI.sync(g,i,s),o&&Mn.chmodSync(e,n)};if(l&&hm(l,e)===!0)return f();if(e===d)return NB(d),f();if(c)return f(NI.sync(e,n));let m=so(mm.relative(d,e)).split("/"),h=null;for(let g=m.shift(),v=d;g&&(v+="/"+g);g=m.shift())if(v=so(mm.resolve(v)),!hm(l,v))try{Mn.mkdirSync(v,n),h=h||v,cd(l,v,!0)}catch{let C=Mn.lstatSync(v);if(C.isDirectory()){cd(l,v,!0);continue}else if(u){Mn.unlinkSync(v),Mn.mkdirSync(v,n),h=h||v,cd(l,v,!0);continue}else if(C.isSymbolicLink())return new qw(v,v+"/"+m.join("/"))}return f(h)}});var Gw=$((jee,UI)=>{var Ww=Object.create(null),{hasOwnProperty:LB}=Object.prototype;UI.exports=e=>(LB.call(Ww,e)||(Ww[e]=e.normalize("NFKD")),Ww[e])});var qI=$(($ee,HI)=>{var jI=require("assert"),FB=Gw(),MB=Hc(),{join:$I}=require("path"),UB=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,jB=UB==="win32";HI.exports=()=>{let e=new Map,t=new Map,r=u=>u.split("/").slice(0,-1).reduce((d,f)=>(d.length&&(f=$I(d[d.length-1],f)),d.push(f||"/"),d),[]),n=new Set,o=u=>{let l=t.get(u);if(!l)throw new Error("function does not have any path reservations");return{paths:l.paths.map(d=>e.get(d)),dirs:[...l.dirs].map(d=>e.get(d))}},i=u=>{let{paths:l,dirs:d}=o(u);return l.every(f=>f[0]===u)&&d.every(f=>f[0]instanceof Set&&f[0].has(u))},s=u=>n.has(u)||!i(u)?!1:(n.add(u),u(()=>a(u)),!0),a=u=>{if(!n.has(u))return!1;let{paths:l,dirs:d}=t.get(u),f=new Set;return l.forEach(p=>{let m=e.get(p);jI.equal(m[0],u),m.length===1?e.delete(p):(m.shift(),typeof m[0]=="function"?f.add(m[0]):m[0].forEach(h=>f.add(h)))}),d.forEach(p=>{let m=e.get(p);jI(m[0]instanceof Set),m[0].size===1&&m.length===1?e.delete(p):m[0].size===1?(m.shift(),f.add(m[0])):m[0].delete(u)}),n.delete(u),f.forEach(p=>s(p)),!0};return{check:i,reserve:(u,l)=>{u=jB?["win32 parallelization disabled"]:u.map(f=>FB(MB($I(f))).toLowerCase());let d=new Set(u.map(f=>r(f)).reduce((f,p)=>f.concat(p)));return t.set(l,{dirs:d,paths:u}),u.forEach(f=>{let p=e.get(f);p?p.push(l):e.set(f,[l])}),d.forEach(f=>{let p=e.get(f);p?p[p.length-1]instanceof Set?p[p.length-1].add(l):p.push(new Set([l])):e.set(f,[new Set([l])])}),s(l)}}}});var WI=$((Hee,VI)=>{var $B=process.env.__FAKE_PLATFORM__||process.platform,HB=$B==="win32",qB=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:BB,O_TRUNC:VB,O_WRONLY:WB,UV_FS_O_FILEMAP:BI=0}=qB.constants,GB=HB&&!!BI,zB=512*1024,KB=BI|VB|BB|WB;VI.exports=GB?e=>e<zB?KB:"w":()=>"w"});var eC=$((qee,sT)=>{"use strict";var QB=require("assert"),YB=lm(),dt=require("fs"),JB=Yc(),pi=require("path"),GI=MI(),zI=ew(),XB=qI(),ZB=tw(),pn=Uc(),eV=Hc(),tV=Gw(),KI=Symbol("onEntry"),zw=Symbol("checkFs"),QI=Symbol("checkFs2"),vm=Symbol("pruneCache"),Kw=Symbol("isReusable"),Un=Symbol("makeFs"),Qw=Symbol("file"),Yw=Symbol("directory"),ym=Symbol("link"),YI=Symbol("symlink"),JI=Symbol("hardlink"),XI=Symbol("unsupported"),ZI=Symbol("checkPath"),as=Symbol("mkdir"),br=Symbol("onError"),wm=Symbol("pending"),eT=Symbol("pend"),tu=Symbol("unpend"),Jw=Symbol("ended"),Xw=Symbol("maybeClose"),Zw=Symbol("skip"),ud=Symbol("doChown"),ld=Symbol("uid"),dd=Symbol("gid"),fd=Symbol("checkedCwd"),tT=require("crypto"),rT=WI(),rV=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,pd=rV==="win32",nV=(e,t)=>{if(!pd)return dt.unlink(e,t);let r=e+".DELETE."+tT.randomBytes(16).toString("hex");dt.rename(e,r,n=>{if(n)return t(n);dt.unlink(r,t)})},oV=e=>{if(!pd)return dt.unlinkSync(e);let t=e+".DELETE."+tT.randomBytes(16).toString("hex");dt.renameSync(e,t),dt.unlinkSync(t)},nT=(e,t,r)=>e===e>>>0?e:t===t>>>0?t:r,oT=e=>tV(eV(pn(e))).toLowerCase(),iV=(e,t)=>{t=oT(t);for(let r of e.keys()){let n=oT(r);(n===t||n.indexOf(t+"/")===0)&&e.delete(r)}},sV=e=>{for(let t of e.keys())e.delete(t)},Cm=class extends YB{constructor(t){t||(t={}),t.ondone=r=>{this[Jw]=!0,this[Xw]()};super(t);if(this[fd]=!1,this.reservations=XB(),this.transform=typeof t.transform=="function"?t.transform:null,this.writable=!0,this.readable=!1,this[wm]=0,this[Jw]=!1,this.dirCache=t.dirCache||new Map,typeof t.uid=="number"||typeof t.gid=="number"){if(typeof t.uid!="number"||typeof t.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(t.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=t.uid,this.gid=t.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;t.preserveOwner===void 0&&typeof t.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!t.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=t.forceChown===!0,this.win32=!!t.win32||pd,this.newer=!!t.newer,this.keep=!!t.keep,this.noMtime=!!t.noMtime,this.preservePaths=!!t.preservePaths,this.unlink=!!t.unlink,this.cwd=pn(pi.resolve(t.cwd||process.cwd())),this.strip=+t.strip||0,this.processUmask=t.noChmod?0:process.umask(),this.umask=typeof t.umask=="number"?t.umask:this.processUmask,this.dmode=t.dmode||511&~this.umask,this.fmode=t.fmode||438&~this.umask,this.on("entry",r=>this[KI](r))}warn(t,r,n={}){return(t==="TAR_BAD_ARCHIVE"||t==="TAR_ABORT")&&(n.recoverable=!1),super.warn(t,r,n)}[Xw](){this[Jw]&&this[wm]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[ZI](t){if(this.strip){let r=pn(t.path).split("/");if(r.length<this.strip)return!1;if(t.path=r.slice(this.strip).join("/"),t.type==="Link"){let n=pn(t.linkpath).split("/");if(n.length>=this.strip)t.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=pn(t.path),n=r.split("/");if(n.includes("..")||pd&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:t,path:r}),!1;let[o,i]=ZB(r);o&&(t.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:t,path:r}))}if(pi.isAbsolute(t.path)?t.absolute=pn(pi.resolve(t.path)):t.absolute=pn(pi.resolve(this.cwd,t.path)),!this.preservePaths&&t.absolute.indexOf(this.cwd+"/")!==0&&t.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:t,path:pn(t.path),resolvedPath:t.absolute,cwd:this.cwd}),!1;if(t.absolute===this.cwd&&t.type!=="Directory"&&t.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=pi.win32.parse(t.absolute);t.absolute=r+zI.encode(t.absolute.substr(r.length));let{root:n}=pi.win32.parse(t.path);t.path=n+zI.encode(t.path.substr(n.length))}return!0}[KI](t){if(!this[ZI](t))return t.resume();switch(QB.equal(typeof t.absolute,"string"),t.type){case"Directory":case"GNUDumpDir":t.mode&&(t.mode=t.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[zw](t);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[XI](t)}}[br](t,r){t.name==="CwdError"?this.emit("error",t):(this.warn("TAR_ENTRY_ERROR",t,{entry:r}),this[tu](),r.resume())}[as](t,r,n){GI(pn(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[ud](t){return this.forceChown||this.preserveOwner&&(typeof t.uid=="number"&&t.uid!==this.processUid||typeof t.gid=="number"&&t.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ld](t){return nT(this.uid,t.uid,this.processUid)}[dd](t){return nT(this.gid,t.gid,this.processGid)}[Qw](t,r){let n=t.mode&4095||this.fmode,o=new JB.WriteStream(t.absolute,{flags:rT(t.size),mode:n,autoClose:!1});o.on("error",c=>{o.fd&&dt.close(o.fd,()=>{}),o.write=()=>!0,this[br](c,t),r()});let i=1,s=c=>{if(c){o.fd&&dt.close(o.fd,()=>{}),this[br](c,t),r();return}--i==0&&dt.close(o.fd,u=>{u?this[br](u,t):this[tu](),r()})};o.on("finish",c=>{let u=t.absolute,l=o.fd;if(t.mtime&&!this.noMtime){i++;let d=t.atime||new Date,f=t.mtime;dt.futimes(l,d,f,p=>p?dt.utimes(u,d,f,m=>s(m&&p)):s())}if(this[ud](t)){i++;let d=this[ld](t),f=this[dd](t);dt.fchown(l,d,f,p=>p?dt.chown(u,d,f,m=>s(m&&p)):s())}s()});let a=this.transform&&this.transform(t)||t;a!==t&&(a.on("error",c=>{this[br](c,t),r()}),t.pipe(a)),a.pipe(o)}[Yw](t,r){let n=t.mode&4095||this.dmode;this[as](t.absolute,n,o=>{if(o){this[br](o,t),r();return}let i=1,s=a=>{--i==0&&(r(),this[tu](),t.resume())};t.mtime&&!this.noMtime&&(i++,dt.utimes(t.absolute,t.atime||new Date,t.mtime,s)),this[ud](t)&&(i++,dt.chown(t.absolute,this[ld](t),this[dd](t),s)),s()})}[XI](t){t.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${t.type}`,{entry:t}),t.resume()}[YI](t,r){this[ym](t,t.linkpath,"symlink",r)}[JI](t,r){let n=pn(pi.resolve(this.cwd,t.linkpath));this[ym](t,n,"link",r)}[eT](){this[wm]++}[tu](){this[wm]--,this[Xw]()}[Zw](t){this[tu](),t.resume()}[Kw](t,r){return t.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!pd}[zw](t){this[eT]();let r=[t.path];t.linkpath&&r.push(t.linkpath),this.reservations.reserve(r,n=>this[QI](t,n))}[vm](t){t.type==="SymbolicLink"?sV(this.dirCache):t.type!=="Directory"&&iV(this.dirCache,t.absolute)}[QI](t,r){this[vm](t);let n=a=>{this[vm](t),r(a)},o=()=>{this[as](this.cwd,this.dmode,a=>{if(a){this[br](a,t),n();return}this[fd]=!0,i()})},i=()=>{if(t.absolute!==this.cwd){let a=pn(pi.dirname(t.absolute));if(a!==this.cwd)return this[as](a,this.dmode,c=>{if(c){this[br](c,t),n();return}s()})}s()},s=()=>{dt.lstat(t.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>t.mtime)){this[Zw](t),n();return}if(a||this[Kw](t,c))return this[Un](null,t,n);if(c.isDirectory()){if(t.type==="Directory"){let u=!this.noChmod&&t.mode&&(c.mode&4095)!==t.mode,l=d=>this[Un](d,t,n);return u?dt.chmod(t.absolute,t.mode,l):l()}if(t.absolute!==this.cwd)return dt.rmdir(t.absolute,u=>this[Un](u,t,n))}if(t.absolute===this.cwd)return this[Un](null,t,n);nV(t.absolute,u=>this[Un](u,t,n))})};this[fd]?i():o()}[Un](t,r,n){if(t){this[br](t,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Qw](r,n);case"Link":return this[JI](r,n);case"SymbolicLink":return this[YI](r,n);case"Directory":case"GNUDumpDir":return this[Yw](r,n)}}[ym](t,r,n,o){dt[n](r,t.absolute,i=>{i?this[br](i,t):(this[tu](),t.resume()),o()})}},Em=e=>{try{return[null,e()]}catch(t){return[t,null]}},iT=class extends Cm{[Un](t,r){return super[Un](t,r,()=>{})}[zw](t){if(this[vm](t),!this[fd]){let i=this[as](this.cwd,this.dmode);if(i)return this[br](i,t);this[fd]=!0}if(t.absolute!==this.cwd){let i=pn(pi.dirname(t.absolute));if(i!==this.cwd){let s=this[as](i,this.dmode);if(s)return this[br](s,t)}}let[r,n]=Em(()=>dt.lstatSync(t.absolute));if(n&&(this.keep||this.newer&&n.mtime>t.mtime))return this[Zw](t);if(r||this[Kw](t,n))return this[Un](null,t);if(n.isDirectory()){if(t.type==="Directory"){let s=!this.noChmod&&t.mode&&(n.mode&4095)!==t.mode,[a]=s?Em(()=>{dt.chmodSync(t.absolute,t.mode)}):[];return this[Un](a,t)}let[i]=Em(()=>dt.rmdirSync(t.absolute));this[Un](i,t)}let[o]=t.absolute===this.cwd?[]:Em(()=>oV(t.absolute));this[Un](o,t)}[Qw](t,r){let n=t.mode&4095||this.fmode,o=a=>{let c;try{dt.closeSync(i)}catch(u){c=u}(a||c)&&this[br](a||c,t),r()},i;try{i=dt.openSync(t.absolute,rT(t.size),n)}catch(a){return o(a)}let s=this.transform&&this.transform(t)||t;s!==t&&(s.on("error",a=>this[br](a,t)),t.pipe(s)),s.on("data",a=>{try{dt.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",a=>{let c=null;if(t.mtime&&!this.noMtime){let u=t.atime||new Date,l=t.mtime;try{dt.futimesSync(i,u,l)}catch(d){try{dt.utimesSync(t.absolute,u,l)}catch{c=d}}}if(this[ud](t)){let u=this[ld](t),l=this[dd](t);try{dt.fchownSync(i,u,l)}catch(d){try{dt.chownSync(t.absolute,u,l)}catch{c=c||d}}}o(c)})}[Yw](t,r){let n=t.mode&4095||this.dmode,o=this[as](t.absolute,n);if(o){this[br](o,t),r();return}if(t.mtime&&!this.noMtime)try{dt.utimesSync(t.absolute,t.atime||new Date,t.mtime)}catch{}if(this[ud](t))try{dt.chownSync(t.absolute,this[ld](t),this[dd](t))}catch{}r(),t.resume()}[as](t,r){try{return GI.sync(pn(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[ym](t,r,n,o){try{dt[n+"Sync"](r,t.absolute),o(),t.resume()}catch(i){return this[br](i,t)}}};Cm.Sync=iT;sT.exports=Cm});var dT=$((Bee,lT)=>{"use strict";var aV=Lc(),_m=eC(),aT=require("fs"),cT=Yc(),uT=require("path"),tC=Hc();lT.exports=(e,t,r)=>{typeof e=="function"?(r=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),typeof t=="function"&&(r=t,t=null),t?t=Array.from(t):t=[];let n=aV(e);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return t.length&&cV(n,t),n.file&&n.sync?uV(n):n.file?lV(n,r):n.sync?dV(n):fV(n)};var cV=(e,t)=>{let r=new Map(t.map(i=>[tC(i),!0])),n=e.filter,o=(i,s)=>{let a=s||uT.parse(i).root||".",c=i===a?!1:r.has(i)?r.get(i):o(uT.dirname(i),a);return r.set(i,c),c};e.filter=n?(i,s)=>n(i,s)&&o(tC(i)):i=>o(tC(i))},uV=e=>{let t=new _m.Sync(e),r=e.file,n=aT.statSync(r),o=e.maxReadSize||16*1024*1024;new cT.ReadStreamSync(r,{readSize:o,size:n.size}).pipe(t)},lV=(e,t)=>{let r=new _m(e),n=e.maxReadSize||16*1024*1024,o=e.file,i=new Promise((s,a)=>{r.on("error",a),r.on("close",s),aT.stat(o,(c,u)=>{if(c)a(c);else{let l=new cT.ReadStream(o,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return t?i.then(t,t):i},dV=e=>new _m.Sync(e),fV=e=>new _m(e)});var bm=$(Xt=>{"use strict";Xt.c=Xt.create=GP();Xt.r=Xt.replace=Lw();Xt.t=Xt.list=dm();Xt.u=Xt.update=tI();Xt.x=Xt.extract=dT();Xt.Pack=Xp();Xt.Unpack=eC();Xt.Parse=lm();Xt.ReadEntry=Lp();Xt.WriteEntry=lw();Xt.Header=$c();Xt.Pax=Up();Xt.types=Ky()});var nC=$(rC=>{"use strict";Object.defineProperty(rC,"__esModule",{value:!0});rC.default=hV;var pV=mV(require("crypto"));function mV(e){return e&&e.__esModule?e:{default:e}}var xm=new Uint8Array(256),Sm=xm.length;function hV(){return Sm>xm.length-16&&(pV.default.randomFillSync(xm),Sm=0),xm.slice(Sm,Sm+=16)}});var fT=$(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=void 0;var gV=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Pm.default=gV});var md=$(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.default=void 0;var vV=yV(fT());function yV(e){return e&&e.__esModule?e:{default:e}}function wV(e){return typeof e=="string"&&vV.default.test(e)}var CV=wV;Im.default=CV});var hd=$(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.default=void 0;var EV=_V(md());function _V(e){return e&&e.__esModule?e:{default:e}}var dr=[];for(let e=0;e<256;++e)dr.push((e+256).toString(16).substr(1));function bV(e,t=0){let r=(dr[e[t+0]]+dr[e[t+1]]+dr[e[t+2]]+dr[e[t+3]]+"-"+dr[e[t+4]]+dr[e[t+5]]+"-"+dr[e[t+6]]+dr[e[t+7]]+"-"+dr[e[t+8]]+dr[e[t+9]]+"-"+dr[e[t+10]]+dr[e[t+11]]+dr[e[t+12]]+dr[e[t+13]]+dr[e[t+14]]+dr[e[t+15]]).toLowerCase();if(!(0,EV.default)(r))throw TypeError("Stringified UUID is invalid");return r}var xV=bV;Tm.default=xV});var hT=$(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.default=void 0;var SV=pT(nC()),PV=pT(hd());function pT(e){return e&&e.__esModule?e:{default:e}}var mT,oC,iC=0,sC=0;function IV(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let i=e.node||mT,s=e.clockseq!==void 0?e.clockseq:oC;if(i==null||s==null){let f=e.random||(e.rng||SV.default)();i==null&&(i=mT=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),s==null&&(s=oC=(f[6]<<8|f[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:sC+1,u=a-iC+(c-sC)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||a>iC)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");iC=a,sC=c,oC=s,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;let d=a/4294967296*1e4&268435455;o[n++]=d>>>8&255,o[n++]=d&255,o[n++]=d>>>24&15|16,o[n++]=d>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(let f=0;f<6;++f)o[n+f]=i[f];return t||(0,PV.default)(o)}var TV=IV;km.default=TV});var aC=$(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.default=void 0;var kV=DV(md());function DV(e){return e&&e.__esModule?e:{default:e}}function RV(e){if(!(0,kV.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var AV=RV;Dm.default=AV});var cC=$(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.default=FV;ba.URL=ba.DNS=void 0;var OV=gT(hd()),NV=gT(aC());function gT(e){return e&&e.__esModule?e:{default:e}}function LV(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var vT="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ba.DNS=vT;var yT="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ba.URL=yT;function FV(e,t,r){function n(o,i,s,a){if(typeof o=="string"&&(o=LV(o)),typeof i=="string"&&(i=(0,NV.default)(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(i),c.set(o,i.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,s){a=a||0;for(let u=0;u<16;++u)s[a+u]=c[u];return s}return(0,OV.default)(c)}try{n.name=e}catch{}return n.DNS=vT,n.URL=yT,n}});var wT=$(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.default=void 0;var MV=UV(require("crypto"));function UV(e){return e&&e.__esModule?e:{default:e}}function jV(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),MV.default.createHash("md5").update(e).digest()}var $V=jV;Rm.default=$V});var ET=$(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.default=void 0;var HV=CT(cC()),qV=CT(wT());function CT(e){return e&&e.__esModule?e:{default:e}}var BV=(0,HV.default)("v3",48,qV.default),VV=BV;Am.default=VV});var bT=$(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.default=void 0;var WV=_T(nC()),GV=_T(hd());function _T(e){return e&&e.__esModule?e:{default:e}}function zV(e,t,r){e=e||{};let n=e.random||(e.rng||WV.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return(0,GV.default)(n)}var KV=zV;Om.default=KV});var xT=$(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.default=void 0;var QV=YV(require("crypto"));function YV(e){return e&&e.__esModule?e:{default:e}}function JV(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),QV.default.createHash("sha1").update(e).digest()}var XV=JV;Nm.default=XV});var PT=$(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.default=void 0;var ZV=ST(cC()),eW=ST(xT());function ST(e){return e&&e.__esModule?e:{default:e}}var tW=(0,ZV.default)("v5",80,eW.default),rW=tW;Lm.default=rW});var IT=$(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.default=void 0;var nW="00000000-0000-0000-0000-000000000000";Fm.default=nW});var TT=$(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.default=void 0;var oW=iW(md());function iW(e){return e&&e.__esModule?e:{default:e}}function sW(e){if(!(0,oW.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var aW=sW;Mm.default=aW});var kT=$(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});Object.defineProperty(ao,"v1",{enumerable:!0,get:function(){return cW.default}});Object.defineProperty(ao,"v3",{enumerable:!0,get:function(){return uW.default}});Object.defineProperty(ao,"v4",{enumerable:!0,get:function(){return lW.default}});Object.defineProperty(ao,"v5",{enumerable:!0,get:function(){return dW.default}});Object.defineProperty(ao,"NIL",{enumerable:!0,get:function(){return fW.default}});Object.defineProperty(ao,"version",{enumerable:!0,get:function(){return pW.default}});Object.defineProperty(ao,"validate",{enumerable:!0,get:function(){return mW.default}});Object.defineProperty(ao,"stringify",{enumerable:!0,get:function(){return hW.default}});Object.defineProperty(ao,"parse",{enumerable:!0,get:function(){return gW.default}});var cW=mi(hT()),uW=mi(ET()),lW=mi(bT()),dW=mi(PT()),fW=mi(IT()),pW=mi(TT()),mW=mi(md()),hW=mi(hd()),gW=mi(aC());function mi(e){return e&&e.__esModule?e:{default:e}}});var uC=$((wte,AT)=>{AT.exports=function(t,r,n){t(r),n&&n(r===!0?null:r)}});var jm=$((Cte,NT)=>{"use strict";var OT=uC();NT.exports=function(t,r){if(!t)return function(o,i){return o?OT(i,o,r):i(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(o){return t[o]}));var n=0;return function(o,i){if(o)return OT(i,o,r);n>=t.length?i(!0):i(null,t[n++])}}});var FT=$((Ete,LT)=>{"use strict";var wW=jm();LT.exports=function(e){return wW(Object.keys(e))}});var lC=$((_te,MT)=>{"use strict";var CW=uC();MT.exports=function(t,r){return function(n,o){if(n)return CW(o,n,r);if(t!=null){var i=t;t=null,o(null,i)}else o(!0)}}});var jT=$((bte,UT)=>{"use strict";UT.exports=function(t){var r=0;return t=t||1/0,function(n,o){if(n)return o&&o(n);if(r>t)return o(!0);o(null,r++)}}});var HT=$((xte,$T)=>{"use strict";$T.exports=function(t){return t=t||Math.random,function(r,n){return r?n&&n(r):n(null,t())}}});var BT=$((Ste,qT)=>{"use strict";qT.exports=function(){return function(t,r){r(!0)}}});var WT=$((Pte,VT)=>{"use strict";VT.exports=function(t){return function(r,n){n(t)}}});var zT=$((Ite,GT)=>{"use strict";GT.exports={keys:FT(),once:lC(),values:jm(),count:jT(),infinite:HT(),empty:BT(),error:WT()}});var ru=$((Tte,KT)=>{"use strict";KT.exports=function(t,r){var n,o;function i(s){if(n=s,o)return i.abort();(function a(){for(var c=!0,u=!1;c;)if(u=!1,n(null,function(l,d){if(u=!0,l=l||o){if(c=!1,r)r(l===!0?null:l);else if(l&&l!==!0)throw l}else t&&t(d)===!1||o?(c=!1,n(o||!0,r||function(){})):c||a()}),!u){c=!1;return}})()}return i.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),o=s||!0,n)return n(o,a||function(){})},i}});var YT=$((kte,QT)=>{"use strict";var EW=ru();QT.exports=function(t){return EW(null,t)}});var XT=$((Dte,JT)=>{"use strict";var _W=ru();JT.exports=function(t){return _W(function(r){console.log(r)},t)}});var nu=$((Rte,ZT)=>{ZT.exports=function(t){return t&&(typeof t=="string"?function(r){return r[t]}:typeof t=="object"&&typeof t.exec=="function"?function(r){var n=t.exec(r);return n&&n[0]}:t)}});var rk=$((Ate,tk)=>{"use strict";function ek(e){return e}var bW=nu(),xW=ru();tk.exports=function(t,r){var n=!1;return r?t=bW(t)||ek:(r=t,t=ek),xW(function(o){if(t(o))return n=!0,r(null,o),!1},function(o){n||r(o===!0?null:o,null)})}});var $m=$((Ote,nk)=>{"use strict";var SW=ru();nk.exports=function(t,r,n){n||(n=r,r=null);var o=SW(function(i){r=t(r,i)},function(i){n(i,r)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return n(s===!0?null:s);r=a,o(i)})}:o}});var ik=$((Nte,ok)=>{"use strict";var PW=$m();ok.exports=function(t){return PW(function(r,n){return r.push(n),r},[],t)}});var ak=$((Lte,sk)=>{"use strict";var IW=$m();sk.exports=function(t){return IW(function(r,n){return r+n},"",t)}});var uk=$((Fte,ck)=>{"use strict";ck.exports={drain:ru(),onEnd:YT(),log:XT(),find:rk(),reduce:$m(),collect:ik(),concat:ak()}});var dk=$((Mte,lk)=>{"use strict";function TW(e){return e}var kW=nu();lk.exports=function(t){return t?(t=kW(t),function(r){return function(n,o){r(n,function(i,s){try{s=i?null:t(s)}catch(a){return r(a,function(){return o(a)})}o(i,s)})}}):TW}});var pk=$((Ute,fk)=>{"use strict";function DW(e){return e}var RW=nu();fk.exports=function(t){if(!t)return DW;t=RW(t);var r=!1,n,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,r?i(a,function(u){r?n=c:c(a)}):i(a,function(u){c(a)})):i(null,function(u,l){u?c(u):o?c(o):(r=!0,t(l,function(d,f){r=!1,o?(c(o),n&&n(o)):d?s(d,c):c(null,f)}))})}}}});var dC=$((jte,mk)=>{var AW=nu();function OW(e){return e}mk.exports=function(t){return typeof t=="object"&&typeof t.test=="function"?function(r){return t.test(r)}:AW(t)||OW}});var Hm=$(($te,hk)=>{"use strict";var NW=dC();hk.exports=function(t){return t=NW(t),function(r){return function n(o,i){for(var s,a=!0;a;)a=!1,s=!0,r(o,function(c,u){if(!c&&!t(u))return s?a=!0:n(c,i);i(c,u)}),s=!1}}}});var vk=$((Hte,gk)=>{"use strict";var LW=dC(),FW=Hm();gk.exports=function(t){return t=LW(t),FW(function(r){return!t(r)})}});var wk=$((qte,yk)=>{"use strict";yk.exports=function(t,r){var n=!1;function o(i){n||!r||(n=!0,r(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,u){c?o(c):t&&t(u),a(c,u)})}}}});var Ek=$((Bte,Ck)=>{"use strict";Ck.exports=function(t,r){r=r||{};var n=r.last||!1,o=!1;if(typeof t=="number"){n=!0;var i=t;t=function(){return--i}}return function(s){function a(c){s(!0,function(u){n=!1,c(u||!0)})}return function(c,u){o&&!c?n?a(u):u(o):(o=c)?s(o,u):s(null,function(l,d){(o=o||l)?u(o):t(d)?u(null,d):(o=!0,n?u(null,d):a(u))})}}}});var fC=$((Vte,_k)=>{"use strict";function MW(e){return e}var UW=nu(),jW=Hm();_k.exports=function(t,r){t=UW(t)||MW;var n={};return jW(function(o){var i=t(o);return n[i]?!!r:(n[i]=!0,!r)})}});var xk=$((Wte,bk)=>{"use strict";var $W=fC();bk.exports=function(t){return $W(t,!0)}});var Pk=$((Gte,Sk)=>{"use strict";var HW=jm(),qW=lC();Sk.exports=function(){return function(t){var r;return function(n,o){n?r?r(n,function(a){t(a||n,o)}):t(n,o):r?i():s();function i(){r(null,function(a,c){a===!0?s():a?t(!0,function(u){o(a)}):o(null,c)})}function s(){r=null,t(null,function(a,c){if(a)return o(a);Array.isArray(c)||c&&typeof c=="object"?c=HW(c):typeof c!="function"&&(c=qW(c)),r=c,i()})}}}}});var Tk=$((zte,Ik)=>{"use strict";Ik.exports={map:dk(),asyncMap:pk(),filter:Hm(),filterNot:vk(),through:wk(),take:Ek(),unique:fC(),nonUnique:xk(),flatten:Pk()}});var pC=$((Kte,kk)=>{"use strict";kk.exports=function e(t){var r=arguments.length;if(typeof t=="function"&&t.length===1){for(var n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return e(a,c[0]);case 2:return e(a,c[0],c[1]);case 3:return e(a,c[0],c[1],c[2]);case 4:return e(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),e.apply(null,c)}}}var i=t;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<r;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var qm=$((xa,Ok)=>{"use strict";var Dk=zT(),Rk=uk(),Ak=Tk();xa=Ok.exports=pC();xa.pull=xa;for(co in Dk)xa[co]=Dk[co];var co;for(co in Ak)xa[co]=Ak[co];var co;for(co in Rk)xa[co]=Rk[co];var co});var EC=$((sre,Hk)=>{var ire=Hk.exports=function(e){(function t(){var r=!0,n=!1,o=!1;do o=!0,r=!1,e.call(this,function(){o?r=!0:t()}),o=!1;while(r)})()}});var Bk=$((are,qk)=>{var KW=EC();qk.exports=function(e,t){return function(r){var n=[],o,i;function s(u){n.push(u)}e=e||function(u){this.queue(u)},t=t||function(){this.queue(null)};var a={emit:function(u,l){u=="data"&&s(l),u=="end"&&(o=!0,s(null)),u=="error"&&(i=l)},queue:s},c;return function(u,l){if(o=o||u,u)return r(u,function(){if(c){var d=c;c=null,d(u)}l(u)});c=l,KW(function d(f){if(!!c)if(l=c,i)c=null,l(i);else if(n.length){var p=n.shift();c=null,l(p===null,p)}else r(o,function(m,h){if(m&&m!==!0)return i=m,f();if(o=o||m)t.call(a);else if(h!==null&&(e.call(a,h),i||o))return r(i||o,function(){c=null,l(i||o)});f(d)})})}}}});var Wk=$((cre,Vk)=>{Vk.exports=function(){var e=[],t=0;function r(){return e.reduce(function(n,o){return n+o.length},0)}return{length:t,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=t=t+n.length,e.push(n),this},has:function(n){return n==null?t>0:t>=n},get:function(n){var o;if(n==null||n===t){t=0;var i=e;return e=[],i.length==1?i[0]:Buffer.concat(i)}else if(e.length>1&&n<=(o=e[0].length)){var s=e[0].slice(0,n);return n===o?e.shift():e[0]=e[0].slice(n,o),t-=n,s}else if(n<t){for(var a=[],c=0;c+e[0].length<n;){var u=e.shift();c+=u.length,a.push(u)}return c<n&&(a.push(e[0].slice(0,n-c)),e[0]=e[0].slice(n-c,e[0].length),this.length=t=t-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var Qk=$((ure,Kk)=>{"use strict";var QW=Wk();function YW(e){return Number.isFinite(e)}function Gk(e){return typeof e=="function"}function zk(e,t){return t?function(r,n){var o=setTimeout(function(){e(new Error("pull-reader: read exceeded timeout"),n)},t);e(r,function(i,s){clearTimeout(o),n(i,s)})}:e}Kk.exports=function(e){var t=[],r,n,o=!1,i=QW(),s,a,c;function u(){for(;t.length;)if(t[0].length==null&&i.has(1))t.shift().cb(null,i.get());else if(i.has(t[0].length)){var f=t.shift();f.cb(null,i.get(f.length))}else if(s==!0&&t[0].length&&i.length<t[0].length){var p="stream ended with:"+i.length+" but wanted:"+t[0].length;t.shift().cb(new Error(p))}else if(s)t.shift().cb(s);else return!!t.length;return t.length||!i.has(1)||c}function l(){var f=u();f&&!o&&r&&!o&&!a&&(o=!0,n(null,function(p,m){if(o=!1,p)return s=p,u();i.add(m),l()}))}function d(f){if(c){for(;t.length;)t.shift().cb(c);return cb&&cb(c)}n=zk(f,e),r=f,l()}return d.abort=function(f,p){c=f||!0,r?(o=!0,r(c,function(){for(;t.length;)t.shift().cb(c);p&&p(c)})):p()},d.read=function(f,p,m){if(Gk(p)&&(m=p,p=e),Gk(m))t.push({length:YW(f)?f:null,cb:m}),l();else return a=!0,function(h,g){if(o||i.has(1)){if(h)return r(h,g);t.push({length:null,cb:g}),l()}else zk(r,p)(h,function(v,w){g(v,w)})}},d}});var aD=$((Sa,sD)=>{var JW=Bk(),XW=Qk(),Yk=0,Jk=1,Xk=2,Zk="GOODBYE",ZW=Buffer.isBuffer;function eD(e){return typeof e=="string"}function tD(e){var t=Buffer.alloc(9),r=0,n=e.value!==void 0?e.value:e.end;return eD(e)&&e===Zk?(t.fill(0),[t,null]):(eD(n)?(r=Jk,n=Buffer.from(n,"utf-8")):ZW(n)?r=Yk:(r=Xk,n=Buffer.from(JSON.stringify(n),"utf-8")),r=e.stream<<3|e.end<<2|r,t[0]=r,t.writeUInt32BE(n.length,1),t.writeInt32BE(e.req||0,5),[t,n])}function rD(e){if(e.length!=9)throw new Error("expected header to be 9 bytes long");var t=e[0],r=e.readUInt32BE(1),n=e.readInt32BE(5);return{req:n,stream:!!(t&8),end:!!(t&4),value:null,length:r,type:t&3}}function nD(e,t){if(e.length!==t.length)throw new Error("incorrect length, expected:"+t.length+" found:"+e.length);if(Yk===t.type)t.value=e;else if(Jk===t.type)t.value=e.toString();else if(Xk===t.type)t.value=JSON.parse(e.toString());else throw new Error("unknown message type");return t}function oD(){return JW(function(e){var t=tD(e);this.queue(t[0]),t[1]!==null&&this.queue(t[1])})}function iD(){var e=XW(),t=!1;return function(r){return e(r),function(n,o){if(t)return o(!0);if(n)return e.abort(n,o);e.read(9,function(i,s){if(i)return o(i);var a=rD(s);if(a.length===0)return t=!0,o(null,Zk);e.read(a.length,function(c,u){if(c)return o(c);try{nD(u,a)}catch(l){return o(l)}o(null,a)})})}}}Sa=sD.exports=function(e){return{source:oD()(e.source),sink:function(t){return e.sink(iD()(t))}}};Sa.encodePair=tD;Sa.decodeHead=rD;Sa.decodeBody=nD;Sa.encode=oD;Sa.decode=iD});var lD=$((lre,uD)=>{function wd(e){return e&&(e===!0?!0:{message:e.message,name:e.name,stack:e.stack})}uD.exports=function(e){return new jn(e)};function jn(e){this.ended=!1,this.opts=e,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,e.close&&this._closecbs.push(e.close)}jn.prototype.message=function(e){this.read({req:0,stream:!1,end:!1,value:e})};jn.prototype.request=function(e,t){if(this._closing)return t(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(o,i){delete n._requests[r],t(o,i),n._maybedone(o)},this.read({req:r,stream:!1,end:!1,value:e})};jn.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var e=this._req_counter++,t=this;return this._outstreams[e]=new Cd(e,this,function(){delete t._outstreams[e]}),this._outstreams[e]};jn.prototype.close=function(e){if(!e)throw new Error("packet-stream.close *must* have callback");if(this._closed)return e();this._closecbs.push(e),this._closing=!0,this._maybedone()};jn.prototype.destroy=function(e){e=e||wd(e),this.ended=e,this._closing=!0;var t=e===!0?new Error("unexpected end of parent stream"):e,r=0;for(var n in this._requests)r++,this._requests[n](t);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(t);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(t);r===0&&e===!0&&(t=null),this._maybedone(t)};jn.prototype._maybedone=function(e){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(t){t(e)}),this.read(null,e||!0),this.opts=null,this._closecbs.length=0,this.read=cD)};function cD(e){console.error("packet-stream asked to read after closed",e)}jn.prototype.read=function(e){console.error("please overwrite read method to do IO",e)};jn.prototype.write=function(e,t){this.ended||(t?this.destroy(t):e.req&&!e.stream?this._onrequest(e):e.req&&e.stream?this._onstream(e):this._onmessage(e))};jn.prototype._onmessage=function(e){this.opts&&typeof this.opts.message=="function"&&this.opts.message(e.value)};jn.prototype._onrequest=function(e){var t=e.req*-1;if(e.req<0)typeof this._requests[t]=="function"&&this._requests[t](e.end?e.value:null,e.end?null:e.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(e.value,function(i,s){if(r)throw new Error("cb called twice from local api");r=!0,i?n.read({value:wd(i),end:!0,req:t}):n.read({value:s,end:!1,req:t}),n._maybedone()})}else{if(this.ended){var o=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:wd(o),end:!0,stream:!1,req:t})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:t});this._maybedone()}};jn.prototype._onstream=function(e){if(e.req<0){var t=e.req*-1,r=this._outstreams[t];if(!r)return console.error("no stream for incoming msg",e);e.end?(r.writeEnd&&delete this._outstreams[t],r.readEnd=!0,r.read(null,e.value),this._maybedone()):r.read(e.value)}else{var t=e.req,n=this._instreams[t];if(!n){var o=this;n=this._instreams[t]=new Cd(t*-1,this,function(){delete o._instreams[t]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}e.end?(n.writeEnd&&delete this._instreams[t],n.readEnd=!0,n.read&&n.read(null,e.value),this._maybedone()):n.read?n.read(e.value):console.error("no .read for stream:",n.id,"dropped:",e)}};function Cd(e,t,r){this.id=e,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=t,this._remove=r,this._seq_counter=1}Cd.prototype.write=function(e,t){if(t){this.writeEnd=t;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:wd(t)}),this.readEnd&&this.destroy(t),r._maybedone(t))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:e})};Cd.prototype.end=function(e){this.write(null,wd(e||!0))};Cd.prototype.destroy=function(e){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}this.write(null,e)}this._ps&&(this._remove(),this._remove=null,this.read=cD,this._ps=null)}});var fD=$((dre,Ed)=>{"use strict";var e3=qm();function t3(e){let t=!1;return(r,n)=>{t||(t=!0,e(r,n))}}function _C(e,t){let r=[],n=!1,o=!1,i,s,a=t3((c,u)=>{t&&t(c,u),e=null,t=null,i=null,s&&s(c||!0,()=>{})});return e.read=function(c,u){if(n=n||u,i){let l=i;i=null,l(n,c)}else!n&&!o&&r.push(c);n&&a(n!==!0?n:null)},{source(c,u){c?(e&&e.write(null,c),u(c),r.length=0,o=!0,a(c!==!0?c:null)):r.length?u(null,r.shift()):n?u(n):i=u},sink(c){if(n)return s=null,c(n,()=>{});s=c,e3.drain(u=>{if(n)return!1;e.write(u)},u=>{e&&!e.writeEnd&&e.write(null,u||!0),a&&a(u)})(c)}}}function dD(e,t){return _C(e,r=>{e.writeEnd||e.write(null,r||!0),t&&t(r)})}function r3(e){return dD(e).source}function n3(e,t){return dD(e,t).sink}Ed.exports=_C;Ed.exports.source=r3;Ed.exports.sink=n3;Ed.exports.duplex=_C});var mD=$((fre,pD)=>{pD.exports=function(t){var r,n,o;function i(s){return function(a,c){s(a,function(u,l){if(u&&!o)return o=!0,c(null,t);u&&r?c(u):u?n=c:c(null,l)})}}return i.end=function(){return r=!0,n&&n(r),i},i}});var bC=$((pre,hD)=>{hD.exports=function(t,r,n){t(r),n&&n(r===!0?null:r)}});var Vm=$((mre,vD)=>{"use strict";var gD=bC();vD.exports=function(t,r){if(!t)return function(o,i){return o?gD(i,o,r):i(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(o){return t[o]}));var n=0;return function(o,i){if(o)return gD(i,o,r);n>=t.length?i(!0):i(null,t[n++])}}});var wD=$((hre,yD)=>{"use strict";var o3=Vm();yD.exports=function(e){return o3(Object.keys(e))}});var xC=$((gre,CD)=>{"use strict";var i3=bC();CD.exports=function(t,r){return function(n,o){if(n)return i3(o,n,r);if(t!=null){var i=t;t=null,o(null,i)}else o(!0)}}});var _D=$((vre,ED)=>{"use strict";ED.exports=function(t){var r=0;return t=t||1/0,function(n,o){if(n)return o&&o(n);if(r>t)return o(!0);o(null,r++)}}});var xD=$((yre,bD)=>{"use strict";bD.exports=function(t){return t=t||Math.random,function(r,n){return r?n&&n(r):n(null,t())}}});var PD=$((wre,SD)=>{"use strict";SD.exports=function(){return function(t,r){r(!0)}}});var TD=$((Cre,ID)=>{"use strict";ID.exports=function(t){return function(r,n){n(t)}}});var DD=$((Ere,kD)=>{"use strict";kD.exports={keys:wD(),once:xC(),values:Vm(),count:_D(),infinite:xD(),empty:PD(),error:TD()}});var su=$((_re,RD)=>{"use strict";RD.exports=function(t,r){var n,o;function i(s){if(n=s,o)return i.abort();(function a(){for(var c=!0,u=!1;c;)if(u=!1,n(null,function(l,d){if(u=!0,l=l||o){if(c=!1,r)r(l===!0?null:l);else if(l&&l!==!0)throw l}else t&&t(d)===!1||o?(c=!1,n(o||!0,r||function(){})):c||a()}),!u){c=!1;return}})()}return i.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),o=s||!0,n)return n(o,a||function(){})},i}});var OD=$((bre,AD)=>{"use strict";var s3=su();AD.exports=function(t){return s3(null,t)}});var LD=$((xre,ND)=>{"use strict";var a3=su();ND.exports=function(t){return a3(function(r){console.log(r)},t)}});var au=$((Sre,FD)=>{FD.exports=function(t){return t&&(typeof t=="string"?function(r){return r[t]}:typeof t=="object"&&typeof t.exec=="function"?function(r){var n=t.exec(r);return n&&n[0]}:t)}});var jD=$((Pre,UD)=>{"use strict";function MD(e){return e}var c3=au(),u3=su();UD.exports=function(t,r){var n=!1;return r?t=c3(t)||MD:(r=t,t=MD),u3(function(o){if(t(o))return n=!0,r(null,o),!1},function(o){n||r(o===!0?null:o,null)})}});var Wm=$((Ire,$D)=>{"use strict";var l3=su();$D.exports=function(t,r,n){n||(n=r,r=null);var o=l3(function(i){r=t(r,i)},function(i){n(i,r)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return n(s===!0?null:s);r=a,o(i)})}:o}});var qD=$((Tre,HD)=>{"use strict";var d3=Wm();HD.exports=function(t){return d3(function(r,n){return r.push(n),r},[],t)}});var VD=$((kre,BD)=>{"use strict";var f3=Wm();BD.exports=function(t){return f3(function(r,n){return r+n},"",t)}});var GD=$((Dre,WD)=>{"use strict";WD.exports={drain:su(),onEnd:OD(),log:LD(),find:jD(),reduce:Wm(),collect:qD(),concat:VD()}});var KD=$((Rre,zD)=>{"use strict";function p3(e){return e}var m3=au();zD.exports=function(t){return t?(t=m3(t),function(r){return function(n,o){r(n,function(i,s){try{s=i?null:t(s)}catch(a){return r(a,function(){return o(a)})}o(i,s)})}}):p3}});var YD=$((Are,QD)=>{"use strict";function h3(e){return e}var g3=au();QD.exports=function(t){if(!t)return h3;t=g3(t);var r=!1,n,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,r?i(a,function(){r?n=c:c(a)}):i(a,c)):i(null,function(u,l){u?c(u):o?c(o):(r=!0,t(l,function(d,f){r=!1,o?(c(o),n(o)):d?s(d,c):c(null,f)}))})}}}});var SC=$((Ore,JD)=>{var v3=au();function y3(e){return e}JD.exports=function(t){return typeof t=="object"&&typeof t.test=="function"?function(r){return t.test(r)}:v3(t)||y3}});var Gm=$((Nre,XD)=>{"use strict";var w3=SC();XD.exports=function(t){return t=w3(t),function(r){return function n(o,i){for(var s,a=!0;a;)a=!1,s=!0,r(o,function(c,u){if(!c&&!t(u))return s?a=!0:n(c,i);i(c,u)}),s=!1}}}});var eR=$((Lre,ZD)=>{"use strict";var C3=SC(),E3=Gm();ZD.exports=function(t){return t=C3(t),E3(function(r){return!t(r)})}});var rR=$((Fre,tR)=>{"use strict";tR.exports=function(t,r){var n=!1;function o(i){n||!r||(n=!0,r(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,u){c?o(c):t&&t(u),a(c,u)})}}}});var oR=$((Mre,nR)=>{"use strict";nR.exports=function(t,r){r=r||{};var n=r.last||!1,o=!1;if(typeof t=="number"){n=!0;var i=t;t=function(){return--i}}return function(s){function a(c){s(!0,function(u){n=!1,c(u||!0)})}return function(c,u){o?n?a(u):u(o):(o=c)?s(o,u):s(null,function(l,d){(o=o||l)?u(o):t(d)?u(null,d):(o=!0,n?u(null,d):a(u))})}}}});var PC=$((Ure,iR)=>{"use strict";function _3(e){return e}var b3=au(),x3=Gm();iR.exports=function(t,r){t=b3(t)||_3;var n={};return x3(function(o){var i=t(o);return n[i]?!!r:(n[i]=!0,!r)})}});var aR=$((jre,sR)=>{"use strict";var S3=PC();sR.exports=function(t){return S3(t,!0)}});var uR=$(($re,cR)=>{"use strict";var P3=Vm(),I3=xC();cR.exports=function(){return function(t){var r;return function(n,o){n?r?r(n,function(a){t(a||n,o)}):t(n,o):r?i():s();function i(){r(null,function(a,c){a===!0?s():a?t(!0,function(u){o(a)}):o(null,c)})}function s(){r=null,t(null,function(a,c){if(a)return o(a);Array.isArray(c)||c&&typeof c=="object"?c=P3(c):typeof c!="function"&&(c=I3(c)),r=c,i()})}}}}});var dR=$((Hre,lR)=>{"use strict";lR.exports={map:KD(),asyncMap:YD(),filter:Gm(),filterNot:eR(),through:rR(),take:oR(),unique:PC(),nonUnique:aR(),flatten:uR()}});var pR=$((qre,fR)=>{"use strict";fR.exports=function e(t){var r=arguments.length;if(typeof t=="function"&&t.length===1){for(var n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return e(a,c[0]);case 2:return e(a,c[0],c[1]);case 3:return e(a,c[0],c[1],c[2]);case 4:return e(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),e.apply(null,c)}}}var i=t;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<r;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var yR=$((_d,vR)=>{"use strict";var mR=DD(),hR=GD(),gR=dR();_d=vR.exports=pR();for(uo in mR)_d[uo]=mR[uo];var uo;for(uo in gR)_d[uo]=gR[uo];var uo;for(uo in hR)_d[uo]=hR[uo];var uo});var CR=$((Bre,wR)=>{var T3=mD(),IC=yR();wR.exports=function(e,t){t=t||"GOODBYE";var r=T3(t);return{source:IC(e.source,r),sink:IC(IC.filter(function(n){if(n!==t)return!0;r.end()}),e.sink)}}});var bd=$(lo=>{"use strict";var zm=qm();function k3(e){return e?Object.keys(e).length===0:!0}lo.set=function(t,r,n){let o,i;for(let s=0;s<r.length;s++){let a=r[s];t[a]=t[a]||{},o=t,i=a,t=t[a]}o[i]=n};lo.get=function(t,r){if(typeof r=="string")return t[r];let n;for(let o=0;o<r.length;o++){let i=r[o];if(n=t=t[i],t==null)return t}return n};lo.prefix=function(t,r){let n;for(let o=0;o<r.length;o++){let i=r[o];if(n=t=t[i],typeof t!="object")return t}return typeof n!="object"?!!n:!1};function D3(e,t){for(let r in t){let n=t[r];e[n]||(e[n]={}),e=e[n]}return e}function R3(e,t){(function r(n,o){let i=t[o];if(n)t.length-1===o?delete n[i]:o<t.length&&r(n[i],o+1);else return;k3(n[i])&&delete n[i]})(e,0)}function A3(e,t){for(let r in t)e[r]=t[r];return e}lo.mount=function(t,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return A3(D3(t,r),n)};lo.unmount=function(t,r){return R3(t,r)};var Km=e=>e==="source",Qm=e=>e==="sink",ER=e=>e==="duplex",O3=e=>e==="sync",N3=e=>e==="async",_R=e=>O3(e)||N3(e),L3=e=>Km(e)||Qm(e)||ER(e);lo.isRequest=_R;lo.isStream=L3;function TC(e){return function(t){t(e||!0,()=>{})}}function bR(e){return{source:zm.error(e),sink:TC(e)}}lo.errorAsStream=function(t,r){return Km(t)?zm.error(r):Qm(t)?TC(r):bR(r)};lo.errorAsStreamOrCb=function(t,r,n){return _R(t)?n(r):Km(t)?zm.error(r):Qm(t)?TC(r):n(r),bR(r)};lo.pipeToStream=function(t,r,n){Km(t)?r(n):Qm(t)?n(r):ER(t)&&zm(r,n,r)}});var kC=$((Gre,SR)=>{function xR(e){if(e.stack&&e.name&&e.message)return e.stack.substring(e.name.length+3+e.message.length).split(`
`);if(e.stack)return e.stack.split(`
`)}function F3(e,t){return e.filter(function(r){return!~t.indexOf(r)})}var Wre=SR.exports=function(e,t){if(!(e.stack&&e.name&&e.message))return console.error(new Error("stackless error")),e;var r=new Error(t),n=F3(xR(r).slice(1),xR(e)).join(`
`);return r.__proto__=e,r.stack=r.name+": "+r.message+`
`+n+`
  `+e.stack,r}});var TR=$((zre,IR)=>{"use strict";var M3=lD(),DC=fD(),U3=CR(),cu=bd(),PR=kC();IR.exports=function(t,r,n){let o=M3({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,u=s.args,l=!1,d=!1;u.push((f,p)=>{d=!0,l=!0,a(f,p)});try{t("async",c,u)}catch(f){if(l||d)throw PR(f,"no callback provided to muxrpc async funtion");a(f)}},stream(s){s.read=function(c,u){if(u)return s.write(null,u);let{name:l,type:d,args:f}=c,p,m;if(s.read=null,!cu.isStream(d))return s.write(null,new Error(`unsupported stream type: ${d}`));try{m=t(d,l,f)}catch(v){p=v}let g=DC[d==="source"?"sink":d==="sink"?"source":"duplex"](s);return cu.pipeToStream(d,g,p?cu.errorAsStream(d,p):m)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,n)){let a=n;n=null,a(s)}}}),i=U3(DC(o,()=>{}));return i=r?r(i):i,i.remoteCall=function(s,a,c,u){if(a==="emit")return o.message(c);if(!(cu.isRequest(s)||cu.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(cu.isRequest(s))return o.request({name:a,args:c},u);let l=o.stream(),d=DC[s](l,u);return l.write({name:a,args:c,type:s}),d},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw PR(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var DR=$((Kre,kR)=>{"use strict";var j3=kC(),$3=bd();function RC(e,t,r,n){for(let o in t){let i=t[o],s=r?r.concat(o):[o];if(i&&typeof i=="object"){let a=i;e[o]=RC({},a,s,n)}else{let a=i;e[o]=(...c)=>n(a,s,c)}}return e}function H3(e){if(e)throw j3(e,"callback not provided")}function q3(e,t,r,n){e=e||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:H3;if(typeof c=="function"){let u;try{u=r(i,s,a,c)}catch(l){return $3.errorAsStreamOrCb(i,l,c)}return u}else return new Promise((u,l)=>{r(i,s,a,(d,f)=>{d?l(d):u(f)})})}return n?o("async","manifest",[function(i,s){if(i)return n(i);RC(e,s,null,o),n(null,s,e)}]):RC(e,t,null,o),e}kR.exports=q3});var OR=$((Qre,AR)=>{"use strict";var Ym=bd();function RR(e){return Array.isArray(e)?e:e.split(".")}function B3(e){return e&&typeof e.pre=="function"&&typeof e.test=="function"&&typeof e.post=="function"}AR.exports=function(t){if(B3(t))return t;if(typeof t=="function")return{pre:t};let r=null,n={};function o(i){if(i.allow){r={};for(let s of i.allow)Ym.set(r,RR(s),!0)}else r=null;if(i.deny)for(let s of i.deny)Ym.set(n,RR(s),!0);else n={};return this}return t&&o(t),o.pre=i=>{if(i=Array.isArray(i)?i:[i],r&&!Ym.prefix(r,i))return new Error(`method:${i} is not in list of allowed methods`);if(n&&Ym.prefix(n,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:r,deny:n}),o}});var LR=$((Yre,NR)=>{"use strict";var V3=OR(),AC=bd();NR.exports=function(t,r,n){n=V3(n);function o(s,a){return s===AC.get(r,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let u=c.pop(),l;try{l=AC.get(t,a).apply(this,c)}catch(d){return u(d)}return u(null,l)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return AC.get(t,a).apply(this,c)}return function(a,c,u){let l=n.pre(c,u);if(l)throw l;return i.call(this,a,c,u)}}});var UR=$((Jre,MR)=>{"use strict";var W3=aD(),G3=require("events").EventEmitter,z3=TR(),K3=DR(),Q3=LR();function FR(e,t,r,n,o,i,s){let a;typeof e=="function"&&(a=e,e={}),t=t||{},e=e||{};let c=new G3;i||(i=W3);let u,l={_emit(f,p){return c&&c._emit(f,p),l},id:n},d=z3(Q3(r,t,o).bind(l),i,f=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),u)){let p=u;u=null,p(f)}});if(K3(c,e,(f,p,m,h)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(f,p,m,h)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>l.id),Object.__defineSetter__.call(c,"id",p=>{l.id=p});let f=!0;c.createStream=p=>{if(u=p,f)return f=!1,d;throw new Error("one stream per rpc")}}else c.stream=d;return c.closed=!1,c.close=function(f,p){return d.close(f,p),this},c}MR.exports=function(e,t,r){return arguments.length>3?FR.apply(this,arguments):function(n,o,i){return FR(e,t,n,i,o,r,!0)}}});var OC=$((hi,HR)=>{var Xre=pC(),Y3=EC();function jR(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function $R(e,t,r){var n,o=!1,i;function s(){i||(i=!0,r&&r(n===!0?null:n))}function a(){o||(o=!0,u(),n?s():e(n=!0,s))}function c(l){u(),n||e(n=l,s)}function u(){t.on("finish",a),t.removeListener("close",a),t.removeListener("error",c)}t.on("close",a),t.on("finish",a),t.on("error",c),process.nextTick(function(){Y3(function(l){e(null,function(d,f){if(n=n||d,d===!0)return t._isStdio?s():t.end();if(n=n||d)return jR(t),s(n);if(t._isStdio)t.write(f,function(){l()});else{var p=t.write(f);p===!1?t.once("drain",l):l()}})})})}function J3(e){var t=!1,r=!1,n;function o(){var i=e.read();if(i!==null&&n){var s=n;n=null,s(null,i)}}return e.on("readable",function(){r=!0,n&&o()}).on("end",function(){t=!0,n&&n(t)}).on("error",function(i){t=i,n&&n(t)}),function(i,s){n=s,t?s(t):r&&o()}}function Jm(e){var t=[],r=[],n,o=!1,i;function s(){for(;(t.length||n)&&r.length;)r.shift()(t.length?null:n,t.shift());!t.length&&o&&(o=!1,e.resume())}return e.on("data",function(a){t.push(a),s(),t.length&&e.pause&&(o=!0,e.pause())}),e.on("end",function(){n=!0,s()}),e.on("close",function(){n=!0,s()}),e.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let l=function(){for(;r.length;)r.shift()(a);c(a)};var u=l;if(n)return l();e.once("close",l),jR(e)}else r.push(c),s()}}var X3=Jm,Xm=function(e,t){return function(r){return $R(r,e,t)}},Zm=function(e){return Jm(e)};hi=HR.exports=function(e,t){return e.writable&&e.write?e.readable?function(r){return $R(r,e,t),Jm(e)}:Xm(e,t):Zm(e)};hi.sink=Xm;hi.source=Zm;hi.read=X3;hi.read1=Jm;hi.read2=J3;hi.duplex=function(e,t){return{source:Zm(e),sink:Xm(e,t)}};hi.transform=function(e){return function(t){var r=Zm(e);return Xm(e)(t),r}}});var BR=$((Zre,eh)=>{var Z3=require("stream");eh.exports=NC;eh.exports.source=function(e){return NC(null,e)};eh.exports.sink=function(e){return NC(e,null)};var qR=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function NC(e,t){e&&typeof e=="object"&&(t=e.source,e=e.sink);var r=[],n=[],o,i,s=new Z3;s.writable=s.readable=!0,s.write=function(g){return r.length?r.shift()(null,g):n.push(g),r.length||(i=!0),!!r.length},s.end=function(){t?n.length?h():t(o=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(g,v){n.length?(v(null,n.shift()),n.length||s.emit("drain")):((o=o||g)?v(o):r.push(v),i&&(i=!1,s.emit("drain")))};var a;e&&(a=e(s.source)),a&&!t&&(t=a);var c=[],u=[],l=!1,d=!1,f=!1;if(s.sink=function(g){t=g,qR(h)},t){s.sink(t),s.paused=!0;var p=s.on.bind(s);s.on=(g,v)=>{var w=p(g,v);return g==="data"&&s.paused&&qR(s.resume.bind(s)),w};var m=s.pipe.bind(s);s.pipe=function(g,v){var w=m(g,v);return s.paused&&s.resume(),w}}function h(){if(d=!1,!(!t||f)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(l)return s.emit("end");f=!0,t(null,function g(v,w){f=!1,s.paused?(v===!0?l=v:v?s.emit("error",v):c.push(w),d=!0):v&&(o=v)!==!0?s.emit("error",v):(o=o||v)?s.emit("end"):(s.emit("data",w),f=!0,t(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,h(),s},s.destroy=function(){!o&&t&&t(o=!0,function(){}),o=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var WR=$((ene,VR)=>{VR.exports=eG;function eG(e,t){typeof e=="function"&&(t=e,e=!1);var r=[],n,o;function i(d,f){d&&(n=d,o&&l(n)),o=f,u()}var s;function a(d){s=s||d||!0,u()}function c(d){if(!s){if(o){l(n,d);return}r.push(d)}}if(e)return{push:c,end:a,source:i,buffer:r};return i.push=c,i.end=a,i.buffer=r,i;function u(){!o||(n?l(n):!r.length&&s?l(s):r.length&&l(null,r.shift()))}function l(d,f){var p=o;if(d&&t){var m=t;t=null,m(d===!0?null:d)}o=null,p(d,f)}}});var XC=$((Doe,wA)=>{"use strict";var vA=require("child_process"),SG=1024*1024,yA={exec(e,t){vA.exec(e,{maxBuffer:2*SG,windowsHide:!0},t)},spawn(e,t,r){return vA.spawn(e,t,r)},stripLine(e,t){let r=0;for(;t-- >0;){let n=e.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?e.substring(r):e},split(e,t){let r=e.trim().split(/\s+/);return r.length>t&&(r[t-1]=r.slice(t-1).join(" ")),r},extractColumns(e,t,r){let n=e.split(/(\r\n|\n|\r)/),o=[];return r||(r=Math.max.apply(null,t)+1),n.forEach(i=>{let s=yA.split(i,r),a=[];t.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(e){let t=e.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(r=>r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return t.forEach(r=>{for(let n=0;r[n];){let o=r[n];o.startsWith(" ")?(r[n-1]+=o.trimLeft(),r.splice(n,1)):n+=1}}),t.map(r=>{let n={};return r.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();n[s]=o.slice(i+1).trim()}),n})}};wA.exports=yA});var EA=$((Roe,CA)=>{"use strict";var PG=require("os"),hh=require("fs"),qn=XC(),IG=e=>new Promise((t,r)=>{hh.existsSync(e)?t():hh.mkdir(e,n=>{n?r(n):t()})}),ZC={darwin(e){return new Promise((t,r)=>{qn.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,o,i){if(n)r(n);else{if(n=i.toString().trim(),n){r(n);return}let s=qn.stripLine(o.toString(),2),a=qn.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let u=String(c[1]).match(/\.(\d+)$/);if(u&&u[1]===String(e))return!0});a&&a[2].length?t(parseInt(a[2],10)):r(new Error(`pid of port (${e}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(e){return new Promise((t,r)=>{let n="netstat -tunlp";qn.exec(n,function(o,i,s){if(o)r(o);else{let a=s.toString().trim();a&&console.warn(a);let c=qn.stripLine(i.toString(),2),u=qn.extractColumns(c,[3,6],7).find(l=>{let d=String(l[0]).match(/:(\d+)$/);if(d&&d[1]===String(e))return!0});if(u&&u[1]){let l=u[1].split("/",1)[0];l.length?t(parseInt(l,10)):r(new Error(`pid of port (${e}) not found`))}else r(new Error(`pid of port (${e}) not found`))}})})},win32(e){return new Promise((t,r)=>{qn.exec("netstat -ano",function(n,o,i){if(n)r(n);else{if(n=i.toString().trim(),n){r(n);return}let s=qn.stripLine(o.toString(),4),a=qn.extractColumns(s,[1,4],5).find(c=>{let u=String(c[0]).match(/:(\d+)$/);if(u&&u[1]===String(e))return!0});a&&a[1].length&&parseInt(a[1],10)>0?t(parseInt(a[1],10)):r(new Error(`pid of port (${e}) not found`))}})})},android(e){return new Promise((t,r)=>{let n=PG.tmpdir()+"/.find-process",o=n+"/"+process.pid,i='netstat -tunp >> "'+o+'"';IG(n).then(()=>{qn.exec(i,()=>{hh.readFile(o,"utf8",(s,a)=>{if(hh.unlink(o,()=>{}),s)r(s);else{a=qn.stripLine(a,2);let c=qn.extractColumns(a,[3,6],7).find(u=>{let l=String(u[0]).match(/:(\d+)$/);if(l&&l[1]===String(e))return!0});if(c&&c[1]){let u=c[1].split("/",1)[0];u.length?t(parseInt(u,10)):r(new Error(`pid of port (${e}) not found`))}else r(new Error(`pid of port (${e}) not found`))}})})})})}};function TG(e){let t=process.platform;return new Promise((r,n)=>{if(!(t in ZC))return n(new Error(`platform ${t} is unsupported`));let o=ZC[t];typeof o=="string"&&(o=ZC[o]),o(e).then(r,n)})}CA.exports=TG});var SA=$((Aoe,xA)=>{"use strict";var gh=require("path"),ls=XC();function eE(e,t){return t?e&&e.match?e.match(t):!1:!0}function _A(e){let t=e.split(gh.sep),r=t[t.length-1];r&&(t[t.length-1]=r.split(" ")[0]);let n=[];for(let o of t){let i=o.indexOf(" -");if(i>=0){n.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){n.push(o.trim());break}n.push(o)}return n.join(gh.sep)}function bA(e){if(process.platform==="darwin"){let t=e.indexOf(".app/");if(t>=0)return gh.basename(e.substring(0,t))}return gh.basename(e)}var tE={darwin(e){return new Promise((t,r)=>{let n;"pid"in e?n=`ps -p ${e.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",ls.exec(n,function(o,i,s){if(o)"pid"in e?t([]):r(o);else{if(o=s.toString().trim(),o){r(o);return}let a=ls.stripLine(i.toString(),1),u=ls.extractColumns(a,[0,1,2,3,4],5).filter(l=>l[0]&&e.pid?l[0]===String(e.pid):l[4]&&e.name?eE(l[4],e.name):!!l[0]).map(l=>{let d=String(l[4]),f=_A(d);return{pid:parseInt(l[0],10),ppid:parseInt(l[1],10),uid:parseInt(l[2],10),gid:parseInt(l[3],10),name:bA(f),bin:f,cmd:l[4]}});e.strict&&e.name&&(u=u.filter(l=>l.name===e.name)),t(u)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(e){return new Promise((t,r)=>{let n="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=ls.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=ls.parseTable(o.join("")).filter(c=>{if("pid"in e)return c.ProcessId===String(e.pid);if(e.name){let u=c.Name||"";return e.strict?u===e.name||u.endsWith(".exe")&&u.slice(0,-4)===e.name:eE(c.CommandLine||u,e.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));t(a)})})},android(e){return new Promise((t,r)=>{let n="ps";ls.exec(n,function(o,i,s){if(o)"pid"in e?t([]):r(o);else{if(o=s.toString().trim(),o){r(o);return}let a=ls.stripLine(i.toString(),1),u=ls.extractColumns(a,[0,3],4).filter(l=>l[0]&&e.pid?l[0]===String(e.pid):l[1]&&e.name?eE(l[1],e.name):!!l[0]).map(l=>{let d=String(l[1]),f=_A(d);return{pid:parseInt(l[0],10),name:bA(f),bin:f,cmd:d}});e.strict&&e.name&&(u=u.filter(l=>l.name===e.name)),t(u)}})})}};function kG(e){let t=process.platform;return new Promise((r,n)=>{if(!(t in tE))return n(new Error(`platform ${t} is unsupported`));let o=tE[t];typeof o=="string"&&(o=tE[o]),o(e).then(r,n)})}xA.exports=kG});var TA=$((Ooe,IA)=>{"use strict";var DG=EA(),PA=SA(),rE={port(e,t){return DG(e,t).then(r=>rE.pid(r,t),()=>[])},pid(e,t){return PA({pid:e,strict:t})},name(e,t){return PA({name:e,strict:t})}};function RG(e,t,r){return new Promise((n,o)=>{if(!(e in rE))o(new Error(`do not support find by "${e}"`));else{let i=/^\d+$/.test(t);e==="pid"&&!i?o(new Error("pid must be a number")):e==="port"&&!i?o(new Error("port must be a number")):rE[e](t,r).then(n,o)}})}IA.exports=RG});var DA=$((Noe,kA)=>{"use strict";kA.exports=TA()});var Kn,Wt,Gt,zt,Zd,En,Fu,Mu,lg,Uu,Yo,dg=Fe(()=>{Kn="function",Wt="object",Gt="undefined",zt="prototype",Zd="hasOwnProperty",En=Object,Fu=En[zt],Mu=En.assign,lg=En.create,Uu=En.defineProperty,Yo=Fu[Zd]});function vo(e){return e===void 0&&(e=!0),(!ju||!e)&&(typeof globalThis!==Gt&&globalThis&&(ju=globalThis),typeof self!==Gt&&self&&(ju=self),typeof window!==Gt&&window&&(ju=window),typeof global!==Gt&&global&&(ju=global)),ju}function $u(e){throw new TypeError(e)}function Jo(e){var t=lg;if(t)return t(e);if(e==null)return{};var r=typeof e;r!==Wt&&r!==Kn&&$u("Object prototype may only be an Object:"+e);function n(){}return n[zt]=e,new n}var ju,i_=Fe(()=>{dg();ju=null});function yo(e,t){typeof t!==Kn&&t!==null&&$u("Class extends value "+String(t)+" is not a constructor or null"),s_(e,t);function r(){this.constructor=e}e[zt]=t===null?Jo(t):(r[zt]=t[zt],new r)}function pg(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}var xue,Sue,mK,fg,s_,rL=Fe(()=>{dg();i_();xue=(vo()||{}).Symbol,Sue=(vo()||{}).Reflect,mK=function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Fu[Zd].call(t,o)&&(e[o]=t[o])}return e},fg=Mu||mK,s_=function(e,t){return s_=En.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n[Zd](o)&&(r[o]=n[o])},s_(e,t)}});var nL=Fe(()=>{});var Yr=Fe(()=>{dg();i_();rL();nL()});var a_,oL=Fe(()=>{"use strict";a_=100});var ft,mg,c_,ef,Si,Qn,wo,u_,tf,Hu,$a,hg,gg,iL,Ha,qa,qu,Bu,Vu,rf,Jr=Fe(()=>{ft="",mg="processTelemetry",c_="priority",ef="setNextPlugin",Si="isInitialized",Qn="teardown",wo="core",u_="update",tf="disabled",Hu="_doTeardown",$a="processNext",hg="resume",gg="pause",iL="NotificationListener",Ha="add"+iL,qa="remove"+iL,qu="eventsSent",Bu="eventsDiscarded",Vu="eventsSendRequest",rf="perfEvent"});function IK(e){if(e){if(yg)return yg(e);var t=e[hK]||e[zt]||e[vg];if(t)return t}return null}function Wu(e,t){return typeof e===t}function ct(e){return e===void 0||typeof e===Gt}function Be(e){return e===null||ct(e)}function m_(e){return!Be(e)}function Xo(e,t){return!!(e&&Yo.call(e,t))}function mr(e){return!!(e&&typeof e===Wt)}function Xe(e){return!!(e&&typeof e===Kn)}function Ba(e){var t=e;return t&&Ft(t)&&(t=t.replace(xK,function(r,n){return n.toUpperCase()}),t=t.replace(SK,"_"),t=t.replace(PK,function(r,n){return"_"+n})),t}function xt(e,t){if(e)for(var r in e)Yo.call(e,r)&&t.call(e,r,e[r])}function Va(e,t){var r=!1;return e&&t&&!(r=e===t)&&(r=yK?e[aL](t):TK(e,t)),r}function TK(e,t){var r=!1,n=t?t.length:0,o=e?e.length:0;if(n&&o&&o>=n&&!(r=e===t)){for(var i=o-1,s=n-1;s>=0;s--){if(e[i]!=t[s])return!1;i--}r=!0}return r}function Gu(e,t){var r=!1;return e&&t&&!(r=e===t)&&(r=wK?e[cL](t):kK(e,t)),r}function kK(e,t){var r=!1,n=t?t.length:0;if(e&&n&&e.length>=n&&!(r=e===t)){for(var o=0;o<n;o++)if(e[o]!==t[o])return!1;r=!0}return r}function qt(e,t){return e&&t?e.indexOf(t)!==-1:!1}function zu(e){return!!(e&&p_.call(e)==="[object Date]")}function DK(e){return!!(e&&p_.call(e)==="[object Array]")}function Wa(e){return!!(e&&p_.call(e)==="[object Error]")}function Ft(e){return typeof e=="string"}function Xr(e){return typeof e=="number"}function Pi(e){return typeof e=="boolean"}function gL(e){var t=!1;if(e&&typeof e=="object"){var r=yg?yg(e):IK(e);r?(r[vg]&&Yo.call(r,vg)&&(r=r[vg]),t=typeof r===Kn&&hL.call(r)===bK):t=!0}return t}function Yn(e){if(e)return EK?e[sL]():RK(e)}function RK(e){if(e&&e.getUTCFullYear){var t=function(r){var n=String(r);return n.length===1&&(n="0"+n),n};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function ye(e,t,r){var n=e.length;try{for(var o=0;o<n&&!(o in e&&t.call(r||e,e[o],o,e)===-1);o++);}catch{}}function tr(e,t,r){if(e){if(e[uL])return e[uL](t,r);var n=e.length,o=r||0;try{for(var i=Math.max(o>=0?o:n-Math.abs(o),0);i<n;i++)if(i in e&&e[i]===t)return i}catch{}}return-1}function Ga(e,t,r){var n;if(e){if(e[lL])return e[lL](t,r);var o=e.length,i=r||e;n=new Array(o);try{for(var s=0;s<o;s++)s in e&&(n[s]=t.call(i,e[s],e))}catch{}}return n}function za(e,t,r){var n;if(e){if(e[dL])return e[dL](t,r);var o=e.length,i=0;if(arguments.length>=3)n=arguments[2];else{for(;i<o&&!(i in e);)i++;n=e[i++]}for(;i<o;)i in e&&(n=t(n,e[i],i,e)),i++}return n}function St(e){return e&&(e=vK&&e[l_]?e[l_]():e.replace?e.replace(/^\s+|\s+$/g,""):e),e}function Nr(e){var t=typeof e;if(t!==Kn&&(t!==Wt||e===null)&&$u("objKeys called on non-object"),!vL&&mL)return mL(e);var r=[];for(var n in e)e&&Yo.call(e,n)&&r.push(n);if(vL)for(var o=h_.length,i=0;i<o;i++)e&&Yo.call(e,h_[i])&&r.push(h_[i]);return r}function _n(e,t,r,n){if(pL)try{var o={enumerable:!0,configurable:!0};return r&&(o.get=r),n&&(o.set=n),pL(e,t,o),!0}catch{}return!1}function yL(e){return e}function g_(e){return d_&&xt(e,function(t,r){(ze(r)||mr(r))&&d_(r)}),Zr(e)}function rr(){var e=Date;return e.now?e.now():new e().getTime()}function Ka(e){return Wa(e)?e.name:ft}function nr(e,t,r,n,o){var i=r;return e&&(i=e[t],i!==r&&(!o||o(i))&&(!n||n(r))&&(i=r,e[t]=i)),i}function nf(e,t,r){var n;return e?(n=e[t],!n&&Be(n)&&(n=ct(r)?{}:r,e[t]=n)):n=ct(r)?{}:r,n}function Ku(e){return!e}function Qu(e){return!!e}function hr(e){throw new Error(e)}function wL(e,t){var r=null,n=null;return Xe(e)?r=e:n=e,function(){var o=arguments;if(r&&(n=r()),n)return n[t].apply(n,o)}}function y_(e,t,r){if(e&&t&&mr(e)&&mr(t)){var n=function(i){if(Ft(i)){var s=t[i];Xe(s)?(!r||r(i,!0,t,e))&&(e[i]=wL(t,i)):(!r||r(i,!1,t,e))&&(Xo(e,i)&&delete e[i],_n(e,i,function(){return t[i]},function(a){t[i]=a})||(e[i]=s))}};for(var o in t)n(o)}return e}function xs(e,t,r,n,o){e&&t&&r&&(o!==!1||ct(e[t]))&&(e[t]=wL(r,n))}function Qa(e,t,r,n){return e&&t&&mr(e)&&ze(r)&&ye(r,function(o){Ft(o)&&xs(e,o,t,o,n)}),e}function Ii(e){return e&&Mu&&(e=En(Mu({},e))),e}function Yu(e,t,r,n,o,i){var s=arguments,a=s[0]||{},c=s.length,u=!1,l=1;for(c>0&&Pi(a)&&(u=a,a=s[l]||{},l++),mr(a)||(a={});l<c;l++){var d=s[l],f=ze(d),p=mr(d);for(var m in d){var h=f&&m in d||p&&Yo.call(d,m);if(!!h){var g=d[m],v=void 0;if(u&&g&&((v=ze(g))||gL(g))){var w=a[m];v?ze(w)||(w=[]):gL(w)||(w={}),g=Yu(u,w,g)}g!==void 0&&(a[m]=g)}}}return a}var sL,aL,cL,uL,lL,dL,l_,fL,hK,vg,pL,d_,gK,mL,f_,vK,yK,wK,CK,EK,_K,p_,hL,bK,xK,SK,PK,yg,ze,vL,h_,Zr,v_,Bt=Fe(()=>{Yr();Jr();sL="toISOString",aL="endsWith",cL="startsWith",uL="indexOf",lL="map",dL="reduce",l_="trim",fL="toString",hK="__proto__",vg="constructor",pL=Uu,d_=En.freeze,gK=En.seal,mL=En.keys,f_=String[zt],vK=f_[l_],yK=f_[aL],wK=f_[cL],CK=Date[zt],EK=CK[sL],_K=Array.isArray,p_=Fu[fL],hL=Yo[fL],bK=hL.call(En),xK=/-([a-z])/g,SK=/([^\w\d_$])/g,PK=/^(\d+[\w\d_$])/,yg=Object.getPrototypeOf;ze=_K||DK;vL=!{toString:null}.propertyIsEnumerable("toString"),h_=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];Zr=d_||yL,v_=gK||yL});function Lr(e){var t={};return xt(e,function(r,n){t[r]=n,t[n]=r}),g_(t)}var wg=Fe(()=>{Bt()});var Co,CL=Fe(()=>{wg();Co=Lr({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})});function ki(e,t){return e&&xg[Ti].hasOwnProperty.call(e,t)}function IL(e){return e&&(e===xg[Ti]||e===Array[Ti])}function b_(e){return IL(e)||e===Function[Ti]}function Ya(e){var t;if(e){if(sf)return sf(e);var r=e[bL]||e[Ti]||(e[Cg]?e[Cg][Ti]:null);t=e[bg]||r,ki(e,bg)||(delete e[E_],t=e[bg]=e[E_]||e[bg],e[E_]=r)}return t}function Sg(e,t){var r=[];if(SL)r=SL(e);else for(var n in e)typeof n=="string"&&ki(e,n)&&r.push(n);if(r&&r.length>0)for(var o=0;o<r.length;o++)t(r[o])}function x_(e,t,r){return t!==Cg&&typeof e[t]===Eg&&(r||ki(e,t))}function Pg(e){throw new TypeError("DynamicProto: "+e)}function OK(e){var t={};return Sg(e,function(r){!t[r]&&x_(e,r,!1)&&(t[r]=e[r])}),t}function S_(e,t){for(var r=e.length-1;r>=0;r--)if(e[r]===t)return!0;return!1}function NK(e,t,r,n){function o(c,u,l){var d=u[l];if(d[w_]&&n){var f=c[_g]||{};f[of]!==!1&&(d=(f[u[Ju]]||{})[l]||d)}return function(){return d.apply(c,arguments)}}var i={};Sg(r,function(c){i[c]=o(t,r,c)});for(var s=Ya(e),a=[];s&&!b_(s)&&!S_(a,s);)Sg(s,function(c){!i[c]&&x_(s,c,!sf)&&(i[c]=o(t,s,c))}),a.push(s),s=Ya(s);return i}function LK(e,t,r,n){var o=null;if(e&&ki(r,Ju)){var i=e[_g]||{};if(o=(i[r[Ju]]||{})[t],o||Pg("Missing ["+t+"] "+Eg),!o[C_]&&i[of]!==!1){for(var s=!ki(e,t),a=Ya(e),c=[];s&&a&&!b_(a)&&!S_(c,a);){var u=a[t];if(u){s=u===n;break}c.push(a),a=Ya(a)}try{s&&(e[t]=o),o[C_]=1}catch{i[of]=!1}}}return o}function FK(e,t,r){var n=t[e];return n===r&&(n=Ya(t)[e]),typeof n!==Eg&&Pg("["+e+"] is not a "+Eg),n}function MK(e,t,r,n,o){function i(c,u){var l=function(){var d=LK(this,u,c,l)||FK(u,c,l);return d.apply(this,arguments)};return l[w_]=1,l}if(!IL(e)){var s=r[_g]=r[_g]||{},a=s[t]=s[t]||{};s[of]!==!1&&(s[of]=!!o),Sg(r,function(c){x_(r,c,!1)&&r[c]!==n[c]&&(a[c]=r[c],delete r[c],(!ki(e,c)||e[c]&&!e[c][w_])&&(e[c]=i(e,c)))})}}function UK(e,t){if(sf){for(var r=[],n=Ya(t);n&&!b_(n)&&!S_(r,n);){if(n===e)return!0;r.push(n),n=Ya(n)}return!1}return!0}function P_(e,t){return ki(e,Ti)?e.name||t||_L:((e||{})[Cg]||{}).name||t||_L}function st(e,t,r,n){ki(e,Ti)||Pg("theClass is an invalid class definition.");var o=e[Ti];UK(o,t)||Pg("["+P_(e)+"] is not in class hierarchy of ["+P_(t)+"]");var i=null;ki(o,Ju)?i=o[Ju]:(i=AK+P_(e,"_")+"$"+PL,PL++,o[Ju]=i);var s=st[EL],a=!!s[__];a&&n&&n[__]!==void 0&&(a=!!n[__]);var c=OK(t),u=NK(o,t,c,a);r(t,u);var l=!!sf&&!!s[xL];l&&n&&(l=!!n[xL]),MK(o,i,t,c,l!==!1)}var Cg,Ti,Eg,_g,w_,Ju,AK,C_,of,EL,_L,bL,bg,E_,__,xL,xg,sf,SL,PL,jK,gr=Fe(()=>{Cg="constructor",Ti="prototype",Eg="function",_g="_dynInstFuncs",w_="_isDynProxy",Ju="_dynClass",AK="_dynCls$",C_="_dynInstChk",of=C_,EL="_dfOpts",_L="_unknown_",bL="__proto__",bg="_dyn"+bL,E_="_dynInstProto",__="useBaseInst",xL="setInstFuncs",xg=Object,sf=xg.getPrototypeOf,SL=xg.getOwnPropertyNames,PL=0;jK={setInstFuncs:!0,useBaseInst:!0};st[EL]=jK});function AL(e,t){var r=!1;if(e){try{if(r=t in e,!r){var n=e[zt];n&&(r=t in n)}}catch{}if(!r)try{var o=new e;r=!ct(o[t])}catch{}}return r}function A_(e){RL=e}function Mt(e){var t=vo();return t&&t[e]?t[e]:e===TL&&af()?window:null}function af(){return Boolean(typeof window===Wt&&window)}function Zo(){return af()?window:Mt(TL)}function Ig(){return Boolean(typeof document===Wt&&document)}function en(){return Ig()?document:Mt($K)}function cf(){return Boolean(typeof navigator===Wt&&navigator)}function bn(){return cf()?navigator:Mt(qK)}function Tg(){return Boolean(typeof history===Wt&&history)}function O_(){return Tg()?history:Mt(BK)}function Ja(e){if(e&&RL){var t=Mt("__mockLocation");if(t)return t}return typeof location===Wt&&location?location:Mt(VK)}function uf(){return typeof console!==Gt?console:Mt(WK)}function Zu(){return Mt(GK)}function Xa(){return Boolean(typeof JSON===Wt&&JSON||Mt(kL)!==null)}function el(){return Xa()?JSON||Mt(kL):null}function lf(){return Mt(zK)}function df(){return Mt(KK)}function Di(){var e=bn();return e&&e.product?e.product===QK:!1}function Eo(){var e=bn();if(e&&(e.userAgent!==D_||k_===null)){D_=e.userAgent;var t=(D_||ft).toLowerCase();k_=qt(t,I_)||qt(t,T_)}return k_}function N_(e){if(e===void 0&&(e=null),!e){var t=bn()||{};e=t?(t.userAgent||ft).toLowerCase():ft}var r=(e||ft).toLowerCase();if(qt(r,I_)){var n=en()||{};return Math.max(parseInt(r.split(I_)[1]),n[HK]||0)}else if(qt(r,T_)){var o=parseInt(r.split(T_)[1]);if(o)return o+4}return null}function Ot(e){var t=Object[zt].toString.call(e),r=ft;return t==="[object Error]"?r="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Xa()&&(r=el().stringify(e)),t+r}function Ss(){return R_===null&&(R_=cf()&&Boolean(bn().sendBeacon)),R_}function ff(e){var t=!1;try{t=!!Mt("fetch");var r=Mt("Request");t&&e&&r&&(t=AL(r,"keepalive"))}catch{}return t}function Za(){return Xu===null&&(Xu=typeof XDomainRequest!==Gt,Xu&&tl()&&(Xu=Xu&&!AL(Mt(DL),"withCredentials"))),Xu}function tl(){var e=!1;try{var t=Mt(DL);e=!!t}catch{}return e}function OL(e,t){if(e)for(var r=0;r<e.length;r++){var n=e[r];if(n.name&&n.name===t)return n}return{}}function L_(e){var t=en();return t&&e?OL(t.querySelectorAll("meta"),e).content:null}function F_(e){var t,r=Zu();if(r){var n=r.getEntriesByType("navigation")||[];t=OL((n.length>0?n[0]:{}).serverTiming,e).description}return t}var TL,$K,HK,qK,BK,VK,WK,GK,kL,zK,KK,QK,I_,T_,DL,k_,D_,RL,Xu,R_,Jn=Fe(()=>{Yr();Jr();Bt();"use strict";TL="window",$K="document",HK="documentMode",qK="navigator",BK="history",VK="location",WK="console",GK="performance",kL="JSON",zK="crypto",KK="msCrypto",QK="ReactNative",I_="msie",T_="trident/",DL="XMLHttpRequest",k_=null,D_=null,RL=!1,Xu=null,R_=null});function YK(e,t){return function(){var r=arguments,n=U_(t);if(n){var o=n.listener;o&&o[e]&&o[e].apply(o,r)}}}function JK(){var e=Mt("Microsoft");return e&&(kg=e.ApplicationInsights),kg}function U_(e){var t=kg;return!t&&e.disableDbgExt!==!0&&(t=kg||JK()),t?t.ChromeDbgExt:null}function NL(e){if(!Dg){Dg={};for(var t=0;t<M_.length;t++)Dg[M_[t]]=YK(M_[t],e)}return Dg}var M_,kg,Dg,j_=Fe(()=>{Jn();M_=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],kg=null});function LL(e){return e?'"'+e.replace(/\"/g,ft)+'"':ft}function FL(e,t){var r=uf();if(r){var n="log";r[e]&&(n=e),Xe(r[n])&&r[n](t)}}function pf(e,t){return(e||{}).logger||new Xn(t)}function n9(e){return e||new Xn}function Ut(e,t,r,n,o,i){i===void 0&&(i=!1),(e||new Xn).throwInternal(t,r,n,o,i)}function $_(e,t){n9(e).warnToConsole(t)}var XK,ZK,e9,t9,r9,ec,Xn,Ps=Fe(()=>{Jn();gr();Bt();j_();Jr();"use strict";XK="AI (Internal): ",ZK="AI: ",e9="AITR_",t9="errorToConsole",r9="warnToConsole";ec=function(){function e(t,r,n,o){n===void 0&&(n=!1);var i=this;i.messageId=t,i.message=(n?ZK:XK)+t;var s=ft;Xa()&&(s=el().stringify(o));var a=(r?" message:"+LL(r):ft)+(o?" props:"+LL(s):ft);i.message+=a}return e.dataType="MessageData",e}();Xn=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={};st(e,this,function(o){Be(t)&&(t={}),o.consoleLoggingLevel=function(){return i("loggingLevelConsole",0)},o.telemetryLoggingLevel=function(){return i("loggingLevelTelemetry",1)},o.maxInternalMessageLimit=function(){return i("maxMessageLimit",25)},o.enableDebugExceptions=function(){return i("enableDebugExceptions",!1)},o.throwInternal=function(c,u,l,d,f){f===void 0&&(f=!1);var p=new ec(u,l,f,d);if(o.enableDebugExceptions())throw Ot(p);var m=c===1?t9:r9;if(ct(p.message))a("throw"+(c===1?"Critical":"Warning"),p);else{var h=o.consoleLoggingLevel();if(f){var g=+p.messageId;!n[g]&&h>=c&&(o[m](p.message),n[g]=!0)}else h>=c&&o[m](p.message);o.logInternalMessage(c,p)}},o.warnToConsole=function(c){FL("warn",c),a("warning",c)},o.errorToConsole=function(c){FL("error",c),a("error",c)},o.resetInternalMessageCount=function(){r=0,n={}},o.logInternalMessage=function(c,u){if(!s()){var l=!0,d=e9+u.messageId;if(n[d]?l=!1:n[d]=!0,l&&(c<=o.telemetryLoggingLevel()&&(o.queue.push(u),r++,a(c===1?"error":"warn",u)),r===o.maxInternalMessageLimit())){var f="Internal events throttle limit per PageView reached for this app.",p=new ec(23,f,!1);o.queue.push(p),c===1?o.errorToConsole(f):o.warnToConsole(f)}}};function i(c,u){var l=t[c];return Be(l)?u:l}function s(){return r>=o.maxInternalMessageLimit()}function a(c,u){var l=U_(t);l&&l.diagLog&&l.diagLog(c,u)}})}return e}()});function $t(e,t,r,n,o){if(e){var i=e;if(Xe(i.getPerfMgr)&&(i=i.getPerfMgr()),i){var s=void 0,a=i.getCtx(H_);try{if(s=i.create(t(),n,o),s){if(a&&s.setCtx&&(s.setCtx(tc.ParentContextKey,a),a.getCtx&&a.setCtx)){var c=a.getCtx(tc.ChildrenContextKey);c||(c=[],a.setCtx(tc.ChildrenContextKey,c)),c.push(s)}return i.setCtx(H_,s),r(s)}}catch(u){s&&s.setCtx&&s.setCtx("exception",u)}finally{s&&i.fire(s),i.setCtx(H_,a)}}}return r()}function q_(){return o9}var rl,o9,tc,mf,H_,hf=Fe(()=>{gr();Bt();rl="ctx",o9=null,tc=function(){function e(t,r,n){var o=this,i=!1;if(o.start=rr(),o.name=t,o.isAsync=n,o.isChildEvt=function(){return!1},Xe(r)){var s;i=_n(o,"payload",function(){return!s&&Xe(r)&&(s=r(),r=null),s})}o.getCtx=function(a){return a?a===e.ParentContextKey||a===e.ChildrenContextKey?o[a]:(o[rl]||{})[a]:null},o.setCtx=function(a,c){if(a)if(a===e.ParentContextKey)o[a]||(o.isChildEvt=function(){return!0}),o[a]=c;else if(a===e.ChildrenContextKey)o[a]=c;else{var u=o[rl]=o[rl]||{};u[a]=c}},o.complete=function(){var a=0,c=o.getCtx(e.ChildrenContextKey);if(ze(c))for(var u=0;u<c.length;u++){var l=c[u];l&&(a+=l.time)}o.time=rr()-o.start,o.exTime=o.time-a,o.complete=function(){},!i&&Xe(r)&&(o.payload=r())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),mf=function(){function e(t){this.ctx={},st(e,this,function(r){r.create=function(n,o,i){return new tc(n,o,i)},r.fire=function(n){n&&(n.complete(),t&&Xe(t.perfEvent)&&t.perfEvent(n))},r.setCtx=function(n,o){if(n){var i=r[rl]=r[rl]||{};i[n]=o}},r.getCtx=function(n){return(r[rl]||{})[n]}})}return e}(),H_="CoreUtils.doPerf"});function jL(e){e<0&&(e>>>=0),gf=123456789+e&Is,vf=987654321-e&Is,UL=!0}function $L(){try{var e=rr()&2147483647;jL((Math.random()*ML^e)+e)}catch{}}function rc(e){return e>0?Math.floor(_o()/Is*(e+1))>>>0:0}function _o(e){var t=0,r=lf()||df();return r&&r.getRandomValues&&(t=r.getRandomValues(new Uint32Array(1))[0]&Is),t===0&&Eo()&&(UL||$L(),t=yf()&Is),t===0&&(t=Math.floor(ML*Math.random()|0)),e||(t>>>=0),t}function Rg(e){e?jL(e):$L()}function yf(e){vf=36969*(vf&65535)+(vf>>16)&Is,gf=18e3*(gf&65535)+(gf>>16)&Is;var t=(vf<<16)+(gf&65535)>>>0&Is|0;return e||(t>>>=0),t}function Ts(e){e===void 0&&(e=22);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=_o()>>>0,n=0,o=ft;o.length<e;)n++,o+=t.charAt(r&63),r>>>=6,n===5&&(r=(_o()<<2&4294967295|r&3)>>>0,n=0);return o}var ML,Is,UL,gf,vf,Ag=Fe(()=>{Jn();Bt();Jr();ML=4294967296,Is=4294967295,UL=!1,gf=123456789,vf=987654321});function a9(e,t,r){if(HL)try{return HL(e,t,{value:r,enumerable:!1,configurable:!0}),!0}catch{}return!1}function BL(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType}function c9(e,t){var r=t[e.id];if(!r){r={};try{BL(t)&&(a9(t,e.id,r)||(t[e.id]=r))}catch{}}return r}function bo(e,t){return t===void 0&&(t=!1),Ba(e+s9+++(t?"."+qL:"")+i9)}function Og(e){var t={id:bo("_aiData-"+(e||"")+"."+qL),accept:function(r){return BL(r)},get:function(r,n,o,i){var s=r[t.id];return s?s[Ba(n)]:(i&&(s=c9(t,r),s[Ba(n)]=o),o)},kill:function(r,n){if(r&&r[n])try{delete r[n]}catch{}}};return t}var HL,qL,i9,s9,wf=Fe(()=>{Yr();Bt();Ag();HL=Uu,qL="2.8.4",i9="."+Ts(6),s9=0});function u9(e,t){var r=Ri[ks]||Lg[ks];return r||(r=Ri[ks]=Ri(e,t),Lg[ks]=r),r}function Fg(e){return e?e.isEnabled():!0}function l9(e){var t=e.cookieCfg=e.cookieCfg||{};if(nr(t,"domain",e.cookieDomain,m_,Be),nr(t,"path",e.cookiePath||"/",null,Be),Be(t[W_])){var r=void 0;ct(e[GL])||(r=!e[GL]),ct(e[zL])||(r=!e[zL]),t[W_]=r}return t}function Ds(e,t){var r;if(e)r=e.getCookieMgr();else if(t){var n=t.cookieCfg;n[ks]?r=n[ks]:r=Ri(t)}return r||(r=u9(t,(e||{}).logger)),r}function Ri(e,t){var r=l9(e||Lg),n=r.path||"/",o=r.domain,i=r[W_]!==!1,s={isEnabled:function(){var a=i&&xo(t),c=Lg[ks];return a&&c&&s!==c&&(a=Fg(c)),a},setEnabled:function(a){i=a!==!1},set:function(a,c,u,l,d){var f=!1;if(Fg(s)){var p={},m=St(c||ft),h=m.indexOf(";");if(h!==-1&&(m=St(c.substring(0,h)),p=YL(c.substring(h+1))),nr(p,"domain",l||o,Qu,ct),!Be(u)){var g=Eo();if(ct(p[V_])){var v=rr(),w=v+u*1e3;if(w>0){var C=new Date;C.setTime(w),nr(p,V_,JL(C,g?VL:WL)||JL(C,g?VL:WL)||ft,Qu)}}g||nr(p,"max-age",ft+u,null,ct)}var E=Ja();E&&E.protocol==="https:"&&(nr(p,"secure",null,null,ct),G_===null&&(G_=!nl((bn()||{}).userAgent)),G_&&nr(p,"SameSite","None",null,ct)),nr(p,"path",d||n,null,ct);var b=r.setCookie||ZL;b(a,XL(m,p)),f=!0}return f},get:function(a){var c=ft;return Fg(s)&&(c=(r.getCookie||d9)(a)),c},del:function(a,c){var u=!1;return Fg(s)&&(u=s.purge(a,c)),u},purge:function(a,c){var u,l=!1;if(xo(t)){var d=(u={},u.path=c||"/",u[V_]="Thu, 01 Jan 1970 00:00:01 GMT",u);Eo()||(d["max-age"]="0");var f=r.delCookie||ZL;f(a,XL(ft,d)),l=!0}return l}};return s[ks]=s,s}function xo(e){if(Ng===null){Ng=!1;try{var t=Cf||{};Ng=t[B_]!==void 0}catch(r){Ut(e,2,68,"Cannot access document.cookie - "+Ka(r),{exception:Ot(r)})}}return Ng}function YL(e){var t={};if(e&&e.length){var r=St(e).split(";");ye(r,function(n){if(n=St(n||ft),n){var o=n.indexOf("=");o===-1?t[n]=null:t[St(n.substring(0,o))]=St(n.substring(o+1))}})}return t}function JL(e,t){return Xe(e[t])?e[t]():null}function XL(e,t){var r=e||ft;return xt(t,function(n,o){r+="; "+n+(Be(o)?ft:"="+o)}),r}function d9(e){var t=ft;if(Cf){var r=Cf[B_]||ft;KL!==r&&(QL=YL(r),KL=r),t=St(QL[e]||ft)}return t}function ZL(e,t){Cf&&(Cf[B_]=e+"="+t)}function nl(e){return Ft(e)?!!(qt(e,"CPU iPhone OS 12")||qt(e,"iPad; CPU OS 12")||qt(e,"Macintosh; Intel Mac OS X 10_14")&&qt(e,"Version/")&&qt(e,"Safari")||qt(e,"Macintosh; Intel Mac OS X 10_14")&&Va(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||qt(e,"Chrome/5")||qt(e,"Chrome/6")||qt(e,"UnrealEngine")&&!qt(e,"Chrome")||qt(e,"UCBrowser/12")||qt(e,"UCBrowser/11")):!1}var VL,WL,B_,V_,W_,GL,zL,ks,Ng,G_,KL,Cf,QL,Lg,z_=Fe(()=>{Jn();Bt();Jr();Ps();VL="toGMTString",WL="toUTCString",B_="cookie",V_="expires",W_="enabled",GL="isCookieUseDisabled",zL="disableCookiesUsage",ks="_ckMgr",Ng=null,G_=null,KL=null,Cf=en(),QL={},Lg={}});function lF(e){return e&&e.replace?e.replace(/^\s*\.*|\.*\s*$/g,""):e}function jg(e,t){if(t){var r="";ze(t)?(r="",ye(t,function(o){o=lF(o),o&&(o[0]!=="."&&(o="."+o),r+=o)})):r=lF(t),r&&(r[0]!=="."&&(r="."+r),e=(e||"")+r)}var n=h9.exec(e||"")||[];return{type:n[1],ns:(n[2]||"").replace(f9,".").replace(p9,"").split(".").sort().join(".")}}function K_(e,t,r){var n=[],o=_f.get(e,Mg,{},!1),i=jg(t,r);return xt(o,function(s,a){ye(a,function(c){(!i.type||i.type===c.evtName.type)&&(!i.ns||i.ns===i.ns)&&n.push({name:c.evtName.type+(c.evtName.ns?"."+c.evtName.ns:""),handler:c.handler})})}),n}function dF(e,t,r){r===void 0&&(r=!0);var n=_f.get(e,Mg,{},r),o=n[t];return o||(o=n[t]=[]),o}function fF(e,t,r,n){e&&t&&t.type&&(e[oF]?e[oF](t.type,r,n):e[nF]&&e[nF](eF+t.type,r))}function g9(e,t,r,n){var o=!1;return e&&t&&t.type&&r&&(e[rF]?(e[rF](t.type,r,n),o=!0):e[tF]&&(e[tF](eF+t.type,r),o=!0)),o}function pF(e,t,r,n){for(var o=t.length;o--;){var i=t[o];i&&(!r.ns||r.ns===i.evtName.ns)&&(!n||n(i))&&(fF(e,i.evtName,i.handler,i.capture),t.splice(o,1))}}function v9(e,t,r){if(t.type)pF(e,dF(e,t.type),t,r);else{var n=_f.get(e,Mg,{});xt(n,function(o,i){pF(e,i,t,r)}),Nr(n).length===0&&_f.kill(e,Mg)}}function Ai(e,t){var r;return t?(ze(t)?r=[e].concat(t):r=[e,t],r=jg("xx",r).ns.split(".")):r=e,r}function nc(e,t,r,n,o){o===void 0&&(o=!1);var i=!1;if(e)try{var s=jg(t,n);if(i=g9(e,s,r,o),i&&_f.accept(e)){var a={guid:m9++,evtName:s,handler:r,capture:o};dF(e,s.type).push(a)}}catch{}return i}function oc(e,t,r,n,o){if(o===void 0&&(o=!1),e)try{var i=jg(t,n),s=!1;v9(e,i,function(a){return i.ns&&!r||a.handler===r?(s=!0,!0):!1}),s||fF(e,i,r,o)}catch{}}function ol(e,t,r,n){return n===void 0&&(n=!1),nc(e,t,r,null,n)}function il(e,t,r,n){n===void 0&&(n=!1),oc(e,t,r,null,n)}function Rs(e,t,r){var n=!1,o=Zo();o&&(n=nc(o,e,t,r),n=nc(o.body,e,t,r)||n);var i=en();return i&&(n=nc(i,e,t,r)||n),n}function $g(e,t,r){var n=Zo();n&&(oc(n,e,t,r),oc(n.body,e,t,r));var o=en();o&&oc(o,e,t,r)}function sl(e,t,r,n){var o=!1;return t&&e&&e.length>0&&ye(e,function(i){i&&(!r||tr(r,i)===-1)&&(o=Rs(i,t,n)||o)}),o}function Hg(e,t,r,n){var o=!1;return t&&e&&ze(e)&&(o=sl(e,t,r,n),!o&&r&&r.length>0&&(o=sl(e,t,null,n))),o}function As(e,t,r){e&&ze(e)&&ye(e,function(n){n&&$g(n,t,r)})}function ic(e,t,r){return Hg([aF,sF,Ug],e,t,r)}function bf(e,t){As([aF,sF,Ug],e,t)}function al(e,t,r){function n(s){var a=en();e&&a&&a.visibilityState==="hidden"&&e(s)}var o=Ai(cF,r),i=sl([Ug],e,t,o);return(!t||tr(t,Ef)===-1)&&(i=sl([Ef],n,t,o)||i),!i&&t&&(i=al(e,null,r)),i}function xf(e,t){var r=Ai(cF,t);As([Ug],e,r),As([Ef],null,r)}function cl(e,t,r){function n(s){var a=en();e&&a&&a.visibilityState==="visible"&&e(s)}var o=Ai(uF,r),i=sl([iF],e,t,o);return i=sl([Ef],n,t,o)||i,!i&&t&&(i=cl(e,null,r)),i}function Sf(e,t){var r=Ai(uF,t);As([iF],e,r),As([Ef],null,r)}var eF,tF,rF,nF,oF,Mg,Ef,Ug,iF,sF,aF,cF,uF,f9,p9,m9,_f,h9,Q_=Fe(()=>{wf();Jn();Bt();eF="on",tF="attachEvent",rF="addEventListener",nF="detachEvent",oF="removeEventListener",Mg="events",Ef="visibilitychange",Ug="pagehide",iF="pageshow",sF="unload",aF="beforeunload",cF=bo("aiEvtPageHide"),uF=bo("aiEvtPageShow"),f9=/\.[\.]+/g,p9=/[\.]+$/,m9=1,_f=Og("events"),h9=/^([^.]*)(?:\.(.+)|)/});function ul(){function e(){return rc(15)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(y9,function(t){var r=e()|0,n=t==="x"?r:r&3|8;return n.toString(16)})}function ll(){var e=Zu();return e&&e.now?e.now():rr()}function Os(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t=ft,r,n=0;n<4;n++)r=_o(),t+=e[r&15]+e[r>>4&15]+e[r>>8&15]+e[r>>12&15]+e[r>>16&15]+e[r>>20&15]+e[r>>24&15]+e[r>>28&15];var o=e[8+(_o()&3)|0];return t.substr(0,8)+t.substr(9,4)+"4"+t.substr(13,3)+o+t.substr(16,3)+t.substr(19,12)}var y9,Y_,J_=Fe(()=>{Jn();Bt();Q_();Ag();Jr();"use strict";y9=/[xy]/g,Y_={Attach:ol,AttachEvent:ol,Detach:il,DetachEvent:il}});function Oi(e,t,r){return e&&e.length===t&&e!==r?!!e.match(/^[\da-f]*$/):!1}function hF(e,t,r){return Oi(e,t)?e:r}function gF(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function eb(e,t,r,n){return{version:Oi(n,2,Z_)?n:X_,traceId:dl(e)?e:Os(),spanId:fl(t)?t:Os().substr(0,16),traceFlags:r>=0&&r<=255?r:1}}function Pf(e){if(!e||(ze(e)&&(e=e[0]||""),!e||!Ft(e)||e.length>8192))return null;var t=w9.exec(St(e));return!t||t[1]===Z_||t[2]===qg||t[3]===Bg?null:{version:t[1],traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}function dl(e){return Oi(e,32,qg)}function fl(e){return Oi(e,16,Bg)}function Vg(e){return!(!e||!Oi(e.version,2,Z_)||!Oi(e.traceId,32,qg)||!Oi(e.spanId,16,Bg)||!Oi(gF(e.traceFlags),2))}function tb(e){return Vg(e)?(e.traceFlags&mF)===mF:!1}function rb(e){if(e){var t=gF(e.traceFlags);Oi(t,2)||(t="01");var r=e.version||X_;return r!=="00"&&r!=="ff"&&(r=X_),"".concat(r,"-").concat(hF(e.traceId,32,qg),"-").concat(hF(e.spanId,16,Bg),"-").concat(t)}return""}function nb(){var e="traceparent",t=Pf(L_(e));return t||(t=Pf(F_(e))),t}var w9,X_,Z_,qg,Bg,mF,ob=Fe(()=>{J_();Jn();Bt();w9=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,X_="00",Z_="ff",qg="00000000000000000000000000000000",Bg="0000000000000000",mF=1});function Ni(e){return C9.get(e,"state",{},!0)}function Wg(e,t){for(var r=[],n=null,o=e.getNext(),i;o;){var s=o.getPlugin();if(s){n&&Xe(n[ef])&&Xe(s[mg])&&n[ef](s);var a=!1;Xe(s[Si])?a=s[Si]():(i=Ni(s),a=i[Si]),a||r.push(s),n=s,o=o.getNext()}}ye(r,function(c){var u=e.core();c.initialize(e.getCfg(),u,t,e.getNext()),i=Ni(c),!c[wo]&&!i[wo]&&(i[wo]=u),i[Si]=!0,delete i[Qn]})}function Gg(e){return e.sort(function(t,r){var n=0;if(r){var o=Xe(r[mg]);Xe(t[mg])?n=o?t[c_]-r[c_]:1:o&&(n=-1)}else n=t?1:-1;return n})}function vF(e){var t={};return{getName:function(){return t.name},setName:function(r){e&&e.setName(r),t.name=r},getTraceId:function(){return t.traceId},setTraceId:function(r){e&&e.setTraceId(r),dl(r)&&(t.traceId=r)},getSpanId:function(){return t.spanId},setSpanId:function(r){e&&e.setSpanId(r),fl(r)&&(t.spanId=r)},getTraceFlags:function(){return t.traceFlags},setTraceFlags:function(r){e&&e.setTraceFlags(r),t.traceFlags=r}}}var C9,zg=Fe(()=>{Bt();Jr();wf();ob();"use strict";C9=Og("plugin")});function _9(e,t,r){for(;e;){if(e.getPlugin()===r)return e;e=e.getNext()}return ei([r],t.config||{},t)}function ib(e,t,r,n){var o=null,i=[];n!==null&&(o=n?_9(e,r,n):e);var s={_next:c,ctx:{core:function(){return r},diagLog:function(){return pf(r,t)},getCfg:function(){return t},getExtCfg:u,getConfig:l,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(f){o=f},iterate:d,onComplete:a}};function a(f,p){for(var m=[],h=2;h<arguments.length;h++)m[h-2]=arguments[h];f&&i.push({func:f,self:ct(p)?s.ctx:p,args:m})}function c(){var f=o;if(o=f?f.getNext():null,!f){var p=i;p&&p.length>0&&(ye(p,function(m){try{m.func.call(m.self,m.args)}catch(h){Ut(r.logger,2,73,"Unexpected Exception during onComplete - "+Ot(h))}}),i=[])}return f}function u(f,p,m){p===void 0&&(p={}),m===void 0&&(m=0);var h;if(t){var g=t.extensionConfig;g&&f&&(h=g[f])}if(!h)h=p;else if(mr(p)&&m!==0){var v=Yu(!0,p,h);t&&m===2&&xt(p,function(w){if(Be(v[w])){var C=t[w];Be(C)||(v[w]=C)}}),h=v}return h}function l(f,p,m){m===void 0&&(m=!1);var h,g=u(f,null);return g&&!Be(g[p])?h=g[p]:t&&!Be(t[p])&&(h=t[p]),Be(h)?m:h}function d(f){for(var p;p=s._next();){var m=p.getPlugin();m&&f(m)}}return s}function tn(e,t,r,n){var o=ib(e,t,r,n),i=o.ctx;function s(c){var u=o._next();return u&&u.processTelemetry(c,i),!u}function a(c,u){return c===void 0&&(c=null),ze(c)&&(c=ei(c,t,r,u)),tn(c||i.getNext(),t,r,u)}return i.processNext=s,i.createNew=a,i}function pl(e,t,r){var n=t.config||{},o=ib(e,n,t,r),i=o.ctx;function s(c){var u=o._next();return u&&u.unload(i,c),!u}function a(c,u){return c===void 0&&(c=null),ze(c)&&(c=ei(c,n,t,u)),pl(c||i.getNext(),t,u)}return i.processNext=s,i.createNew=a,i}function If(e,t,r){var n=t.config||{},o=ib(e,n,t,r),i=o.ctx;function s(c){return i.iterate(function(u){Xe(u.update)&&u.update(i,c)})}function a(c,u){return c===void 0&&(c=null),ze(c)&&(c=ei(c,n,t,u)),If(c||i.getNext(),t,u)}return i.processNext=s,i.createNew=a,i}function ei(e,t,r,n){var o=null,i=!n;if(ze(e)&&e.length>0){var s=null;ye(e,function(a){if(!i&&n===a&&(i=!0),i&&a&&Xe(a.processTelemetry)){var c=b9(a,t,r);o||(o=c),s&&s._setNext(c),s=c}})}return n&&!o?ei([n],t,r):o}function b9(e,t,r){var n=null,o=Xe(e.processTelemetry),i=Xe(e.setNextPlugin),s;e?s=e.identifier+"-"+e.priority+"-"+CF++:s="Unknown-0-"+CF++;var a={getPlugin:function(){return e},getNext:function(){return n},processTelemetry:l,unload:d,update:f,_id:s,_setNext:function(p){n=p}};function c(){var p;return e&&Xe(e[wF])&&(p=e[wF]()),p||(p=tn(a,t,r)),p}function u(p,m,h,g,v){var w=!1,C=e?e.identifier:E9,E=p[yF];return E||(E=p[yF]={}),p.setNext(n),e&&$t(p[wo](),function(){return C+":"+h},function(){E[s]=!0;try{var b=n?n._id:ft;b&&(E[b]=!1),w=m(p)}catch(T){var I=n?E[n._id]:!0;I&&(w=!0),(!n||!I)&&Ut(p.diagLog(),1,73,"Plugin ["+C+"] failed during "+h+" - "+Ot(T)+", run flags: "+Ot(E))}},g,v),w}function l(p,m){m=m||c();function h(g){if(!e||!o)return!1;var v=Ni(e);return v.teardown||v[tf]?!1:(i&&e.setNextPlugin(n),e.processTelemetry(p,g),!0)}u(m,h,"processTelemetry",function(){return{item:p}},!p.sync)||m.processNext(p)}function d(p,m){function h(){var g=!1;if(e){var v=Ni(e),w=e[wo]||v.core;e&&(!w||w===p[wo]())&&!v[Qn]&&(v[wo]=null,v[Qn]=!0,v[Si]=!1,e[Qn]&&e[Qn](p,m)===!0&&(g=!0))}return g}u(p,h,"unload",function(){},m.isAsync)||p.processNext(m)}function f(p,m){function h(){var g=!1;if(e){var v=Ni(e),w=e[wo]||v.core;e&&(!w||w===p[wo]())&&!v[Qn]&&e[u_]&&e[u_](p,m)===!0&&(g=!0)}return g}u(p,h,"update",function(){},!1)||p.processNext(m)}return Zr(a)}var E9,yF,wF,CF,sb,Tf=Fe(()=>{Ps();Bt();hf();Jn();Jr();zg();"use strict";E9="TelemetryPluginChain",yF="_hasRun",wF="_getTelCtx",CF=0;sb=function(){function e(t,r,n,o){var i=this,s=tn(t,r,n,o);Qa(i,s,Nr(s))}return e}()});var EF,Kg,ab=Fe(()=>{EF="iKey",Kg="extensionConfig"});function _F(e,t,r,n){t&&ze(t)&&t.length>0&&(t=t.sort(function(o,i){return o.priority-i.priority}),ye(t,function(o){o.priority<kf&&hr(x9+o.identifier)}),e.push({queue:Zr(t),chain:ei(t,r,n)}))}function bF(e,t){var r;function n(){return tn(null,t.config,t,null)}function o(l,d,f,p){var m=l?l.length+1:1;function h(){m--,m===0&&(p&&p(),p=null)}m>0&&ye(l,function(g){if(g&&g.queue.length>0){var v=g.chain,w=d.createNew(v);w.onComplete(h),f(w)}else m--}),h()}function i(l,d){var f=d||{reason:0};return o(e,l,function(p){p[$a](f)},function(){l[$a](f)}),!0}function s(l,d){var f=d||{reason:0,isAsync:!1};return o(e,l,function(p){p[$a](f)},function(){l[$a](f),c=!1}),!0}function a(l){var d=null;return e&&e.length>0&&ye(e,function(f){if(f&&f.queue.length>0&&(ye(f.queue,function(p){if(p.identifier===l)return d=p,-1}),d))return-1}),d}var c=!1,u=(r={identifier:"ChannelControllerPlugin",priority:kf,initialize:function(l,d,f,p){c=!0,ye(e,function(m){m&&m.queue.length>0&&Wg(tn(m.chain,l,d),f)})},isInitialized:function(){return c},processTelemetry:function(l,d){o(e,d||n(),function(f){f[$a](l)},function(){d[$a](l)})},update:i},r[gg]=function(){o(e,n(),function(l){l.iterate(function(d){d[gg]&&d[gg]()})},null)},r[hg]=function(){o(e,n(),function(l){l.iterate(function(d){d[hg]&&d[hg]()})},null)},r[Qn]=s,r.getChannel=a,r.flush=function(l,d,f,p){var m=1,h=!1,g=null;p=p||5e3;function v(){m--,h&&m===0&&(g&&(clearTimeout(g),g=null),d&&d(h),d=null)}return o(e,n(),function(w){w.iterate(function(C){if(C.flush){m++;var E=!1;C.flush(l,function(){E=!0,v()},f)||E||(l&&g==null?g=setTimeout(function(){g=null,v()},p):v())}})},function(){h=!0,v()}),!0},r._setQueue=function(l){e=l},r);return u}function xF(e,t,r,n){var o=[];if(e&&ye(e,function(s){return _F(o,s,r,n)}),t){var i=[];ye(t,function(s){s.priority>kf&&i.push(s)}),_F(o,i,r,n)}return o}var kf,x9,SF=Fe(()=>{Bt();Jr();Tf();zg();kf=500,x9="Channel has invalid priority - "});function sc(){var e=[];function t(n){n&&e.push(n)}function r(n,o){ye(e,function(i){try{i(n,o)}catch(s){Ut(n.diagLog(),2,73,"Unexpected error calling unload handler - "+Ot(s))}}),e=[]}return{add:t,run:r}}var Qg=Fe(()=>{Ps();Jn();Bt()});var Ns,ac,ub=Fe(()=>{gr();Tf();Bt();ab();Qg();Jr();"use strict";Ns="getPlugin",ac=function(){function e(){var t=this,r,n,o,i,s;u(),st(e,t,function(l){l.initialize=function(d,f,p,m){c(d,f,m),r=!0},l.teardown=function(d,f){var p=l.core;if(!p||d&&p!==d.core())return;var m,h=!1,g=d||pl(null,p,o&&o[Ns]?o[Ns]():o),v=f||{reason:0,isAsync:!1};function w(){h||(h=!0,i.run(g,f),ye(s,function(C){C.rm()}),s=[],m===!0&&g.processNext(v),u())}return!l[Hu]||l[Hu](g,v,w)!==!0?w():m=!0,m},l.update=function(d,f){var p=l.core;if(!p||d&&p!==d.core())return;var m,h=!1,g=d||If(null,p,o&&o[Ns]?o[Ns]():o),v=f||{reason:0};function w(){h||(h=!0,c(g.getCfg(),g.core(),g.getNext()))}return!l._doUpdate||l._doUpdate(g,v,w)!==!0?w():m=!0,m},l._addHook=function(d){d&&(ze(d)?s=s.concat(d):s.push(d))},xs(l,"_addUnloadCb",function(){return i},"add")}),t.diagLog=function(l){return a(l).diagLog()},t[Si]=function(){return r},t.setInitialized=function(l){r=l},t[ef]=function(l){o=l},t.processNext=function(l,d){d?d.processNext(l):o&&Xe(o.processTelemetry)&&o.processTelemetry(l,null)},t._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var f=n||tn(null,{},t.core);o&&o[Ns]?d=f.createNew(null,o[Ns]):d=f.createNew(null,o)}return d}function c(l,d,f){l&&nr(l,Kg,[],null,Be),!f&&d&&(f=d.getProcessTelContext().getNext());var p=o;o&&o[Ns]&&(p=o[Ns]()),t.core=d,n=tn(f,l,d,p)}function u(){r=!1,t.core=null,n=null,o=null,s=[],i=sc()}}return e}()});var PF,IF=Fe(()=>{Yr();gr();ub();Ps();Jn();Bt();Jr();PF=function(e){yo(t,e);function t(){var r=e.call(this)||this;r.identifier="TelemetryInitializerPlugin",r.priority=199;var n,o;i(),st(t,r,function(s,a){s.addTelemetryInitializer=function(c){var u={id:n++,fn:c};o.push(u);var l={remove:function(){ye(o,function(d,f){if(d.id===u.id)return o.splice(f,1),-1})}};return l},s.processTelemetry=function(c,u){for(var l=!1,d=o.length,f=0;f<d;++f){var p=o[f];if(p)try{if(p.fn.apply(null,[c])===!1){l=!0;break}}catch(m){Ut(u.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Ka(m),{exception:Ot(m)},!0)}}l||s.processNext(c,u)},s[Hu]=function(){i()}});function i(){n=0,o=[]}return r}return t}(ac)});function I9(e,t){return new mf(t)}function T9(e,t,r){var n=[],o={};return ye(r,function(i){(Be(i)||Be(i.initialize))&&hr(TF);var s=i.priority,a=i.identifier;i&&s&&(Be(o[s])?o[s]=a:$_(e,"Two extensions have same priority #"+s+" - "+o[s]+", "+a)),(!s||s<t)&&n.push(i)}),{all:r,core:n}}function RF(e,t){var r=!1;return ye(t,function(n){if(n===e)return r=!0,-1}),r}function k9(){var e;return Jo((e={},e[Ha]=function(t){},e[qa]=function(t){},e[qu]=function(t){},e[Bu]=function(t,r){},e[Vu]=function(t,r){},e))}var TF,kF,DF,S9,P9,cc,lb=Fe(()=>{Yr();Yr();gr();Tf();zg();hf();z_();Bt();ab();Ps();j_();SF();IF();wf();Qg();Jr();"use strict";TF="Plugins must provide initialize method",kF="_notificationManager",DF="SDK is still unloading...",S9="SDK is not initialized",P9={loggingLevelConsole:1};cc=function(){function e(){var t,r,n,o,i,s,a,c,u,l,d,f,p,m,h,g,v,w,C,E=0;st(e,this,function(b){I(),b.isInitialized=function(){return t},b.initialize=function(D,j,K,Y){p&&hr(DF),b.isInitialized()&&hr("Core should not be initialized more than once"),(!D||Be(D.instrumentationKey))&&hr("Please provide instrumentation key"),n=Y,b[kF]=Y,b.config=D||{},Q(D),ee(D),D.extensions=Be(D.extensions)?[]:D.extensions,ne(D),K&&(b.logger=K),c=[],c.push.apply(c,pg(pg([],j,!1),D.extensions,!1)),d=(D||{}).channels,P(D,null),(!f||f.length===0)&&hr("No channels available"),t=!0,b.releaseQueue()},b.getTransmissionControls=function(){var D=[];return f&&ye(f,function(j){D.push(j.queue)}),Zr(D)},b.track=function(D){nr(D,EF,b.config.instrumentationKey,null,Ku),nr(D,"time",Yn(new Date),null,Ku),nr(D,"ver","4.0",null,Be),!p&&b.isInitialized()?T().processNext(D):r.push(D)},b.getProcessTelContext=T,b.getNotifyMgr=function(){return n||(n=k9(),b[kF]=n),n},b[Ha]=function(D){n&&n[Ha](D)},b[qa]=function(D){n&&n[qa](D)},b.getCookieMgr=function(){return s||(s=Ri(b.config,b.logger)),s},b.setCookieMgr=function(D){s=D},b.getPerfMgr=function(){return!o&&!i&&b.config&&b.config.enablePerfMgr&&Xe(b.config.createPerfMgr)&&(i=b.config.createPerfMgr(b,b.getNotifyMgr())),o||i||q_()},b.setPerfMgr=function(D){o=D},b.eventCnt=function(){return r.length},b.releaseQueue=function(){if(t&&r.length>0){var D=r;r=[],ye(D,function(j){T().processNext(j)})}},b.pollInternalLogs=function(D){h=D||null;var j=b.config.diagnosticLogInterval;return(!j||!(j>0))&&(j=1e4),E&&clearInterval(E),E=setInterval(function(){N()},j),E},b.stopPollingInternalLogs=function(){E&&(clearInterval(E),E=0,N())},Qa(b,function(){return m},["addTelemetryInitializer"]),b.unload=function(D,j,K){D===void 0&&(D=!0),t||hr(S9),p&&hr(DF);var Y={reason:50,isAsync:D,flushComplete:!1},Z=pl(k(),b);Z.onComplete(function(){I(),j&&j(Y)},b);function me(Ee){Y.flushComplete=Ee,p=!0,v.run(Z,Y),b.stopPollingInternalLogs(),Z.processNext(Y)}z(D,me,6,K)||me(!1)},b.getPlugin=S,b.addPlugin=function(D,j,K,Y){if(!D){Y&&Y(!1),L(TF);return}var Z=S(D.identifier);if(Z&&!j){Y&&Y(!1),L("Plugin ["+D.identifier+"] is already loaded!");return}var me={reason:16};function Ee(Ce){c.push(D),me.added=[D],P(b.config,me),Y&&Y(!0)}if(Z){var _e=[Z.plugin],Ie={reason:2,isAsync:!!K};A(_e,Ie,function(Ce){Ce?(me.removed=_e,me.reason|=32,Ee(!0)):Y&&Y(!1)})}else Ee(!1)},b.evtNamespace=function(){return g},b.flush=z,b.getTraceCtx=function(D){return C||(C=vF()),C},b.setTraceCtx=function(D){C=D||null},xs(b,"addUnloadCb",function(){return v},"add");function I(){t=!1,b.config=Yu(!0,{},P9),b.logger=new Xn(b.config),b._extensions=[],m=new PF,r=[],n=null,o=null,i=null,s=null,a=null,u=null,c=[],l=null,d=null,f=null,p=!1,h=null,g=bo("AIBaseCore",!0),v=sc(),C=null}function T(){return tn(k(),b.config,b)}function P(D,j){var K=T9(b.logger,kf,c);u=K.core,a=null;var Y=K.all;if(f=Zr(xF(d,Y,D,b)),l){var Z=tr(Y,l);Z!==-1&&Y.splice(Z,1),Z=tr(u,l),Z!==-1&&u.splice(Z,1),l._setQueue(f)}else l=bF(f,b);Y.push(l),u.push(l),b._extensions=Gg(Y),l.initialize(D,b,Y),Wg(T(),Y),b._extensions=Zr(Gg(u||[])).slice(),j&&U(j)}function S(D){var j=null,K=null;return ye(b._extensions,function(Y){if(Y.identifier===D&&Y!==l&&Y!==m)return K=Y,-1}),!K&&l&&(K=l.getChannel(D)),K&&(j={plugin:K,setEnabled:function(Y){Ni(K)[tf]=!Y},isEnabled:function(){var Y=Ni(K);return!Y[Qn]&&!Y[tf]},remove:function(Y,Z){Y===void 0&&(Y=!0);var me=[K],Ee={reason:1,isAsync:Y};A(me,Ee,function(_e){_e&&P(b.config,{reason:32,removed:me}),Z&&Z(_e)})}}),j}function k(){if(!a){var D=(u||[]).slice();tr(D,m)===-1&&D.push(m),a=ei(Gg(D),b.config,b)}return a}function A(D,j,K){if(D&&D.length>0){var Y=ei(D,b.config,b),Z=pl(Y,b);Z.onComplete(function(){var me=!1,Ee=[];ye(c,function(Ie,Ce){RF(Ie,D)?me=!0:Ee.push(Ie)}),c=Ee;var _e=[];d&&(ye(d,function(Ie,Ce){var ht=[];ye(Ie,function(wt){RF(wt,D)?me=!0:ht.push(wt)}),_e.push(ht)}),d=_e),K&&K(me)}),Z.processNext(j)}else K(!1)}function N(){var D=b.logger?b.logger.queue:[];D&&(ye(D,function(j){var K={name:h||"InternalMessageId: "+j.messageId,iKey:b.config.instrumentationKey,time:Yn(new Date),baseType:ec.dataType,baseData:{message:j.message}};b.track(K)}),D.length=0)}function z(D,j,K,Y){return l?l.flush(D,j,K||6,Y):(j&&j(!1),!0)}function Q(D){D.disableDbgExt===!0&&w&&(n[qa](w),w=null),n&&!w&&D.disableDbgExt!==!0&&(w=NL(D),n[Ha](w))}function ee(D){!D.enablePerfMgr&&i&&(i=null),D.enablePerfMgr&&nr(b.config,"createPerfMgr",I9)}function ne(D){var j=nf(D,Kg);j.NotificationManager=n}function U(D){var j=If(k(),b);(!b._updateHook||b._updateHook(j,D)!==!0)&&j.processNext(D)}function L(D){var j=b.logger;j?Ut(j,2,73,D):hr(D)}})}return e}()});function Yg(e,t,r,n){ye(e,function(o){if(o&&o[t])if(r)setTimeout(function(){return n(o)},0);else try{n(o)}catch{}})}var Df,db=Fe(()=>{gr();Bt();Jr();Df=function(){function e(t){this.listeners=[];var r=!!(t||{}).perfEvtsSendAll;st(e,this,function(n){n[Ha]=function(o){n.listeners.push(o)},n[qa]=function(o){for(var i=tr(n.listeners,o);i>-1;)n.listeners.splice(i,1),i=tr(n.listeners,o)},n[qu]=function(o){Yg(n.listeners,qu,!0,function(i){i[qu](o)})},n[Bu]=function(o,i){Yg(n.listeners,Bu,!0,function(s){s[Bu](o,i)})},n[Vu]=function(o,i){Yg(n.listeners,Vu,i,function(s){s[Vu](o,i)})},n[rf]=function(o){o&&(r||!o.isChildEvt())&&Yg(n.listeners,rf,!1,function(i){o.isAsync?setTimeout(function(){return i[rf](o)},0):i[rf](o)})}})}return e}()});var Rf,AF=Fe(()=>{Yr();lb();db();hf();Ps();gr();Bt();Rf=function(e){yo(t,e);function t(){var r=e.call(this)||this;return st(t,r,function(n,o){n.initialize=function(a,c,u,l){o.initialize(a,c,u||new Xn(a),l||new Df(a))},n.track=function(a){$t(n.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){a===null&&(s(a),hr("Invalid telemetry item")),i(a),o.track(a)},function(){return{item:a}},!a.sync)};function i(a){Be(a.name)&&(s(a),hr("telemetry name required"))}function s(a){var c=n.getNotifyMgr();c&&c.eventsDiscarded([a],2)}}),r}return t}(cc)});var fb,Af,OF=Fe(()=>{wg();fb=Lr({CRITICAL:1,WARNING:2}),Af=Lr({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106})});var Li=Fe(()=>{oL();CL();AF();lb();ub();Ag();J_();Bt();wg();Q_();Jn();Yr();db();hf();Ps();Tf();OF();z_();wf();Qg();ob()});var NF,LF,FF,MF,UF,jF,$F=Fe(()=>{Yr();Li();NF=Lr({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),LF=Lr({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),FF=Lr({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),MF=Lr({Normal:1,Critical:2}),UF=Lr({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),jF=Zr(fg(fg({},Af),Lr({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})))});function Kt(e){return!(e===""||Be(e))}function Nf(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return""}function hb(){return pb===null&&(pb=!ct(Uint8Array)&&!N9()&&!Di()),pb}function Lf(e){return!!(e&&Xr(e)&&e>=1&&e<=4)}function Ff(e,t,r){if(!t&&!Kt(t)||typeof e!="string")return null;var n=typeof t;if(n==="string"||n==="number"||n==="boolean"||ze(t))t={value:t};else if(n==="object"&&!t.hasOwnProperty("value"))t={value:r?JSON.stringify(t):t};else if(Be(t.value)||t.value===""||!Ft(t.value)&&!Xr(t.value)&&!Pi(t.value)&&!ze(t.value))return null;if(ze(t.value)&&!Xg(t.value))return null;if(!Be(t.kind)){if(ze(t.value)||!ml(t.kind))return null;t.value=t.value.toString()}return t}function Mf(e,t,r){var n=-1;if(!ct(e))if(t>0&&(t===32?n=1<<13:t<=13&&(n=t<<5)),O9(r))n===-1&&(n=0),n|=r;else{var o=A9[So(e)]||-1;n!==-1&&o!==-1?n|=o:o===6&&(n=o)}return n}function gb(){Ds(null).setEnabled(!1)}function vb(e,t,r){xo(null)&&Ds(null).set(e,t,r*86400,null,"/")}function yb(e){xo(null)&&Ds(null).del(e)}function wb(e){return xo(null)?Cb(Ds(null),e):""}function Cb(e,t,r){r===void 0&&(r=!0);var n;return e&&(n=e.get(t),r&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||""}function Eb(e){e===void 0&&(e="D");var t=ul();return e==="B"?t="{"+t+"}":e==="P"?t="("+t+")":e==="N"&&(t=t.replace(/-/g,"")),t}function Ls(e,t,r,n,o){var i={},s=!1,a=0,c=arguments.length,u=Object[zt],l=arguments;for(u.toString.call(l[0])==="[object Boolean]"&&(s=l[0],a++);a<c;a++){var e=l[a];xt(e,function(f,p){s&&p&&mr(p)?ze(p)?(i[f]=i[f]||[],ye(p,function(m,h){m&&mr(m)?i[f][h]=Ls(!0,i[f][h],m):i[f][h]=m})):i[f]=Ls(!0,i[f],p):i[f]=p})}return i}function ml(e){return e===0||e>0&&e<=13||e===32}function O9(e){return e>=0&&e<=9}function N9(){var e=bn();if(!ct(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}function Xg(e){return e.length>0}function hl(e,t){var r=e;r.timings=r.timings||{},r.timings.processTelemetryStart=r.timings.processTelemetryStart||{},r.timings.processTelemetryStart[t]=Fr()}function So(e){var t=0;if(e!=null){var r=typeof e;r==="string"?t=1:r==="number"?t=2:r==="boolean"?t=3:r===Wt&&(t=4,ze(e)?(t=4096,e.length>0&&(t|=So(e[0]))):Xo(e,"value")&&(t=8192|So(e.value)))}return t}function Zg(){return!!Mt("chrome")}function ev(e,t,r,n,o,i){n===void 0&&(n=!1),o===void 0&&(o=!1);function s(c,u,l){try{c[u]=l}catch{}}var a=new XMLHttpRequest;return n&&s(a,D9,n),r&&s(a,HF,r),a.open(e,t,!o),r&&s(a,HF,r),!o&&i&&s(a,R9,i),a}var Fi,Jg,Mi,D9,HF,R9,A9,pb,Of,mb,Fr,qF,BF,Uf=Fe(()=>{Yr();Li();Jg="3.2.3",Mi="1DS-Web-JS-"+Jg,D9="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",HF="withCredentials",R9="timeout",A9=(Fi={},Fi[0]=0,Fi[2]=6,Fi[1]=1,Fi[3]=7,Fi[4096|2]=6,Fi[4096|1]=1,Fi[4096|3]=7,Fi),pb=null,Of=Boolean(en()),mb=Boolean(Zo());Fr=ll;qF={Version:Jg,FullVersionString:Mi,strUndefined:Gt,strObject:Wt,Undefined:Gt,arrForEach:ye,arrIndexOf:tr,arrMap:Ga,arrReduce:za,objKeys:Nr,toISOString:Yn,isReactNative:Di,isString:Ft,isNumber:Xr,isBoolean:Pi,isFunction:Xe,isArray:ze,isObject:mr,strTrim:St,isDocumentObjectAvailable:Of,isWindowObjectAvailable:mb,isValueAssigned:Kt,getTenantId:Nf,isBeaconsSupported:Ss,isUint8ArrayAvailable:hb,isLatency:Lf,sanitizeProperty:Ff,getISOString:Yn,useXDomainRequest:Za,getCommonSchemaMetaData:Mf,cookieAvailable:xo,disallowsSameSiteNone:nl,setCookie:vb,deleteCookie:yb,getCookie:wb,createGuid:Eb,extend:Ls,getTime:Fr,isValueKind:ml,isArrayValid:Xg,objDefineAccessors:_n,addPageUnloadEventListener:ic,setProcessTelemetryTimings:hl,addEventHandler:Rs,getFieldValueType:So,strEndsWith:Va,objForEachKey:xt},BF={_canUseCookies:void 0,isTypeof:Wu,isUndefined:ct,isNullOrUndefined:Be,hasOwnProperty:Xo,isFunction:Xe,isObject:mr,isDate:zu,isArray:ze,isError:Wa,isString:Ft,isNumber:Xr,isBoolean:Pi,toISOString:Yn,arrForEach:ye,arrIndexOf:tr,arrMap:Ga,arrReduce:za,strTrim:St,objCreate:Jo,objKeys:Nr,objDefineAccessors:_n,addEventHandler:Rs,dateNow:rr,isIE:Eo,disableCookies:gb,newGuid:ul,perfNow:ll,newId:Ts,randomValue:rc,random32:_o,mwcRandomSeed:Rg,mwcRandom32:yf,generateW3CId:Os}});var _b,bb,L9,VF,WF=Fe(()=>{Yr();Li();Uf();gr();_b="version",bb="properties",L9=function(e){yo(t,e);function t(){var r=e.call(this)||this;return r.pluginVersionStringArr=[],r.pluginVersionString="",st(t,r,function(n,o){(!n.logger||!n.logger.queue)&&(n.logger=new Xn({loggingLevelConsole:1})),n.initialize=function(i,s,a,c){$t(n,function(){return"AppInsightsCore.initialize"},function(){if(i){i.endpointUrl||(i.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var u=i.propertyStorageOverride;if(u&&(!u.getProperty||!u.setProperty))throw new Error("Invalid property storage override passed.");i.channels&&ye(i.channels,function(f){f&&ye(f,function(p){if(p.identifier&&p.version){var m=p.identifier+"="+p.version;n.pluginVersionStringArr.push(m)}})})}n.getWParam=function(){return typeof document!="undefined"?0:-1},s&&ye(s,function(f){if(f&&f.identifier&&f.version){var p=f.identifier+"="+f.version;n.pluginVersionStringArr.push(p)}}),n.pluginVersionString=n.pluginVersionStringArr.join(";");try{o.initialize(i,s,a,c),n.pollInternalLogs("InternalLog")}catch(f){var l=n.logger,d=Ot(f);d.indexOf("channels")!==-1&&(d+=`
 - Channels must be provided through config.channels only!`),l.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+d)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},n.track=function(i){$t(n,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s.timings=s.timings||{},s.timings.trackStart=Fr(),Lf(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=Mi;var c=s.baseData=s.baseData||{};c[bb]||(c[bb]={});var u=c[bb];u[_b]||(u[_b]=""),n.pluginVersionString!==""&&(u[_b]=n.pluginVersionString)}o.track(s)},function(){return{item:i}},!i.sync)}}),r}return t}(Rf),VF=L9});var F9,GF,zF=Fe(()=>{Yr();gr();Li();Uf();F9=function(e){yo(t,e);function t(){var r=e.call(this)||this;return st(t,r,function(n,o){n.initialize=function(i,s,a,c){i&&!i.endpointUrl&&(i.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),n.getWParam=function(){return Of?0:-1};try{o.initialize(i,s,a,c)}catch(u){Ut(n.logger,1,514,"Initialization Failed: "+Ot(u)+`
 - Note: Channels must be provided through config.channels only`)}},n.track=function(i){var s=i;if(s){var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=Mi}o.track(s)}}),r}return t}(cc),GF=F9});function M9(e,t,r){return function(n){e[t]=n,r()}}var uc,U9,Fs,xb=Fe(()=>{Li();gr();uc=Xe;U9=function(){function e(t){var r=0,n=null,o=[];st(e,this,function(u){u.then=function(l,d){return new e(function(f,p){i(l,d,f,p)})},u.catch=function(l){return u.then(null,l)}});function i(u,l,d,f){o.push(function(){var p;try{r===1?p=uc(u)?u(n):n:p=uc(l)?l(n):n,p instanceof e?p.then(d,f):r===2&&!uc(l)?f(p):d(p)}catch(m){f(m);return}}),r!==0&&s()}function s(){if(o.length>0){var u=o.slice();o=[],setTimeout(function(){for(var l=0,d=u.length;l<d;++l)try{u[l]()}catch{}},0)}}function a(u){r===0&&(n=u,r=1,s())}function c(u){r===0&&(n=u,r=2,s())}(function(){if(!uc(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(a,c)}catch(l){c(l)}})()}return e.resolve=function(t){return t instanceof e?t:t&&uc(t.then)?new e(function(r,n){try{t.then(r,n)}catch(o){n(o)}}):new e(function(r){r(t)})},e.reject=function(t){return new e(function(r,n){n(t)})},e.all=function(t){if(!(!t||!t.length))return new e(function(r,n){try{for(var o=[],i=0,s=0;s<t.length;s++){var a=t[s];a&&uc(a.then)?(i++,a.then(M9(o,s,function(){--i==0&&r(o)}),n)):o[s]=a}i===0&&setTimeout(function(){r(o)},0)}catch(c){n(c)}})},e.race=function(t){return new e(function(r,n){if(!(!t||!t.length))try{for(var o=function(s){var a=t[s];a&&uc(a.then)?a.then(r,n):setTimeout(function(){r(a)},0)},i=0;i<t.length;i++)o(i)}catch(s){n(s)}})},e}(),Fs=U9});function gl(){return new Date().getTime()}var j9,KF,jf,lc,Sb,$9,QF,YF=Fe(()=>{xb();Li();gr();j9=6e5,KF=0,jf=[],lc=[],Sb=[];$9=function(){function e(t,r){var n=0,o=(t||"<unnamed>")+"."+KF;KF++,st(e,this,function(a){var c=null,u=0;a.scheduleEvent=function(d,f,p){var m=o+"."+u;u++,f&&(m+="-("+f+")");var h=m+"{"+n+"}";n++;var g={evt:null,tm:gl(),id:h,isRunning:!1,isAborted:!1};return c?g.evt=T(g,c):g.evt=I(g),c=g,c.evt._schId=h,g.evt;function v(P){for(var S=gl(),k=S-j9,A=P.length,N=0;N<A;){var z=P[N];if(z&&z.tm<k){var Q=null;z.abort?(Q="Aborting ["+z.id+"] due to Excessive runtime ("+(S-z.tm)+" ms)",z.abort(Q)):Q="Removing ["+z.id+"] due to Excessive runtime ("+(S-z.tm)+" ms)",s(Q),P.splice(N,1),A--}else N++}}function w(P,S){var k=!1,A=l(jf,P);if(A||(A=l(Sb,P),k=!0),A){A.to&&(clearTimeout(A.to),A.to=null);var N=gl()-A.tm;S?k?s("Timed out event ["+P+"] finally complete -- "+N+" ms"):i("Promise ["+P+"] Complete -- "+N+" ms"):(Sb.push(A),s("Event ["+P+"] Timed out and removed -- "+N+" ms"))}else i("Failed to remove ["+P+"] from running queue");c&&c.id===P&&(c=null),v(jf),v(lc),v(Sb)}function C(P,S){return function(k){return w(P,!0),S&&S(k),k}}function E(P,S,k,A){S.then(function(N){return N instanceof Fs?(i("Event ["+P+"] returned a promise -- waiting"),E(P,N,k,A),N):C(P,k)(N)},C(P,A))}function b(P,S){var k=P.id;return new Fs(function(A,N){i("Event ["+k+"] Starting -- waited for "+(P.wTm||"--")+" ms"),P.isRunning=!0,P.abort=function(Q){P.abort=null,P.isAborted=!0,w(k,!1),N(new Error(Q))};var z=S(k);z instanceof Fs?(p&&(P.to=setTimeout(function(){w(k,!1),N(new Error("Timed out after ["+p+"] ms"))},p)),E(k,z,function(Q){i("Event ["+k+"] Resolving after "+(gl()-P.tm)+" ms"),A(Q)},N)):(i("Promise ["+k+"] Auto completed as the start action did not return a promise"),A())})}function I(P){var S=gl();return P.wTm=S-P.tm,P.tm=S,P.isAborted?Fs.reject(new Error("["+m+"] was aborted")):(jf.push(P),b(P,d))}function T(P,S){var k=new Fs(function(A,N){var z=gl()-S.tm,Q=S.id;i("["+m+"] is waiting for ["+Q+":"+z+" ms] to complete before starting -- ["+lc.length+"] waiting and ["+jf.length+"] running"),P.abort=function(ee){P.abort=null,l(lc,m),P.isAborted=!0,N(new Error(ee))},S.evt.then(function(ee){l(lc,m),I(P).then(A,N)},function(ee){l(lc,m),I(P).then(A,N)})});return lc.push(P),k}};function l(d,f){for(var p=0;p<d.length;p++)if(d[p].id===f)return d.splice(p,1)[0];return null}});function i(a){var c=vo();c&&c.QUnit&&console&&console.log("ESPromiseScheduler["+o+"] "+a)}function s(a){r&&r.warnToConsole("ESPromiseScheduler["+o+"] "+a)}}return e.incomplete=function(){return jf},e.waitingToStart=function(){return lc},e}(),QF=$9});var JF,XF=Fe(()=>{Li();Uf();JF=function(){function e(t){var r=this,n={},o=[],i=[];t&&i.push(t);function s(l,d){var f,p=n[l];if(p&&(f=p[d]),!f&&f!==null){if(Ft(l)&&Ft(d))if(i.length>0){for(var m=0;m<i.length;m++)if(i[m].handleField(l,d)){f={canHandle:!0,fieldHandler:i[m]};break}}else o.length===0&&(f={canHandle:!0});if(!f&&f!==null){f=null;for(var m=0;m<o.length;m++)if(o[m].handleField(l,d)){f={canHandle:!0,handler:o[m],fieldHandler:null};break}}p||(p=n[l]={}),p[d]=f}return f}r.addSanitizer=function(l){l&&(o.push(l),n={})},r.addFieldSanitizer=function(l){l&&(i.push(l),n={})},r.handleField=function(l,d){var f=s(l,d);return f?f.canHandle:!1},r.value=function(l,d,f,p){var m=s(l,d);if(m&&m.canHandle){if(!m||!m.canHandle)return null;if(m.handler)return m.handler.value(l,d,f,p);if(!Ft(d)||Be(f)||f==="")return null;var h=null,g=So(f);if((g&8192)==8192){var v=g&~8192;if(h=f,!Kt(h.value)||v!==1&&v!==2&&v!==3&&(v&4096)!=4096)return null}else g===1||g===2||g===3||(g&4096)==4096?h=c(l,d,f):g===4&&(h=c(l,d,p?JSON.stringify(f):f));if(h)return a(m,l,d,g,h,p)}return null},r.property=function(l,d,f,p){var m=s(l,d);if(!m||!m.canHandle||!Ft(d)||Be(f)||!Kt(f.value))return null;var h=So(f.value);return h===0?null:a(m,l,d,h,f,p)};function a(l,d,f,p,m,h){if(l.handler)return l.handler.property(d,f,m,h);if(!Be(m.kind)){if((p&4096)==4096||!ml(m.kind))return null;m.value=m.value.toString()}return u(l.fieldHandler,d,f,p,m)}function c(l,d,f){return Kt(f)?{value:f}:null}function u(l,d,f,p,m){if(m&&l){var h=l.getSanitizer(d,f,p,m.kind,m.propertyType);if(h)if(p===4){var g={},v=m.value;xt(v,function(C,E){var b=d+"."+f;if(Kt(E)){var I=c(b,C,E);I=u(l,b,C,So(E),I),I&&(g[C]=I.value)}}),m.value=g}else{var w={path:d,name:f,type:p,prop:m,sanitizer:r};m=h.call(r,w)}}return m}}return e.getFieldType=So,e}()});var ZF={};yy(ZF,{AppInsightsCore:()=>VF,BaseCore:()=>GF,BaseTelemetryPlugin:()=>ac,CoreUtils:()=>BF,DiagnosticLogger:()=>Xn,ESPromise:()=>Fs,ESPromiseScheduler:()=>QF,EventHelper:()=>Y_,EventLatency:()=>LF,EventPersistence:()=>MF,EventPropertyType:()=>FF,EventsDiscardedReason:()=>Co,FullVersionString:()=>Mi,InternalAppInsightsCore:()=>Rf,InternalBaseCore:()=>cc,LoggingSeverity:()=>fb,MinChannelPriorty:()=>a_,NotificationManager:()=>Df,PerfEvent:()=>tc,PerfManager:()=>mf,ProcessTelemetryContext:()=>sb,TraceLevel:()=>UF,Undefined:()=>Gt,Utils:()=>qF,ValueKind:()=>NF,ValueSanitizer:()=>JF,Version:()=>Jg,_ExtendedInternalMessageId:()=>jF,_InternalLogMessage:()=>ec,_InternalMessageId:()=>Af,__getRegisteredEvents:()=>K_,_throwInternal:()=>Ut,addEventHandler:()=>Rs,addEventListeners:()=>Hg,addPageHideEventListener:()=>al,addPageShowEventListener:()=>cl,addPageUnloadEventListener:()=>ic,areCookiesSupported:()=>xo,arrForEach:()=>ye,arrIndexOf:()=>tr,arrMap:()=>Ga,arrReduce:()=>za,attachEvent:()=>ol,cookieAvailable:()=>xo,createCookieMgr:()=>Ri,createEnumStyle:()=>Lr,createGuid:()=>Eb,createProcessTelemetryContext:()=>tn,createTraceParent:()=>eb,createUniqueNamespace:()=>bo,createUnloadHandlerContainer:()=>sc,dateNow:()=>rr,deleteCookie:()=>yb,detachEvent:()=>il,disableCookies:()=>gb,disallowsSameSiteNone:()=>nl,doPerf:()=>$t,dumpObj:()=>Ot,eventOff:()=>oc,eventOn:()=>nc,extend:()=>Ls,findW3cTraceParent:()=>nb,formatTraceParent:()=>rb,generateW3CId:()=>Os,getCommonSchemaMetaData:()=>Mf,getConsole:()=>uf,getCookie:()=>wb,getCookieValue:()=>Cb,getCrypto:()=>lf,getDocument:()=>en,getExceptionName:()=>Ka,getFieldValueType:()=>So,getGlobal:()=>vo,getGlobalInst:()=>Mt,getHistory:()=>O_,getIEVersion:()=>N_,getISOString:()=>Yn,getJSON:()=>el,getLocation:()=>Ja,getMsCrypto:()=>df,getNavigator:()=>bn,getPerformance:()=>Zu,getSetValue:()=>nf,getTenantId:()=>Nf,getTime:()=>Fr,getWindow:()=>Zo,hasDocument:()=>Ig,hasHistory:()=>Tg,hasJSON:()=>Xa,hasNavigator:()=>cf,hasOwnProperty:()=>Xo,hasWindow:()=>af,isArray:()=>ze,isArrayValid:()=>Xg,isBeaconsSupported:()=>Ss,isBoolean:()=>Pi,isChromium:()=>Zg,isDate:()=>zu,isDocumentObjectAvailable:()=>Of,isError:()=>Wa,isFetchSupported:()=>ff,isFunction:()=>Xe,isIE:()=>Eo,isLatency:()=>Lf,isNotTruthy:()=>Ku,isNullOrUndefined:()=>Be,isNumber:()=>Xr,isObject:()=>mr,isReactNative:()=>Di,isSampledFlag:()=>tb,isString:()=>Ft,isTruthy:()=>Qu,isTypeof:()=>Wu,isUint8ArrayAvailable:()=>hb,isUndefined:()=>ct,isValidSpanId:()=>fl,isValidTraceId:()=>dl,isValidTraceParent:()=>Vg,isValueAssigned:()=>Kt,isValueKind:()=>ml,isWindowObjectAvailable:()=>mb,isXhrSupported:()=>tl,mergeEvtNamespace:()=>Ai,newGuid:()=>ul,newId:()=>Ts,normalizeJsName:()=>Ba,objCreate:()=>Jo,objDefineAccessors:()=>_n,objForEachKey:()=>xt,objFreeze:()=>Zr,objKeys:()=>Nr,objSeal:()=>v_,openXhr:()=>ev,optimizeObject:()=>Ii,parseTraceParent:()=>Pf,perfNow:()=>ll,proxyAssign:()=>y_,proxyFunctionAs:()=>xs,proxyFunctions:()=>Qa,random32:()=>_o,randomValue:()=>rc,removeEventHandler:()=>$g,removeEventListeners:()=>As,removePageHideEventListener:()=>xf,removePageShowEventListener:()=>Sf,removePageUnloadEventListener:()=>bf,safeGetCookieMgr:()=>Ds,safeGetLogger:()=>pf,sanitizeProperty:()=>Ff,setCookie:()=>vb,setEnableEnvMocks:()=>A_,setProcessTelemetryTimings:()=>hl,setValue:()=>nr,strContains:()=>qt,strEndsWith:()=>Va,strFunction:()=>Kn,strObject:()=>Wt,strPrototype:()=>zt,strStartsWith:()=>Gu,strTrim:()=>St,strUndefined:()=>Gt,throwError:()=>hr,toISOString:()=>Yn,useXDomainRequest:()=>Za});var dc=Fe(()=>{$F();WF();zF();xb();YF();XF();Li();Uf()});var fc,tv,rv,Pb=Fe(()=>{fc="REAL_TIME",tv="NEAR_REAL_TIME",rv="BEST_EFFORT"});var nv,e1,ov,t1,Ib,r1,n1,o1,Tb,kb,iv,i1,Db,s1,Rb,sv,Ab,av,cv,uv,$f,Ob,a1,vl,lv=Fe(()=>{nv="POST",e1="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ov="drop",t1="send",Ib="requeue",r1="rspFail",n1="oth",o1="no-cache, no-store",Tb="application/x-json-stream",kb="cache-control",iv="content-type",i1="kill-tokens",Db="kill-duration",s1="kill-duration-seconds",Rb="time-delta-millis",sv="client-version",Ab="client-id",av="time-delta-to-apply-millis",cv="upload-time",uv="apikey",$f="AuthMsaDeviceTicket",Ob="AuthXToken",a1="NoResponseBody",vl="msfpc"});function c1(e){var t=(e.ext||{}).intweb;return t&&Kt(t[vl])?t[vl]:null}function u1(e){for(var t=null,r=0;t===null&&r<e.length;r++)t=c1(e[r]);return t}var yl,Nb=Fe(()=>{dc();lv();yl=function(){function e(t,r){var n=r?[].concat(r):[],o=this,i=u1(n);o.iKey=function(){return t},o.Msfpc=function(){return i||""},o.count=function(){return n.length},o.events=function(){return n},o.addEvent=function(s){return s?(n.push(s),i||(i=c1(s)),!0):!1},o.split=function(s,a){var c;if(s<n.length){var u=n.length-s;Be(a)||(u=a<u?a:u),c=n.splice(s,u),i=u1(n)}return new e(t,c)}}return e.create=function(t,r){return new e(t,r)},e}()});function m1(e,t,r,n){if(n&&e){var o=Mf(n.value,n.kind,n.propertyType);if(o>-1){var i=e[f1];i||(i=e[f1]={f:{}});var s=i[dv];if(s||(s=i[dv]={}),t)for(var a=0;a<t.length;a++){var c=t[a];s[c]||(s[c]={f:{}});var u=s[c][dv];u||(u=s[c][dv]={}),s=u}s=s[r]={},ze(n.value)?s.a={t:o}:s.t=o}}}var H9,q9,l1,d1,B9,f1,dv,V9,p1,h1=Fe(()=>{dc();Nb();gr();H9=20,q9=3984588,l1=65e3,d1=2e6,B9=Math.min(d1,l1),f1="metadata",dv="f",V9=/\./,p1=function(){function e(t,r,n,o){var i="data",s="baseData",a="ext",c=!!o,u=!0,l=r,d={};st(e,this,function(f){f.createPayload=function(h,g,v,w,C,E){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:h,isTeardown:g,isSync:v,isBeacon:w,sendType:E,sendReason:C}},f.appendPayload=function(h,g,v){var w=h&&g&&!h.overflow;return w&&$t(t,function(){return"Serializer:appendPayload"},function(){for(var C=g.events(),E=h.payloadBlob,b=h.numEvents,I=!1,T=[],P=[],S=h.isBeacon,k=S?l1:q9,A=S?B9:d1,N=0,z=0;N<C.length;){var Q=C[N];if(Q){if(b>=v){h.overflow=g.split(N);break}var ee=f.getEventBlob(Q);if(ee&&ee.length<=A){var ne=ee.length,U=E.length;if(U+ne>k){h.overflow=g.split(N);break}E&&(E+=`
`),E+=ee,z++,z>H9&&(E.substr(0,1),z=0),I=!0,b++}else ee?T.push(Q):P.push(Q),C.splice(N,1),N--}N++}if(T&&T.length>0&&h.sizeExceed.push(yl.create(g.iKey(),T)),P&&P.length>0&&h.failedEvts.push(yl.create(g.iKey(),P)),I){h.batches.push(g),h.payloadBlob=E,h.numEvents=b;var L=g.iKey();tr(h.apiKeys,L)===-1&&h.apiKeys.push(L)}},function(){return{payload:h,theBatch:{iKey:g.iKey(),evts:g.events()},max:v}}),w},f.getEventBlob=function(h){try{return $t(t,function(){return"Serializer.getEventBlob"},function(){var g={};g.name=h.name,g.time=h.time,g.ver=h.ver,g.iKey="o:"+Nf(h.iKey);var v={},w=h[a];w&&(g[a]=v,xt(w,function(b,I){var T=v[b]={};m(I,T,"ext."+b,!0,null,null,!0)}));var C=g[i]={};C.baseType=h.baseType;var E=C[s]={};return m(h.baseData,E,s,!1,[s],function(b,I,T){m1(v,b,I,T)},u),m(h.data,C,i,!1,[],function(b,I,T){m1(v,b,I,T)},u),JSON.stringify(g)},function(){return{item:h}})}catch{return null}};function p(h,g){var v=d[h];return v===void 0&&(h.length>=7&&(v=Gu(h,"ext.metadata")||Gu(h,"ext.web")),d[h]=v),v}function m(h,g,v,w,C,E,b){xt(h,function(I,T){var P=null;if(T||Kt(T)){var S=v,k=I,A=C,N=g;if(c&&!w&&V9.test(I)){var z=I.split("."),Q=z.length;if(Q>1){A&&(A=A.slice());for(var ee=0;ee<Q-1;ee++){var ne=z[ee];N=N[ne]=N[ne]||{},S+="."+ne,A&&A.push(ne)}k=z[Q-1]}}var U=w&&p(S,k);if(!U&&l&&l.handleField(S,k)?P=l.value(S,k,T,n):P=Ff(k,T,n),P){var L=P.value;if(N[k]=L,E&&E(A,k,P),b&&typeof L=="object"&&!ze(L)){var D=A;D&&(D=D.slice(),D.push(k)),m(T,L,S+"."+k,w,D,E,b)}}}})}})}return e}()});function v1(e){return!(e>=300&&e<500&&e!=408&&e!=429||e==501||e==505)}function fv(e){var t=0,r=g1*W9,n=g1*G9,o=Math.floor(Math.random()*(n-r))+r;return t=Math.pow(2,e)*o,Math.min(t,z9)}var W9,G9,g1,z9,Lb=Fe(()=>{W9=.8,G9=1.2,g1=3e3,z9=6e5});var K9,Q9,y1,w1=Fe(()=>{gr();dc();K9=1e3,Q9=function(){function e(){var t={};function r(n){var o=[];return n&&ye(n,function(i){o.push(St(i))}),o}st(e,this,function(n){n.setKillSwitchTenants=function(o,i){if(o&&i)try{var s=r(o.split(","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*K9,c=0;c<s.length;++c)t[s[c]]=rr()+a}catch{return[]}return[]},n.isTenantKilled=function(o){var i=t,s=St(o);return i[s]!==void 0&&i[s]>rr()?!0:(delete i[s],!1)}})}return e}(),y1=Q9});var Y9,C1,E1=Fe(()=>{gr();Y9=function(){function e(){var t=!0,r=!0,n=!0,o="use-collector-delta",i=!1;st(e,this,function(s){s.allowRequestSending=function(){return t},s.firstRequestSent=function(){n&&(n=!1,i||(t=!1))},s.shouldAddClockSkewHeaders=function(){return r},s.getClockSkewHeaderValue=function(){return o},s.setClockSkew=function(a){i||(a?(o=a,r=!0,i=!0):r=!1,t=!0)}})}return e}(),C1=Y9});function mc(e,t,r){Mb[e]=t,r!==!1&&(Ub[t]=e)}function b1(e){try{return e.responseText}catch{}return""}function x1(e,t){var r=!1;if(e&&t){var n=Nr(e);if(n&&n.length>0)for(var o=t.toLowerCase(),i=0;i<n.length;i++){var s=n[i];if(s&&Xo(t,s)&&s.toLowerCase()===o){r=!0;break}}}return r}function wl(e,t,r,n){t&&r&&r.length>0&&(n&&Mb[t]?(e.hdrs[Mb[t]]=r,e.useHdrs=!0):e.url+="&"+t+"="+r)}var pc,Fb,_1,J9,Mb,Ub,S1,P1=Fe(()=>{dc();h1();Lb();w1();E1();gr();lv();Fb="sendAttempt",_1="&"+a1+"=true",J9=(pc={},pc[1]=Ib,pc[100]=Ib,pc[200]="sent",pc[8004]=ov,pc[8003]=ov,pc),Mb={},Ub={};mc($f,$f,!1);mc(sv,sv);mc(Ab,"Client-Id");mc(uv,uv);mc(av,av);mc(cv,cv);mc(Ob,Ob);S1=function(){function e(t,r,n,o,i){this._responseHandlers=[];var s="?cors=true&"+iv.toLowerCase()+"="+Tb,a=new y1,c=!1,u=new C1,l=!1,d=0,f,p,m,h=!0,g=[],v={},w=[],C=null,E=!1,b,I=!1,T=!1,P,S;st(e,this,function(k){var A=!0;k.initialize=function(V,ae,te,de,he){var Ue;he||(he={}),s=V+s,T=ct(he.avoidOptions)?!0:!he.avoidOptions,m=ae,b=ae.getCookieMgr(),E=!m.config.disableEventTimings;var Oe=!!m.config.enableCompoundKey;f=te;var ve=he.valueSanitizer,Le=he.stringifyObjects;ct(he.enableCompoundKey)||(Oe=!!he.enableCompoundKey),P=he.xhrTimeout,S=he.disableXhrSync,l=!Di(),C=new p1(m,ve,Le,Oe);var be=de,G=he.alwaysUseXhrOverride?de:null,oe=he.alwaysUseXhrOverride?de:null;if(!de){h=!1;var se=Ja();se&&se.protocol&&se.protocol.toLowerCase()==="file:"&&(A=!1);var fe=[];Di()?fe=[2,1]:fe=[1,2,3];var we=he.transports;we&&(Xr(we)?fe=[we].concat(fe):ze(we)&&(fe=we.concat(fe))),de=N(fe,!1),be=N(fe,!0),de||f.diagLog().warnToConsole("No available transport to send events")}p=(Ue={},Ue[0]=de,Ue[1]=be||N([1,2,3],!0),Ue[2]=G||N([3,2],!0)||be||N([1],!0),Ue[3]=oe||N([2,3],!0)||be||N([1],!0),Ue)};function N(V,ae){for(var te=0,de=null,he=0;de==null&&he<V.length;)te=V[he],te===1?Za()?de=z:tl()&&(de=ee):te===2&&ff(ae)?de=Q:l&&te===3&&Ss()&&(de=U),he++;return de?{_transport:te,_isSync:ae,sendPOST:de}:null}k._getDbgPlgTargets=function(){return[p[0],a,C,p]};function z(V,ae,te){var de=new XDomainRequest;de.open(nv,V.urlString),V.timeout&&(de.timeout=V.timeout),de.onload=function(){var he=b1(de);ne(ae,200,{},he),qr(he)},de.onerror=function(){ne(ae,400,{})},de.ontimeout=function(){ne(ae,500,{})},de.onprogress=function(){},te?de.send(V.data):i.set(function(){de.send(V.data)},0)}function Q(V,ae,te){var de,he=V.urlString,Ue=!1,Oe=!1,ve=(de={body:V.data,method:nv},de[e1]=!0,de);te&&(ve.keepalive=!0,V._sendReason===2&&(Ue=!0,he+=_1)),A&&(ve.credentials="include"),V.headers&&Nr(V.headers).length>0&&(ve.headers=V.headers),fetch(he,ve).then(function(Le){var be={},G="";Le.headers&&Le.headers.forEach(function(oe,se){be[se]=oe}),Le.body&&Le.text().then(function(oe){G=oe}),Oe||(Oe=!0,ne(ae,Le.status,be,G),qr(G))}).catch(function(Le){Oe||(Oe=!0,ne(ae,0,{}))}),Ue&&!Oe&&(Oe=!0,ne(ae,200,{})),!Oe&&V.timeout>0&&i.set(function(){Oe||(Oe=!0,ne(ae,500,{}))},V.timeout)}function ee(V,ae,te){var de=V.urlString;function he(Le,be,G){if(!Le[G]&&be&&be.getResponseHeader){var oe=be.getResponseHeader(G);oe&&(Le[G]=St(oe))}return Le}function Ue(Le){var be={};return Le.getAllResponseHeaders?be=Ke(Le.getAllResponseHeaders()):(be=he(be,Le,Rb),be=he(be,Le,Db),be=he(be,Le,s1)),be}function Oe(Le,be){ne(ae,Le.status,Ue(Le),be)}te&&V.disableXhrSync&&(te=!1);var ve=ev(nv,de,A,!0,te,V.timeout);xt(V.headers,function(Le,be){ve.setRequestHeader(Le,be)}),ve.onload=function(){var Le=b1(ve);Oe(ve,Le),qr(Le)},ve.onerror=function(){Oe(ve)},ve.ontimeout=function(){Oe(ve)},ve.send(V.data)}function ne(V,ae,te,de){try{V(ae,te,de)}catch(he){Ut(f.diagLog(),2,518,Ot(he))}}function U(V,ae,te){var de=V,he=200,Ue=de._thePayload,Oe=V.urlString+_1;try{var ve=bn();if(!ve.sendBeacon(Oe,V.data))if(Ue){var Le=[];ye(Ue.batches,function(be){if(Le&&be&&be.count()>0){for(var G=be.events(),oe=0;oe<G.length;oe++)if(!ve.sendBeacon(Oe,C.getEventBlob(G[oe]))){Le.push(be.split(oe));break}}else Le.push(be.split(0))}),re(Le,8003,Ue.sendType,!0)}else he=0}catch(be){f.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+Ot(be)),he=0}finally{ne(ae,he,{},"")}}function L(V){return V===2||V===3}function D(V){return I&&L(V)&&(V=2),V}k.addQueryStringParameter=function(V,ae){for(var te=0;te<g.length;te++)if(g[te].name===V){g[te].value=ae;return}g.push({name:V,value:ae})},k.addHeader=function(V,ae){v[V]=ae},k.canSendRequest=function(){return j()&&u.allowRequestSending()},k.sendQueuedRequests=function(V,ae){ct(V)&&(V=0),I&&(V=D(V),ae=2),Y(w,V,0)&&me(K(),0,!1,V,ae||0)},k.isCompletelyIdle=function(){return!c&&d===0&&w.length===0},k.setUnloading=function(V){I=V},k.addBatch=function(V){if(V&&V.count()>0){if(a.isTenantKilled(V.iKey()))return!1;w.push(V)}return!0},k.teardown=function(){w.length>0&&me(K(),0,!0,2,2)},k.pause=function(){c=!0},k.resume=function(){c=!1,k.sendQueuedRequests(0,4)},k.sendSynchronousBatch=function(V,ae,te){V&&V.count()>0&&(Be(ae)&&(ae=1),I&&(ae=D(ae),te=2),me([V],0,!1,ae,te||0))};function j(){return!c&&d<r}function K(){var V=w;return w=[],V}function Y(V,ae,te){var de=!1;return V&&V.length>0&&!c&&p[ae]&&C&&(de=ae!==0||j()&&(te>0||u.allowRequestSending())),de}function Z(V){var ae={};return V&&ye(V,function(te,de){ae[de]={iKey:te.iKey(),evts:te.events()}}),ae}function me(V,ae,te,de,he){if(!(!V||V.length===0)){if(c){re(V,1,de);return}de=D(de);try{var Ue=V,Oe=de!==0;$t(m,function(){return"HttpManager:_sendBatches"},function(ve){ve&&(V=V.slice(0));for(var Le=[],be=null,G=Fr(),oe=p[de]||(Oe?p[1]:p[0]),se=(I||L(de)||oe&&oe._transport===3)&&_e();Y(V,de,ae);){var fe=V.shift();fe&&fe.count()>0&&(a.isTenantKilled(fe.iKey())?Le.push(fe):(be=be||C.createPayload(ae,te,Oe,se,he,de),C.appendPayload(be,fe,t)?be.overflow!==null&&(V=[be.overflow].concat(V),be.overflow=null,Ce(be,G,Fr(),he),G=Fr(),be=null):(Ce(be,G,Fr(),he),G=Fr(),V=[fe].concat(V),be=null)))}be&&Ce(be,G,Fr(),he),V.length>0&&(w=V.concat(w)),re(Le,8004,de)},function(){return{batches:Z(Ue),retryCount:ae,isTeardown:te,isSynchronous:Oe,sendReason:he,useSendBeacon:L(de),sendType:de}},!Oe)}catch(ve){Ut(f.diagLog(),2,48,"Unexpected Exception sending batch: "+Ot(ve))}}}function Ee(V,ae){var te={url:s,hdrs:{},useHdrs:!1};ae?(te.hdrs=Ls(te.hdrs,v),te.useHdrs=Nr(te.hdrs).length>0):xt(v,function(ve,Le){Ub[ve]?wl(te,Ub[ve],Le,!1):(te.hdrs[ve]=Le,te.useHdrs=!0)}),wl(te,Ab,"NO_AUTH",ae),wl(te,sv,Mi,ae);var de="";ye(V.apiKeys,function(ve){de.length>0&&(de+=","),de+=ve}),wl(te,uv,de,ae),wl(te,cv,rr().toString(),ae);var he=Pn(V);if(Kt(he)&&(te.url+="&ext.intweb.msfpc="+he),u.shouldAddClockSkewHeaders()&&wl(te,av,u.getClockSkewHeaderValue(),ae),m.getWParam){var Ue=m.getWParam();Ue>=0&&(te.url+="&w="+Ue)}for(var Oe=0;Oe<g.length;Oe++)te.url+="&"+g[Oe].name+"="+g[Oe].value;return te}function _e(){return!h&&l&&Ss()}function Ie(V,ae,te){V[ae]=V[ae]||{},V[ae][f.identifier]=te}function Ce(V,ae,te,de){if(V&&V.payloadBlob&&V.payloadBlob.length>0){var he=!!k.sendHook,Ue=p[V.sendType];!L(V.sendType)&&V.isBeacon&&V.sendReason===2&&(Ue=p[2]||p[3]||Ue);var Oe=T;(V.isBeacon||Ue._transport===3)&&(Oe=!1);var ve=Ee(V,Oe);Oe=Oe||ve.useHdrs;var Le=Fr();$t(m,function(){return"HttpManager:_doPayloadSend"},function(){for(var be=0;be<V.batches.length;be++)for(var G=V.batches[be],oe=G.events(),se=0;se<oe.length;se++){var fe=oe[se];if(E){var we=fe.timings=fe.timings||{};Ie(we,"sendEventStart",Le),Ie(we,"serializationStart",ae),Ie(we,"serializationCompleted",te)}fe[Fb]>0?fe[Fb]++:fe[Fb]=1}re(V.batches,1e3+(de||0),V.sendType,!0);var Te={data:V.payloadBlob,urlString:ve.url,headers:ve.hdrs,_thePayload:V,_sendReason:de,timeout:P};ct(S)||(Te.disableXhrSync=!!S),Oe&&(x1(Te.headers,kb)||(Te.headers[kb]=o1),x1(Te.headers,iv)||(Te.headers[iv]=Tb));var Ze=null;Ue&&(Ze=function(Ye){u.firstRequestSent();var rt=function(Tt,ge){wt(Tt,ge,V,de)},Me=V.isTeardown||V.isSync;try{Ue.sendPOST(Ye,rt,Me),k.sendListener&&k.sendListener(Te,Ye,Me,V.isBeacon)}catch(Tt){f.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+Ot(Tt)),ne(rt,0,{})}}),$t(m,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Ze)if(V.sendType===0&&d++,he&&!V.isBeacon&&Ue._transport!==3){var Ye={data:Te.data,urlString:Te.urlString,headers:Ls({},Te.headers),timeout:Te.timeout,disableXhrSync:Te.disableXhrSync},rt=!1;$t(m,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{k.sendHook(Ye,function(Me){rt=!0,!h&&!Me._thePayload&&(Me._thePayload=Me._thePayload||Te._thePayload,Me._sendReason=Me._sendReason||Te._sendReason),Ze(Me)},V.isSync||V.isTeardown)}catch{rt||Ze(Te)}})}else Ze(Te)})},function(){return{thePayload:V,serializationStart:ae,serializationCompleted:te,sendReason:de}},V.isSync)}V.sizeExceed&&V.sizeExceed.length>0&&re(V.sizeExceed,8003,V.sendType),V.failedEvts&&V.failedEvts.length>0&&re(V.failedEvts,8002,V.sendType)}function ht(V,ae){E&&ye(V,function(te){var de=te.timings=te.timings||{};Ie(de,"sendEventCompleted",ae)})}function wt(V,ae,te,de){var he=9e3,Ue=null,Oe=!1,ve=!1;try{var Le=!0;if(typeof V!==Gt){if(ae){u.setClockSkew(ae[Rb]);var be=ae[Db]||ae["kill-duration-seconds"];ye(a.setKillSwitchTenants(ae[i1],be),function(oe){ye(te.batches,function(se){if(se.iKey()===oe){Ue=Ue||[];var fe=se.split(0);te.numEvents-=fe.count(),Ue.push(fe)}})})}if(V==200||V==204){he=200;return}(!v1(V)||te.numEvents<=0)&&(Le=!1),he=9e3+V%1e3}if(Le){he=100;var G=te.retryCnt;te.sendType===0&&(G<n?(Oe=!0,Ae(function(){te.sendType===0&&d--,me(te.batches,G+1,te.isTeardown,I?2:te.sendType,5)},I,fv(G))):(ve=!0,I&&(he=8001)))}}finally{Oe||(u.setClockSkew(),ke(te,he,de,ve)),re(Ue,8004,te.sendType)}}function ke(V,ae,te,de){try{de&&f._backOffTransmission(),ae===200&&(!de&&!V.isSync&&f._clearBackOff(),Pe(V.batches)),re(V.batches,ae,V.sendType,!0)}finally{V.sendType===0&&(d--,te!==5&&k.sendQueuedRequests(V.sendType,te))}}function Pe(V){if(E){var ae=Fr();ye(V,function(te){te&&te.count()>0&&ht(te.events(),ae)})}}function Ae(V,ae,te){ae?V():i.set(V,te)}function Ke(V){var ae={};if(Ft(V)){var te=St(V).split(/[\r\n]+/);ye(te,function(de){if(de){var he=de.indexOf(": ");if(he!==-1){var Ue=St(de.substring(0,he)).toLowerCase(),Oe=St(de.substring(he+1));ae[Ue]=Oe}else ae[St(de)]=1}})}return ae}function Pn(V){for(var ae=0;ae<V.batches.length;ae++){var te=V.batches[ae].Msfpc();if(te)return encodeURIComponent(te)}return""}function qr(V){var ae=k._responseHandlers;try{for(var te=0;te<ae.length;te++)try{ae[te](V)}catch(he){Ut(f.diagLog(),1,519,"Response handler failed: "+he)}if(V){var de=JSON.parse(V);Kt(de.webResult)&&Kt(de.webResult[vl])&&b.set("MSFPC",de.webResult[vl],365*86400)}}catch{}}function re(V,ae,te,de){if(V&&V.length>0&&o){var he=o[In(ae)];if(he){var Ue=te!==0;$t(m,function(){return"HttpManager:_sendBatchesNotification"},function(){Ae(function(){try{he.call(o,V,ae,Ue,te)}catch(Oe){Ut(f.diagLog(),1,74,"send request notification failed: "+Oe)}},de||Ue,0)},function(){return{batches:Z(V),reason:ae,isSync:Ue,sendSync:de,sendType:te}},!Ue)}}}function In(V){var ae=J9[V];return Kt(ae)||(ae=n1,V>=9e3&&V<=9999?ae=r1:V>=8e3&&V<=8999?ae=ov:V>=1e3&&V<=1999&&(ae=t1)),ae}})}return e}()});function X9(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout(e,t,r)}function Z9(e){clearTimeout(e)}function Hf(e,t){return{set:e||X9,clear:t||Z9}}var I1=Fe(()=>{});var e5,T1,t5,k1,D1,r5,R1,n5,hc,pv,A1,O1,o5,i5,N1,L1=Fe(()=>{Yr();gr();dc();Pb();Nb();P1();Lb();lv();I1();e5=.25,T1=500,t5=20,k1=6,D1=2,r5=4,R1=2,n5=1,hc="eventsDiscarded",pv="overrideInstrumentationKey",A1="maxEventRetryAttempts",O1="maxUnloadEventRetryAttempts",o5="addUnloadCb",i5=function(e){yo(t,e);function t(){var r=e.call(this)||this;r.identifier="PostChannel",r.priority=1011,r.version="3.2.3";var n,o=!1,i=[],s=null,a=!1,c=0,u=500,l=0,d=1e4,f={},p=fc,m=null,h=null,g=0,v=0,w,C,E={},b,I,T=-1,P,S=!0,k=!1,A=k1,N=D1,z,Q;return st(t,r,function(ee,ne){me(),ee._getDbgPlgTargets=function(){return[C]},ee.initialize=function(G,oe,se){$t(oe,function(){return"PostChannel:initialize"},function(){var fe=oe;ne.initialize(G,oe,se);try{var we=!!oe[o5];z=Ai(bo(ee.identifier),oe.evtNamespace&&oe.evtNamespace());var Te=ee._getTelCtx();G.extensionConfig[ee.identifier]=G.extensionConfig[ee.identifier]||{},n=Te.getExtCfg(ee.identifier),Q=Hf(n.setTimeoutOverride,n.clearTimeoutOverride),S=!n.disableOptimizeObj&&Zg(),U(fe),n.eventsLimitInMem>0&&(d=n.eventsLimitInMem),n.immediateEventLimit>0&&(u=n.immediateEventLimit),n.autoFlushEventsLimit>0&&(b=n.autoFlushEventsLimit),Xr(n[A1])&&(A=n[A1]),Xr(n[O1])&&(N=n[O1]),be(),n.httpXHROverride&&n.httpXHROverride.sendPOST&&(w=n.httpXHROverride),Kt(G.anonCookieName)&&C.addQueryStringParameter("anoncknm",G.anonCookieName),C.sendHook=n.payloadPreprocessor,C.sendListener=n.payloadListener;var Ze=n.overrideEndpointUrl?n.overrideEndpointUrl:G.endpointUrl;ee._notificationManager=G.extensionConfig.NotificationManager,C.initialize(Ze,ee.core,ee,w,n);var Ye=G.disablePageUnloadEvents||[];ic(L,Ye,z),al(L,Ye,z),cl(D,G.disablePageShowEvents,z)}catch(rt){throw ee.setInitialized(!1),rt}},function(){return{coreConfig:G,core:oe,extensions:se}})},ee.processTelemetry=function(G,oe){hl(G,ee.identifier),oe=ee._getTelCtx(oe);var se=oe.getExtCfg(ee.identifier),fe=!!n.disableTelemetry;se&&(fe=fe||!!se.disableTelemetry);var we=G;!fe&&!o&&(n[pv]&&(we.iKey=n[pv]),se&&se[pv]&&(we.iKey=se[pv]),j(we,!0),k?Ie(2,2):Z()),ee.processNext(we,oe)},ee._doTeardown=function(G,oe){Ie(2,2),o=!0,C.teardown(),bf(null,z),xf(null,z),Sf(null,z),me()};function U(G){var oe=G.getWParam;G.getWParam=function(){var se=0;return n.ignoreMc1Ms0CookieProcessing&&(se=se|2),se|oe()}}function L(G){var oe=G||Zo().event;oe.type!=="beforeunload"&&(k=!0,C.setUnloading(k)),Ie(2,2)}function D(G){k=!1,C.setUnloading(k)}function j(G,oe){if(G.sendAttempt||(G.sendAttempt=0),G.latency||(G.latency=1),G.ext&&G.ext.trace&&delete G.ext.trace,G.ext&&G.ext.user&&G.ext.user.id&&delete G.ext.user.id,S&&(G.ext=Ii(G.ext),G.baseData&&(G.baseData=Ii(G.baseData)),G.data&&(G.data=Ii(G.data))),G.sync){if(g||a)G.latency=3,G.sync=!1;else if(C){S&&(G=Ii(G)),C.sendSynchronousBatch(yl.create(G.iKey,[G]),G.sync===!0?1:G.sync,3);return}}var se=G.latency,fe=l,we=d;se===4&&(fe=c,we=u);var Te=!1;if(fe<we)Te=!ke(G,oe);else{var Ze=1,Ye=t5;se===4&&(Ze=4,Ye=1),Te=!0,Pe(G.iKey,G.latency,Ze,Ye)&&(Te=!ke(G,oe))}Te&&te(hc,[G],Co.QueueFull)}ee.setEventQueueLimits=function(G,oe){d=G>0?G:1e4,b=oe>0?oe:0,be();var se=l>G;if(!se&&I>0)for(var fe=1;!se&&fe<=3;fe++){var we=E[fe];we&&we.batches&&ye(we.batches,function(Te){Te&&Te.count()>=I&&(se=!0)})}wt(!0,se)},ee.pause=function(){_e(),a=!0,C.pause()},ee.resume=function(){a=!1,C.resume(),Z()},ee.addResponseHandler=function(G){C._responseHandlers.push(G)},ee._loadTransmitProfiles=function(G){re(),xt(G,function(oe,se){var fe=se.length;if(fe>=2){var we=fe>2?se[2]:0;if(se.splice(0,fe-2),se[1]<0&&(se[0]=-1),se[1]>0&&se[0]>0){var Te=se[0]/se[1];se[0]=Math.ceil(Te)*se[1]}we>=0&&se[1]>=0&&we>se[1]&&(we=se[1]),se.push(we),f[oe]=se}})},ee.flush=function(G,oe,se){if(G===void 0&&(G=!0),!a)if(se=se||1,G)s==null?(_e(),Ke(1,0,se),s=Ee(function(){s=null,Pn(oe,se)},0)):i.push(oe);else{var fe=_e();K(1,1,se),oe!=null&&oe(),fe&&Z()}},ee.setMsaAuthTicket=function(G){C.addHeader($f,G)},ee.hasEvents=Y,ee._setTransmitProfile=function(G){p!==G&&f[G]!==void 0&&(_e(),p=G,Z())};function K(G,oe,se){var fe=Ke(G,oe,se);return C.sendQueuedRequests(oe,se),fe}function Y(){return l>0}function Z(){if(T>=0&&Ke(T,0,P)&&C.sendQueuedRequests(0,P),c>0&&!h&&!a){var G=f[p][2];G>=0&&(h=Ee(function(){h=null,K(4,0,1),Z()},G))}var oe=f[p][1];!m&&!s&&oe>=0&&!a&&(Y()?m=Ee(function(){m=null,K(v===0?3:1,0,1),v++,v%=2,Z()},oe):v=0)}ee._backOffTransmission=function(){g<r5&&(g++,_e(),Z())},ee._clearBackOff=function(){g&&(g=0,_e(),Z())};function me(){n=null,o=!1,i=[],s=null,a=!1,c=0,u=500,l=0,d=1e4,f={},p=fc,m=null,h=null,g=0,v=0,w=null,E={},b=void 0,I=0,T=-1,P=null,S=!0,k=!1,A=k1,N=D1,z=null,Q=Hf(),C=new S1(T1,R1,n5,{requeue:V,send:he,sent:Ue,drop:Oe,rspFail:ve,oth:Le},Q),In(),Ce(),be()}function Ee(G,oe){oe===0&&g&&(oe=1);var se=1e3;return g&&(se=fv(g-1)),Q.set(G,oe*se)}function _e(){return m!==null?(Q.clear(m),m=null,v=0,!0):!1}function Ie(G,oe){_e(),s&&(Q.clear(s),s=null),a||K(1,G,oe)}function Ce(){E[4]={batches:[],iKeyMap:{}},E[3]={batches:[],iKeyMap:{}},E[2]={batches:[],iKeyMap:{}},E[1]={batches:[],iKeyMap:{}}}function ht(G,oe,se){var fe=E[oe];fe||(oe=1,fe=E[oe]);var we=fe.iKeyMap[G];return!we&&se&&(we=yl.create(G),fe.batches.push(we),fe.iKeyMap[G]=we),we}function wt(G,oe){C.canSendRequest()&&!g&&(b>0&&l>b&&(oe=!0),oe&&s==null&&ee.flush(G,null,20))}function ke(G,oe){S&&(G=Ii(G));var se=G.latency,fe=ht(G.iKey,se,!0);return fe.addEvent(G)?(se!==4?(l++,oe&&G.sendAttempt===0&&wt(!G.sync,I>0&&fe.count()>=I)):c++,!0):!1}function Pe(G,oe,se,fe){for(;se<=oe;){var we=ht(G,oe,!0);if(we&&we.count()>0){var Te=we.split(0,fe),Ze=Te.count();if(Ze>0)return se===4?c-=Ze:l-=Ze,de(hc,[Te],Co.QueueFull),!0}se++}return Ae(),!1}function Ae(){for(var G=0,oe=0,se=function(we){var Te=E[we];Te&&Te.batches&&ye(Te.batches,function(Ze){we===4?G+=Ze.count():oe+=Ze.count()})},fe=1;fe<=4;fe++)se(fe);l=oe,c=G}function Ke(G,oe,se){var fe=!1,we=oe===0;return!we||C.canSendRequest()?$t(ee.core,function(){return"PostChannel._queueBatches"},function(){for(var Te=[],Ze=4;Ze>=G;){var Ye=E[Ze];Ye&&Ye.batches&&Ye.batches.length>0&&(ye(Ye.batches,function(rt){C.addBatch(rt)?fe=fe||rt&&rt.count()>0:Te=Te.concat(rt.events()),Ze===4?c-=rt.count():l-=rt.count()}),Ye.batches=[],Ye.iKeyMap={}),Ze--}Te.length>0&&te(hc,Te,Co.KillSwitch),fe&&T>=G&&(T=-1,P=0)},function(){return{latency:G,sendType:oe,sendReason:se}},!we):(T=T>=0?Math.min(T,G):G,P=Math.max(P,se)),fe}function Pn(G,oe){K(1,0,oe),Ae(),qr(function(){G&&G(),i.length>0?s=Ee(function(){s=null,Pn(i.shift(),oe)},0):(s=null,Z())})}function qr(G){C.isCompletelyIdle()?G():s=Ee(function(){s=null,qr(G)},e5)}function re(){_e(),In(),p=fc,Z()}function In(){f={},f[fc]=[2,1,0],f[tv]=[6,3,0],f[rv]=[18,9,0]}function V(G,oe){var se=[],fe=A;k&&(fe=N),ye(G,function(we){we&&we.count()>0&&ye(we.events(),function(Te){Te&&(Te.sync&&(Te.latency=4,Te.sync=!1),Te.sendAttempt<fe?(hl(Te,ee.identifier),j(Te,!1)):se.push(Te))})}),se.length>0&&te(hc,se,Co.NonRetryableStatus),k&&Ie(2,2)}function ae(G,oe){var se=ee._notificationManager||{},fe=se[G];if(fe)try{fe.apply(se,oe)}catch(we){Ut(ee.diagLog(),1,74,G+" notification failed: "+we)}}function te(G,oe){for(var se=[],fe=2;fe<arguments.length;fe++)se[fe-2]=arguments[fe];oe&&oe.length>0&&ae(G,[oe].concat(se))}function de(G,oe){for(var se=[],fe=2;fe<arguments.length;fe++)se[fe-2]=arguments[fe];oe&&oe.length>0&&ye(oe,function(we){we&&we.count()>0&&ae(G,[we.events()].concat(se))})}function he(G,oe,se){G&&G.length>0&&ae("eventsSendRequest",[oe>=1e3&&oe<=1999?oe-1e3:0,se!==!0])}function Ue(G,oe){de("eventsSent",G,oe),Z()}function Oe(G,oe){de(hc,G,oe>=8e3&&oe<=8999?oe-8e3:Co.Unknown)}function ve(G){de(hc,G,Co.NonRetryableStatus),Z()}function Le(G,oe){de(hc,G,Co.Unknown),Z()}function be(){!n||!n.disableAutoBatchFlushLimit?I=Math.max(T1*(R1+1),d/6):I=0}_n(ee,"_setTimeoutOverride",function(){return Q.set},function(G){Q=Hf(G,Q.clear)}),_n(ee,"_clearTimeoutOverride",function(){return Q.clear},function(G){Q=Hf(Q.set,G)})}),r}return t}(ac),N1=i5});var F1={};yy(F1,{BE_PROFILE:()=>rv,NRT_PROFILE:()=>tv,PostChannel:()=>N1,RT_PROFILE:()=>fc});var M1=Fe(()=>{L1();Pb()});var RM=$((ime,DM)=>{var s5=Object.create,qf=Object.defineProperty,a5=Object.defineProperties,c5=Object.getOwnPropertyDescriptor,u5=Object.getOwnPropertyDescriptors,l5=Object.getOwnPropertyNames,U1=Object.getOwnPropertySymbols,d5=Object.getPrototypeOf,j1=Object.prototype.hasOwnProperty,f5=Object.prototype.propertyIsEnumerable,$1=(e,t,r)=>t in e?qf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gc=(e,t)=>{for(var r in t||(t={}))j1.call(t,r)&&$1(e,r,t[r]);if(U1)for(var r of U1(t))f5.call(t,r)&&$1(e,r,t[r]);return e},p5=(e,t)=>a5(e,u5(t)),F=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),m5=(e,t)=>{for(var r in t)qf(e,r,{get:t[r],enumerable:!0})},H1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of l5(t))!j1.call(e,o)&&o!==r&&qf(e,o,{get:()=>t[o],enumerable:!(n=c5(t,o))||n.enumerable});return e},mv=(e,t,r)=>(r=e!=null?s5(d5(e)):{},H1(t||!e||!e.__esModule?qf(r,"default",{value:e,enumerable:!0}):r,e)),h5=e=>H1(qf({},"__esModule",{value:!0}),e),vr=F((e,t)=>{"use strict";var r=function(){function n(){}return n.info=function(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];n.enableDebug&&console.info(n.TAG+o,i)},n.warn=function(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];n.disableWarnings||console.warn(n.TAG+o,i)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();t.exports=r}),q1=F(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var r=El(),n=require("events"),o=function(){function i(){}return i.prototype.active=function(){var s=this,a=r.CorrelationContextManager.getCurrentContext();return t(t({},a),{getValue:function(c){return s._activeSymbol?c===s._activeSymbol?a:!1:(s._activeSymbol=c,a)},setValue:function(){}})},i.prototype.with=function(s,a){var c=s.parentSpanId,u=s.name,l=i._spanToContext(s,c,u);return r.CorrelationContextManager.runWithContext(l,a)()},i.prototype.bind=function(s){return typeof s=="function"?r.CorrelationContextManager.wrapCallback(s):(s instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(s),s)},i.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},i.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},i._spanToContext=function(s,a,c){var u=a?"|"+s.spanContext().traceId+"."+a+".":s.spanContext().traceId,l=t(t({},s.spanContext()),{traceFlags:s.spanContext().traceFlags}),d=r.CorrelationContextManager.spanToContextObject(l,u,c);return d},i}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o}),g5=F((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=e.re=[],a=e.src=[],c=0,u=c++;a[u]="0|[1-9]\\d*";var l=c++;a[l]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[m]+"(?:\\."+a[m]+")*))";var v=c++;a[v]="(?:-?("+a[h]+"(?:\\."+a[h]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var E=c++,b="v?"+a[f]+a[g]+"?"+a[C]+"?";a[E]="^"+b+"$";var I="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",T=c++;a[T]="^"+I+"$";var P=c++;a[P]="((?:<|>)?=?)";var S=c++;a[S]=a[l]+"|x|X|\\*";var k=c++;a[k]=a[u]+"|x|X|\\*";var A=c++;a[A]="[v=\\s]*("+a[k]+")(?:\\.("+a[k]+")(?:\\.("+a[k]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var N=c++;a[N]="[v=\\s]*("+a[S]+")(?:\\.("+a[S]+")(?:\\.("+a[S]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var z=c++;a[z]="^"+a[P]+"\\s*"+a[A]+"$";var Q=c++;a[Q]="^"+a[P]+"\\s*"+a[N]+"$";var ee=c++;a[ee]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var ne=c++;a[ne]="(?:~>?)";var U=c++;a[U]="(\\s*)"+a[ne]+"\\s+",s[U]=new RegExp(a[U],"g");var L="$1~",D=c++;a[D]="^"+a[ne]+a[A]+"$";var j=c++;a[j]="^"+a[ne]+a[N]+"$";var K=c++;a[K]="(?:\\^)";var Y=c++;a[Y]="(\\s*)"+a[K]+"\\s+",s[Y]=new RegExp(a[Y],"g");var Z="$1^",me=c++;a[me]="^"+a[K]+a[A]+"$";var Ee=c++;a[Ee]="^"+a[K]+a[N]+"$";var _e=c++;a[_e]="^"+a[P]+"\\s*("+I+")$|^$";var Ie=c++;a[Ie]="^"+a[P]+"\\s*("+b+")$|^$";var Ce=c++;a[Ce]="(\\s*)"+a[P]+"\\s*("+I+"|"+a[A]+")",s[Ce]=new RegExp(a[Ce],"g");var ht="$1$2$3",wt=c++;a[wt]="^\\s*("+a[A]+")\\s+-\\s+("+a[A]+")\\s*$";var ke=c++;a[ke]="^\\s*("+a[N]+")\\s+-\\s+("+a[N]+")\\s*$";var Pe=c++;for(a[Pe]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,a[Ae]),s[Ae]||(s[Ae]=new RegExp(a[Ae]));var Ae;e.parse=Ke;function Ke(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof re)return y;if(typeof y!="string"||y.length>n)return null;var x=_.loose?s[T]:s[E];if(!x.test(y))return null;try{return new re(y,_)}catch{return null}}e.valid=Pn;function Pn(y,_){var x=Ke(y,_);return x?x.version:null}e.clean=qr;function qr(y,_){var x=Ke(y.trim().replace(/^[=v]+/,""),_);return x?x.version:null}e.SemVer=re;function re(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof re){if(y.loose===_.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(y,_);r("SemVer",y,_),this.options=_,this.loose=!!_.loose;var x=y.trim().match(_.loose?s[T]:s[E]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(O){if(/^[0-9]+$/.test(O)){var M=+O;if(M>=0&&M<o)return M}return O}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof re||(y=new re(y,this.options)),this.compareMain(y)||this.comparePre(y)},re.prototype.compareMain=function(y){return y instanceof re||(y=new re(y,this.options)),te(this.major,y.major)||te(this.minor,y.minor)||te(this.patch,y.patch)},re.prototype.comparePre=function(y){if(y instanceof re||(y=new re(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var _=0;do{var x=this.prerelease[_],O=y.prerelease[_];if(r("prerelease compare",_,x,O),x===void 0&&O===void 0)return 0;if(O===void 0)return 1;if(x===void 0)return-1;if(x!==O)return te(x,O)}while(++_)},re.prototype.inc=function(y,_){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},e.inc=In;function In(y,_,x,O){typeof x=="string"&&(O=x,x=void 0);try{return new re(y,x).inc(_,O).version}catch{return null}}e.diff=V;function V(y,_){if(we(y,_))return null;var x=Ke(y),O=Ke(_),M="";if(x.prerelease.length||O.prerelease.length){M="pre";var H="prerelease"}for(var W in x)if((W==="major"||W==="minor"||W==="patch")&&x[W]!==O[W])return M+W;return H}e.compareIdentifiers=te;var ae=/^[0-9]+$/;function te(y,_){var x=ae.test(y),O=ae.test(_);return x&&O&&(y=+y,_=+_),y===_?0:x&&!O?-1:O&&!x?1:y<_?-1:1}e.rcompareIdentifiers=de;function de(y,_){return te(_,y)}e.major=he;function he(y,_){return new re(y,_).major}e.minor=Ue;function Ue(y,_){return new re(y,_).minor}e.patch=Oe;function Oe(y,_){return new re(y,_).patch}e.compare=ve;function ve(y,_,x){return new re(y,x).compare(new re(_,x))}e.compareLoose=Le;function Le(y,_){return ve(y,_,!0)}e.rcompare=be;function be(y,_,x){return ve(_,y,x)}e.sort=G;function G(y,_){return y.sort(function(x,O){return e.compare(x,O,_)})}e.rsort=oe;function oe(y,_){return y.sort(function(x,O){return e.rcompare(x,O,_)})}e.gt=se;function se(y,_,x){return ve(y,_,x)>0}e.lt=fe;function fe(y,_,x){return ve(y,_,x)<0}e.eq=we;function we(y,_,x){return ve(y,_,x)===0}e.neq=Te;function Te(y,_,x){return ve(y,_,x)!==0}e.gte=Ze;function Ze(y,_,x){return ve(y,_,x)>=0}e.lte=Ye;function Ye(y,_,x){return ve(y,_,x)<=0}e.cmp=rt;function rt(y,_,x,O){switch(_){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return we(y,x,O);case"!=":return Te(y,x,O);case">":return se(y,x,O);case">=":return Ze(y,x,O);case"<":return fe(y,x,O);case"<=":return Ye(y,x,O);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=Me;function Me(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof Me){if(y.loose===!!_.loose)return y;y=y.value}if(!(this instanceof Me))return new Me(y,_);r("comparator",y,_),this.options=_,this.loose=!!_.loose,this.parse(y),this.semver===Tt?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Tt={};Me.prototype.parse=function(y){var _=this.options.loose?s[_e]:s[Ie],x=y.match(_);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new re(x[2],this.options.loose):this.semver=Tt},Me.prototype.toString=function(){return this.value},Me.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Tt?!0:(typeof y=="string"&&(y=new re(y,this.options)),rt(y,this.operator,this.semver,this.options))},Me.prototype.intersects=function(y,_){if(!(y instanceof Me))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var x;if(this.operator==="")return x=new ge(y.value,_),Cr(this.value,x,_);if(y.operator==="")return x=new ge(this.value,_),Cr(y.semver,x,_);var O=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),M=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),H=this.semver.version===y.semver.version,W=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ue=rt(this.semver,"<",y.semver,_)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),ce=rt(this.semver,">",y.semver,_)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return O||M||H&&W||ue||ce},e.Range=ge;function ge(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof ge)return y.loose===!!_.loose&&y.includePrerelease===!!_.includePrerelease?y:new ge(y.raw,_);if(y instanceof Me)return new ge(y.value,_);if(!(this instanceof ge))return new ge(y,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ge.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ge.prototype.toString=function(){return this.range},ge.prototype.parseRange=function(y){var _=this.options.loose;y=y.trim();var x=_?s[ke]:s[wt];y=y.replace(x,Js),r("hyphen replace",y),y=y.replace(s[Ce],ht),r("comparator trim",y,s[Ce]),y=y.replace(s[U],L),y=y.replace(s[Y],Z),y=y.split(/\s+/).join(" ");var O=_?s[_e]:s[Ie],M=y.split(" ").map(function(H){return no(H,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(M=M.filter(function(H){return!!H.match(O)})),M=M.map(function(H){return new Me(H,this.options)},this),M},ge.prototype.intersects=function(y,_){if(!(y instanceof ge))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(O){return y.set.some(function(M){return M.every(function(H){return O.intersects(H,_)})})})})},e.toComparators=Bi;function Bi(y,_){return new ge(y,_).set.map(function(x){return x.map(function(O){return O.value}).join(" ").trim().split(" ")})}function no(y,_){return r("comp",y,_),y=zs(y,_),r("caret",y),y=on(y,_),r("tildes",y),y=Qs(y,_),r("xrange",y),y=kr(y,_),r("stars",y),y}function $e(y){return!y||y.toLowerCase()==="x"||y==="*"}function on(y,_){return y.trim().split(/\s+/).map(function(x){return Gs(x,_)}).join(" ")}function Gs(y,_){var x=_.loose?s[j]:s[D];return y.replace(x,function(O,M,H,W,ue){r("tilde",y,O,M,H,W,ue);var ce;return $e(M)?ce="":$e(H)?ce=">="+M+".0.0 <"+(+M+1)+".0.0":$e(W)?ce=">="+M+"."+H+".0 <"+M+"."+(+H+1)+".0":ue?(r("replaceTilde pr",ue),ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+(+H+1)+".0"):ce=">="+M+"."+H+"."+W+" <"+M+"."+(+H+1)+".0",r("tilde return",ce),ce})}function zs(y,_){return y.trim().split(/\s+/).map(function(x){return Ks(x,_)}).join(" ")}function Ks(y,_){r("caret",y,_);var x=_.loose?s[Ee]:s[me];return y.replace(x,function(O,M,H,W,ue){r("caret",y,O,M,H,W,ue);var ce;return $e(M)?ce="":$e(H)?ce=">="+M+".0.0 <"+(+M+1)+".0.0":$e(W)?M==="0"?ce=">="+M+"."+H+".0 <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+".0 <"+(+M+1)+".0.0":ue?(r("replaceCaret pr",ue),M==="0"?H==="0"?ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+H+"."+(+W+1):ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+"."+W+"-"+ue+" <"+(+M+1)+".0.0"):(r("no pr"),M==="0"?H==="0"?ce=">="+M+"."+H+"."+W+" <"+M+"."+H+"."+(+W+1):ce=">="+M+"."+H+"."+W+" <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+"."+W+" <"+(+M+1)+".0.0"),r("caret return",ce),ce})}function Qs(y,_){return r("replaceXRanges",y,_),y.split(/\s+/).map(function(x){return Ys(x,_)}).join(" ")}function Ys(y,_){y=y.trim();var x=_.loose?s[Q]:s[z];return y.replace(x,function(O,M,H,W,ue,ce){r("xRange",y,O,M,H,W,ue,ce);var nt=$e(H),Je=nt||$e(W),Ge=Je||$e(ue),Ve=Ge;return M==="="&&Ve&&(M=""),nt?M===">"||M==="<"?O="<0.0.0":O="*":M&&Ve?(Je&&(W=0),ue=0,M===">"?(M=">=",Je?(H=+H+1,W=0,ue=0):(W=+W+1,ue=0)):M==="<="&&(M="<",Je?H=+H+1:W=+W+1),O=M+H+"."+W+"."+ue):Je?O=">="+H+".0.0 <"+(+H+1)+".0.0":Ge&&(O=">="+H+"."+W+".0 <"+H+"."+(+W+1)+".0"),r("xRange return",O),O})}function kr(y,_){return r("replaceStars",y,_),y.trim().replace(s[Pe],"")}function Js(y,_,x,O,M,H,W,ue,ce,nt,Je,Ge,Ve){return $e(x)?_="":$e(O)?_=">="+x+".0.0":$e(M)?_=">="+x+"."+O+".0":_=">="+_,$e(ce)?ue="":$e(nt)?ue="<"+(+ce+1)+".0.0":$e(Je)?ue="<"+ce+"."+(+nt+1)+".0":Ge?ue="<="+ce+"."+nt+"."+Je+"-"+Ge:ue="<="+ue,(_+" "+ue).trim()}ge.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new re(y,this.options));for(var _=0;_<this.set.length;_++)if(Xs(this.set[_],y,this.options))return!0;return!1};function Xs(y,_,x){for(var O=0;O<y.length;O++)if(!y[O].test(_))return!1;if(_.prerelease.length&&!x.includePrerelease){for(O=0;O<y.length;O++)if(r(y[O].semver),y[O].semver!==Tt&&y[O].semver.prerelease.length>0){var M=y[O].semver;if(M.major===_.major&&M.minor===_.minor&&M.patch===_.patch)return!0}return!1}return!0}e.satisfies=Cr;function Cr(y,_,x){try{_=new ge(_,x)}catch{return!1}return _.test(y)}e.maxSatisfying=Zs;function Zs(y,_,x){var O=null,M=null;try{var H=new ge(_,x)}catch{return null}return y.forEach(function(W){H.test(W)&&(!O||M.compare(W)===-1)&&(O=W,M=new re(O,x))}),O}e.minSatisfying=ea;function ea(y,_,x){var O=null,M=null;try{var H=new ge(_,x)}catch{return null}return y.forEach(function(W){H.test(W)&&(!O||M.compare(W)===1)&&(O=W,M=new re(O,x))}),O}e.minVersion=Tn;function Tn(y,_){y=new ge(y,_);var x=new re("0.0.0");if(y.test(x)||(x=new re("0.0.0-0"),y.test(x)))return x;x=null;for(var O=0;O<y.set.length;++O){var M=y.set[O];M.forEach(function(H){var W=new re(H.semver.version);switch(H.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!x||se(x,W))&&(x=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+H.operator)}})}return x&&y.test(x)?x:null}e.validRange=ta;function ta(y,_){try{return new ge(y,_).range||"*"}catch{return null}}e.ltr=ra;function ra(y,_,x){return sn(y,_,"<",x)}e.gtr=na;function na(y,_,x){return sn(y,_,">",x)}e.outside=sn;function sn(y,_,x,O){y=new re(y,O),_=new ge(_,O);var M,H,W,ue,ce;switch(x){case">":M=se,H=Ye,W=fe,ue=">",ce=">=";break;case"<":M=fe,H=Ze,W=se,ue="<",ce="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Cr(y,_,O))return!1;for(var nt=0;nt<_.set.length;++nt){var Je=_.set[nt],Ge=null,Ve=null;if(Je.forEach(function(gt){gt.semver===Tt&&(gt=new Me(">=0.0.0")),Ge=Ge||gt,Ve=Ve||gt,M(gt.semver,Ge.semver,O)?Ge=gt:W(gt.semver,Ve.semver,O)&&(Ve=gt)}),Ge.operator===ue||Ge.operator===ce||(!Ve.operator||Ve.operator===ue)&&H(y,Ve.semver)||Ve.operator===ce&&W(y,Ve.semver))return!1}return!0}e.prerelease=oa;function oa(y,_){var x=Ke(y,_);return x&&x.prerelease.length?x.prerelease:null}e.intersects=kn;function kn(y,_,x){return y=new ge(y,x),_=new ge(_,x),y.intersects(_)}e.coerce=ia;function ia(y){if(y instanceof re)return y;if(typeof y!="string")return null;var _=y.match(s[ee]);return _==null?null:Ke(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),B1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=require("path"),r=g5(),n=require("module"),o=Object.keys(process.binding("natives")),i=n.prototype.require;function s(a){var c={};return function(u){var l=i.apply(this,arguments);if(a[u]){var d=n._resolveFilename(u,this);if(c.hasOwnProperty(d))return c[d];var f=void 0;if(o.indexOf(u)<0)try{f=i.call(this,t.join(u,"package.json")).version}catch{return l}else f=process.version.substring(1);var p=f.indexOf("-");p>=0&&(f=f.substring(0,p));for(var m=l,h=0,g=a[u];h<g.length;h++){var v=g[h];r.satisfies(f,v.versionSpecifier)&&(m=v.patch(m,d))}return c[d]=m}return l}}e.makePatchingRequire=s}),v5=F((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),Qt=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=B1(),r=B1();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(s){return!0},o=function(){function s(){this.version=v5().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return s.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(u){var l=u.filter;return!l||l(!1)}):!1},s.prototype.publish=function(a,c){if(!this.currentlyPublishing){var u=this.subscribers[a];if(u){var l={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,u.forEach(function(d){var f=d.listener,p=d.filter;try{p&&p(!0)&&f(l)}catch{}}),this.currentlyPublishing=!1}}},s.prototype.subscribe=function(a,c,u){u===void 0&&(u=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:u})},s.prototype.unsubscribe=function(a,c,u){u===void 0&&(u=n);var l=this.subscribers[a];if(l){for(var d=0;d<l.length;++d)if(l[d].listener===c&&l[d].filter===u)return l.splice(d,1),!0}return!1},s.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},s.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},s.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(u){return a(c(u))}},s.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},s.prototype.getPatchesObject=function(){return this.knownPatches},s}();global.diagnosticsSource||(global.diagnosticsSource=new o,i=require("module"),i.prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var i;e.channel=global.diagnosticsSource}),y5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),w5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),C5=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(w5(),e)}),E5=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(C5(),e)}),V1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),_5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=V1(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(o){var i=new Set([o]),s=new Set,a=o.match(r);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(c.prerelease!=null)return function(d){return d===o};function u(d){return s.add(d),!1}function l(d){return i.add(d),!0}return function(d){if(i.has(d))return!0;if(s.has(d))return!1;var f=d.match(r);if(!f)return u(d);var p={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};return p.prerelease!=null||c.major!==p.major?u(d):c.major===0?c.minor===p.minor&&c.patch<=p.patch?l(d):u(d):c.minor<=p.minor?l(d):u(d)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)}),Bf=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=E5(),r=V1(),n=_5(),o=r.VERSION.split(".")[0],i=Symbol.for("opentelemetry.js.api."+o),s=t._globalThis;function a(l,d,f,p){var m;p===void 0&&(p=!1);var h=s[i]=(m=s[i])!==null&&m!==void 0?m:{version:r.VERSION};if(!p&&h[l]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+l);return f.error(g.stack||g.message),!1}if(h.version!==r.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return f.error(g.stack||g.message),!1}return h[l]=d,f.debug("@opentelemetry/api: Registered a global for "+l+" v"+r.VERSION+"."),!0}e.registerGlobal=a;function c(l){var d,f,p=(d=s[i])===null||d===void 0?void 0:d.version;if(!(!p||!n.isCompatible(p)))return(f=s[i])===null||f===void 0?void 0:f[l]}e.getGlobal=c;function u(l,d){d.debug("@opentelemetry/api: Unregistering a global for "+l+" v"+r.VERSION+".");var f=s[i];f&&delete f[l]}e.unregisterGlobal=u}),b5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=Bf(),r=function(){function o(i){this._namespace=i.namespace||"DiagComponentLogger"}return o.prototype.debug=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("debug",this._namespace,i)},o.prototype.error=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("error",this._namespace,i)},o.prototype.info=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("info",this._namespace,i)},o.prototype.warn=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("warn",this._namespace,i)},o.prototype.verbose=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n("verbose",this._namespace,i)},o}();e.DiagComponentLogger=r;function n(o,i,s){var a=t.getGlobal("diag");if(a)return s.unshift(i),a[o].apply(a,s)}}),jb=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(t=e.DiagLogLevel||(e.DiagLogLevel={}))}),x5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=jb();function r(n,o){n<t.DiagLogLevel.NONE?n=t.DiagLogLevel.NONE:n>t.DiagLogLevel.ALL&&(n=t.DiagLogLevel.ALL),o=o||{};function i(s,a){var c=o[s];return typeof c=="function"&&n>=a?c.bind(o):function(){}}return{error:i("error",t.DiagLogLevel.ERROR),warn:i("warn",t.DiagLogLevel.WARN),info:i("info",t.DiagLogLevel.INFO),debug:i("debug",t.DiagLogLevel.DEBUG),verbose:i("verbose",t.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=r}),Vf=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=b5(),r=x5(),n=jb(),o=Bf(),i="diag",s=function(){function a(){function c(l){return function(){var d=o.getGlobal("diag");if(d)return d[l].apply(d,arguments)}}var u=this;u.setLogger=function(l,d){var f,p;if(d===void 0&&(d=n.DiagLogLevel.INFO),l===u){var m=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return u.error((f=m.stack)!==null&&f!==void 0?f:m.message),!1}var h=o.getGlobal("diag"),g=r.createLogLevelDiagLogger(d,l);if(h){var v=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";h.warn("Current logger will be overwritten from "+v),g.warn("Current logger will overwrite one already registered from "+v)}return o.registerGlobal("diag",g,u,!0)},u.disable=function(){o.unregisterGlobal(i,u)},u.createComponentLogger=function(l){return new t.DiagComponentLogger(l)},u.verbose=c("verbose"),u.debug=c("debug"),u.info=c("info"),u.warn=c("warn"),u.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();e.DiagAPI=s}),S5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var o=this._entries.get(n);if(o)return Object.assign({},o)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var o=n[0],i=n[1];return[o,i]})},r.prototype.setEntry=function(n,o){var i=new r(this._entries);return i._entries.set(n,o),i},r.prototype.removeEntry=function(n){var o=new r(this._entries);return o._entries.delete(n),o},r.prototype.removeEntries=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];for(var i=new r(this._entries),s=0,a=n;s<a.length;s++){var c=a[s];i._entries.delete(c)}return i},r.prototype.clear=function(){return new r},r}();e.BaggageImpl=t}),P5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),W1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=Vf(),r=S5(),n=P5(),o=t.DiagAPI.instance();function i(a){return a===void 0&&(a={}),new r.BaggageImpl(new Map(Object.entries(a)))}e.createBaggage=i;function s(a){return typeof a!="string"&&(o.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return a}}}e.baggageEntryMetadataFromString=s}),I5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),T5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),k5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function o(s){return function(){var a=arguments;if(console){var c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var i=0;i<t.length;i++)this[t[i].n]=o(t[i].c)}return n}();e.DiagConsoleLogger=r}),D5=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(k5(),e),r(jb(),e)}),G1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(t,r){if(t!=null)return t[r]},keys:function(t){return t==null?[]:Object.keys(t)}},e.defaultTextMapSetter={set:function(t,r,n){t!=null&&(t[r]=n)}}}),R5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),A5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),hv=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function t(n){return Symbol.for(n)}e.createContextKey=t;var r=function(){function n(o){var i=this;i._currentContext=o?new Map(o):new Map,i.getValue=function(s){return i._currentContext.get(s)},i.setValue=function(s,a){var c=new n(i._currentContext);return c._currentContext.set(s,a),c},i.deleteValue=function(s){var a=new n(i._currentContext);return a._currentContext.delete(s),a}}return n}();e.ROOT_CONTEXT=new r}),O5=F(e=>{"use strict";var t=e&&e.__spreadArray||function(o,i){for(var s=0,a=i.length,c=o.length;s<a;s++,c++)o[c]=i[s];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=hv(),n=function(){function o(){}return o.prototype.active=function(){return r.ROOT_CONTEXT},o.prototype.with=function(i,s,a){for(var c=[],u=3;u<arguments.length;u++)c[u-3]=arguments[u];return s.call.apply(s,t([a],c))},o.prototype.bind=function(i,s){return s},o.prototype.enable=function(){return this},o.prototype.disable=function(){return this},o}();e.NoopContextManager=n}),z1=F(e=>{"use strict";var t=e&&e.__spreadArray||function(c,u){for(var l=0,d=u.length,f=c.length;l<d;l++,f++)c[f]=u[l];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=O5(),n=Bf(),o=Vf(),i="context",s=new r.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(u){return n.registerGlobal(i,u,o.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(u,l,d){for(var f,p=[],m=3;m<arguments.length;m++)p[m-3]=arguments[m];return(f=this._getContextManager()).with.apply(f,t([u,l,d],p))},c.prototype.bind=function(u,l){return this._getContextManager().bind(u,l)},c.prototype._getContextManager=function(){return n.getGlobal(i)||s},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(i,o.DiagAPI.instance())},c}();e.ContextAPI=a}),K1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(t=e.TraceFlags||(e.TraceFlags={}))}),$b=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=K1();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}}),Hb=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=$b(),r=function(){function n(o){o===void 0&&(o=t.INVALID_SPAN_CONTEXT),this._spanContext=o}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(o,i){return this},n.prototype.setAttributes=function(o){return this},n.prototype.addEvent=function(o,i){return this},n.prototype.setStatus=function(o){return this},n.prototype.updateName=function(o){return this},n.prototype.end=function(o){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(o,i){},n}();e.NonRecordingSpan=r}),Q1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=hv(),r=Hb(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function o(u){return u.getValue(n)||void 0}e.getSpan=o;function i(u,l){return u.setValue(n,l)}e.setSpan=i;function s(u){return u.deleteValue(n)}e.deleteSpan=s;function a(u,l){return i(u,new r.NonRecordingSpan(l))}e.setSpanContext=a;function c(u){var l;return(l=o(u))===null||l===void 0?void 0:l.spanContext()}e.getSpanContext=c}),qb=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=$b(),r=Hb(),n=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function i(u){return n.test(u)&&u!==t.INVALID_TRACEID}e.isValidTraceId=i;function s(u){return o.test(u)&&u!==t.INVALID_SPANID}e.isValidSpanId=s;function a(u){return i(u.traceId)&&s(u.spanId)}e.isSpanContextValid=a;function c(u){return new r.NonRecordingSpan(u)}e.wrapSpanContext=c}),Y1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=z1(),r=Q1(),n=Hb(),o=qb(),i=t.ContextAPI.getInstance(),s=function(){function c(){}return c.prototype.startSpan=function(u,l,d){var f=Boolean(l==null?void 0:l.root);if(f)return new n.NonRecordingSpan;var p=d&&r.getSpanContext(d);return a(p)&&o.isSpanContextValid(p)?new n.NonRecordingSpan(p):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(u,l,d,f){var p,m,h;if(!(arguments.length<2)){arguments.length===2?h=l:arguments.length===3?(p=l,h=d):(p=l,m=d,h=f);var g=m??i.active(),v=this.startSpan(u,p,g),w=r.setSpan(g,v);return i.with(w,h,void 0,v)}},c}();e.NoopTracer=s;function a(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),J1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=Y1(),r=new t.NoopTracer,n=function(){function o(i,s,a){this._provider=i,this.name=s,this.version=a}return o.prototype.startSpan=function(i,s,a){return this._getTracer().startSpan(i,s,a)},o.prototype.startActiveSpan=function(i,s,a,c){var u=this._getTracer();return Reflect.apply(u.startActiveSpan,u,arguments)},o.prototype._getTracer=function(){if(this._delegate)return this._delegate;var i=this._provider.getDelegateTracer(this.name,this.version);return i?(this._delegate=i,this._delegate):r},o}();e.ProxyTracer=n}),N5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=Y1(),r=function(){function n(){}return n.prototype.getTracer=function(o,i){return new t.NoopTracer},n}();e.NoopTracerProvider=r}),X1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=J1(),r=N5(),n=new r.NoopTracerProvider,o=function(){function i(){}return i.prototype.getTracer=function(s,a){var c;return(c=this.getDelegateTracer(s,a))!==null&&c!==void 0?c:new t.ProxyTracer(this,s,a)},i.prototype.getDelegate=function(){var s;return(s=this._delegate)!==null&&s!==void 0?s:n},i.prototype.setDelegate=function(s){this._delegate=s},i.prototype.getDelegateTracer=function(s,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(s,a)},i}();e.ProxyTracerProvider=o}),L5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),F5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var t;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(t=e.SamplingDecision||(e.SamplingDecision={}))}),M5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),U5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var t;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(t=e.SpanKind||(e.SpanKind={}))}),j5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),H5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var t;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(t=e.SpanStatusCode||(e.SpanStatusCode={}))}),q5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),B5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),V5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),W5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),G5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=Bf(),r=X1(),n=qb(),o=Q1(),i=Vf(),s="trace",a=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(u){var l=t.registerGlobal(s,this._proxyTracerProvider,i.DiagAPI.instance());return l&&this._proxyTracerProvider.setDelegate(u),l},c.prototype.getTracerProvider=function(){return t.getGlobal(s)||this._proxyTracerProvider},c.prototype.getTracer=function(u,l){return this.getTracerProvider().getTracer(u,l)},c.prototype.disable=function(){t.unregisterGlobal(s,i.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();e.TraceAPI=a}),z5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function r(){}return r.prototype.inject=function(n,o){},r.prototype.extract=function(n,o){return n},r.prototype.fields=function(){return[]},r}();e.NoopTextMapPropagator=t}),K5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=hv(),r=t.createContextKey("OpenTelemetry Baggage Key");function n(s){return s.getValue(r)||void 0}e.getBaggage=n;function o(s,a){return s.setValue(r,a)}e.setBaggage=o;function i(s){return s.deleteValue(r)}e.deleteBaggage=i}),Q5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=Bf(),r=z5(),n=G1(),o=K5(),i=W1(),s=Vf(),a="propagation",c=new r.NoopTextMapPropagator,u=function(){function l(){this.createBaggage=i.createBaggage,this.getBaggage=o.getBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}return l.getInstance=function(){return this._instance||(this._instance=new l),this._instance},l.prototype.setGlobalPropagator=function(d){return t.registerGlobal(a,d,s.DiagAPI.instance())},l.prototype.inject=function(d,f,p){return p===void 0&&(p=n.defaultTextMapSetter),this._getGlobalPropagator().inject(d,f,p)},l.prototype.extract=function(d,f,p){return p===void 0&&(p=n.defaultTextMapGetter),this._getGlobalPropagator().extract(d,f,p)},l.prototype.fields=function(){return this._getGlobalPropagator().fields()},l.prototype.disable=function(){t.unregisterGlobal(a,s.DiagAPI.instance())},l.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},l}();e.PropagationAPI=u}),Nt=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(l,d,f,p){p===void 0&&(p=f),Object.defineProperty(l,p,{enumerable:!0,get:function(){return d[f]}})}:function(l,d,f,p){p===void 0&&(p=f),l[p]=d[f]}),r=e&&e.__exportStar||function(l,d){for(var f in l)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&t(d,l,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,r(y5(),e);var n=W1();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(I5(),e),r(T5(),e),r(D5(),e),r(G1(),e),r(R5(),e),r(A5(),e),r(J1(),e),r(X1(),e),r(L5(),e),r(F5(),e),r(M5(),e),r(U5(),e),r(j5(),e),r($5(),e),r(H5(),e),r(K1(),e),r(q5(),e),r(B5(),e),r(V5(),e);var o=qb();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return o.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return o.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return o.isValidSpanId}});var i=$b();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),r(hv(),e),r(W5(),e);var s=z1();e.context=s.ContextAPI.getInstance();var a=G5();e.trace=a.TraceAPI.getInstance();var c=Q5();e.propagation=c.PropagationAPI.getInstance();var u=Vf();e.diag=u.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),Bb=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=Nt(),r=t.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(s){return s.setValue(r,!0)}e.suppressTracing=n;function o(s){return s.deleteValue(r)}e.unsuppressTracing=o;function i(s){return s.getValue(r)===!0}e.isTracingSuppressed=i}),Z1=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),eM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=Nt(),r=Z1(),n=a=>a.reduce((c,u)=>{let l=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${u}`;return l.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:l},"");e.serializeKeyPairs=n;var o=a=>a.getAllEntries().map(([c,u])=>`${encodeURIComponent(c)}=${encodeURIComponent(u.value)}`);e.getKeyPairs=o;var i=a=>{let c=a.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let u=c.shift();if(!u)return;let l=u.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(l.length!==2)return;let d=decodeURIComponent(l[0].trim()),f=decodeURIComponent(l[1].trim()),p;return c.length>0&&(p=t.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:d,value:f,metadata:p}};e.parsePairKeyValue=i;var s=a=>typeof a!="string"||a.length===0?{}:a.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>e.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,u)=>(c[u.key]=u.value,c),{});e.parseKeyPairsIntoRecord=s}),Y5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=Nt(),r=Bb(),n=Z1(),o=eM(),i=class{inject(s,a,c){let u=t.propagation.getBaggage(s);if(!u||r.isTracingSuppressed(s))return;let l=o.getKeyPairs(u).filter(f=>f.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),d=o.serializeKeyPairs(l);d.length>0&&c.set(a,n.BAGGAGE_HEADER,d)}extract(s,a,c){let u=c.get(a,n.BAGGAGE_HEADER);if(!u)return s;let l={};return u.length===0||(u.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(d=>{let f=o.parsePairKeyValue(d);if(f){let p={value:f.value};f.metadata&&(p.metadata=f.metadata),l[f.key]=p}}),Object.entries(l).length===0)?s:t.propagation.setBaggage(s,t.propagation.createBaggage(l))}fields(){return[n.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=i}),J5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function t(i){let s={};if(i==null||typeof i!="object")return s;for(let[a,c]of Object.entries(i))r(c)&&(Array.isArray(c)?s[a]=c.slice():s[a]=c);return s}e.sanitizeAttributes=t;function r(i){return i==null?!0:Array.isArray(i)?n(i):o(i)}e.isAttributeValue=r;function n(i){let s;for(let a of i)if(a!=null){if(!s){if(o(a)){s=typeof a;continue}return!1}if(typeof a!==s)return!1}return!0}function o(i){switch(typeof i){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),tM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=Nt();function r(){return i=>{t.diag.error(n(i))}}e.loggingErrorHandler=r;function n(i){return typeof i=="string"?i:JSON.stringify(o(i))}function o(i){let s={},a=i;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(s[c])return;let u=a[c];u&&(s[c]=String(u))}),a=Object.getPrototypeOf(a);return s}}),rM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=tM(),r=t.loggingErrorHandler();function n(i){r=i}e.setGlobalErrorHandler=n;var o=i=>{try{r(i)}catch{}};e.globalErrorHandler=o}),nM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var t;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(t=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),oM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=Nt(),r=nM(),n=",",o=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function i(p){return o.indexOf(p)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(p){return s.indexOf(p)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(p,m,h,g=-1/0,v=1/0){if(typeof h[p]<"u"){let w=Number(h[p]);isNaN(w)||(w<g?m[p]=g:w>v?m[p]=v:m[p]=w)}}function u(p,m,h,g=n){let v=h[p];typeof v=="string"&&(m[p]=v.split(g).map(w=>w.trim()))}var l={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function d(p,m,h){let g=h[p];if(typeof g=="string"){let v=l[g.toUpperCase()];v!=null&&(m[p]=v)}}function f(p){let m={};for(let h in e.DEFAULT_ENVIRONMENT){let g=h;switch(g){case"OTEL_LOG_LEVEL":d(g,m,p);break;default:if(i(g))c(g,m,p);else if(a(g))u(g,m,p);else{let v=p[g];typeof v<"u"&&v!==null&&(m[g]=String(v))}}}return m}e.parseEnvironment=f}),X5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=require("os"),r=oM();function n(){let o=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},r.DEFAULT_ENVIRONMENT,o)}e.getEnv=n}),Z5=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function t(r){let n=r.length,o="";for(let i=0;i<n;i+=2){let s=r.substring(i,i+2),a=parseInt(s,16);o+=String.fromCharCode(a)}return Buffer.from(o,"ascii").toString("base64")}e.hexToBase64=t}),e8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var t=8,r=16,n=class{constructor(){this.generateTraceId=i(r),this.generateSpanId=i(t)}};e.RandomIdGenerator=n;var o=Buffer.allocUnsafe(r);function i(s){return function(){for(let a=0;a<s/4;a++)o.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<s&&!(o[a]>0);a++)a===s-1&&(o[s-1]=1);return o.toString("hex",0,s)}}}),t8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=require("perf_hooks");e.otperformance=t.performance}),Vb=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),r8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var t;(function(d){d.OTHER_SQL="other_sql",d.MSSQL="mssql",d.MYSQL="mysql",d.ORACLE="oracle",d.DB2="db2",d.POSTGRESQL="postgresql",d.REDSHIFT="redshift",d.HIVE="hive",d.CLOUDSCAPE="cloudscape",d.HSQLDB="hsqldb",d.PROGRESS="progress",d.MAXDB="maxdb",d.HANADB="hanadb",d.INGRES="ingres",d.FIRSTSQL="firstsql",d.EDB="edb",d.CACHE="cache",d.ADABAS="adabas",d.FIREBIRD="firebird",d.DERBY="derby",d.FILEMAKER="filemaker",d.INFORMIX="informix",d.INSTANTDB="instantdb",d.INTERBASE="interbase",d.MARIADB="mariadb",d.NETEZZA="netezza",d.PERVASIVE="pervasive",d.POINTBASE="pointbase",d.SQLITE="sqlite",d.SYBASE="sybase",d.TERADATA="teradata",d.VERTICA="vertica",d.H2="h2",d.COLDFUSION="coldfusion",d.CASSANDRA="cassandra",d.HBASE="hbase",d.MONGODB="mongodb",d.REDIS="redis",d.COUCHBASE="couchbase",d.COUCHDB="couchdb",d.COSMOSDB="cosmosdb",d.DYNAMODB="dynamodb",d.NEO4J="neo4j",d.GEODE="geode",d.ELASTICSEARCH="elasticsearch",d.MEMCACHED="memcached",d.COCKROACHDB="cockroachdb"})(t=e.DbSystemValues||(e.DbSystemValues={}));var r;(function(d){d.ALL="all",d.EACH_QUORUM="each_quorum",d.QUORUM="quorum",d.LOCAL_QUORUM="local_quorum",d.ONE="one",d.TWO="two",d.THREE="three",d.LOCAL_ONE="local_one",d.ANY="any",d.SERIAL="serial",d.LOCAL_SERIAL="local_serial"})(r=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var n;(function(d){d.DATASOURCE="datasource",d.HTTP="http",d.PUBSUB="pubsub",d.TIMER="timer",d.OTHER="other"})(n=e.FaasTriggerValues||(e.FaasTriggerValues={}));var o;(function(d){d.INSERT="insert",d.EDIT="edit",d.DELETE="delete"})(o=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var i;(function(d){d.AWS="aws",d.AZURE="azure",d.GCP="gcp"})(i=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var s;(function(d){d.IP_TCP="ip_tcp",d.IP_UDP="ip_udp",d.IP="ip",d.UNIX="unix",d.PIPE="pipe",d.INPROC="inproc",d.OTHER="other"})(s=e.NetTransportValues||(e.NetTransportValues={}));var a;(function(d){d.HTTP_1_0="1.0",d.HTTP_1_1="1.1",d.HTTP_2_0="2.0",d.SPDY="SPDY",d.QUIC="QUIC"})(a=e.HttpFlavorValues||(e.HttpFlavorValues={}));var c;(function(d){d.QUEUE="queue",d.TOPIC="topic"})(c=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var u;(function(d){d.RECEIVE="receive",d.PROCESS="process"})(u=e.MessagingOperationValues||(e.MessagingOperationValues={}));var l;(function(d){d[d.OK=0]="OK",d[d.CANCELLED=1]="CANCELLED",d[d.UNKNOWN=2]="UNKNOWN",d[d.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",d[d.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",d[d.NOT_FOUND=5]="NOT_FOUND",d[d.ALREADY_EXISTS=6]="ALREADY_EXISTS",d[d.PERMISSION_DENIED=7]="PERMISSION_DENIED",d[d.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",d[d.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",d[d.ABORTED=10]="ABORTED",d[d.OUT_OF_RANGE=11]="OUT_OF_RANGE",d[d.UNIMPLEMENTED=12]="UNIMPLEMENTED",d[d.INTERNAL=13]="INTERNAL",d[d.UNAVAILABLE=14]="UNAVAILABLE",d[d.DATA_LOSS=15]="DATA_LOSS",d[d.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(l=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),n8=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(r8(),e)}),o8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var t;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(t=e.CloudProviderValues||(e.CloudProviderValues={}));var r;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(r=e.CloudPlatformValues||(e.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var o;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(o=e.HostArchValues||(e.HostArchValues={}));var i;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(i=e.OsTypeValues||(e.OsTypeValues={}));var s;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(s=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),i8=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(o8(),e)}),Wf=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(n8(),e),r(i8(),e)}),s8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=Vb(),r=Wf();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}}),a8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function t(r){r.unref()}e.unrefTimer=t}),c8=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(X5(),e),r(Z5(),e),r(e8(),e),r(t8(),e),r(s8(),e),r(a8(),e)}),iM=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(c8(),e)}),u8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=iM(),r=9,n=Math.pow(10,r);function o(h){let g=h/1e3,v=Math.trunc(g),w=Number((g-v).toFixed(r))*n;return[v,w]}function i(){let h=t.otperformance.timeOrigin;if(typeof h!="number"){let g=t.otperformance;h=g.timing&&g.timing.fetchStart}return h}function s(h){let g=o(i()),v=o(typeof h=="number"?h:t.otperformance.now()),w=g[0]+v[0],C=g[1]+v[1];return C>n&&(C-=n,w+=1),[w,C]}e.hrTime=s;function a(h){if(p(h))return h;if(typeof h=="number")return h<i()?s(h):o(h);if(h instanceof Date)return o(h.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=a;function c(h,g){let v=g[0]-h[0],w=g[1]-h[1];return w<0&&(v-=1,w+=n),[v,w]}e.hrTimeDuration=c;function u(h){let g=r,v=`${"0".repeat(g)}${h[1]}Z`,w=v.substr(v.length-g-1);return new Date(h[0]*1e3).toISOString().replace("000Z",w)}e.hrTimeToTimeStamp=u;function l(h){return h[0]*n+h[1]}e.hrTimeToNanoseconds=l;function d(h){return Math.round(h[0]*1e3+h[1]/1e6)}e.hrTimeToMilliseconds=d;function f(h){return Math.round(h[0]*1e6+h[1]/1e3)}e.hrTimeToMicroseconds=f;function p(h){return Array.isArray(h)&&h.length===2&&typeof h[0]=="number"&&typeof h[1]=="number"}e.isTimeInputHrTime=p;function m(h){return p(h)||typeof h=="number"||h instanceof Date}e.isTimeInput=m}),l8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),d8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var t;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(t=e.ExportResultCode||(e.ExportResultCode={}))}),f8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=Nt(),r=class{constructor(n={}){var o;this._propagators=(o=n.propagators)!==null&&o!==void 0?o:[],this._fields=Array.from(new Set(this._propagators.map(i=>typeof i.fields=="function"?i.fields():[]).reduce((i,s)=>i.concat(s),[])))}inject(n,o,i){for(let s of this._propagators)try{s.inject(n,o,i)}catch(a){t.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`)}}extract(n,o,i){return this._propagators.reduce((s,a)=>{try{return a.extract(s,o,i)}catch(c){t.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return s},n)}fields(){return this._fields.slice()}};e.CompositePropagator=r}),p8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=`[a-z]${t}{0,255}`,n=`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`,o=new RegExp(`^(?:${r}|${n})$`),i=/^[ -~]{0,255}[!-~]$/,s=/,|=/;function a(u){return o.test(u)}e.validateKey=a;function c(u){return i.test(u)&&!s.test(u)}e.validateValue=c}),sM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=p8(),r=32,n=512,o=",",i="=",s=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let u=this._clone();return u._internalState.has(a)&&u._internalState.delete(a),u._internalState.set(a,c),u}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+i+this.get(c)),a),[]).join(o)}_parse(a){a.length>n||(this._internalState=a.split(o).reverse().reduce((c,u)=>{let l=u.trim(),d=l.indexOf(i);if(d!==-1){let f=l.slice(0,d),p=l.slice(d+1,u.length);t.validateKey(f)&&t.validateValue(p)&&c.set(f,p)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new s;return a._internalState=new Map(this._internalState),a}};e.TraceState=s}),m8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=Nt(),r=Bb(),n=sM();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var o="00",i="(?!ff)[\\da-f]{2}",s="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",u=new RegExp(`^\\s?(${i})-(${s})-(${a})-(${c})(-.*)?\\s?$`);function l(f){let p=u.exec(f);return!p||p[1]==="00"&&p[5]?null:{traceId:p[2],spanId:p[3],traceFlags:parseInt(p[4],16)}}e.parseTraceParent=l;var d=class{inject(f,p,m){let h=t.trace.getSpanContext(f);if(!h||r.isTracingSuppressed(f)||!t.isSpanContextValid(h))return;let g=`${o}-${h.traceId}-${h.spanId}-0${Number(h.traceFlags||t.TraceFlags.NONE).toString(16)}`;m.set(p,e.TRACE_PARENT_HEADER,g),h.traceState&&m.set(p,e.TRACE_STATE_HEADER,h.traceState.serialize())}extract(f,p,m){let h=m.get(p,e.TRACE_PARENT_HEADER);if(!h)return f;let g=Array.isArray(h)?h[0]:h;if(typeof g!="string")return f;let v=l(g);if(!v)return f;v.isRemote=!0;let w=m.get(p,e.TRACE_STATE_HEADER);if(w){let C=Array.isArray(w)?w.join(","):w;v.traceState=new n.TraceState(typeof C=="string"?C:void 0)}return t.trace.setSpanContext(f,v)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=d}),h8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),g8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=Nt(),r=t.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=e.RPCType||(e.RPCType={}));function o(a,c){return a.setValue(r,c)}e.setRPCMetadata=o;function i(a){return a.deleteValue(r)}e.deleteRPCMetadata=i;function s(a){return a.getValue(r)}e.getRPCMetadata=s}),aM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=Nt(),r=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=r}),cM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=Nt(),r=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=r}),v8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=Nt(),r=rM(),n=aM(),o=cM(),i=class{constructor(s){var a,c,u,l;this._root=s.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new o.AlwaysOnSampler),this._remoteParentSampled=(a=s.remoteParentSampled)!==null&&a!==void 0?a:new o.AlwaysOnSampler,this._remoteParentNotSampled=(c=s.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(u=s.localParentSampled)!==null&&u!==void 0?u:new o.AlwaysOnSampler,this._localParentNotSampled=(l=s.localParentNotSampled)!==null&&l!==void 0?l:new n.AlwaysOffSampler}shouldSample(s,a,c,u,l,d){let f=t.trace.getSpanContext(s);return!f||!t.isSpanContextValid(f)?this._root.shouldSample(s,a,c,u,l,d):f.isRemote?f.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(s,a,c,u,l,d):this._remoteParentNotSampled.shouldSample(s,a,c,u,l,d):f.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(s,a,c,u,l,d):this._localParentNotSampled.shouldSample(s,a,c,u,l,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=i}),y8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=Nt(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,o){return{decision:t.isValidTraceId(o)&&this._accumulate(o)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let o=0;for(let i=0;i<n.length/8;i++){let s=i*8,a=parseInt(n.slice(s,s+8),16);o=(o^a)>>>0}return o}};e.TraceIdRatioBasedSampler=r}),w8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function t(n,o){return typeof o=="string"?n===o:o.test(n)}e.urlMatches=t;function r(n,o){if(!o)return!1;for(let i of o)if(t(n,i))return!0;return!1}e.isUrlIgnored=r}),C8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function t(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}e.isWrapped=t}),Po=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r(Y5(),e),r(J5(),e),r(rM(),e),r(tM(),e),r(u8(),e),r(l8(),e),r(d8(),e),r(Vb(),e),e.baggageUtils=eM(),r(iM(),e),r(f8(),e),r(m8(),e),r(h8(),e),r(g8(),e),r(aM(),e),r(cM(),e),r(v8(),e),r(y8(),e),r(Bb(),e),r(sM(),e),r(oM(),e),r(nM(),e),r(w8(),e),r(C8(),e),r(Vb(),e)}),E8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),uM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=Nt(),r=Po(),n=Wf(),o=E8(),i=class{constructor(s,a,c,u,l,d,f=[],p=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=u,this.parentSpanId=d,this.kind=l,this.links=f,this.startTime=r.timeInputToHrTime(p),this.resource=s.resource,this.instrumentationLibrary=s.instrumentationLibrary,this._spanLimits=s.getSpanLimits(),this._spanProcessor=s.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(s,a){return a==null||this._isSpanEnded()?this:s.length===0?(t.diag.warn(`Invalid attribute key: ${s}`),this):r.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,s)?this:(this.attributes[s]=a,this):(t.diag.warn(`Invalid attribute value set for key: ${s}`),this)}setAttributes(s){for(let[a,c]of Object.entries(s))this.setAttribute(a,c);return this}addEvent(s,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(a)&&(typeof c>"u"&&(c=a),a=void 0),typeof c>"u"&&(c=r.hrTime()),this.events.push({name:s,attributes:a,time:r.timeInputToHrTime(c)}),this)}setStatus(s){return this._isSpanEnded()?this:(this.status=s,this)}updateName(s){return this._isSpanEnded()?this:(this.name=s,this)}end(s=r.hrTime()){if(this._isSpanEnded()){t.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(s),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(s,a=r.hrTime()){let c={};typeof s=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s:s&&(s.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=s.code.toString():s.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=s.name),s.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s.message),s.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=s.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(o.ExceptionEventName,c,a):t.diag.warn(`Failed to record an exception ${s}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=i}),lM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=Nt(),r=Po(),n=r.getEnv(),o=r.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:i(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function i(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(c))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${o}".`),new r.AlwaysOnSampler}}e.buildSamplerFromEnv=i;var s=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let u=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(u)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):u<0||u>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):u}}),_8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=lM();function r(n){let o={sampler:t.buildSamplerFromEnv()},i=Object.assign({},t.DEFAULT_CONFIG,o,n);return i.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),i}e.mergeConfig=r}),b8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=Nt(),r=Po(),n=uM(),o=_8(),i=class{constructor(a,c,u){this._tracerProvider=u;let l=o.mergeConfig(c);this._sampler=l.sampler,this._spanLimits=l.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=u.resource,this.instrumentationLibrary=a}startSpan(a,c={},u=t.context.active()){var l,d;if(r.isTracingSuppressed(u))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let f=s(c,u),p=this._idGenerator.generateSpanId(),m,h,g;!f||!t.trace.isSpanContextValid(f)?m=this._idGenerator.generateTraceId():(m=f.traceId,h=f.traceState,g=f.spanId);let v=(l=c.kind)!==null&&l!==void 0?l:t.SpanKind.INTERNAL,w=(d=c.links)!==null&&d!==void 0?d:[],C=r.sanitizeAttributes(c.attributes),E=this._sampler.shouldSample(c.root?t.trace.setSpanContext(u,t.INVALID_SPAN_CONTEXT):u,m,a,v,C,w),b=E.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,I={traceId:m,spanId:p,traceFlags:b,traceState:h};if(E.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(I);let T=new n.Span(this,u,a,I,v,g,w,c.startTime);return T.setAttributes(Object.assign(C,E.attributes)),T}startActiveSpan(a,c,u,l){let d,f,p;if(arguments.length<2)return;arguments.length===2?p=c:arguments.length===3?(d=c,p=u):(d=c,f=u,p=l);let m=f??t.context.active(),h=this.startSpan(a,d,m),g=t.trace.setSpan(m,h);return t.context.with(g,p,void 0,h)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=i;function s(a,c){if(!a.root)return t.trace.getSpanContext(c)}}),x8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function t(){return`unknown_service:${process.argv0}`}e.defaultServiceName=t}),S8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=fM(),r=Nt(),n=require("util"),o=async(s={})=>{let a=Object.assign(s),c=await Promise.all((a.detectors||[]).map(async u=>{try{let l=await u.detect(a);return r.diag.debug(`${u.constructor.name} found resource.`,l),l}catch(l){return r.diag.debug(`${u.constructor.name} failed: ${l.message}`),t.Resource.empty()}}));return i(c),c.reduce((u,l)=>u.merge(l),t.Resource.empty())};e.detectResources=o;var i=s=>{s.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),P8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=Nt(),r=Po(),n=Wf(),o=Wb(),i=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(s){let a={},c=r.getEnv(),u=c.OTEL_RESOURCE_ATTRIBUTES,l=c.OTEL_SERVICE_NAME;if(u)try{let d=this._parseResourceAttributes(u);Object.assign(a,d)}catch(d){t.diag.debug(`EnvDetector failed: ${d.message}`)}return l&&(a[n.ResourceAttributes.SERVICE_NAME]=l),new o.Resource(a)}_parseResourceAttributes(s){if(!s)return{};let a={},c=s.split(this._COMMA_SEPARATOR,-1);for(let u of c){let l=u.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(l.length!==2)continue;let[d,f]=l;if(d=d.trim(),f=f.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(d))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(f))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[d]=f}return a}_isValid(s){return s.length<=this._MAX_LENGTH&&this._isPrintableString(s)}_isPrintableString(s){for(let a=0;a<s.length;a++){let c=s.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(s){return s.length>0&&this._isValid(s)}};e.envDetector=new i}),I8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=Nt(),r=Wf(),n=Wb(),o=class{async detect(i){let s={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(s,i)}_getResourceAttributes(i,s){return i[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||i[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||i[r.ResourceAttributes.PROCESS_COMMAND]===""||i[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},i))}};e.processDetector=new o}),T8=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(P8(),e),r(I8(),e)}),k8=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(x8(),e),r(S8(),e),r(T8(),e)}),dM=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(k8(),e)}),fM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=Wf(),r=Po(),n=dM(),o=class{constructor(i){this.attributes=i}static empty(){return o.EMPTY}static default(){return new o({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(i){if(!i||!Object.keys(i.attributes).length)return this;let s=Object.assign({},this.attributes,i.attributes);return new o(s)}};e.Resource=o,o.EMPTY=new o({})}),D8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),R8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Wb=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(fM(),e),r(dM(),e),r(D8(),e),r(R8(),e)}),A8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=Po(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let o of this._spanProcessors)n.push(o.forceFlush());return new Promise(o=>{Promise.all(n).then(()=>{o()}).catch(i=>{t.globalErrorHandler(i||new Error("MultiSpanProcessor: forceFlush failed")),o()})})}onStart(n,o){for(let i of this._spanProcessors)i.onStart(n,o)}onEnd(n){for(let o of this._spanProcessors)o.onEnd(n)}shutdown(){let n=[];for(let o of this._spanProcessors)n.push(o.shutdown());return new Promise((o,i)=>{Promise.all(n).then(()=>{o()},i)})}};e.MultiSpanProcessor=r}),pM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var t=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=t}),O8=F((e,t)=>{var r=200,n="__lodash_hash_undefined__",o=800,i=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",l="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",m="[object GeneratorFunction]",h="[object Map]",g="[object Number]",v="[object Null]",w="[object Object]",C="[object Proxy]",E="[object RegExp]",b="[object Set]",I="[object String]",T="[object Undefined]",P="[object WeakMap]",S="[object ArrayBuffer]",k="[object DataView]",A="[object Float32Array]",N="[object Float64Array]",z="[object Int8Array]",Q="[object Int16Array]",ee="[object Int32Array]",ne="[object Uint8Array]",U="[object Uint8ClampedArray]",L="[object Uint16Array]",D="[object Uint32Array]",j=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,Z={};Z[A]=Z[N]=Z[z]=Z[Q]=Z[ee]=Z[ne]=Z[U]=Z[L]=Z[D]=!0,Z[a]=Z[c]=Z[S]=Z[l]=Z[k]=Z[d]=Z[f]=Z[p]=Z[h]=Z[g]=Z[w]=Z[E]=Z[b]=Z[I]=Z[P]=!1;var me=typeof global=="object"&&global&&global.Object===Object&&global,Ee=typeof self=="object"&&self&&self.Object===Object&&self,_e=me||Ee||Function("return this")(),Ie=typeof e=="object"&&e&&!e.nodeType&&e,Ce=Ie&&typeof t=="object"&&t&&!t.nodeType&&t,ht=Ce&&Ce.exports===Ie,wt=ht&&me.process,ke=function(){try{var R=Ce&&Ce.require&&Ce.require("util").types;return R||wt&&wt.binding&&wt.binding("util")}catch{}}(),Pe=ke&&ke.isTypedArray;function Ae(R,B,J){switch(J.length){case 0:return R.call(B);case 1:return R.call(B,J[0]);case 2:return R.call(B,J[0],J[1]);case 3:return R.call(B,J[0],J[1],J[2])}return R.apply(B,J)}function Ke(R,B){for(var J=-1,xe=Array(R);++J<R;)xe[J]=B(J);return xe}function Pn(R){return function(B){return R(B)}}function qr(R,B){return R==null?void 0:R[B]}function re(R,B){return function(J){return R(B(J))}}var In=Array.prototype,V=Function.prototype,ae=Object.prototype,te=_e["__core-js_shared__"],de=V.toString,he=ae.hasOwnProperty,Ue=function(){var R=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}(),Oe=ae.toString,ve=de.call(Object),Le=RegExp("^"+de.call(he).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=ht?_e.Buffer:void 0,G=_e.Symbol,oe=_e.Uint8Array,se=be?be.allocUnsafe:void 0,fe=re(Object.getPrototypeOf,Object),we=Object.create,Te=ae.propertyIsEnumerable,Ze=In.splice,Ye=G?G.toStringTag:void 0,rt=function(){try{var R=ly(Object,"defineProperty");return R({},"",{}),R}catch{}}(),Me=be?be.isBuffer:void 0,Tt=Math.max,ge=Date.now,Bi=ly(_e,"Map"),no=ly(Object,"create"),$e=function(){function R(){}return function(B){if(!sa(B))return{};if(we)return we(B);R.prototype=B;var J=new R;return R.prototype=void 0,J}}();function on(R){var B=-1,J=R==null?0:R.length;for(this.clear();++B<J;){var xe=R[B];this.set(xe[0],xe[1])}}function Gs(){this.__data__=no?no(null):{},this.size=0}function zs(R){var B=this.has(R)&&delete this.__data__[R];return this.size-=B?1:0,B}function Ks(R){var B=this.__data__;if(no){var J=B[R];return J===n?void 0:J}return he.call(B,R)?B[R]:void 0}function Qs(R){var B=this.__data__;return no?B[R]!==void 0:he.call(B,R)}function Ys(R,B){var J=this.__data__;return this.size+=this.has(R)?0:1,J[R]=no&&B===void 0?n:B,this}on.prototype.clear=Gs,on.prototype.delete=zs,on.prototype.get=Ks,on.prototype.has=Qs,on.prototype.set=Ys;function kr(R){var B=-1,J=R==null?0:R.length;for(this.clear();++B<J;){var xe=R[B];this.set(xe[0],xe[1])}}function Js(){this.__data__=[],this.size=0}function Xs(R){var B=this.__data__,J=ue(B,R);if(J<0)return!1;var xe=B.length-1;return J==xe?B.pop():Ze.call(B,J,1),--this.size,!0}function Cr(R){var B=this.__data__,J=ue(B,R);return J<0?void 0:B[J][1]}function Zs(R){return ue(this.__data__,R)>-1}function ea(R,B){var J=this.__data__,xe=ue(J,R);return xe<0?(++this.size,J.push([R,B])):J[xe][1]=B,this}kr.prototype.clear=Js,kr.prototype.delete=Xs,kr.prototype.get=Cr,kr.prototype.has=Zs,kr.prototype.set=ea;function Tn(R){var B=-1,J=R==null?0:R.length;for(this.clear();++B<J;){var xe=R[B];this.set(xe[0],xe[1])}}function ta(){this.size=0,this.__data__={hash:new on,map:new(Bi||kr),string:new on}}function ra(R){var B=hp(this,R).delete(R);return this.size-=B?1:0,B}function na(R){return hp(this,R).get(R)}function sn(R){return hp(this,R).has(R)}function oa(R,B){var J=hp(this,R),xe=J.size;return J.set(R,B),this.size+=J.size==xe?0:1,this}Tn.prototype.clear=ta,Tn.prototype.delete=ra,Tn.prototype.get=na,Tn.prototype.has=sn,Tn.prototype.set=oa;function kn(R){var B=this.__data__=new kr(R);this.size=B.size}function ia(){this.__data__=new kr,this.size=0}function y(R){var B=this.__data__,J=B.delete(R);return this.size=B.size,J}function _(R){return this.__data__.get(R)}function x(R){return this.__data__.has(R)}function O(R,B){var J=this.__data__;if(J instanceof kr){var xe=J.__data__;if(!Bi||xe.length<r-1)return xe.push([R,B]),this.size=++J.size,this;J=this.__data__=new Tn(xe)}return J.set(R,B),this.size=J.size,this}kn.prototype.clear=ia,kn.prototype.delete=y,kn.prototype.get=_,kn.prototype.has=x,kn.prototype.set=O;function M(R,B){var J=py(R),xe=!J&&fy(R),ot=!J&&!xe&&gS(R),_t=!J&&!xe&&!ot&&yS(R),kt=J||xe||ot||_t,et=kt?Ke(R.length,String):[],Dt=et.length;for(var Dn in R)(B||he.call(R,Dn))&&!(kt&&(Dn=="length"||ot&&(Dn=="offset"||Dn=="parent")||_t&&(Dn=="buffer"||Dn=="byteLength"||Dn=="byteOffset")||mS(Dn,Dt)))&&et.push(Dn);return et}function H(R,B,J){(J!==void 0&&!gp(R[B],J)||J===void 0&&!(B in R))&&ce(R,B,J)}function W(R,B,J){var xe=R[B];(!(he.call(R,B)&&gp(xe,J))||J===void 0&&!(B in R))&&ce(R,B,J)}function ue(R,B){for(var J=R.length;J--;)if(gp(R[J][0],B))return J;return-1}function ce(R,B,J){B=="__proto__"&&rt?rt(R,B,{configurable:!0,enumerable:!0,value:J,writable:!0}):R[B]=J}var nt=PH();function Je(R){return R==null?R===void 0?T:v:Ye&&Ye in Object(R)?IH(R):OH(R)}function Ge(R){return Ul(R)&&Je(R)==a}function Ve(R){if(!sa(R)||RH(R))return!1;var B=hy(R)?Le:K;return B.test(MH(R))}function gt(R){return Ul(R)&&vS(R.length)&&!!Z[Je(R)]}function gH(R){if(!sa(R))return AH(R);var B=hS(R),J=[];for(var xe in R)xe=="constructor"&&(B||!he.call(R,xe))||J.push(xe);return J}function pS(R,B,J,xe,ot){R!==B&&nt(B,function(_t,kt){if(ot||(ot=new kn),sa(_t))vH(R,B,kt,J,pS,xe,ot);else{var et=xe?xe(dy(R,kt),_t,kt+"",R,B,ot):void 0;et===void 0&&(et=_t),H(R,kt,et)}},wS)}function vH(R,B,J,xe,ot,_t,kt){var et=dy(R,J),Dt=dy(B,J),Dn=kt.get(Dt);if(Dn){H(R,J,Dn);return}var an=_t?_t(et,Dt,J+"",R,B,kt):void 0,jl=an===void 0;if(jl){var gy=py(Dt),vy=!gy&&gS(Dt),ES=!gy&&!vy&&yS(Dt);an=Dt,gy||vy||ES?py(et)?an=et:UH(et)?an=bH(et):vy?(jl=!1,an=CH(Dt,!0)):ES?(jl=!1,an=_H(Dt,!0)):an=[]:jH(Dt)||fy(Dt)?(an=et,fy(et)?an=$H(et):(!sa(et)||hy(et))&&(an=TH(Dt))):jl=!1}jl&&(kt.set(Dt,an),ot(an,Dt,xe,_t,kt),kt.delete(Dt)),H(R,J,an)}function yH(R,B){return LH(NH(R,B,CS),R+"")}var wH=rt?function(R,B){return rt(R,"toString",{configurable:!0,enumerable:!1,value:qH(B),writable:!0})}:CS;function CH(R,B){if(B)return R.slice();var J=R.length,xe=se?se(J):new R.constructor(J);return R.copy(xe),xe}function EH(R){var B=new R.constructor(R.byteLength);return new oe(B).set(new oe(R)),B}function _H(R,B){var J=B?EH(R.buffer):R.buffer;return new R.constructor(J,R.byteOffset,R.length)}function bH(R,B){var J=-1,xe=R.length;for(B||(B=Array(xe));++J<xe;)B[J]=R[J];return B}function xH(R,B,J,xe){var ot=!J;J||(J={});for(var _t=-1,kt=B.length;++_t<kt;){var et=B[_t],Dt=xe?xe(J[et],R[et],et,J,R):void 0;Dt===void 0&&(Dt=R[et]),ot?ce(J,et,Dt):W(J,et,Dt)}return J}function SH(R){return yH(function(B,J){var xe=-1,ot=J.length,_t=ot>1?J[ot-1]:void 0,kt=ot>2?J[2]:void 0;for(_t=R.length>3&&typeof _t=="function"?(ot--,_t):void 0,kt&&kH(J[0],J[1],kt)&&(_t=ot<3?void 0:_t,ot=1),B=Object(B);++xe<ot;){var et=J[xe];et&&R(B,et,xe,_t)}return B})}function PH(R){return function(B,J,xe){for(var ot=-1,_t=Object(B),kt=xe(B),et=kt.length;et--;){var Dt=kt[R?et:++ot];if(J(_t[Dt],Dt,_t)===!1)break}return B}}function hp(R,B){var J=R.__data__;return DH(B)?J[typeof B=="string"?"string":"hash"]:J.map}function ly(R,B){var J=qr(R,B);return Ve(J)?J:void 0}function IH(R){var B=he.call(R,Ye),J=R[Ye];try{R[Ye]=void 0;var xe=!0}catch{}var ot=Oe.call(R);return xe&&(B?R[Ye]=J:delete R[Ye]),ot}function TH(R){return typeof R.constructor=="function"&&!hS(R)?$e(fe(R)):{}}function mS(R,B){var J=typeof R;return B=B??s,!!B&&(J=="number"||J!="symbol"&&Y.test(R))&&R>-1&&R%1==0&&R<B}function kH(R,B,J){if(!sa(J))return!1;var xe=typeof B;return(xe=="number"?my(J)&&mS(B,J.length):xe=="string"&&B in J)?gp(J[B],R):!1}function DH(R){var B=typeof R;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?R!=="__proto__":R===null}function RH(R){return!!Ue&&Ue in R}function hS(R){var B=R&&R.constructor,J=typeof B=="function"&&B.prototype||ae;return R===J}function AH(R){var B=[];if(R!=null)for(var J in Object(R))B.push(J);return B}function OH(R){return Oe.call(R)}function NH(R,B,J){return B=Tt(B===void 0?R.length-1:B,0),function(){for(var xe=arguments,ot=-1,_t=Tt(xe.length-B,0),kt=Array(_t);++ot<_t;)kt[ot]=xe[B+ot];ot=-1;for(var et=Array(B+1);++ot<B;)et[ot]=xe[ot];return et[B]=J(kt),Ae(R,this,et)}}function dy(R,B){if(!(B==="constructor"&&typeof R[B]=="function")&&B!="__proto__")return R[B]}var LH=FH(wH);function FH(R){var B=0,J=0;return function(){var xe=ge(),ot=i-(xe-J);if(J=xe,ot>0){if(++B>=o)return arguments[0]}else B=0;return R.apply(void 0,arguments)}}function MH(R){if(R!=null){try{return de.call(R)}catch{}try{return R+""}catch{}}return""}function gp(R,B){return R===B||R!==R&&B!==B}var fy=Ge(function(){return arguments}())?Ge:function(R){return Ul(R)&&he.call(R,"callee")&&!Te.call(R,"callee")},py=Array.isArray;function my(R){return R!=null&&vS(R.length)&&!hy(R)}function UH(R){return Ul(R)&&my(R)}var gS=Me||BH;function hy(R){if(!sa(R))return!1;var B=Je(R);return B==p||B==m||B==u||B==C}function vS(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=s}function sa(R){var B=typeof R;return R!=null&&(B=="object"||B=="function")}function Ul(R){return R!=null&&typeof R=="object"}function jH(R){if(!Ul(R)||Je(R)!=w)return!1;var B=fe(R);if(B===null)return!0;var J=he.call(B,"constructor")&&B.constructor;return typeof J=="function"&&J instanceof J&&de.call(J)==ve}var yS=Pe?Pn(Pe):gt;function $H(R){return xH(R,wS(R))}function wS(R){return my(R)?M(R,!0):gH(R)}var HH=SH(function(R,B,J){pS(R,B,J)});function qH(R){return function(){return R}}function CS(R){return R}function BH(){return!1}t.exports=HH}),N8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=Nt(),r=Po(),n=class{constructor(o,i){this._exporter=o,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let s=r.getEnv();this._maxExportBatchSize=typeof(i==null?void 0:i.maxExportBatchSize)=="number"?i.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(i==null?void 0:i.maxQueueSize)=="number"?i.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(i==null?void 0:i.scheduledDelayMillis)=="number"?i.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(i==null?void 0:i.exportTimeoutMillis)=="number"?i.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(o){}onEnd(o){this._isShutdown||this._addToBuffer(o)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,i)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(o).catch(s=>{i(s)})}),this._shuttingDownPromise)}_addToBuffer(o){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(o),this._maybeStartTimer())}_flushAll(){return new Promise((o,i)=>{let s=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,u=a;c<u;c++)s.push(this._flushOneBatch());Promise.all(s).then(()=>{o()}).catch(i)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((o,i)=>{let s=setTimeout(()=>{i(new Error("Timeout"))},this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(s),a.code===r.ExportResultCode.SUCCESS?o():i((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(o=>{r.globalErrorHandler(o)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=n}),L8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=N8(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r}),F8=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(L8(),e)}),mM=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(F8(),e)}),M8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t=Nt(),r=Po(),n=Wb(),o=hM(),i=lM(),s=A8(),a=pM(),c=O8(),u=mM(),l;(function(f){f[f.resolved=0]="resolved",f[f.timeout=1]="timeout",f[f.error=2]="error",f[f.unresolved=3]="unresolved"})(l=e.ForceFlushState||(e.ForceFlushState={}));var d=class{constructor(f={}){var p;this._registeredSpanProcessors=[],this._tracers=new Map;let m=c({},i.DEFAULT_CONFIG,f);this.resource=(p=m.resource)!==null&&p!==void 0?p:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},m,{resource:this.resource});let h=this._buildExporterFromEnv();if(h!==void 0){let g=new u.BatchSpanProcessor(h);this.activeSpanProcessor=g}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(f,p){let m=`${f}@${p||""}`;return this._tracers.has(m)||this._tracers.set(m,new o.Tracer({name:f,version:p},this._config,this)),this._tracers.get(m)}addSpanProcessor(f){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(p=>t.diag.error("Error while trying to shutdown current span processor",p)),this._registeredSpanProcessors.push(f),this.activeSpanProcessor=new s.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(f={}){t.trace.setGlobalTracerProvider(this),f.propagator===void 0&&(f.propagator=this._buildPropagatorFromEnv()),f.contextManager&&t.context.setGlobalContextManager(f.contextManager),f.propagator&&t.propagation.setGlobalPropagator(f.propagator)}forceFlush(){let f=this._config.forceFlushTimeoutMillis,p=this._registeredSpanProcessors.map(m=>new Promise(h=>{let g,v=setTimeout(()=>{h(new Error(`Span processor did not completed within timeout period of ${f} ms`)),g=l.timeout},f);m.forceFlush().then(()=>{clearTimeout(v),g!==l.timeout&&(g=l.resolved,h(g))}).catch(w=>{clearTimeout(v),g=l.error,h(w)})}));return new Promise((m,h)=>{Promise.all(p).then(g=>{let v=g.filter(w=>w!==l.resolved);v.length>0?h(v):m()}).catch(g=>h([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(f){var p;return(p=d._registeredPropagators.get(f))===null||p===void 0?void 0:p()}_getSpanExporter(f){var p;return(p=d._registeredExporters.get(f))===null||p===void 0?void 0:p()}_buildPropagatorFromEnv(){let f=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),p=f.map(m=>{let h=this._getPropagator(m);return h||t.diag.warn(`Propagator "${m}" requested through environment variable is unavailable.`),h}).reduce((m,h)=>(h&&m.push(h),m),[]);if(p.length!==0)return f.length===1?p[0]:new r.CompositePropagator({propagators:p})}_buildExporterFromEnv(){let f=r.getEnv().OTEL_TRACES_EXPORTER;if(f==="none")return;let p=this._getSpanExporter(f);return p||t.diag.error(`Exporter "${f}" requested through environment variable is unavailable.`),p}};e.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),d._registeredExporters=new Map}),U8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=Po(),r=class{export(n,o){return this._sendSpans(n,o)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:t.hrTimeToMicroseconds(n.startTime),duration:t.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,o){for(let i of n)console.log(this._exportInfo(i));if(o)return o({code:t.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=r}),j8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=Po(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,o){if(this._stopped)return o({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>o({code:t.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=r}),$8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),H8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=Nt(),r=Po(),n=class{constructor(o){this._exporter=o,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(o){}onEnd(o){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export([o],i=>{var s;i.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((s=i.error)!==null&&s!==void 0?s:new Error(`SimpleSpanProcessor: span export failed (status ${i})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,i)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(o).catch(s=>{i(s)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=n}),q8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),B8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),V8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),W8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),hM=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(b8(),e),r(M8(),e),r(mM(),e),r(U8(),e),r(j8(),e),r($8(),e),r(H8(),e),r(q8(),e),r(pM(),e),r(uM(),e),r(B8(),e),r(V8(),e),r(W8(),e)}),G8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=Qt();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(i){if(r)return i;try{var s=hM(),a=Nt(),c=new s.BasicTracerProvider,u=c.getTracer("applicationinsights tracer"),l=i.setTracer;i.setTracer=function(d){var f=d.startSpan;d.startSpan=function(p,m,h){var g=f.call(this,p,m,h),v=g.end;return g.end=function(){var w=v.apply(this,arguments);return t.channel.publish("azure-coretracing",g),w},g},d[e.AzureMonitorSymbol]=!0,l.call(this,d)},a.trace.getSpan(a.context.active()),i.setTracer(u),r=!0}catch{}return i};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=o}),z8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=Qt(),r=function(o){var i=o.prototype._emit;return o.prototype._emit=function(s,a){var c=i.apply(this,arguments);if(!a){var u=c;u||(u=i.call(this,s,!0)),t.channel.publish("bunyan",{level:s.level,result:u})}return c},o};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=n}),K8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=Qt(),r=require("stream"),n=function(i){var s=new r.Writable,a=new r.Writable;s.write=function(m){if(!m)return!0;var h=m.toString();return t.channel.publish("console",{message:h}),!0},a.write=function(m){if(!m)return!0;var h=m.toString();return t.channel.publish("console",{message:h,stderr:!0}),!0};for(var c=new i.Console(s,a),u=["log","info","warn","error","dir","time","timeEnd","trace","assert"],l=function(m){var h=i[m];h&&(i[m]=function(){if(c[m])try{c[m].apply(c,arguments)}catch{}return h.apply(i,arguments)})},d=0,f=u;d<f.length;d++){var p=f[d];l(p)}return i};e.console={versionSpecifier:">= 4.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=o}),Q8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=Qt(),r=function(o){var i=o.Server.prototype.connect;return o.Server.prototype.connect=function(){var s=i.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var u=typeof arguments[1]=="function"?1:2;return typeof arguments[u]=="function"&&(arguments[u]=t.channel.bindToContext(arguments[u])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),c.apply(this,arguments)},s},o};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=n}),Y8=F(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(c){for(var u,l=1,d=arguments.length;l<d;l++){u=arguments[l];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=Qt(),n=function(c){var u=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(d){return d()})}}}),l={};return u.on("started",function(d){l[d.requestId]||(l[d.requestId]=t(t({},d),{time:new Date}))}),u.on("succeeded",function(d){var f=l[d.requestId];f&&delete l[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!0})}),u.on("failed",function(d){var f=l[d.requestId];f&&delete l[d.requestId],typeof d.operationId=="function"?d.operationId(function(){return r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}):r.channel.publish("mongodb",{startedData:f,event:d,succeeded:!1})}),c},o=function(c){var u=c.instrument(),l={},d={};return u.on("started",function(f){l[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),l[f.requestId]=t(t({},f),{time:new Date}))}),u.on("succeeded",function(f){var p=l[f.requestId];p&&delete l[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),u.on("failed",function(f){var p=l[f.requestId];p&&delete l[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c},i=function(c){var u=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var l=u.apply(this,arguments),d=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=r.channel.bindToContext(arguments[p])),d.apply(this,arguments)};var f=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),f.apply(this,arguments)},l},c},s=function(c){i(c);var u=c.instrument(),l={},d={};return u.on("started",function(f){l[f.requestId]||(d[f.requestId]=r.channel.bindToContext(function(p){return p()}),l[f.requestId]=f)}),u.on("succeeded",function(f){var p=l[f.requestId];p&&delete l[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!0})}),delete d[f.requestId])}),u.on("failed",function(f){var p=l[f.requestId];p&&delete l[f.requestId],typeof f=="object"&&typeof d[f.requestId]=="function"&&(d[f.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:f,succeeded:!1})}),delete d[f.requestId])}),c};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:o},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:s};function a(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=a}),J8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=Qt(),r=require("path"),n=function(i,s){var a=function(p,m){return function(h,g){var v=p[h];v&&(p[h]=function(){for(var w=arguments.length-1,C=arguments.length-1;C>=0;--C)if(typeof arguments[C]=="function"){w=C;break}else if(typeof arguments[C]<"u")break;var E=arguments[w],b={result:null,startTime:null,startDate:null};typeof E=="function"&&(g?(b.startTime=process.hrtime(),b.startDate=new Date,arguments[w]=t.channel.bindToContext(g(b,E))):arguments[w]=t.channel.bindToContext(E));var I=v.apply(this,arguments);return b.result=I,I})}},c=function(p,m){return a(p.prototype,m+".prototype")},u=["connect","changeUser","ping","statistics","end"],l=require(r.dirname(s)+"/lib/Connection");u.forEach(function(p){return c(l,"Connection")(p)}),a(l,"Connection")("createQuery",function(p,m){return function(h){var g=process.hrtime(p.startTime),v=g[0]*1e3+g[1]/1e6|0;t.channel.publish("mysql",{query:p.result,callbackArgs:arguments,err:h,duration:v,time:p.startDate}),m.apply(this,arguments)}});var d=["_enqueueCallback"],f=require(r.dirname(s)+"/lib/Pool");return d.forEach(function(p){return c(f,"Pool")(p)}),i};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=o}),X8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=Qt();function r(o){var i=o.prototype.connect;return o.prototype.connect=function(s){return s&&(arguments[0]=t.channel.bindToContext(s)),i.apply(this,arguments)},o}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=n}),Z8=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=Qt(),r=require("events");function n(s,a){var c=s.Client.prototype.query,u="__diagnosticOriginalFunc";return s.Client.prototype.query=function(l,d,f){var p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},m=process.hrtime(),h;function g(v){v&&v[u]&&(v=v[u]);var w=t.channel.bindToContext(function(C,E){var b=process.hrtime(m);if(p.result=E&&{rowCount:E.rowCount,command:E.command},p.error=C,p.duration=Math.ceil(b[0]*1e3+b[1]/1e6),t.channel.publish("postgres",p),C){if(v)return v.apply(this,arguments);h&&h instanceof r.EventEmitter&&h.emit("error",C)}else v&&v.apply(this,arguments)});try{return Object.defineProperty(w,u,{value:v}),w}catch{return v}}try{typeof l=="string"?d instanceof Array?(p.query.preparable={text:l,args:d},f=g(f)):(p.query.text=l,f?f=g(f):d=g(d)):(typeof l.name=="string"?p.query.plan=l.name:l.values instanceof Array?p.query.preparable={text:l.text,args:l.values}:p.query.text=l.text,f?f=g(f):d?d=g(d):l.callback=g(l.callback))}catch{return c.apply(this,arguments)}return arguments[0]=l,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,h=c.apply(this,arguments),h},s}function o(s,a){var c=s.Client.prototype.query,u="__diagnosticOriginalFunc";return s.Client.prototype.query=function(l,d,f){var p=this,m=!!f,h={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),v;function w(C){C&&C[u]&&(C=C[u]);var E=t.channel.bindToContext(function(b,I){var T=process.hrtime(g);if(h.result=I&&{rowCount:I.rowCount,command:I.command},h.error=b,h.duration=Math.ceil(T[0]*1e3+T[1]/1e6),t.channel.publish("postgres",h),b){if(C)return C.apply(this,arguments);v&&v instanceof r.EventEmitter&&v.emit("error",b)}else C&&C.apply(this,arguments)});try{return Object.defineProperty(E,u,{value:C}),E}catch{return C}}try{typeof l=="string"?d instanceof Array?(h.query.preparable={text:l,args:d},m=typeof f=="function",f=m?w(f):f):(h.query.text=l,f?(m=typeof f=="function",f=m?w(f):f):(m=typeof d=="function",d=m?w(d):d)):(typeof l.name=="string"?h.query.plan=l.name:l.values instanceof Array?h.query.preparable={text:l.text,args:l.values}:h.query.text=l.text,f?(m=typeof f=="function",f=w(f)):d?(m=typeof d=="function",d=m?w(d):d):(m=typeof l.callback=="function",l.callback=m?w(l.callback):l.callback))}catch{return c.apply(this,arguments)}return arguments[0]=l,arguments[1]=d,arguments[2]=f,arguments.length=arguments.length>3?arguments.length:3,v=c.apply(this,arguments),m?v:v.then(function(C){return w()(void 0,C),new p._Promise(function(E,b){E(C)})}).catch(function(C){return w()(C,void 0),new p._Promise(function(E,b){b(C)})})},s}e.postgres6={versionSpecifier:"6.*",patch:n},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:o};function i(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=i}),e7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=Qt(),r=function(o){var i=o.RedisClient.prototype.internal_send_command;return o.RedisClient.prototype.internal_send_command=function(s){if(s){var a=s.callback;if(!a||!a.pubsubBound){var c=this.address,u=process.hrtime(),l=new Date;s.callback=t.channel.bindToContext(function(d,f){var p=process.hrtime(u),m=p[0]*1e3+p[1]/1e6|0;t.channel.publish("redis",{duration:m,address:c,commandObj:s,err:d,result:f,time:l}),typeof a=="function"&&a.apply(this,arguments)}),s.callback.pubsubBound=!0}}return i.call(this,s)},o};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("redis",e.redis)}e.enable=n}),t7=F(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(i[u]=s[u])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=Qt(),n=function(i){var s=i.Connection.prototype.makeRequest;return i.Connection.prototype.makeRequest=function(){function a(u){var l=process.hrtime(),d={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(f,p,m){var h=process.hrtime(l);d=t(t({},d),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:p,rows:m},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(h[0]*1e3+h[1]/1e6)}),r.channel.publish("tedious",d),u.call(this,f,p,m)})}var c=arguments[0];arguments[0].callback=a(c.callback),s.apply(this,arguments)},i};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function o(){r.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=o}),r7=F(e=>{"use strict";var t=e&&e.__extends||function(){var a=function(c,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(l[f]=d[f])},a(c,u)};return function(c,u){a(c,u);function l(){this.constructor=c}c.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),r=e&&e.__rest||function(a,c){var u={};for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&c.indexOf(l)<0&&(u[l]=a[l]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(a);d<l.length;d++)c.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(a,l[d])&&(u[l[d]]=a[l[d]]);return u};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var n=Qt(),o=function(a){var c=a.Logger.prototype.log,u,l=function(d,f,p){var m;return u===a.config.npm.levels?m="npm":u===a.config.syslog.levels?m="syslog":m="unknown",n.channel.publish("winston",{level:d,message:f,meta:p,levelKind:m}),f};return a.Logger.prototype.log=function(){return u=this.levels,!this.filters||this.filters.length===0?this.filters=[l]:this.filters[this.filters.length-1]!==l&&(this.filters=this.filters.filter(function(d){return d!==l}),this.filters.push(l)),c.apply(this,arguments)},a},i=function(a){var c=function(p,m){var h;return p.config.npm.levels[m]!=null?h="npm":p.config.syslog.levels[m]!=null?h="syslog":h="unknown",h},u=function(p){t(m,p);function m(h,g){var v=p.call(this,g)||this;return v.winston=h,v}return m.prototype.log=function(h,g){var v=h.message,w=h.level,C=h.meta,E=r(h,["message","level","meta"]);w=typeof Symbol.for=="function"?h[Symbol.for("level")]:w,v=h instanceof Error?h:v;var b=c(this.winston,w);C=C||{};for(var I in E)E.hasOwnProperty(I)&&(C[I]=E[I]);n.channel.publish("winston",{message:v,level:w,levelKind:b,meta:C}),g()},m}(a.Transport);function l(){var p=arguments[0].levels||a.config.npm.levels,m;for(var h in p)p.hasOwnProperty(h)&&(m=m===void 0||p[h]>p[m]?h:m);this.add(new u(a,{level:m}))}var d=a.createLogger;a.createLogger=function(){var p=arguments[0].levels||a.config.npm.levels,m;for(var h in p)p.hasOwnProperty(h)&&(m=m===void 0||p[h]>p[m]?h:m);var g=d.apply(this,arguments);g.add(new u(a,{level:m}));var v=g.configure;return g.configure=function(){v.apply(this,arguments),l.apply(this,arguments)},g};var f=a.configure;return a.configure=function(){f.apply(this,arguments),l.apply(this,arguments)},a.add(new u(a)),a};e.winston3={versionSpecifier:"3.x",patch:i},e.winston2={versionSpecifier:"2.x",patch:o};function s(){n.channel.registerMonkeyPatch("winston",e.winston2),n.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=s}),n7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=G8();e.azuresdk=t;var r=z8();e.bunyan=r;var n=K8();e.console=n;var o=Q8();e.mongodbCore=o;var i=Y8();e.mongodb=i;var s=J8();e.mysql=s;var a=X8();e.pgPool=a;var c=Z8();e.pg=c;var u=e7();e.redis=u;var l=t7();e.tedious=l;var d=r7();e.winston=d;function f(){r.enable(),n.enable(),o.enable(),i.enable(),s.enable(),c.enable(),a.enable(),u.enable(),d.enable(),t.enable(),l.enable()}e.enable=f}),Gb=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=q1(),r=vr();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(e.IsInitialized){o=n7(),i=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",s=i.split(","),a={bunyan:o.bunyan,console:o.console,mongodb:o.mongodb,mongodbCore:o.mongodbCore,mysql:o.mysql,redis:o.redis,pg:o.pg,pgPool:o.pgPool,winston:o.winston,azuresdk:o.azuresdk};for(c in a)s.indexOf(c)===-1&&(a[c].enable(),r.info(n,"Subscribed to "+c+" events"));s.length>0&&r.info(n,"Some modules will not be patched",s)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var o,i,s,a,c;function u(l){if(e.IsInitialized){var d=Qt();d.channel.addContextPreservation(l),d.channel.spanContextPropagator=t.AsyncScopeManager}}e.registerContextPreservation=u}),Gf=F((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),Zn=F((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(l){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(l[m]=d[m])}return l},r.apply(this,arguments)},n=require("http"),o=require("https"),i=require("url"),s=require("constants"),a=vr(),c=Gf(),u=function(){function l(){}return l.getCookie=function(d,f){var p="";if(d&&d.length&&typeof f=="string")for(var m=d+"=",h=f.split(";"),g=0;g<h.length;g++){var f=h[g];if(f=l.trim(f),f&&f.indexOf(m)===0){p=f.substring(m.length,h[g].length);break}}return p},l.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},l.int32ArrayToBase64=function(d){var f=function(v,w){return String.fromCharCode(v>>w&255)},p=function(v){return f(v,24)+f(v,16)+f(v,8)+f(v,0)},m=d.map(p).join(""),h=Buffer.from?Buffer.from(m,"binary"):new Buffer(m,"binary"),g=h.toString("base64");return g.substr(0,g.indexOf("="))},l.random32=function(){return 4294967296*Math.random()|0},l.randomu32=function(){return l.random32()+2147483648},l.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f="",p,m=0;m<4;m++)p=l.random32(),f+=d[p&15]+d[p>>4&15]+d[p>>8&15]+d[p>>12&15]+d[p>>16&15]+d[p>>20&15]+d[p>>24&15]+d[p>>28&15];var h=d[8+Math.random()*4|0];return f.substr(0,8)+f.substr(9,4)+"4"+f.substr(13,3)+h+f.substr(16,3)+f.substr(19,12)},l.w3cSpanId=function(){return l.w3cTraceId().substring(16)},l.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},l.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},l.isError=function(d){return d instanceof Error},l.isPrimitive=function(d){var f=typeof d;return f==="string"||f==="number"||f==="boolean"},l.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},l.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var f=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),p=""+Math.floor(d/(1e3*60))%60,m=""+Math.floor(d/(1e3*60*60))%24,h=Math.floor(d/(1e3*60*60*24));f=f.indexOf(".")<2?"0"+f:f,p=p.length<2?"0"+p:p,m=m.length<2?"0"+m:m;var g=h>0?h+".":"";return g+m+":"+p+":"+f},l.extractError=function(d){var f=d;return{message:d.message,code:f.code||f.id||""}},l.extractObject=function(d){return d instanceof Error?l.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},l.validateStringMap=function(d){if(typeof d!="object"){a.info("Invalid properties dropped from payload");return}var f={};for(var p in d){var m="",h=d[p],g=typeof h;if(l.isPrimitive(h))m=h.toString();else if(h===null||g==="undefined")m="";else if(g==="function"){a.info("key: "+p+" was function; will not serialize");continue}else{var v=l.isArray(h)?h:l.extractObject(h);try{l.isPrimitive(v)?m=v:m=JSON.stringify(v)}catch(w){m=h.constructor.name.toString()+" (Error: "+w.message+")",a.info("key: "+p+", could not be serialized")}}f[p]=m.substring(0,l.MAX_PROPERTY_LENGTH)}return f},l.canIncludeCorrelationHeader=function(d,f){var p=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!p||p.length==0||!f)return!0;for(var m=0;m<p.length;m++){var h=new RegExp(p[m].replace(/\./g,".").replace(/\*/g,".*"));if(h.test(i.parse(f).hostname))return!1}return!0},l.getCorrelationContextTarget=function(d,f){var p=d.headers&&d.headers[c.requestContextHeader];if(p)for(var m=p.split(","),h=0;h<m.length;++h){var g=m[h].split("=");if(g.length==2&&g[0]==f)return g[1]}},l.makeRequest=function(d,f,p,m){f&&f.indexOf("//")===0&&(f="https:"+f);var h=i.parse(f),g=r(r({},p),{host:h.hostname,port:h.port,path:h.pathname}),v=void 0;if(h.protocol==="https:"&&(v=d.proxyHttpsUrl||void 0),h.protocol==="http:"&&(v=d.proxyHttpUrl||void 0),v){v.indexOf("//")===0&&(v="http:"+v);var w=i.parse(v);w.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),v=void 0):g=r(r({},g),{host:w.hostname,port:w.port||"80",path:f,headers:r(r({},g.headers),{Host:h.hostname})})}var C=h.protocol==="https:"&&!v;return C&&d.httpsAgent!==void 0?g.agent=d.httpsAgent:!C&&d.httpAgent!==void 0?g.agent=d.httpAgent:C&&(g.agent=l.tlsRestrictedAgent),C?o.request(g,m):n.request(g,m)},l.safeIncludeCorrelationHeader=function(d,f,p){var m;if(typeof p=="string")m=p;else if(p instanceof Array)m=p.join(",");else if(p&&typeof p.toString=="function")try{m=p.toString()}catch(h){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",h,p)}m?l.addCorrelationIdHeaderFromString(d,f,m):f.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+d.config.correlationId)},l.dumpObj=function(d){var f=Object.prototype.toString.call(d),p="";return f==="[object Error]"?p="{ stack: '"+d.stack+"', message: '"+d.message+"', name: '"+d.name+"'":p=JSON.stringify(d),f+p},l.addCorrelationIdHeaderFromString=function(d,f,p){var m=p.split(","),h=c.requestContextSourceKey+"=",g=m.some(function(v){return v.substring(0,h.length)===h});g||f.setHeader(c.requestContextHeader,p+","+c.requestContextSourceKey+"="+d.config.correlationId)},l.MAX_PROPERTY_LENGTH=8192,l.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),l}();t.exports=u}),Cl=F((e,t)=>{"use strict";var r=Zn(),n=vr(),o=function(){function i(){}return i.queryCorrelationId=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId";if(i.completedLookups.hasOwnProperty(c)){a(i.completedLookups[c]);return}else if(i.pendingLookups[c]){i.pendingLookups[c].push(a);return}i.pendingLookups[c]=[a];var u=function(){if(i.pendingLookups[c]){var l={method:"GET",disableAppInsightsAutoCollection:!0};n.info(i.TAG,l);var d=r.makeRequest(s,c,l,function(f){if(f.statusCode===200){var p="";f.setEncoding("utf-8"),f.on("data",function(m){p+=m}),f.on("end",function(){n.info(i.TAG,p);var m=i.correlationIdPrefix+p;i.completedLookups[c]=m,i.pendingLookups[c]&&i.pendingLookups[c].forEach(function(h){return h(m)}),delete i.pendingLookups[c]})}else f.statusCode>=400&&f.statusCode<500?(i.completedLookups[c]=void 0,delete i.pendingLookups[c]):setTimeout(u,s.correlationIdRetryIntervalMs)});d&&(d.on("error",function(f){n.warn(i.TAG,f)}),d.end())}};setTimeout(u,0)},i.cancelCorrelationIdQuery=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId",u=i.pendingLookups[c];u&&(i.pendingLookups[c]=u.filter(function(l){return l!=a}),i.pendingLookups[c].length==0&&delete i.pendingLookups[c])},i.generateRequestId=function(s){if(s){s=s[0]=="|"?s:"|"+s,s[s.length-1]!=="."&&(s+=".");var a=(i.currentRootId++).toString(16);return i.appendSuffix(s,a,"_")}else return i.generateRootId()},i.getRootId=function(s){var a=s.indexOf(".");a<0&&(a=s.length);var c=s[0]==="|"?1:0;return s.substring(c,a)},i.generateRootId=function(){return"|"+r.w3cTraceId()+"."},i.appendSuffix=function(s,a,c){if(s.length+a.length<i.requestIdMaxLength)return s+a+c;var u=i.requestIdMaxLength-9;if(s.length>u)for(;u>1;--u){var l=s[u-1];if(l==="."||l==="_")break}if(u<=1)return i.generateRootId();for(a=r.randomu32().toString(16);a.length<8;)a="0"+a;return s.substring(0,u)+a+"#"},i.TAG="CorrelationIdManager",i.correlationIdPrefix="cid-v1:",i.w3cEnabled=!0,i.pendingLookups={},i.completedLookups={},i.requestIdMaxLength=1024,i.currentRootId=r.randomu32(),i}();t.exports=o}),gv=F((e,t)=>{"use strict";var r=Zn(),n=Cl(),o=function(){function i(s,a){if(this.traceFlag=i.DEFAULT_TRACE_FLAG,this.version=i.DEFAULT_VERSION,s&&typeof s=="string")if(s.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=s.trim().split("-"),u=c.length;u>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=i.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&u!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=i.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=i.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=i.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),i.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),i.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var l=n.getRootId(a);i.isValidTraceId(l)||(this.legacyRootId=l,l=r.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=l,this.spanId=a}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return i.isValidTraceId=function(s){return s.match(/^[0-9a-f]{32}$/)&&s!=="00000000000000000000000000000000"},i.isValidSpanId=function(s){return s.match(/^[0-9a-f]{16}$/)&&s!=="0000000000000000"},i.formatOpenTelemetryTraceFlags=function(s){var a="0"+s.toString(16);return a.substring(a.length-2)},i.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},i.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},i.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},i.DEFAULT_TRACE_FLAG="01",i.DEFAULT_VERSION="00",i}();t.exports=o}),gM=F((e,t)=>{"use strict";var r=function(){function n(o){this.fieldmap=[],o&&(this.fieldmap=this.parseHeader(o))}return n.prototype.toString=function(){var o=this.fieldmap;return!o||o.length==0?null:o.join(", ")},n.validateKeyChars=function(o){var i=o.split("@");if(i.length==2){var s=i[0].trim(),a=i[1].trim(),c=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),u=Boolean(a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&u}else if(i.length==1)return Boolean(o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(o){var i=[],s={},a=o.split(",");if(a.length>32)return null;for(var c=0,u=a;c<u.length;c++){var l=u[c],d=l.trim();if(d.length!==0){var f=d.split("=");if(f.length!==2||!n.validateKeyChars(f[0])||s[f[0]])return null;s[f[0]]=!0,i.push(d)}}return i},n.strict=!0,n}();t.exports=r}),Ms=F((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),o7=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ms(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),vM=F((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),i7=F((e,t)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();t.exports=r}),s7=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=vM(),o=function(i){r(s,i);function s(){return i.call(this)||this}return s}(n);t.exports=o}),yM=F((e,t)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),t.exports=r}),a7=F((e,t)=>{"use strict";var r=yM(),n=function(){function o(){this.kind=r.Measurement}return o}();t.exports=n}),c7=F((e,t)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();t.exports=r}),wM=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ms(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),u7=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ms(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return s}(n);t.exports=o}),l7=F((e,t)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();t.exports=r}),d7=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ms(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a}return s}(n);t.exports=o}),f7=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ms(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return s}(n);t.exports=o}),p7=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=wM(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),m7=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ms(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),h7=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var i=function(s,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l])},i(s,a)};return function(s,a){i(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Ms(),o=function(i){r(s,i);function s(){var a=i.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);t.exports=o}),g7=F((e,t)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),t.exports=r}),v7=F((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),CM=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=o7(),e.Base=vM(),e.ContextTagKeys=i7(),e.Data=s7(),e.DataPoint=a7(),e.DataPointType=yM(),e.Domain=Ms(),e.Envelope=c7(),e.EventData=wM(),e.ExceptionData=u7(),e.ExceptionDetails=l7(),e.MessageData=d7(),e.MetricData=f7(),e.PageViewData=p7(),e.RemoteDependencyData=m7(),e.RequestData=h7(),e.SeverityLevel=g7(),e.StackFrame=v7()}),y7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=CM(),r=function(){function o(){}return o.TYPE_HTTP="Http",o.TYPE_AI="Http (tracked component)",o}();e.RemoteDependencyDataConstants=r;function n(o){return"properties"in o||o instanceof t.EventData||o instanceof t.ExceptionData||o instanceof t.MessageData||o instanceof t.MetricData||o instanceof t.PageViewData||o instanceof t.RemoteDependencyData||o instanceof t.RequestData}e.domainSupportsProperties=n}),w7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),C7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),E7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),_7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),b7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),x7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),S7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),P7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),I7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),T7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),k7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),D7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),R7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function t(o){switch(o){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=t;function r(o){switch(o){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}e.baseTypeToTelemetryType=r,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(o){o[o.Event=0]="Event",o[o.Exception=1]="Exception",o[o.Trace=2]="Trace",o[o.Metric=3]="Metric",o[o.Request=4]="Request",o[o.Dependency=5]="Dependency",o[o.Availability=6]="Availability",o[o.PageView=7]="PageView"})(n=e.TelemetryType||(e.TelemetryType={}))}),A7=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(w7(),e),r(C7(),e),r(E7(),e),r(_7(),e),r(b7(),e),r(x7(),e),r(S7(),e),r(P7(),e),r(I7(),e),r(T7(),e),r(k7(),e),r(D7(),e),r(R7(),e)}),O7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),N7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),L7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),F7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),M7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),U7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),j7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),$7=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),H7=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(O7(),e),r(N7(),e),r(L7(),e),r(F7(),e),r(M7(),e),r(U7(),e),r(j7(),e),r($7(),e)}),rn=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(y7(),e),r(CM(),e),r(A7(),e),r(H7(),e)}),EM=F((e,t)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(o,i){var s=+new Date;this.duration=s-this.startTime,this.statusCode=o;var a=this.properties||{};if(i){if(typeof i=="string")a.error=i;else if(i instanceof Error)a.error=i.message;else if(typeof i=="object")for(var c in i)a[c]=i[c]&&i[c].toString&&i[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();t.exports=r}),_M=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var f=function(p,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(h[v]=g[v])},f(p,m)};return function(p,m){f(p,m);function h(){this.constructor=p}p.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}(),n=require("url"),o=rn(),i=Zn(),s=Gf(),a=EM(),c=Cl(),u=gM(),l=gv(),d=function(f){r(p,f);function p(m,h){var g=f.call(this)||this;return m&&(g.method=m.method,g.url=g._getAbsoluteUrl(m),g.startTime=+new Date,g.socketRemoteAddress=m.socket&&m.socket.remoteAddress,g.parseHeaders(m,h),m.connection&&(g.connectionRemoteAddress=m.connection.remoteAddress,g.legacySocketRemoteAddress=m.connection.socket&&m.connection.socket.remoteAddress)),g}return p.prototype.onError=function(m,h){this._setStatus(void 0,m),h&&(this.duration=h)},p.prototype.onResponse=function(m,h){this._setStatus(m.statusCode,void 0),h&&(this.duration=h)},p.prototype.getRequestTelemetry=function(m){var h={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(m&&m.time?h.time=m.time:this.startTime&&(h.time=new Date(this.startTime)),m){for(var g in m)h[g]||(h[g]=m[g]);if(m.properties)for(var g in m.properties)h.properties[g]=m.properties[g]}return h},p.prototype.getRequestTags=function(m){var h={};for(var g in m)h[g]=m[g];return h[p.keys.locationIp]=m[p.keys.locationIp]||this._getIp(),h[p.keys.sessionId]=m[p.keys.sessionId]||this._getId("ai_session"),h[p.keys.userId]=m[p.keys.userId]||this._getId("ai_user"),h[p.keys.userAuthUserId]=m[p.keys.userAuthUserId]||this._getId("ai_authUser"),h[p.keys.operationName]=this.getOperationName(m),h[p.keys.operationParentId]=this.getOperationParentId(m),h[p.keys.operationId]=this.getOperationId(m),h},p.prototype.getOperationId=function(m){return m[p.keys.operationId]||this.operationId},p.prototype.getOperationParentId=function(m){return m[p.keys.operationParentId]||this.parentId||this.getOperationId(m)},p.prototype.getOperationName=function(m){return m[p.keys.operationName]||this.method+" "+n.parse(this.url).pathname},p.prototype.getRequestId=function(){return this.requestId},p.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},p.prototype.getTraceparent=function(){return this.traceparent},p.prototype.getTracestate=function(){return this.tracestate},p.prototype.getLegacyRootId=function(){return this.legacyRootId},p.prototype._getAbsoluteUrl=function(m){if(!m.headers)return m.url;var h=m.connection?m.connection.encrypted:null,g=n.parse(m.url),v=g.pathname,w=g.search,C=h||m.headers["x-forwarded-proto"]=="https"?"https":"http",E=n.format({protocol:C,host:m.headers.host,pathname:v,search:w});return E},p.prototype._getIp=function(){var m=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,h=function(v){var w=m.exec(v);if(w)return w[0]},g=h(this.rawHeaders["x-forwarded-for"])||h(this.rawHeaders["x-client-ip"])||h(this.rawHeaders["x-real-ip"])||h(this.connectionRemoteAddress)||h(this.socketRemoteAddress)||h(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},p.prototype._getId=function(m){var h=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=p.parseId(i.getCookie(m,h));return g},p.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},p.prototype.parseHeaders=function(m,h){if(this.rawHeaders=m.headers||m.rawHeaders,this.userAgent=m.headers&&m.headers["user-agent"],this.sourceCorrelationId=i.getCorrelationContextTarget(m,s.requestContextSourceKey),m.headers){var g=m.headers[s.traceStateHeader]?m.headers[s.traceStateHeader].toString():null,v=m.headers[s.traceparentHeader]?m.headers[s.traceparentHeader].toString():null,w=m.headers[s.requestIdHeader]?m.headers[s.requestIdHeader].toString():null,C=m.headers[s.parentIdHeader]?m.headers[s.parentIdHeader].toString():null,E=m.headers[s.rootIdHeader]?m.headers[s.rootIdHeader].toString():null;this.correlationContextHeader=m.headers[s.correlationContextHeader]?m.headers[s.correlationContextHeader].toString():null,c.w3cEnabled&&(v||g)?(this.traceparent=new l(v?v.toString():null),this.tracestate=v&&g&&new u(g?g.toString():null),this.setBackCompatFromThisTraceContext()):w?c.w3cEnabled?(this.traceparent=new l(null,w),this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new l,this.traceparent.parentId=C,this.traceparent.legacyRootId=E||C,this.setBackCompatFromThisTraceContext()):(this.parentId=C,this.requestId=c.generateRequestId(E||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),h&&(this.requestId=h,this.operationId=c.getRootId(this.requestId))}},p.parseId=function(m){var h=m.split("|");return h.length>0?h[0]:""},p.keys=new o.ContextTagKeys,p}(a);t.exports=d}),q7=F((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=e.re=[],a=e.src=[],c=0,u=c++;a[u]="0|[1-9]\\d*";var l=c++;a[l]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[m]+"(?:\\."+a[m]+")*))";var v=c++;a[v]="(?:-?("+a[h]+"(?:\\."+a[h]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var E=c++,b="v?"+a[f]+a[g]+"?"+a[C]+"?";a[E]="^"+b+"$";var I="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",T=c++;a[T]="^"+I+"$";var P=c++;a[P]="((?:<|>)?=?)";var S=c++;a[S]=a[l]+"|x|X|\\*";var k=c++;a[k]=a[u]+"|x|X|\\*";var A=c++;a[A]="[v=\\s]*("+a[k]+")(?:\\.("+a[k]+")(?:\\.("+a[k]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var N=c++;a[N]="[v=\\s]*("+a[S]+")(?:\\.("+a[S]+")(?:\\.("+a[S]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var z=c++;a[z]="^"+a[P]+"\\s*"+a[A]+"$";var Q=c++;a[Q]="^"+a[P]+"\\s*"+a[N]+"$";var ee=c++;a[ee]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var ne=c++;a[ne]="(?:~>?)";var U=c++;a[U]="(\\s*)"+a[ne]+"\\s+",s[U]=new RegExp(a[U],"g");var L="$1~",D=c++;a[D]="^"+a[ne]+a[A]+"$";var j=c++;a[j]="^"+a[ne]+a[N]+"$";var K=c++;a[K]="(?:\\^)";var Y=c++;a[Y]="(\\s*)"+a[K]+"\\s+",s[Y]=new RegExp(a[Y],"g");var Z="$1^",me=c++;a[me]="^"+a[K]+a[A]+"$";var Ee=c++;a[Ee]="^"+a[K]+a[N]+"$";var _e=c++;a[_e]="^"+a[P]+"\\s*("+I+")$|^$";var Ie=c++;a[Ie]="^"+a[P]+"\\s*("+b+")$|^$";var Ce=c++;a[Ce]="(\\s*)"+a[P]+"\\s*("+I+"|"+a[A]+")",s[Ce]=new RegExp(a[Ce],"g");var ht="$1$2$3",wt=c++;a[wt]="^\\s*("+a[A]+")\\s+-\\s+("+a[A]+")\\s*$";var ke=c++;a[ke]="^\\s*("+a[N]+")\\s+-\\s+("+a[N]+")\\s*$";var Pe=c++;for(a[Pe]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,a[Ae]),s[Ae]||(s[Ae]=new RegExp(a[Ae]));var Ae;e.parse=Ke;function Ke(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof re)return y;if(typeof y!="string"||y.length>n)return null;var x=_.loose?s[T]:s[E];if(!x.test(y))return null;try{return new re(y,_)}catch{return null}}e.valid=Pn;function Pn(y,_){var x=Ke(y,_);return x?x.version:null}e.clean=qr;function qr(y,_){var x=Ke(y.trim().replace(/^[=v]+/,""),_);return x?x.version:null}e.SemVer=re;function re(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof re){if(y.loose===_.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(y,_);r("SemVer",y,_),this.options=_,this.loose=!!_.loose;var x=y.trim().match(_.loose?s[T]:s[E]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(O){if(/^[0-9]+$/.test(O)){var M=+O;if(M>=0&&M<o)return M}return O}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof re||(y=new re(y,this.options)),this.compareMain(y)||this.comparePre(y)},re.prototype.compareMain=function(y){return y instanceof re||(y=new re(y,this.options)),te(this.major,y.major)||te(this.minor,y.minor)||te(this.patch,y.patch)},re.prototype.comparePre=function(y){if(y instanceof re||(y=new re(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var _=0;do{var x=this.prerelease[_],O=y.prerelease[_];if(r("prerelease compare",_,x,O),x===void 0&&O===void 0)return 0;if(O===void 0)return 1;if(x===void 0)return-1;if(x!==O)return te(x,O)}while(++_)},re.prototype.inc=function(y,_){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},e.inc=In;function In(y,_,x,O){typeof x=="string"&&(O=x,x=void 0);try{return new re(y,x).inc(_,O).version}catch{return null}}e.diff=V;function V(y,_){if(we(y,_))return null;var x=Ke(y),O=Ke(_),M="";if(x.prerelease.length||O.prerelease.length){M="pre";var H="prerelease"}for(var W in x)if((W==="major"||W==="minor"||W==="patch")&&x[W]!==O[W])return M+W;return H}e.compareIdentifiers=te;var ae=/^[0-9]+$/;function te(y,_){var x=ae.test(y),O=ae.test(_);return x&&O&&(y=+y,_=+_),y===_?0:x&&!O?-1:O&&!x?1:y<_?-1:1}e.rcompareIdentifiers=de;function de(y,_){return te(_,y)}e.major=he;function he(y,_){return new re(y,_).major}e.minor=Ue;function Ue(y,_){return new re(y,_).minor}e.patch=Oe;function Oe(y,_){return new re(y,_).patch}e.compare=ve;function ve(y,_,x){return new re(y,x).compare(new re(_,x))}e.compareLoose=Le;function Le(y,_){return ve(y,_,!0)}e.rcompare=be;function be(y,_,x){return ve(_,y,x)}e.sort=G;function G(y,_){return y.sort(function(x,O){return e.compare(x,O,_)})}e.rsort=oe;function oe(y,_){return y.sort(function(x,O){return e.rcompare(x,O,_)})}e.gt=se;function se(y,_,x){return ve(y,_,x)>0}e.lt=fe;function fe(y,_,x){return ve(y,_,x)<0}e.eq=we;function we(y,_,x){return ve(y,_,x)===0}e.neq=Te;function Te(y,_,x){return ve(y,_,x)!==0}e.gte=Ze;function Ze(y,_,x){return ve(y,_,x)>=0}e.lte=Ye;function Ye(y,_,x){return ve(y,_,x)<=0}e.cmp=rt;function rt(y,_,x,O){switch(_){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return we(y,x,O);case"!=":return Te(y,x,O);case">":return se(y,x,O);case">=":return Ze(y,x,O);case"<":return fe(y,x,O);case"<=":return Ye(y,x,O);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=Me;function Me(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof Me){if(y.loose===!!_.loose)return y;y=y.value}if(!(this instanceof Me))return new Me(y,_);r("comparator",y,_),this.options=_,this.loose=!!_.loose,this.parse(y),this.semver===Tt?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Tt={};Me.prototype.parse=function(y){var _=this.options.loose?s[_e]:s[Ie],x=y.match(_);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new re(x[2],this.options.loose):this.semver=Tt},Me.prototype.toString=function(){return this.value},Me.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Tt?!0:(typeof y=="string"&&(y=new re(y,this.options)),rt(y,this.operator,this.semver,this.options))},Me.prototype.intersects=function(y,_){if(!(y instanceof Me))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var x;if(this.operator==="")return x=new ge(y.value,_),Cr(this.value,x,_);if(y.operator==="")return x=new ge(this.value,_),Cr(y.semver,x,_);var O=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),M=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),H=this.semver.version===y.semver.version,W=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ue=rt(this.semver,"<",y.semver,_)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),ce=rt(this.semver,">",y.semver,_)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return O||M||H&&W||ue||ce},e.Range=ge;function ge(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof ge)return y.loose===!!_.loose&&y.includePrerelease===!!_.includePrerelease?y:new ge(y.raw,_);if(y instanceof Me)return new ge(y.value,_);if(!(this instanceof ge))return new ge(y,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ge.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ge.prototype.toString=function(){return this.range},ge.prototype.parseRange=function(y){var _=this.options.loose;y=y.trim();var x=_?s[ke]:s[wt];y=y.replace(x,Js),r("hyphen replace",y),y=y.replace(s[Ce],ht),r("comparator trim",y,s[Ce]),y=y.replace(s[U],L),y=y.replace(s[Y],Z),y=y.split(/\s+/).join(" ");var O=_?s[_e]:s[Ie],M=y.split(" ").map(function(H){return no(H,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(M=M.filter(function(H){return!!H.match(O)})),M=M.map(function(H){return new Me(H,this.options)},this),M},ge.prototype.intersects=function(y,_){if(!(y instanceof ge))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(O){return y.set.some(function(M){return M.every(function(H){return O.intersects(H,_)})})})})},e.toComparators=Bi;function Bi(y,_){return new ge(y,_).set.map(function(x){return x.map(function(O){return O.value}).join(" ").trim().split(" ")})}function no(y,_){return r("comp",y,_),y=zs(y,_),r("caret",y),y=on(y,_),r("tildes",y),y=Qs(y,_),r("xrange",y),y=kr(y,_),r("stars",y),y}function $e(y){return!y||y.toLowerCase()==="x"||y==="*"}function on(y,_){return y.trim().split(/\s+/).map(function(x){return Gs(x,_)}).join(" ")}function Gs(y,_){var x=_.loose?s[j]:s[D];return y.replace(x,function(O,M,H,W,ue){r("tilde",y,O,M,H,W,ue);var ce;return $e(M)?ce="":$e(H)?ce=">="+M+".0.0 <"+(+M+1)+".0.0":$e(W)?ce=">="+M+"."+H+".0 <"+M+"."+(+H+1)+".0":ue?(r("replaceTilde pr",ue),ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+(+H+1)+".0"):ce=">="+M+"."+H+"."+W+" <"+M+"."+(+H+1)+".0",r("tilde return",ce),ce})}function zs(y,_){return y.trim().split(/\s+/).map(function(x){return Ks(x,_)}).join(" ")}function Ks(y,_){r("caret",y,_);var x=_.loose?s[Ee]:s[me];return y.replace(x,function(O,M,H,W,ue){r("caret",y,O,M,H,W,ue);var ce;return $e(M)?ce="":$e(H)?ce=">="+M+".0.0 <"+(+M+1)+".0.0":$e(W)?M==="0"?ce=">="+M+"."+H+".0 <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+".0 <"+(+M+1)+".0.0":ue?(r("replaceCaret pr",ue),M==="0"?H==="0"?ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+H+"."+(+W+1):ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+"."+W+"-"+ue+" <"+(+M+1)+".0.0"):(r("no pr"),M==="0"?H==="0"?ce=">="+M+"."+H+"."+W+" <"+M+"."+H+"."+(+W+1):ce=">="+M+"."+H+"."+W+" <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+"."+W+" <"+(+M+1)+".0.0"),r("caret return",ce),ce})}function Qs(y,_){return r("replaceXRanges",y,_),y.split(/\s+/).map(function(x){return Ys(x,_)}).join(" ")}function Ys(y,_){y=y.trim();var x=_.loose?s[Q]:s[z];return y.replace(x,function(O,M,H,W,ue,ce){r("xRange",y,O,M,H,W,ue,ce);var nt=$e(H),Je=nt||$e(W),Ge=Je||$e(ue),Ve=Ge;return M==="="&&Ve&&(M=""),nt?M===">"||M==="<"?O="<0.0.0":O="*":M&&Ve?(Je&&(W=0),ue=0,M===">"?(M=">=",Je?(H=+H+1,W=0,ue=0):(W=+W+1,ue=0)):M==="<="&&(M="<",Je?H=+H+1:W=+W+1),O=M+H+"."+W+"."+ue):Je?O=">="+H+".0.0 <"+(+H+1)+".0.0":Ge&&(O=">="+H+"."+W+".0 <"+H+"."+(+W+1)+".0"),r("xRange return",O),O})}function kr(y,_){return r("replaceStars",y,_),y.trim().replace(s[Pe],"")}function Js(y,_,x,O,M,H,W,ue,ce,nt,Je,Ge,Ve){return $e(x)?_="":$e(O)?_=">="+x+".0.0":$e(M)?_=">="+x+"."+O+".0":_=">="+_,$e(ce)?ue="":$e(nt)?ue="<"+(+ce+1)+".0.0":$e(Je)?ue="<"+ce+"."+(+nt+1)+".0":Ge?ue="<="+ce+"."+nt+"."+Je+"-"+Ge:ue="<="+ue,(_+" "+ue).trim()}ge.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new re(y,this.options));for(var _=0;_<this.set.length;_++)if(Xs(this.set[_],y,this.options))return!0;return!1};function Xs(y,_,x){for(var O=0;O<y.length;O++)if(!y[O].test(_))return!1;if(_.prerelease.length&&!x.includePrerelease){for(O=0;O<y.length;O++)if(r(y[O].semver),y[O].semver!==Tt&&y[O].semver.prerelease.length>0){var M=y[O].semver;if(M.major===_.major&&M.minor===_.minor&&M.patch===_.patch)return!0}return!1}return!0}e.satisfies=Cr;function Cr(y,_,x){try{_=new ge(_,x)}catch{return!1}return _.test(y)}e.maxSatisfying=Zs;function Zs(y,_,x){var O=null,M=null;try{var H=new ge(_,x)}catch{return null}return y.forEach(function(W){H.test(W)&&(!O||M.compare(W)===-1)&&(O=W,M=new re(O,x))}),O}e.minSatisfying=ea;function ea(y,_,x){var O=null,M=null;try{var H=new ge(_,x)}catch{return null}return y.forEach(function(W){H.test(W)&&(!O||M.compare(W)===1)&&(O=W,M=new re(O,x))}),O}e.minVersion=Tn;function Tn(y,_){y=new ge(y,_);var x=new re("0.0.0");if(y.test(x)||(x=new re("0.0.0-0"),y.test(x)))return x;x=null;for(var O=0;O<y.set.length;++O){var M=y.set[O];M.forEach(function(H){var W=new re(H.semver.version);switch(H.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!x||se(x,W))&&(x=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+H.operator)}})}return x&&y.test(x)?x:null}e.validRange=ta;function ta(y,_){try{return new ge(y,_).range||"*"}catch{return null}}e.ltr=ra;function ra(y,_,x){return sn(y,_,"<",x)}e.gtr=na;function na(y,_,x){return sn(y,_,">",x)}e.outside=sn;function sn(y,_,x,O){y=new re(y,O),_=new ge(_,O);var M,H,W,ue,ce;switch(x){case">":M=se,H=Ye,W=fe,ue=">",ce=">=";break;case"<":M=fe,H=Ze,W=se,ue="<",ce="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Cr(y,_,O))return!1;for(var nt=0;nt<_.set.length;++nt){var Je=_.set[nt],Ge=null,Ve=null;if(Je.forEach(function(gt){gt.semver===Tt&&(gt=new Me(">=0.0.0")),Ge=Ge||gt,Ve=Ve||gt,M(gt.semver,Ge.semver,O)?Ge=gt:W(gt.semver,Ve.semver,O)&&(Ve=gt)}),Ge.operator===ue||Ge.operator===ce||(!Ve.operator||Ve.operator===ue)&&H(y,Ve.semver)||Ve.operator===ce&&W(y,Ve.semver))return!1}return!0}e.prerelease=oa;function oa(y,_){var x=Ke(y,_);return x&&x.prerelease.length?x.prerelease:null}e.intersects=kn;function kn(y,_,x){return y=new ge(y,x),_=new ge(_,x),y.intersects(_)}e.coerce=ia;function ia(y){if(y instanceof re)return y;if(typeof y!="string")return null;var _=y.match(s[ee]);return _==null?null:Ke(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),zb=F((e,t)=>{"use strict";function r(l){return typeof l=="function"}var n=console.error.bind(console);function o(l,d,f){var p=!!l[d]&&l.propertyIsEnumerable(d);Object.defineProperty(l,d,{configurable:!0,enumerable:p,writable:!0,value:f})}function i(l){l&&l.logger&&(r(l.logger)?n=l.logger:n("new logger isn't a function, not replacing"))}function s(l,d,f){if(!l||!l[d]){n("no original function "+d+" to wrap");return}if(!f){n("no wrapper function"),n(new Error().stack);return}if(!r(l[d])||!r(f)){n("original object and wrapper must be functions");return}var p=l[d],m=f(p,d);return o(m,"__original",p),o(m,"__unwrap",function(){l[d]===m&&o(l,d,p)}),o(m,"__wrapped",!0),o(l,d,m),m}function a(l,d,f){if(l)Array.isArray(l)||(l=[l]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to wrap on modules");return}l.forEach(function(p){d.forEach(function(m){s(p,m,f)})})}function c(l,d){if(!l||!l[d]){n("no function to unwrap."),n(new Error().stack);return}if(!l[d].__unwrap)n("no original to unwrap to -- has "+d+" already been unwrapped?");else return l[d].__unwrap()}function u(l,d){if(l)Array.isArray(l)||(l=[l]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(d&&Array.isArray(d))){n("must provide one or more functions to unwrap on modules");return}l.forEach(function(f){d.forEach(function(p){c(f,p)})})}i.wrap=s,i.massWrap=a,i.unwrap=c,i.massUnwrap=u,t.exports=i}),Kb=F((e,t)=>{"use strict";var r=zb(),n=r.wrap,o=r.unwrap,i="wrap@before";function s(d,f,p){var m=!!d[f]&&d.propertyIsEnumerable(f);Object.defineProperty(d,f,{configurable:!0,enumerable:m,writable:!0,value:p})}function a(d,f){for(var p=f.length,m=0;m<p;m++){var h=f[m],g=d[i];if(typeof g=="function")g(h);else if(Array.isArray(g))for(var v=g.length,w=0;w<v;w++)g[w](h)}}function c(d,f){var p;return p=d._events&&d._events[f],Array.isArray(p)||(p?p=[p]:p=[]),p}function u(d,f,p){var m=c(d,f),h=m.filter(function(g){return p.indexOf(g)===-1});h.length>0&&a(d,h)}function l(d,f){if(d){var p=d;if(typeof d=="function")p=f(d);else if(Array.isArray(d)){p=[];for(var m=0;m<d.length;m++)p[m]=f(d[m])}return p}}t.exports=function(d,f,p){if(!d||!d.on||!d.addListener||!d.removeListener||!d.emit)throw new Error("can only wrap real EEs");if(!f)throw new Error("must have function to run on listener addition");if(!p)throw new Error("must have function to wrap listeners when emitting");function m(g){return function(v,w){var C=c(this,v).slice();try{var E=g.call(this,v,w);return u(this,v,C),E}finally{this.on.__wrapped||n(this,"on",m),this.addListener.__wrapped||n(this,"addListener",m)}}}function h(g){return function(v){if(!this._events||!this._events[v])return g.apply(this,arguments);var w=this._events[v];function C(E){return function(){this._events[v]=w;try{return E.apply(this,arguments)}finally{w=this._events[v],this._events[v]=l(w,p)}}}n(this,"removeListener",C);try{return this._events[v]=l(w,p),g.apply(this,arguments)}finally{o(this,"removeListener"),this._events[v]=w}}}d[i]?typeof d[i]=="function"?s(d,i,[d[i],f]):Array.isArray(d[i])&&d[i].push(f):s(d,i,f),d.__wrapped||(n(d,"addListener",m),n(d,"on",m),n(d,"emit",h),s(d,"__unwrap",function(){o(d,"addListener"),o(d,"on"),o(d,"emit"),delete d[i],delete d.__wrapped}),s(d,"__wrapped",!0))}}),B7=F((e,t)=>{"use strict";var r=require("util"),n=require("assert"),o=Kb(),i=require("async_hooks"),s="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,u=-1;t.exports={getNamespace:d,createNamespace:f,destroyNamespace:p,reset:m,ERROR_SYMBOL:a};function l(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}l.prototype.set=function(g,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=v,c){let w=" ".repeat(this._indent<0?0:this._indent);h(w+"CONTEXT-SET KEY:"+g+"="+v+" in ns:"+this.name+" currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},l.prototype.get=function(g){if(!this.active){if(c){let v=i.currentId(),w=i.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);h(`${C}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${u} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length}`)}return}if(c){let v=i.executionAsyncId(),w=i.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);h(C+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+u+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),h(`${C}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${u} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[g]},l.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=u,c){let v=i.executionAsyncId(),w=i.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);h(`${C}CONTEXT-CREATED Context: (${this.name}) currentUid:${u} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} context:${r.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},l.prototype.run=function(g){let v=this.createContext();this.enter(v);try{if(c){let w=i.triggerAsyncId(),C=i.executionAsyncId(),E=" ".repeat(this._indent<0?0:this._indent);h(`${E}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${u} triggerId:${w} asyncHooksCurrentId:${C} len:${this._set.length} context:${r.inspect(v)}`)}return g(v),v}catch(w){throw w&&(w[a]=v),w}finally{if(c){let w=i.triggerAsyncId(),C=i.executionAsyncId(),E=" ".repeat(this._indent<0?0:this._indent);h(`${E}CONTEXT-RUN END: (${this.name}) currentUid:${u} triggerId:${w} asyncHooksCurrentId:${C} len:${this._set.length} ${r.inspect(v)}`)}this.exit(v)}},l.prototype.runAndReturn=function(g){let v;return this.run(function(w){v=g(w)}),v},l.prototype.runPromise=function(g){let v=this.createContext();this.enter(v);let w=g(v);if(!w||!w.then||!w.catch)throw new Error("fn must return a promise.");return c&&h("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(v)),w.then(C=>(c&&h("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),C)).catch(C=>{throw C[a]=v,c&&h("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),C})},l.prototype.bind=function(g,v){v||(this.active?v=this.active:v=this.createContext());let w=this;return function(){w.enter(v);try{return g.apply(this,arguments)}catch(C){throw C&&(C[a]=v),C}finally{w.exit(v)}}},l.prototype.enter=function(g){if(n.ok(g,"context must be provided for entering"),c){let v=i.executionAsyncId(),w=i.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);h(`${C}CONTEXT-ENTER: (${this.name}) currentUid:${u} triggerId:${w} asyncHooksCurrentId:${v} len:${this._set.length} ${r.inspect(g)}`)}this._set.push(this.active),this.active=g},l.prototype.exit=function(g){if(n.ok(g,"context must be provided for exiting"),c){let w=i.executionAsyncId(),C=i.triggerAsyncId(),E=" ".repeat(this._indent<0?0:this._indent);h(`${E}CONTEXT-EXIT: (${this.name}) currentUid:${u} triggerId:${C} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(g)}`)}if(this.active===g){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let v=this._set.lastIndexOf(g);v<0?(c&&h("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(g)),n.ok(v>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(g))):(n.ok(v,"can't remove top context"),this._set.splice(v,1))},l.prototype.bindEmitter=function(g){n.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let v=this,w="context@"+this.name;function C(b){!b||(b[s]||(b[s]=Object.create(null)),b[s][w]={namespace:v,context:v.active})}function E(b){if(!(b&&b[s]))return b;let I=b,T=b[s];return Object.keys(T).forEach(function(P){let S=T[P];I=S.namespace.bind(I,S.context)}),I}o(g,C,E)},l.prototype.fromException=function(g){return g[a]};function d(g){return process.namespaces[g]}function f(g){n.ok(g,"namespace must be given a name."),c&&h(`NS-CREATING NAMESPACE (${g})`);let v=new l(g);return v.id=u,i.createHook({init(w,C,E,b){if(u=i.executionAsyncId(),v.active){if(v._contexts.set(w,v.active),c){let I=" ".repeat(v._indent<0?0:v._indent);h(`${I}INIT [${C}] (${g}) asyncId:${w} currentUid:${u} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${b}`)}}else if(u===0){let I=i.triggerAsyncId(),T=v._contexts.get(I);if(T){if(v._contexts.set(w,T),c){let P=" ".repeat(v._indent<0?0:v._indent);h(`${P}INIT USING CONTEXT FROM TRIGGERID [${C}] (${g}) asyncId:${w} currentUid:${u} triggerId:${I} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${b}`)}}else if(c){let P=" ".repeat(v._indent<0?0:v._indent);h(`${P}INIT MISSING CONTEXT [${C}] (${g}) asyncId:${w} currentUid:${u} triggerId:${I} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${b}`)}}if(c&&C==="PROMISE"){h(r.inspect(b,{showHidden:!0}));let I=b.parentId,T=" ".repeat(v._indent<0?0:v._indent);h(`${T}INIT RESOURCE-PROMISE [${C}] (${g}) parentId:${I} asyncId:${w} currentUid:${u} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${b}`)}},before(w){u=i.executionAsyncId();let C;if(C=v._contexts.get(w)||v._contexts.get(u),C){if(c){let E=i.triggerAsyncId(),b=" ".repeat(v._indent<0?0:v._indent);h(`${b}BEFORE (${g}) asyncId:${w} currentUid:${u} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`),v._indent+=2}v.enter(C)}else if(c){let E=i.triggerAsyncId(),b=" ".repeat(v._indent<0?0:v._indent);h(`${b}BEFORE MISSING CONTEXT (${g}) asyncId:${w} currentUid:${u} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(w){u=i.executionAsyncId();let C;if(C=v._contexts.get(w)||v._contexts.get(u),C){if(c){let E=i.triggerAsyncId();v._indent-=2;let b=" ".repeat(v._indent<0?0:v._indent);h(`${b}AFTER (${g}) asyncId:${w} currentUid:${u} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`)}v.exit(C)}else if(c){let E=i.triggerAsyncId();v._indent-=2;let b=" ".repeat(v._indent<0?0:v._indent);h(`${b}AFTER MISSING CONTEXT (${g}) asyncId:${w} currentUid:${u} triggerId:${E} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(C)}`)}},destroy(w){if(u=i.executionAsyncId(),c){let C=i.triggerAsyncId(),E=" ".repeat(v._indent<0?0:v._indent);h(`${E}DESTROY (${g}) currentUid:${u} asyncId:${w} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(v._contexts.get(u))}`)}v._contexts.delete(w)}}).enable(),process.namespaces[g]=v,v}function p(g){let v=d(g);n.ok(v,`can't delete nonexistent namespace! "`+g+'"'),n.ok(v.id,"don't assign to process.namespaces directly! "+r.inspect(v)),process.namespaces[g]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){p(g)}),process.namespaces=Object.create(null)}process.namespaces={};function h(...g){c&&process._rawDebug(`${r.format(...g)}`)}}),V7=F((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,o=this._state,i=process.nextTick;process.nextTick=function(){if(!o.enabled)return i.apply(process,arguments);let s=new Array(arguments.length);for(let l=0;l<arguments.length;l++)s[l]=arguments[l];let a=s[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new r,u=--o.counter;return n.init.call(c,u,0,null,null),s[0]=function(){n.pre.call(c,u);let l=!0;try{a.apply(this,arguments),l=!1}finally{l&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,u,!0),n.destroy.call(null,u)})}n.post.call(c,u,!1),n.destroy.call(null,u)},i.apply(process,s)}}}),W7=F((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,o=this._state,i=global.Promise,s=i.prototype.then;i.prototype.then=l;function a(d,f,p,m){return typeof d!="function"?m?c(p):u(p):function(){n.pre.call(f,p);try{return d.apply(this,arguments)}finally{n.post.call(f,p,!1),n.destroy.call(null,p)}}}function c(d){return function(f){return n.destroy.call(null,d),f}}function u(d){return function(f){throw n.destroy.call(null,d),f}}function l(d,f){if(!o.enabled)return s.call(this,d,f);let p=new r,m=--o.counter;return n.init.call(p,m,0,null,null),s.call(this,a(d,p,m,!0),a(f,p,m,!1))}}}),G7=F((e,t)=>{"use strict";var r=require("timers");function n(){}function o(){}function i(){}var s=new Map,a=new Map,c=new Map,u=null,l=!1;t.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",n,s,!0),d(this._hooks,this._state,"setInterval","clearInterval",o,a,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",i,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function d(f,p,m,h,g,v,w){let C=r[m],E=r[h];r[m]=function(){if(!p.enabled)return C.apply(r,arguments);let b=new Array(arguments.length);for(let k=0;k<arguments.length;k++)b[k]=arguments[k];let I=b[0];if(typeof I!="function")throw new TypeError('"callback" argument must be a function');let T=new g,P=--p.counter,S;return f.init.call(T,P,0,null,null),b[0]=function(){u=S,f.pre.call(T,P);let k=!0;try{I.apply(this,arguments),k=!1}finally{k&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){f.post.call(T,P,!0),v.delete(S),f.destroy.call(null,P)})}f.post.call(T,P,!1),u=null,(w||l)&&(l=!1,v.delete(S),f.destroy.call(null,P))},S=C.apply(r,b),v.set(S,P),S},r[h]=function(b){if(u===b&&b!==null)l=!0;else if(v.has(b)){let I=v.get(b);v.delete(b),f.destroy.call(null,I)}E.apply(r,arguments)}}}),bM=F((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),z7=F((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,o={nextTick:V7(),promise:W7(),timers:G7()},i=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let l=this.initFns=[],d=this.preFns=[],f=this.postFns=[],p=this.destroyFns=[];this.init=function(m,h,g,v){if(h===n){i.add(m);return}for(let w of l)w(m,this,h,g,v)},this.pre=function(m){if(!i.has(m))for(let h of d)h(m,this)},this.post=function(m,h){if(!i.has(m))for(let g of f)g(m,this,h)},this.destroy=function(m){if(i.has(m)){i.delete(m);return}for(let h of p)h(m)}}a.prototype.add=function(l){l.init&&this.initFns.push(l.init),l.pre&&this.preFns.push(l.pre),l.post&&this.postFns.push(l.post),l.destroy&&this.destroyFns.push(l.destroy)};function c(l,d){let f=l.indexOf(d);f!==-1&&l.splice(f,1)}a.prototype.remove=function(l){l.init&&c(this.initFns,l.init),l.pre&&c(this.preFns,l.pre),l.post&&c(this.postFns,l.post),l.destroy&&c(this.destroyFns,l.destroy)};function u(){this._state=new s,this._hooks=new a,this.version=bM().version,this.providers=r.Providers;for(let l of Object.keys(o))o[l].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}t.exports=u,u.prototype.addHooks=function(l){this._hooks.add(l)},u.prototype.removeHooks=function(l){this._hooks.remove(l)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),xM=F((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),K7=F((e,t)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(o){try{return"<error: "+o+">"}catch{return"<error>"}}}t.exports=function(n,o){var i=[];i.push(r(n));for(var s=0;s<o.length;s++){var a=o[s],c;try{c=a.toString()}catch(u){try{c="<error: "+u+">"}catch{c="<error>"}}i.push("    at "+c)}return i.join(`
`)}}),Q7=F((e,t)=>{var r=K7();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=xM().version}var o=!1;n.prototype.callSite=function d(f){f||(f={}),o=!0;var p={};Error.captureStackTrace(p,d);var m=p.stack;return o=!1,m=m.slice(f.slice||0),f.extend&&(m=this.extend._modify(p,m)),f.filter&&(m=this.filter._modify(p,m)),m};var i=new n;function s(){this._modifiers=[]}s.prototype._modify=function(d,f){for(var p=0,m=this._modifiers.length;p<m;p++)f=this._modifiers[p](d,f);return f},s.prototype.attach=function(d){this._modifiers.push(d)},s.prototype.deattach=function(d){var f=this._modifiers.indexOf(d);return f===-1?!1:(this._modifiers.splice(f,1),!0)};function a(){this._formater=r,this._previous=void 0}a.prototype.replace=function(d){d?this._formater=d:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&i.format.replace(Error.prepareStackTrace);var c=!1;function u(d,f){if(o)return f;if(c)return r(d,f);var p=f.concat();p=i.extend._modify(d,p),p=i.filter._modify(d,p),p=p.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:f,mutated:p}),c=!0;var m=i.format._formater(d,p);return c=!1,m}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(d){d===u?i.format._roolback():(i.format._backup(),i.format.replace(d))}});function l(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:l,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),t.exports=i}),SM=F((e,t)=>{if(global._stackChain)if(global._stackChain.version===xM().version)t.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else t.exports=global._stackChain=Q7()}),Y7=F((e,t)=>{"use strict";var r=z7();if(global._asyncHook)if(global._asyncHook.version===bM().version)t.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else SM().filter.attach(function(n,o){return o.filter(function(i){let s=i.getFileName();return!(s&&s.slice(0,__dirname.length)===__dirname)})}),t.exports=global._asyncHook=new r}),J7=F((e,t)=>{"use strict";var r=require("util"),n=require("assert"),o=Kb(),i=Y7(),s="cls@contexts",a="error@context",c=[];for(let E in i.providers)c[i.providers[E]]=E;var u=process.env.DEBUG_CLS_HOOKED,l=-1;t.exports={getNamespace:f,createNamespace:p,destroyNamespace:m,reset:h,ERROR_SYMBOL:a};function d(E){this.name=E,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(E,b){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return u&&g("    SETTING KEY:"+E+"="+b+" in ns:"+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0)),this.active[E]=b,b},d.prototype.get=function(E){if(!this.active){u&&g("    GETTING KEY:"+E+"=undefined "+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0));return}return u&&g("    GETTING KEY:"+E+"="+this.active[E]+" "+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0)),this.active[E]},d.prototype.createContext=function(){u&&g("   CREATING Context: "+this.name+" uid:"+l+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let E=Object.create(this.active?this.active:Object.prototype);return E._ns_name=this.name,E.id=l,u&&g("   CREATED Context: "+this.name+" uid:"+l+" len:"+this._set.length+"  context:"+r.inspect(E,!0,2,!0)),E},d.prototype.run=function(E){let b=this.createContext();this.enter(b);try{return u&&g(" BEFORE RUN: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(b)),E(b),b}catch(I){throw I&&(I[a]=b),I}finally{u&&g(" AFTER RUN: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(b)),this.exit(b)}},d.prototype.runAndReturn=function(E){var b;return this.run(function(I){b=E(I)}),b},d.prototype.runPromise=function(E){let b=this.createContext();this.enter(b);let I=E(b);if(!I||!I.then||!I.catch)throw new Error("fn must return a promise.");return u&&g(" BEFORE runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(b)),I.then(T=>(u&&g(" AFTER runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(b)),this.exit(b),T)).catch(T=>{throw T[a]=b,u&&g(" AFTER runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(b)),this.exit(b),T})},d.prototype.bind=function(E,b){b||(this.active?b=this.active:b=this.createContext());let I=this;return function(){I.enter(b);try{return E.apply(this,arguments)}catch(T){throw T&&(T[a]=b),T}finally{I.exit(b)}}},d.prototype.enter=function(E){n.ok(E,"context must be provided for entering"),u&&g("  ENTER "+this.name+" uid:"+l+" len:"+this._set.length+" context: "+r.inspect(E)),this._set.push(this.active),this.active=E},d.prototype.exit=function(E){if(n.ok(E,"context must be provided for exiting"),u&&g("  EXIT "+this.name+" uid:"+l+" len:"+this._set.length+" context: "+r.inspect(E)),this.active===E){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let b=this._set.lastIndexOf(E);b<0?(u&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(E)),n.ok(b>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(E))):(n.ok(b,"can't remove top context"),this._set.splice(b,1))},d.prototype.bindEmitter=function(E){n.ok(E.on&&E.addListener&&E.emit,"can only bind real EEs");let b=this,I="context@"+this.name;function T(S){!S||(S[s]||(S[s]=Object.create(null)),S[s][I]={namespace:b,context:b.active})}function P(S){if(!(S&&S[s]))return S;let k=S,A=S[s];return Object.keys(A).forEach(function(N){let z=A[N];k=z.namespace.bind(k,z.context)}),k}o(E,T,P)},d.prototype.fromException=function(E){return E[a]};function f(E){return process.namespaces[E]}function p(E){n.ok(E,"namespace must be given a name."),u&&g("CREATING NAMESPACE "+E);let b=new d(E);return b.id=l,i.addHooks({init(I,T,P,S,k){l=I,S?(b._contexts.set(I,b._contexts.get(S)),u&&g("PARENTID: "+E+" uid:"+I+" parent:"+S+" provider:"+P)):b._contexts.set(l,b.active),u&&g("INIT "+E+" uid:"+I+" parent:"+S+" provider:"+c[P]+" active:"+r.inspect(b.active,!0))},pre(I,T){l=I;let P=b._contexts.get(I);P?(u&&g(" PRE "+E+" uid:"+I+" handle:"+v(T)+" context:"+r.inspect(P)),b.enter(P)):u&&g(" PRE MISSING CONTEXT "+E+" uid:"+I+" handle:"+v(T))},post(I,T){l=I;let P=b._contexts.get(I);P?(u&&g(" POST "+E+" uid:"+I+" handle:"+v(T)+" context:"+r.inspect(P)),b.exit(P)):u&&g(" POST MISSING CONTEXT "+E+" uid:"+I+" handle:"+v(T))},destroy(I){l=I,u&&g("DESTROY "+E+" uid:"+I+" context:"+r.inspect(b._contexts.get(l))+" active:"+r.inspect(b.active,!0)),b._contexts.delete(I)}}),process.namespaces[E]=b,b}function m(E){let b=f(E);n.ok(b,`can't delete nonexistent namespace! "`+E+'"'),n.ok(b.id,"don't assign to process.namespaces directly! "+r.inspect(b)),process.namespaces[E]=null}function h(){process.namespaces&&Object.keys(process.namespaces).forEach(function(E){m(E)}),process.namespaces=Object.create(null)}process.namespaces={},i._state&&!i._state.enabled&&i.enable();function g(E){process.env.DEBUG&&process._rawDebug(E)}function v(E){if(!E)return E;if(typeof E=="function")return E.name?E.name:(E.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(E.constructor&&E.constructor.name)return E.constructor.name}if(u){w=SM();for(C in w.filter._modifiers)w.filter.deattach(C)}var w,C}),X7=F((e,t)=>{"use strict";var r=q7();process&&r.gte(process.versions.node,"8.0.0")?t.exports=B7():t.exports=J7()}),Z7=F((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,s=e.re=[],a=e.src=[],c=0,u=c++;a[u]="0|[1-9]\\d*";var l=c++;a[l]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=c++;a[f]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var p=c++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[d]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[d]+")";var g=c++;a[g]="(?:-("+a[m]+"(?:\\."+a[m]+")*))";var v=c++;a[v]="(?:-?("+a[h]+"(?:\\."+a[h]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var C=c++;a[C]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var E=c++,b="v?"+a[f]+a[g]+"?"+a[C]+"?";a[E]="^"+b+"$";var I="[v=\\s]*"+a[p]+a[v]+"?"+a[C]+"?",T=c++;a[T]="^"+I+"$";var P=c++;a[P]="((?:<|>)?=?)";var S=c++;a[S]=a[l]+"|x|X|\\*";var k=c++;a[k]=a[u]+"|x|X|\\*";var A=c++;a[A]="[v=\\s]*("+a[k]+")(?:\\.("+a[k]+")(?:\\.("+a[k]+")(?:"+a[g]+")?"+a[C]+"?)?)?";var N=c++;a[N]="[v=\\s]*("+a[S]+")(?:\\.("+a[S]+")(?:\\.("+a[S]+")(?:"+a[v]+")?"+a[C]+"?)?)?";var z=c++;a[z]="^"+a[P]+"\\s*"+a[A]+"$";var Q=c++;a[Q]="^"+a[P]+"\\s*"+a[N]+"$";var ee=c++;a[ee]="(?:^|[^\\d])(\\d{1,"+i+"})(?:\\.(\\d{1,"+i+"}))?(?:\\.(\\d{1,"+i+"}))?(?:$|[^\\d])";var ne=c++;a[ne]="(?:~>?)";var U=c++;a[U]="(\\s*)"+a[ne]+"\\s+",s[U]=new RegExp(a[U],"g");var L="$1~",D=c++;a[D]="^"+a[ne]+a[A]+"$";var j=c++;a[j]="^"+a[ne]+a[N]+"$";var K=c++;a[K]="(?:\\^)";var Y=c++;a[Y]="(\\s*)"+a[K]+"\\s+",s[Y]=new RegExp(a[Y],"g");var Z="$1^",me=c++;a[me]="^"+a[K]+a[A]+"$";var Ee=c++;a[Ee]="^"+a[K]+a[N]+"$";var _e=c++;a[_e]="^"+a[P]+"\\s*("+I+")$|^$";var Ie=c++;a[Ie]="^"+a[P]+"\\s*("+b+")$|^$";var Ce=c++;a[Ce]="(\\s*)"+a[P]+"\\s*("+I+"|"+a[A]+")",s[Ce]=new RegExp(a[Ce],"g");var ht="$1$2$3",wt=c++;a[wt]="^\\s*("+a[A]+")\\s+-\\s+("+a[A]+")\\s*$";var ke=c++;a[ke]="^\\s*("+a[N]+")\\s+-\\s+("+a[N]+")\\s*$";var Pe=c++;for(a[Pe]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,a[Ae]),s[Ae]||(s[Ae]=new RegExp(a[Ae]));var Ae;e.parse=Ke;function Ke(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof re)return y;if(typeof y!="string"||y.length>n)return null;var x=_.loose?s[T]:s[E];if(!x.test(y))return null;try{return new re(y,_)}catch{return null}}e.valid=Pn;function Pn(y,_){var x=Ke(y,_);return x?x.version:null}e.clean=qr;function qr(y,_){var x=Ke(y.trim().replace(/^[=v]+/,""),_);return x?x.version:null}e.SemVer=re;function re(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof re){if(y.loose===_.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(y,_);r("SemVer",y,_),this.options=_,this.loose=!!_.loose;var x=y.trim().match(_.loose?s[T]:s[E]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(O){if(/^[0-9]+$/.test(O)){var M=+O;if(M>=0&&M<o)return M}return O}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof re||(y=new re(y,this.options)),this.compareMain(y)||this.comparePre(y)},re.prototype.compareMain=function(y){return y instanceof re||(y=new re(y,this.options)),te(this.major,y.major)||te(this.minor,y.minor)||te(this.patch,y.patch)},re.prototype.comparePre=function(y){if(y instanceof re||(y=new re(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var _=0;do{var x=this.prerelease[_],O=y.prerelease[_];if(r("prerelease compare",_,x,O),x===void 0&&O===void 0)return 0;if(O===void 0)return 1;if(x===void 0)return-1;if(x!==O)return te(x,O)}while(++_)},re.prototype.inc=function(y,_){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},e.inc=In;function In(y,_,x,O){typeof x=="string"&&(O=x,x=void 0);try{return new re(y,x).inc(_,O).version}catch{return null}}e.diff=V;function V(y,_){if(we(y,_))return null;var x=Ke(y),O=Ke(_),M="";if(x.prerelease.length||O.prerelease.length){M="pre";var H="prerelease"}for(var W in x)if((W==="major"||W==="minor"||W==="patch")&&x[W]!==O[W])return M+W;return H}e.compareIdentifiers=te;var ae=/^[0-9]+$/;function te(y,_){var x=ae.test(y),O=ae.test(_);return x&&O&&(y=+y,_=+_),y===_?0:x&&!O?-1:O&&!x?1:y<_?-1:1}e.rcompareIdentifiers=de;function de(y,_){return te(_,y)}e.major=he;function he(y,_){return new re(y,_).major}e.minor=Ue;function Ue(y,_){return new re(y,_).minor}e.patch=Oe;function Oe(y,_){return new re(y,_).patch}e.compare=ve;function ve(y,_,x){return new re(y,x).compare(new re(_,x))}e.compareLoose=Le;function Le(y,_){return ve(y,_,!0)}e.rcompare=be;function be(y,_,x){return ve(_,y,x)}e.sort=G;function G(y,_){return y.sort(function(x,O){return e.compare(x,O,_)})}e.rsort=oe;function oe(y,_){return y.sort(function(x,O){return e.rcompare(x,O,_)})}e.gt=se;function se(y,_,x){return ve(y,_,x)>0}e.lt=fe;function fe(y,_,x){return ve(y,_,x)<0}e.eq=we;function we(y,_,x){return ve(y,_,x)===0}e.neq=Te;function Te(y,_,x){return ve(y,_,x)!==0}e.gte=Ze;function Ze(y,_,x){return ve(y,_,x)>=0}e.lte=Ye;function Ye(y,_,x){return ve(y,_,x)<=0}e.cmp=rt;function rt(y,_,x,O){switch(_){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return we(y,x,O);case"!=":return Te(y,x,O);case">":return se(y,x,O);case">=":return Ze(y,x,O);case"<":return fe(y,x,O);case"<=":return Ye(y,x,O);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=Me;function Me(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof Me){if(y.loose===!!_.loose)return y;y=y.value}if(!(this instanceof Me))return new Me(y,_);r("comparator",y,_),this.options=_,this.loose=!!_.loose,this.parse(y),this.semver===Tt?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var Tt={};Me.prototype.parse=function(y){var _=this.options.loose?s[_e]:s[Ie],x=y.match(_);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new re(x[2],this.options.loose):this.semver=Tt},Me.prototype.toString=function(){return this.value},Me.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===Tt?!0:(typeof y=="string"&&(y=new re(y,this.options)),rt(y,this.operator,this.semver,this.options))},Me.prototype.intersects=function(y,_){if(!(y instanceof Me))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var x;if(this.operator==="")return x=new ge(y.value,_),Cr(this.value,x,_);if(y.operator==="")return x=new ge(this.value,_),Cr(y.semver,x,_);var O=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),M=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),H=this.semver.version===y.semver.version,W=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ue=rt(this.semver,"<",y.semver,_)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),ce=rt(this.semver,">",y.semver,_)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return O||M||H&&W||ue||ce},e.Range=ge;function ge(y,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),y instanceof ge)return y.loose===!!_.loose&&y.includePrerelease===!!_.includePrerelease?y:new ge(y.raw,_);if(y instanceof Me)return new ge(y.value,_);if(!(this instanceof ge))return new ge(y,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ge.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ge.prototype.toString=function(){return this.range},ge.prototype.parseRange=function(y){var _=this.options.loose;y=y.trim();var x=_?s[ke]:s[wt];y=y.replace(x,Js),r("hyphen replace",y),y=y.replace(s[Ce],ht),r("comparator trim",y,s[Ce]),y=y.replace(s[U],L),y=y.replace(s[Y],Z),y=y.split(/\s+/).join(" ");var O=_?s[_e]:s[Ie],M=y.split(" ").map(function(H){return no(H,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(M=M.filter(function(H){return!!H.match(O)})),M=M.map(function(H){return new Me(H,this.options)},this),M},ge.prototype.intersects=function(y,_){if(!(y instanceof ge))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(O){return y.set.some(function(M){return M.every(function(H){return O.intersects(H,_)})})})})},e.toComparators=Bi;function Bi(y,_){return new ge(y,_).set.map(function(x){return x.map(function(O){return O.value}).join(" ").trim().split(" ")})}function no(y,_){return r("comp",y,_),y=zs(y,_),r("caret",y),y=on(y,_),r("tildes",y),y=Qs(y,_),r("xrange",y),y=kr(y,_),r("stars",y),y}function $e(y){return!y||y.toLowerCase()==="x"||y==="*"}function on(y,_){return y.trim().split(/\s+/).map(function(x){return Gs(x,_)}).join(" ")}function Gs(y,_){var x=_.loose?s[j]:s[D];return y.replace(x,function(O,M,H,W,ue){r("tilde",y,O,M,H,W,ue);var ce;return $e(M)?ce="":$e(H)?ce=">="+M+".0.0 <"+(+M+1)+".0.0":$e(W)?ce=">="+M+"."+H+".0 <"+M+"."+(+H+1)+".0":ue?(r("replaceTilde pr",ue),ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+(+H+1)+".0"):ce=">="+M+"."+H+"."+W+" <"+M+"."+(+H+1)+".0",r("tilde return",ce),ce})}function zs(y,_){return y.trim().split(/\s+/).map(function(x){return Ks(x,_)}).join(" ")}function Ks(y,_){r("caret",y,_);var x=_.loose?s[Ee]:s[me];return y.replace(x,function(O,M,H,W,ue){r("caret",y,O,M,H,W,ue);var ce;return $e(M)?ce="":$e(H)?ce=">="+M+".0.0 <"+(+M+1)+".0.0":$e(W)?M==="0"?ce=">="+M+"."+H+".0 <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+".0 <"+(+M+1)+".0.0":ue?(r("replaceCaret pr",ue),M==="0"?H==="0"?ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+H+"."+(+W+1):ce=">="+M+"."+H+"."+W+"-"+ue+" <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+"."+W+"-"+ue+" <"+(+M+1)+".0.0"):(r("no pr"),M==="0"?H==="0"?ce=">="+M+"."+H+"."+W+" <"+M+"."+H+"."+(+W+1):ce=">="+M+"."+H+"."+W+" <"+M+"."+(+H+1)+".0":ce=">="+M+"."+H+"."+W+" <"+(+M+1)+".0.0"),r("caret return",ce),ce})}function Qs(y,_){return r("replaceXRanges",y,_),y.split(/\s+/).map(function(x){return Ys(x,_)}).join(" ")}function Ys(y,_){y=y.trim();var x=_.loose?s[Q]:s[z];return y.replace(x,function(O,M,H,W,ue,ce){r("xRange",y,O,M,H,W,ue,ce);var nt=$e(H),Je=nt||$e(W),Ge=Je||$e(ue),Ve=Ge;return M==="="&&Ve&&(M=""),nt?M===">"||M==="<"?O="<0.0.0":O="*":M&&Ve?(Je&&(W=0),ue=0,M===">"?(M=">=",Je?(H=+H+1,W=0,ue=0):(W=+W+1,ue=0)):M==="<="&&(M="<",Je?H=+H+1:W=+W+1),O=M+H+"."+W+"."+ue):Je?O=">="+H+".0.0 <"+(+H+1)+".0.0":Ge&&(O=">="+H+"."+W+".0 <"+H+"."+(+W+1)+".0"),r("xRange return",O),O})}function kr(y,_){return r("replaceStars",y,_),y.trim().replace(s[Pe],"")}function Js(y,_,x,O,M,H,W,ue,ce,nt,Je,Ge,Ve){return $e(x)?_="":$e(O)?_=">="+x+".0.0":$e(M)?_=">="+x+"."+O+".0":_=">="+_,$e(ce)?ue="":$e(nt)?ue="<"+(+ce+1)+".0.0":$e(Je)?ue="<"+ce+"."+(+nt+1)+".0":Ge?ue="<="+ce+"."+nt+"."+Je+"-"+Ge:ue="<="+ue,(_+" "+ue).trim()}ge.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new re(y,this.options));for(var _=0;_<this.set.length;_++)if(Xs(this.set[_],y,this.options))return!0;return!1};function Xs(y,_,x){for(var O=0;O<y.length;O++)if(!y[O].test(_))return!1;if(_.prerelease.length&&!x.includePrerelease){for(O=0;O<y.length;O++)if(r(y[O].semver),y[O].semver!==Tt&&y[O].semver.prerelease.length>0){var M=y[O].semver;if(M.major===_.major&&M.minor===_.minor&&M.patch===_.patch)return!0}return!1}return!0}e.satisfies=Cr;function Cr(y,_,x){try{_=new ge(_,x)}catch{return!1}return _.test(y)}e.maxSatisfying=Zs;function Zs(y,_,x){var O=null,M=null;try{var H=new ge(_,x)}catch{return null}return y.forEach(function(W){H.test(W)&&(!O||M.compare(W)===-1)&&(O=W,M=new re(O,x))}),O}e.minSatisfying=ea;function ea(y,_,x){var O=null,M=null;try{var H=new ge(_,x)}catch{return null}return y.forEach(function(W){H.test(W)&&(!O||M.compare(W)===1)&&(O=W,M=new re(O,x))}),O}e.minVersion=Tn;function Tn(y,_){y=new ge(y,_);var x=new re("0.0.0");if(y.test(x)||(x=new re("0.0.0-0"),y.test(x)))return x;x=null;for(var O=0;O<y.set.length;++O){var M=y.set[O];M.forEach(function(H){var W=new re(H.semver.version);switch(H.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!x||se(x,W))&&(x=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+H.operator)}})}return x&&y.test(x)?x:null}e.validRange=ta;function ta(y,_){try{return new ge(y,_).range||"*"}catch{return null}}e.ltr=ra;function ra(y,_,x){return sn(y,_,"<",x)}e.gtr=na;function na(y,_,x){return sn(y,_,">",x)}e.outside=sn;function sn(y,_,x,O){y=new re(y,O),_=new ge(_,O);var M,H,W,ue,ce;switch(x){case">":M=se,H=Ye,W=fe,ue=">",ce=">=";break;case"<":M=fe,H=Ze,W=se,ue="<",ce="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Cr(y,_,O))return!1;for(var nt=0;nt<_.set.length;++nt){var Je=_.set[nt],Ge=null,Ve=null;if(Je.forEach(function(gt){gt.semver===Tt&&(gt=new Me(">=0.0.0")),Ge=Ge||gt,Ve=Ve||gt,M(gt.semver,Ge.semver,O)?Ge=gt:W(gt.semver,Ve.semver,O)&&(Ve=gt)}),Ge.operator===ue||Ge.operator===ce||(!Ve.operator||Ve.operator===ue)&&H(y,Ve.semver)||Ve.operator===ce&&W(y,Ve.semver))return!1}return!0}e.prerelease=oa;function oa(y,_){var x=Ke(y,_);return x&&x.prerelease.length?x.prerelease:null}e.intersects=kn;function kn(y,_,x){return y=new ge(y,x),_=new ge(_,x),y.intersects(_)}e.coerce=ia;function ia(y){if(y instanceof re)return y;if(typeof y!="string")return null;var _=y.match(s[ee]);return _==null?null:Ke(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),eQ=F((e,t)=>{var r=zb().wrap,n=1<<0,o=1<<1,i=1<<2,s=1<<3,a=[],c=0,u=!1,l=[],d,f;function p(T,P){var S=T.length,k=P.length,A=[];if(S===0&&k===0)return A;for(var N=0;N<S;N++)A[N]=T[N];if(k===0)return A;for(var z=0;z<k;z++){var Q=!0;for(N=0;N<S;N++)if(T[N].uid===P[z].uid){Q=!1;break}Q&&A.push(P[z])}return A}process._fatalException?(m=!1,d=function(T){var P=a.length;if(m||P===0)return!1;var S=!1;m=!0;for(var k=0;k<P;++k){var A=a[k];if((A.flags&s)!=0){var N=h&&h[A.uid];S=A.error(N,T)||S}}return m=!1,l.length>0&&(a=l.pop()),h=void 0,S&&!u},f=function(T,P,S){var k=[];u=!0;for(var A=0;A<S;++A){var N=P[A];if(k[N.uid]=N.data,(N.flags&n)!=0){var z=N.create(N.data);z!==void 0&&(k[N.uid]=z)}}return u=!1,function(){h=k,l.push(a),a=p(P,a),u=!0;for(var Q=0;Q<S;++Q)(P[Q].flags&o)>0&&P[Q].before(this,k[P[Q].uid]);u=!1;var ee=T.apply(this,arguments);for(u=!0,Q=0;Q<S;++Q)(P[Q].flags&i)>0&&P[Q].after(this,k[P[Q].uid]);return u=!1,a=l.pop(),h=void 0,ee}},r(process,"_fatalException",function(T){return function(P){return d(P)||T(P)}})):(g=!1,d=function(T){if(g)throw T;for(var P=!1,S=a.length,k=0;k<S;++k){var A=a[k];(A.flags&s)!=0&&(P=A.error(null,T)||P)}if(!P&&u)throw T},f=function(T,P,S){var k=[];u=!0;for(var A=0;A<S;++A){var N=P[A];if(k[N.uid]=N.data,(N.flags&n)!=0){var z=N.create(N.data);z!==void 0&&(k[N.uid]=z)}}return u=!1,function(){var Q=!1,ee=!1;l.push(a),a=p(P,a),u=!0;for(var ne=0;ne<S;++ne)(P[ne].flags&o)>0&&P[ne].before(this,k[P[ne].uid]);u=!1;var U;try{U=T.apply(this,arguments)}catch(L){Q=!0;for(var ne=0;ne<S;++ne)if((a[ne].flags&s)!=0)try{ee=a[ne].error(k[P[ne].uid],L)||ee}catch(j){throw g=!0,j}if(!ee)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),L}finally{if(!Q||ee){for(u=!0,ne=0;ne<S;++ne)(P[ne].flags&i)>0&&P[ne].after(this,k[P[ne].uid]);u=!1}a=l.pop()}return U}},process.addListener("uncaughtException",d));var m,h,g;function v(T,P,S){u=!0;for(var k=0;k<S;++k){var A=P[k];A.create&&A.create(A.data)}return u=!1,function(){l.push(a),a=p(P,a);var N=T.apply(this,arguments);return a=l.pop(),N}}function w(T){var P=a.length;if(P===0)return T;for(var S=a.slice(),k=0;k<P;++k)if(S[k].flags>0)return f(T,S,P);return v(T,S,P)}function C(T,P){typeof T.create=="function"&&(this.create=T.create,this.flags|=n),typeof T.before=="function"&&(this.before=T.before,this.flags|=o),typeof T.after=="function"&&(this.after=T.after,this.flags|=i),typeof T.error=="function"&&(this.error=T.error,this.flags|=s),this.uid=++c,this.data=P===void 0?null:P}C.prototype.create=void 0,C.prototype.before=void 0,C.prototype.after=void 0,C.prototype.error=void 0,C.prototype.data=void 0,C.prototype.uid=0,C.prototype.flags=0;function E(T,P){if(typeof T!="object"||!T)throw new TypeError("callbacks argument must be an object");return T instanceof C?T:new C(T,P)}function b(T,P){var S;T instanceof C?S=T:S=E(T,P);for(var k=!1,A=0;A<a.length;A++)if(S===a[A]){k=!0;break}return k||a.push(S),S}function I(T){for(var P=0;P<a.length;P++)if(T===a[P]){a.splice(P,1);break}}process.createAsyncListener=E,process.addAsyncListener=b,process.removeAsyncListener=I,t.exports=w}),tQ=F((e,t)=>{"use strict";t.exports=(r,n)=>class extends r{constructor(o){var i,s;super(c);var a=this;try{o.apply(i,s)}catch(u){s[1](u)}return a;function c(u,l){i=this,s=[d,f];function d(p){return n(a,!1),u(p)}function f(p){return n(a,!1),l(p)}}}}}),rQ=F(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=zb(),t=Z7(),r=e.wrap,n=e.massWrap,o=eQ(),i=require("util"),s=t.gte(process.version,"6.0.0"),a=t.gte(process.version,"7.0.0"),c=t.gte(process.version,"8.0.0"),u=t.gte(process.version,"11.0.0"),l=require("net");a&&!l._normalizeArgs?l._normalizeArgs=function(U){if(U.length===0)return[{},null];var L=U[0],D={};typeof L=="object"&&L!==null?D=L:ne(L)?D.path=L:(D.port=L,U.length>1&&typeof U[1]=="string"&&(D.host=U[1]));var j=U[U.length-1];return typeof j!="function"?[D,null]:[D,j]}:!a&&!l._normalizeConnectArgs&&(l._normalizeConnectArgs=function(U){var L={};function D(K){return(K=Number(K))>=0?K:!1}typeof U[0]=="object"&&U[0]!==null?L=U[0]:typeof U[0]=="string"&&D(U[0])===!1?L.path=U[0]:(L.port=U[0],typeof U[1]=="string"&&(L.host=U[1]));var j=U[U.length-1];return typeof j=="function"?[L,j]:[L]}),"_setUpListenHandle"in l.Server.prototype?r(l.Server.prototype,"_setUpListenHandle",d):r(l.Server.prototype,"_listen2",d);function d(U){return function(){this.on("connection",function(L){L._handle&&(L._handle.onread=o(L._handle.onread))});try{return U.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function f(U){if(U&&U._handle){var L=U._handle;L._originalOnread||(L._originalOnread=L.onread),L.onread=o(L._originalOnread)}}r(l.Socket.prototype,"connect",function(U){return function(){var L;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?L=arguments[0]:L=a?l._normalizeArgs(arguments):l._normalizeConnectArgs(arguments),L[1]&&(L[1]=o(L[1]));var D=U.apply(this,L);return f(this),D}});var p=require("http");r(p.Agent.prototype,"addRequest",function(U){return function(L){var D=L.onSocket;return L.onSocket=o(function(j){return f(j),D.apply(this,arguments)}),U.apply(this,arguments)}});var m=require("child_process");function h(U){Array.isArray(U.stdio)&&U.stdio.forEach(function(L){L&&L._handle&&(L._handle.onread=o(L._handle.onread),r(L._handle,"close",Q))}),U._handle&&(U._handle.onexit=o(U._handle.onexit))}m.ChildProcess?r(m.ChildProcess.prototype,"spawn",function(U){return function(){var L=U.apply(this,arguments);return h(this),L}}):n(m,["execFile","fork","spawn"],function(U){return function(){var L=U.apply(this,arguments);return h(L),L}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),n(process,g,z),r(process,"nextTick",Q);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var w=require("timers"),C=global.setTimeout===w.setTimeout;n(w,v,Q),C&&n(global,v,Q);var E=require("dns");n(E,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],z),E.resolveNaptr&&r(E,"resolveNaptr",z);var b=require("fs");n(b,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],z),b.lchown&&r(b,"lchown",z),b.lchmod&&r(b,"lchmod",z),b.ftruncate&&r(b,"ftruncate",z);var I;try{I=require("zlib")}catch{}I&&I.Deflate&&I.Deflate.prototype&&(T=Object.getPrototypeOf(I.Deflate.prototype),T._transform?r(T,"_transform",z):T.write&&T.flush&&T.end&&n(T,["write","flush","end"],z));var T,P;try{P=require("crypto")}catch{}P&&(S=["pbkdf2","randomBytes"],u||S.push("pseudoRandomBytes"),n(P,S,z));var S,k=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";k&&(A=process.addAsyncListener({create:function(){k=!1}}),global.Promise.resolve(!0).then(function(){k=!1}),process.removeAsyncListener(A));var A;k&&N();function N(){var U=global.Promise;function L(Z){if(!(this instanceof L))return U(Z);if(typeof Z!="function")return new U(Z);var me,Ee,_e=new U(Ie);_e.__proto__=L.prototype;try{Z.apply(me,Ee)}catch(Ce){Ee[1](Ce)}return _e;function Ie(Ce,ht){me=this,Ee=[wt,ke];function wt(Pe){return j(_e,!1),Ce(Pe)}function ke(Pe){return j(_e,!1),ht(Pe)}}}if(i.inherits(L,U),r(U.prototype,"then",Y),U.prototype.chain&&r(U.prototype,"chain",Y),s)global.Promise=tQ()(U,j);else{var D=["all","race","reject","resolve","accept","defer"];D.forEach(function(Z){typeof U[Z]=="function"&&(L[Z]=U[Z])}),global.Promise=L}function j(Z,me){(!Z.__asl_wrapper||me)&&(Z.__asl_wrapper=o(K))}function K(Z,me,Ee,_e){var Ie;try{return Ie=me.call(Z,Ee),{returnVal:Ie,error:!1}}catch(Ce){return{errorVal:Ce,error:!0}}finally{Ie instanceof U?_e.__asl_wrapper=function(){var Ce=Ie.__asl_wrapper||K;return Ce.apply(this,arguments)}:j(_e,!0)}}function Y(Z){return function(){var me=this,Ee=Z.apply(me,Array.prototype.map.call(arguments,_e));return Ee.__asl_wrapper=function(Ie,Ce,ht,wt){return me.__asl_wrapper?(me.__asl_wrapper(Ie,function(){},null,Ee),Ee.__asl_wrapper(Ie,Ce,ht,wt)):K(Ie,Ce,ht,wt)},Ee;function _e(Ie){return typeof Ie!="function"?Ie:o(function(Ce){var ht=(me.__asl_wrapper||K)(this,Ie,Ce,Ee);if(ht.error)throw ht.errorVal;return ht.returnVal})}}}}function z(U){var L=function(){var D,j=arguments.length-1;if(typeof arguments[j]=="function"){D=Array(arguments.length);for(var K=0;K<arguments.length-1;K++)D[K]=arguments[K];D[j]=o(arguments[j])}return U.apply(this,D||arguments)};switch(U.length){case 1:return function(D){return arguments.length!==1?L.apply(this,arguments):(typeof D=="function"&&(D=o(D)),U.call(this,D))};case 2:return function(D,j){return arguments.length!==2?L.apply(this,arguments):(typeof j=="function"&&(j=o(j)),U.call(this,D,j))};case 3:return function(D,j,K){return arguments.length!==3?L.apply(this,arguments):(typeof K=="function"&&(K=o(K)),U.call(this,D,j,K))};case 4:return function(D,j,K,Y){return arguments.length!==4?L.apply(this,arguments):(typeof Y=="function"&&(Y=o(Y)),U.call(this,D,j,K,Y))};case 5:return function(D,j,K,Y,Z){return arguments.length!==5?L.apply(this,arguments):(typeof Z=="function"&&(Z=o(Z)),U.call(this,D,j,K,Y,Z))};case 6:return function(D,j,K,Y,Z,me){return arguments.length!==6?L.apply(this,arguments):(typeof me=="function"&&(me=o(me)),U.call(this,D,j,K,Y,Z,me))};default:return L}}function Q(U){var L=function(){var D;if(typeof arguments[0]=="function"){D=Array(arguments.length),D[0]=o(arguments[0]);for(var j=1;j<arguments.length;j++)D[j]=arguments[j]}return U.apply(this,D||arguments)};switch(U.length){case 1:return function(D){return arguments.length!==1?L.apply(this,arguments):(typeof D=="function"&&(D=o(D)),U.call(this,D))};case 2:return function(D,j){return arguments.length!==2?L.apply(this,arguments):(typeof D=="function"&&(D=o(D)),U.call(this,D,j))};case 3:return function(D,j,K){return arguments.length!==3?L.apply(this,arguments):(typeof D=="function"&&(D=o(D)),U.call(this,D,j,K))};case 4:return function(D,j,K,Y){return arguments.length!==4?L.apply(this,arguments):(typeof D=="function"&&(D=o(D)),U.call(this,D,j,K,Y))};case 5:return function(D,j,K,Y,Z){return arguments.length!==5?L.apply(this,arguments):(typeof D=="function"&&(D=o(D)),U.call(this,D,j,K,Y,Z))};case 6:return function(D,j,K,Y,Z,me){return arguments.length!==6?L.apply(this,arguments):(typeof D=="function"&&(D=o(D)),U.call(this,D,j,K,Y,Z,me))};default:return L}}function ee(U){return(U=Number(U))>=0?U:!1}function ne(U){return typeof U=="string"&&ee(U)===!1}}),nQ=F((e,t)=>{"use strict";var r=require("assert"),n=Kb(),o="cls@contexts",i="error@context";process.addAsyncListener||rQ();function s(d){this.name=d,this.active=null,this._set=[],this.id=null}s.prototype.set=function(d,f){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=f,f},s.prototype.get=function(d){if(this.active)return this.active[d]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(d){var f=this.createContext();this.enter(f);try{return d(f),f}catch(p){throw p&&(p[i]=f),p}finally{this.exit(f)}},s.prototype.runAndReturn=function(d){var f;return this.run(function(p){f=d(p)}),f},s.prototype.bind=function(d,f){f||(this.active?f=this.active:f=this.createContext());var p=this;return function(){p.enter(f);try{return d.apply(this,arguments)}catch(m){throw m&&(m[i]=f),m}finally{p.exit(f)}}},s.prototype.enter=function(d){r.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},s.prototype.exit=function(d){if(r.ok(d,"context must be provided for exiting"),this.active===d){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var f=this._set.lastIndexOf(d);r.ok(f>=0,"context not currently entered; can't exit"),r.ok(f,"can't remove top context"),this._set.splice(f,1)},s.prototype.bindEmitter=function(d){r.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var f=this,p="context@"+this.name;function m(g){!g||(g[o]||(g[o]=Object.create(null)),g[o][p]={namespace:f,context:f.active})}function h(g){if(!(g&&g[o]))return g;var v=g,w=g[o];return Object.keys(w).forEach(function(C){var E=w[C];v=E.namespace.bind(v,E.context)}),v}n(d,m,h)},s.prototype.fromException=function(d){return d[i]};function a(d){return process.namespaces[d]}function c(d){r.ok(d,"namespace must be given a name!");var f=new s(d);return f.id=process.addAsyncListener({create:function(){return f.active},before:function(p,m){m&&f.enter(m)},after:function(p,m){m&&f.exit(m)},error:function(p){p&&f.exit(p)}}),process.namespaces[d]=f,f}function u(d){var f=a(d);r.ok(f,"can't delete nonexistent namespace!"),r.ok(f.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(f.id),process.namespaces[d]=null}function l(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){u(d)}),process.namespaces=Object.create(null)}process.namespaces||l(),t.exports={getNamespace:a,createNamespace:c,destroyNamespace:u,reset:l}}),El=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=vr(),r=Gb(),n=gv(),o=gM(),i=_M(),s=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var u=c.session.get(c.CONTEXT_NAME);return u===void 0?null:u},c.generateContextObject=function(u,l,d,f,p,m){return l=l||u,this.enabled?{operation:{name:d,id:u,parentId:l,traceparent:p,tracestate:m},customProperties:new a(f)}:null},c.spanToContextObject=function(u,l,d){var f=new n;return f.traceId=u.traceId,f.spanId=u.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(u.traceFlags)||n.DEFAULT_TRACE_FLAG,f.parentId=l,c.generateContextObject(f.traceId,f.parentId,d,null,f)},c.runWithContext=function(u,l){var d;return c.enabled?c.session.bind(l,(d={},d[c.CONTEXT_NAME]=u,d))():l()},c.wrapEmitter=function(u){c.enabled&&c.session.bindEmitter(u)},c.wrapCallback=function(u,l){var d;return c.enabled?c.session.bind(u,l?(d={},d[c.CONTEXT_NAME]=l,d):void 0):u},c.enable=function(u){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=u,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=X7():this.cls=nQ()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(l){return c.session.bind(l)})),this.enabled=!0}},c.startOperation=function(u,l){var d=u&&u.traceContext||null,f=u&&u.traceId?u:null,p=u&&u.headers;if(f){var m=new n("00-"+f.traceId+"-"+f.spanId+"-01"),h=new o(f.traceState?f.traceState.serialize():null),g=c.generateContextObject(f.traceId,"|"+f.traceId+"."+f.spanId+".",typeof l=="string"?l:"",void 0,m,h);return g}if(d){var m=new n(d.traceparent),h=new o(d.tracestate),v=typeof l=="object"?new i(l):null,g=c.generateContextObject(m.traceId,m.parentId,typeof l=="string"?l:v.getOperationName({}),v&&v.getCorrelationContextHeader()||void 0,m,h);return g}if(p){var m=new n(p.traceparent?p.traceparent.toString():null),h=new o(p.tracestate?p.tracestate.toString():null),v=new i(u),g=c.generateContextObject(m.traceId,m.parentId,v.getOperationName({}),v.getCorrelationContextHeader(),m,h);return g}return t.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var u=process.versions.node.split(".");return parseInt(u[0])>3||parseInt(u[0])>2&&parseInt(u[1])>2},c.shouldUseClsHooked=function(){var u=process.versions.node.split(".");return parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=2},c.canUseClsHooked=function(){var u=process.versions.node.split("."),l=parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=0,d=parseInt(u[0])<8||parseInt(u[0])<=8&&parseInt(u[1])<2,f=parseInt(u[0])>4||parseInt(u[0])>=4&&parseInt(u[1])>=7;return!(l&&d)&&f},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();e.CorrelationContextManager=s;var a=function(){function c(u){this.props=[],this.addHeaderData(u)}return c.prototype.addHeaderData=function(u){var l=u?u.split(", "):[];this.props=l.map(function(d){var f=d.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(u){return u.key+"="+u.value}).join(", ")},c.prototype.getProperty=function(u){for(var l=0;l<this.props.length;++l){var d=this.props[l];if(d.key===u)return d.value}},c.prototype.setProperty=function(u,l){if(c.bannedCharacters.test(u)||c.bannedCharacters.test(l)){t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+u+" and value: "+l);return}for(var d=0;d<this.props.length;++d){var f=this.props[d];if(f.key===u){f.value=l;return}}this.props.push({key:u,value:l})},c.bannedCharacters=/[,=]/,c}()}),oQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=rn(),r=Qt(),n=[],o=function(a){var c=a.data.message;n.forEach(function(u){c instanceof Error?u.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),u.trackTrace({message:c,severity:a.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))})};function i(a,c){a?(n.length===0&&r.channel.subscribe("console",o),n.push(c)):(n=n.filter(function(u){return u!=c}),n.length===0&&r.channel.unsubscribe("console",o))}e.enable=i;function s(){r.channel.unsubscribe("console",o),n=[]}e.dispose=s}),iQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=rn(),r=Qt(),n=[],o={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},i=function(c){var u=c.data.result;n.forEach(function(l){var d=o[c.data.level];u instanceof Error?l.trackException({exception:u}):l.trackTrace({message:u,severity:d})})};function s(c,u){c?(n.length===0&&r.channel.subscribe("bunyan",i),n.push(u)):(n=n.filter(function(l){return l!=u}),n.length===0&&r.channel.unsubscribe("bunyan",i))}e.enable=s;function a(){r.channel.unsubscribe("bunyan",i),n=[]}e.dispose=a}),sQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=rn(),r=Qt(),n=[],o={syslog:function(c){var u={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return u[c]===void 0?t.SeverityLevel.Information:u[c]},npm:function(c){var u={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return u[c]===void 0?t.SeverityLevel.Information:u[c]},unknown:function(c){return t.SeverityLevel.Information}},i=function(c){var u=c.data.message;n.forEach(function(l){if(u instanceof Error)l.trackException({exception:u,properties:c.data.meta});else{var d=o[c.data.levelKind](c.data.level);l.trackTrace({message:u,severity:d,properties:c.data.meta})}})};function s(c,u){c?(n.length===0&&r.channel.subscribe("winston",i),n.push(u)):(n=n.filter(function(l){return l!=u}),n.length===0&&r.channel.unsubscribe("winston",i))}e.enable=s;function a(){r.channel.unsubscribe("winston",i),n=[]}e.dispose=a}),aQ=F((e,t)=>{"use strict";var r=Gb(),n=function(){function o(i){if(o.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=i,o.INSTANCE=this}return o.prototype.enable=function(i,s){r.IsInitialized&&(oQ().enable(i&&s,this._client),iQ().enable(i,this._client),sQ().enable(i,this._client))},o.prototype.isInitialized=function(){return this._isInitialized},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1,!1)},o._methodNames=["debug","info","log","warn","error"],o}();t.exports=n}),cQ=F((e,t)=>{"use strict";var r=function(){function n(o){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=o;var i=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(i[0])>13||parseInt(i[0])===13&&parseInt(i[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(o){var i=this;if(o){this._isInitialized=!0;var s=this;if(!this._exceptionListenerHandle){var a=function(c,u,l){l===void 0&&(l=new Error(n._FALLBACK_ERROR_MESSAGE)),i._client.trackException({exception:l}),i._client.flush({isAppCrashing:!0}),c&&u&&process.listeners(u).length===1&&(console.error(l),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();t.exports=r}),Us=F(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(i){i.COMMITTED_BYTES="\\Memory\\Committed Bytes",i.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",i.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",i.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",i.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",i.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",i.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",i.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",i.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=e.QuickPulseCounter||(e.QuickPulseCounter={}));var n;(function(i){i.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",i.AVAILABLE_BYTES="\\Memory\\Available Bytes",i.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",i.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",i.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",i.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=e.PerformanceCounter||(e.PerformanceCounter={}));var o;(function(i){i.REQUESTS_DURATION="requests/duration",i.DEPENDENCIES_DURATION="dependencies/duration",i.EXCEPTIONS_COUNT="exceptions/count",i.TRACES_COUNT="traces/count"})(o=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(t={},t[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[n.REQUEST_RATE]=r.REQUEST_RATE,t[n.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),Qb=F((e,t)=>{"use strict";var r=require("os"),n=Us(),o=function(){function i(s,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,i.INSTANCE||(i.INSTANCE=this),this._isInitialized=!1,this._client=s,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return i.prototype.enable=function(s,a){var c=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:i._totalRequestCount,totalFailedRequestCount:i._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:i._totalDependencyCount,totalFailedDependencyCount:i._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:i._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},i.countRequest=function(s,a){var c;if(i.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;i._intervalRequestExecutionTime+=c,a===!1&&i._totalFailedRequestCount++,i._totalRequestCount++}},i.countException=function(){i._totalExceptionCount++},i.countDependency=function(s,a){var c;if(i.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;i._intervalDependencyExecutionTime+=c,a===!1&&i._totalFailedDependencyCount++,i._totalDependencyCount++}},i.prototype.isInitialized=function(){return this._isInitialized},i.isEnabled=function(){return i.INSTANCE&&i.INSTANCE._isEnabled},i.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},i.prototype._trackCpu=function(){var s=r.cpus();if(s&&s.length&&this._lastCpus&&s.length===this._lastCpus.length){for(var a=0,c=0,u=0,l=0,d=0,f=0;!!s&&f<s.length;f++){var p=s[f],m=this._lastCpus[f],h="% cpu("+f+") ",g=p.model,v=p.speed,w=p.times,C=m.times,E=w.user-C.user||0;a+=E;var b=w.sys-C.sys||0;c+=b;var I=w.nice-C.nice||0;u+=I;var T=w.idle-C.idle||0;l+=T;var P=w.irq-C.irq||0;d+=P}var S=void 0;if(typeof process.cpuUsage=="function"){var k=process.cpuUsage(),A=process.hrtime(),N=k.user-this._lastAppCpuUsage.user+(k.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var z=(A[0]-this._lastHrtime[0])*1e6+(A[1]-this._lastHrtime[1])/1e3||0;S=100*N/(z*s.length)}this._lastAppCpuUsage=k,this._lastHrtime=A}var Q=a+c+u+l+d||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(Q-l)/Q*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:S||a/Q*100})}this._lastCpus=s},i.prototype._trackMemory=function(){var s=r.freemem(),a=process.memoryUsage().rss,c=r.totalmem()-s;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:s}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},i.prototype._trackNetwork=function(){var s=this._lastRequests,a={totalRequestCount:i._totalRequestCount,totalFailedRequestCount:i._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-s.totalRequestCount||0,u=a.totalFailedRequestCount-s.totalFailedRequestCount||0,l=a.time-s.time,d=l/1e3,f=(i._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=i._intervalRequestExecutionTime,l>0){var p=c/d,m=u/d;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:p}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:f}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:m})}this._lastRequests=a},i.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastDependencies,a={totalDependencyCount:i._totalDependencyCount,totalFailedDependencyCount:i._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-s.totalDependencyCount||0,u=a.totalFailedDependencyCount-s.totalFailedDependencyCount||0,l=a.time-s.time,d=l/1e3,f=(i._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=i._intervalDependencyExecutionTime,l>0){var p=c/d,m=u/d;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:p}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:m}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:f})}this._lastDependencies=a}},i.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastExceptions,a={totalExceptionCount:i._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-s.totalExceptionCount||0,u=a.time-s.time,l=u/1e3;if(u>0){var d=c/l;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=a}},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1),this._isInitialized=!1},i._totalRequestCount=0,i._totalFailedRequestCount=0,i._totalDependencyCount=0,i._totalFailedDependencyCount=0,i._totalExceptionCount=0,i._intervalDependencyExecutionTime=0,i._intervalRequestExecutionTime=0,i}();t.exports=o}),uQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var t=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();e.AggregatedMetricCounter=t}),lQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),PM=F((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(a){for(var c,u=1,l=arguments.length;u<l;u++){c=arguments[u];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r.apply(this,arguments)},n=Us(),o=uQ(),i=lQ(),s=function(){function a(c,u){u===void 0&&(u=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=u}return a.prototype.enable=function(c,u){var l=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=u||this._collectionInterval,this._handle=setInterval(function(){return l.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var u=a._getAggregatedCounter(c,this._exceptionCountersCollection);u.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var u=a._getAggregatedCounter(c,this._traceCountersCollection);u.totalCount++}},a.countRequest=function(c,u){if(a.isEnabled()){var l,d=a._getAggregatedCounter(u,this._requestCountersCollection);if(typeof c=="string")l=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")l=c;else return;d.intervalExecutionTime+=l,d.totalCount++}},a.countDependency=function(c,u){if(a.isEnabled()){var l=a._getAggregatedCounter(u,this._dependencyCountersCollection),d;if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;l.intervalExecutionTime+=d,l.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,u){for(var l=!1,d=0;d<u.length;d++){if(c===u[d].dimensions)return u[d];if(Object.keys(c).length===Object.keys(u[d].dimensions).length){for(var f in c)if(c[f]!=u[d].dimensions[f]){l=!0;break}if(!l)return u[d];l=!1}}var p=new o.AggregatedMetricCounter(c);return u.push(p),p},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var u=a._requestCountersCollection[c];u.time=+new Date;var l=u.totalCount-u.lastTotalCount||0,d=u.time-u.lastTime,f=(u.intervalExecutionTime-u.lastIntervalExecutionTime)/l||0;u.lastIntervalExecutionTime=u.intervalExecutionTime,d>0&&l>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:u.dimensions,value:f,count:l,aggregationInterval:d,metricType:n.MetricId.REQUESTS_DURATION}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var u=a._dependencyCountersCollection[c];u.time=+new Date;var l=u.totalCount-u.lastTotalCount||0,d=u.time-u.lastTime,f=(u.intervalExecutionTime-u.lastIntervalExecutionTime)/l||0;u.lastIntervalExecutionTime=u.intervalExecutionTime,d>0&&l>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:u.dimensions,value:f,count:l,aggregationInterval:d,metricType:n.MetricId.DEPENDENCIES_DURATION}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var u=a._exceptionCountersCollection[c],l=u.totalCount-u.lastTotalCount||0,d=u.time-u.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:u.dimensions,value:l,count:l,aggregationInterval:d,metricType:n.MetricId.EXCEPTIONS_COUNT}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var u=a._traceCountersCollection[c],l=u.totalCount-u.lastTotalCount||0,d=u.time-u.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:u.dimensions,value:l,count:l,aggregationInterval:d,metricType:n.MetricId.TRACES_COUNT}),u.lastTotalCount=u.totalCount,u.lastTime=u.time}},a.prototype._trackPreAggregatedMetric=function(c){var u={};for(var l in c.dimensions)u[i.PreaggregatedMetricPropertyNames[l]]=c.dimensions[l];u=r(r({},u),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var d={name:c.name,value:c.value,count:c.count,properties:u,kind:"Aggregation"};this._client.trackMetric(d)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();t.exports=s}),vv=F((e,t)=>{"use strict";var r=require("os"),n=require("fs"),o=require("path"),i=rn(),s=vr(),a=function(){function c(u){this.keys=new i.ContextTagKeys,this.tags={},this._loadApplicationContext(u),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(u){if(u=u||o.resolve(__dirname,"../../../../package.json"),!c.appVersion[u]){c.appVersion[u]="unknown";try{var l=JSON.parse(n.readFileSync(u,"utf8"));l&&typeof l.version=="string"&&(c.appVersion[u]=l.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=c.appVersion[u]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var u=o.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var l=JSON.parse(n.readFileSync(u,"utf8"));l&&typeof l.version=="string"&&(c.sdkVersion=l.version)}catch(d){s.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();t.exports=a}),dQ=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var l=function(d,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(p[h]=m[h])},l(d,f)};return function(d,f){l(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),n=require("url"),o=rn(),i=Zn(),s=Gf(),a=EM(),c=Cl(),u=function(l){r(d,l);function d(f,p){var m=l.call(this)||this;return p&&p.method&&f&&(m.method=p.method,m.url=d._getUrlFromRequestOptions(f,p),m.startTime=+new Date),m}return d.prototype.onError=function(f){this._setStatus(void 0,f)},d.prototype.onResponse=function(f){this._setStatus(f.statusCode,void 0),this.correlationId=i.getCorrelationContextTarget(f,s.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(f,p){var m=n.parse(this.url);m.search=void 0,m.hash=void 0;var h=this.method.toUpperCase()+" "+m.pathname,g=o.RemoteDependencyDataConstants.TYPE_HTTP,v=m.hostname;m.port&&(v+=":"+m.port),this.correlationId?(g=o.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(v+=" | "+this.correlationId)):g=o.RemoteDependencyDataConstants.TYPE_HTTP;var w={id:p,name:h,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:v};if(f&&f.time?w.time=f.time:this.startTime&&(w.time=new Date(this.startTime)),f){for(var C in f)w[C]||(w[C]=f[C]);if(f.properties)for(var C in f.properties)w.properties[C]=f.properties[C]}return w},d._getUrlFromRequestOptions=function(f,p){if(typeof f=="string")if(f.indexOf("http://")===0||f.indexOf("https://")===0)f=n.parse(f);else{var m=n.parse(f);m.host==="443"?f=n.parse("https://"+f):f=n.parse("http://"+f)}else{if(f&&typeof n.URL=="function"&&f instanceof n.URL)return n.format(f);var h=f;f={},h&&Object.keys(h).forEach(function(w){f[w]=h[w]})}if(f.path){var g=n.parse(f.path);f.pathname=g.pathname,f.search=g.search}if(f.host&&f.port){var v=n.parse("http://"+f.host);!v.port&&f.port&&(f.hostname=f.host,delete f.host)}return f.protocol=f.protocol||p.agent&&p.agent.protocol||p.protocol||void 0,f.hostname=f.hostname||"localhost",n.format(f)},d}(a);t.exports=u}),fQ=F(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(s){for(var a,c=1,u=arguments.length;c<u;c++){a=arguments[c];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=Nt(),n=Us();function o(s){var a=t({},s);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function i(s){var a="|"+s.spanContext().traceId+"."+s.spanContext().spanId+".",c=Math.round(s._duration[0]*1e3+s._duration[1]/1e6),u=s.attributes["peer.address"]?s.attributes["peer.address"].toString():"",l=s.attributes.component?s.attributes.component.toString():"",d=l.toUpperCase()===n.DependencyTypeName.Http||!!s.attributes[n.SpanAttribute.HttpUrl],f=l.toLowerCase()===n.DependencyTypeName.Grpc;if(d){var p=s.attributes[n.SpanAttribute.HttpMethod]||"GET",m=new URL(s.attributes[n.SpanAttribute.HttpUrl].toString()),h=s.attributes[n.SpanAttribute.HttpHost]||m.host,g=s.attributes[n.SpanAttribute.HttpPort]||m.port||null,v=m.pathname||"/",w=p+" "+v,C=n.DependencyTypeName.Http,E=g?(h+":"+g).toString():h.toString(),b=m.toString(),I=s.attributes[n.SpanAttribute.HttpStatusCode]||s.status.code||0,T=I<400;return{id:a,name:w,dependencyTypeName:C,target:E,data:b,success:T,duration:c,url:b,resultCode:String(I),properties:o(s.attributes)}}else if(f){var p=s.attributes[n.SpanAttribute.GrpcMethod]||"rpc",P=s.attributes[n.SpanAttribute.GrpcService],S=P?p+" "+P:s.name;return{id:a,duration:c,name:S,target:P.toString(),data:P.toString()||S,url:P.toString()||S,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(s.status.code||0),success:s.status.code===0,properties:o(s.attributes)}}else{var k=s.name,A=s.links&&s.links.map(function(N){return{operation_Id:N.context.traceId,id:N.context.spanId}});return{id:a,duration:c,name:k,target:u,data:u||k,url:u||k,dependencyTypeName:s.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:l||s.name,resultCode:String(s.status.code||0),success:s.status.code===0,properties:t(t({},o(s.attributes)),{"_MS.links":A||void 0})}}}e.spanToTelemetryContract=i}),pQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Nt(),r=Qt(),n=gv(),o=fQ(),i=q1(),s=[],a=function(u){var l=u.data,d=o.spanToTelemetryContract(l),f=l.spanContext(),p=new n;p.traceId=f.traceId,p.spanId=f.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(f.traceFlags),p.parentId=l.parentSpanId?"|"+f.traceId+"."+l.parentSpanId+".":null,i.AsyncScopeManager.with(l,function(){s.forEach(function(m){l.kind===t.SpanKind.SERVER?m.trackRequest(d):(l.kind===t.SpanKind.CLIENT||l.kind===t.SpanKind.INTERNAL)&&m.trackDependency(d)})})};e.subscriber=a;function c(u,l){u?(s.length===0&&r.channel.subscribe("azure-coretracing",e.subscriber),s.push(l)):(s=s.filter(function(d){return d!=l}),s.length===0&&r.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=c}),mQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Qt(),r=[],n=function(i){i.data.event.commandName!=="ismaster"&&r.forEach(function(s){var a=i.data.startedData&&i.data.startedData.databaseName||"Unknown database";s.trackDependency({target:a,data:i.data.event.commandName,name:i.data.event.commandName,duration:i.data.event.duration,success:i.data.succeeded,resultCode:i.data.succeeded?"0":"1",time:i.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=n;function o(i,s){i?(r.length===0&&t.channel.subscribe("mongodb",e.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&t.channel.unsubscribe("mongodb",e.subscriber))}e.enable=o}),hQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Qt(),r=[],n=function(i){r.forEach(function(s){var a=i.data.query||{},c=a.sql||"Unknown query",u=!i.data.err,l=a._connection||{},d=l.config||{},f=d.socketPath?d.socketPath:(d.host||"localhost")+":"+d.port;s.trackDependency({target:f,data:c,name:c,duration:i.data.duration,success:u,resultCode:u?"0":"1",time:i.data.time,dependencyTypeName:"mysql"})})};e.subscriber=n;function o(i,s){i?(r.length===0&&t.channel.subscribe("mysql",e.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&t.channel.unsubscribe("mysql",e.subscriber))}e.enable=o}),gQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Qt(),r=[],n=function(i){r.forEach(function(s){i.data.commandObj.command!=="info"&&s.trackDependency({target:i.data.address,name:i.data.commandObj.command,data:i.data.commandObj.command,duration:i.data.duration,success:!i.data.err,resultCode:i.data.err?"1":"0",time:i.data.time,dependencyTypeName:"redis"})})};e.subscriber=n;function o(i,s){i?(r.length===0&&t.channel.subscribe("redis",e.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&t.channel.unsubscribe("redis",e.subscriber))}e.enable=o}),vQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Qt(),r=[],n=function(i){r.forEach(function(s){var a=i.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",u=!i.data.error,l=i.data.database.host+":"+i.data.database.port;s.trackDependency({target:l,data:c,name:c,duration:i.data.duration,success:u,resultCode:u?"0":"1",time:i.data.time,dependencyTypeName:"postgres"})})};e.subscriber=n;function o(i,s){i?(r.length===0&&t.channel.subscribe("postgres",e.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&t.channel.unsubscribe("postgres",e.subscriber))}e.enable=o}),zf=F((e,t)=>{"use strict";var r=e&&e.__spreadArrays||function(){for(var m=0,h=0,g=arguments.length;h<g;h++)m+=arguments[h].length;for(var v=Array(m),w=0,h=0;h<g;h++)for(var C=arguments[h],E=0,b=C.length;E<b;E++,w++)v[w]=C[E];return v},n=require("http"),o=require("https"),i=vr(),s=Zn(),a=Gf(),c=dQ(),u=El(),l=Cl(),d=gv(),f=Gb(),p=function(){function m(h){if(m.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");m.INSTANCE=this,this._client=h}return m.prototype.enable=function(h){this._isEnabled=h,this._isEnabled&&!this._isInitialized&&this._initialize(),f.IsInitialized&&(pQ().enable(!0,this._client),mQ().enable(h,this._client),hQ().enable(h,this._client),gQ().enable(h,this._client),vQ().enable(h,this._client))},m.prototype.isInitialized=function(){return this._isInitialized},m.prototype._initialize=function(){var h=this;this._isInitialized=!0;var g=n.request,v=o.request,w=function(C,E){var b=!E[m.disableCollectionRequestOption]&&!C[m.alreadyAutoCollectedFlag];E.headers&&E.headers["user-agent"]&&E.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(b=!1),C[m.alreadyAutoCollectedFlag]=!0,C&&E&&b&&(u.CorrelationContextManager.wrapEmitter(C),m.trackRequest(h._client,{options:E,request:C}))};n.request=function(C){for(var E=[],b=1;b<arguments.length;b++)E[b-1]=arguments[b];var I=g.call.apply(g,r([n,C],E));return w(I,C),I},o.request=function(C){for(var E=[],b=1;b<arguments.length;b++)E[b-1]=arguments[b];var I=v.call.apply(v,r([o,C],E));return w(I,C),I},n.get=function(C){for(var E,b=[],I=1;I<arguments.length;I++)b[I-1]=arguments[I];var T=(E=n.request).call.apply(E,r([n,C],b));return T.end(),T},o.get=function(C){for(var E,b=[],I=1;I<arguments.length;I++)b[I-1]=arguments[I];var T=(E=o.request).call.apply(E,r([o,C],b));return T.end(),T}},m.trackRequest=function(h,g){if(!g.options||!g.request||!h){i.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!h);return}var v=new c(g.options,g.request),w=u.CorrelationContextManager.getCurrentContext(),C,E;if(w&&w.operation&&w.operation.traceparent&&d.isValidTraceId(w.operation.traceparent.traceId))w.operation.traceparent.updateSpanId(),C=w.operation.traceparent.getBackCompatRequestId();else if(l.w3cEnabled){var b=new d;E=b.toString(),C=b.getBackCompatRequestId()}else C=w&&w.operation&&w.operation.parentId+m.requestNumber+++".";if(s.canIncludeCorrelationHeader(h,v.getUrl())&&g.request.getHeader&&g.request.setHeader&&h.config&&h.config.correlationId){var I=g.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(h,g.request,I)}catch(S){i.warn("Request-Context header could not be set. Correlation of requests may be lost",S)}if(w&&w.operation)try{if(g.request.setHeader(a.requestIdHeader,C),h.config.ignoreLegacyHeaders||(g.request.setHeader(a.parentIdHeader,w.operation.id),g.request.setHeader(a.rootIdHeader,C)),E||w.operation.traceparent)g.request.setHeader(a.traceparentHeader,E||w.operation.traceparent.toString());else if(l.w3cEnabled){var b=new d().toString();g.request.setHeader(a.traceparentHeader,b)}if(w.operation.tracestate){var T=w.operation.tracestate.toString();T&&g.request.setHeader(a.traceStateHeader,T)}var P=w.customProperties.serializeToHeader();P&&g.request.setHeader(a.correlationContextHeader,P)}catch(S){i.warn("Correlation headers could not be set. Correlation of requests may be lost.",S)}}g.request.on&&(g.request.on("response",function(S){v.onResponse(S);var k=v.getDependencyTelemetry(g,C);k.contextObjects=k.contextObjects||{},k.contextObjects["http.RequestOptions"]=g.options,k.contextObjects["http.ClientRequest"]=g.request,k.contextObjects["http.ClientResponse"]=S,h.trackDependency(k)}),g.request.on("error",function(S){v.onError(S);var k=v.getDependencyTelemetry(g,C);k.contextObjects=k.contextObjects||{},k.contextObjects["http.RequestOptions"]=g.options,k.contextObjects["http.ClientRequest"]=g.request,k.contextObjects.Error=S,h.trackDependency(k)}),g.request.on("abort",function(){v.onError(new Error);var S=v.getDependencyTelemetry(g,C);S.contextObjects=S.contextObjects||{},S.contextObjects["http.RequestOptions"]=g.options,S.contextObjects["http.ClientRequest"]=g.request,h.trackDependency(S)}))},m.prototype.dispose=function(){m.INSTANCE=null,this.enable(!1),this._isInitialized=!1},m.disableCollectionRequestOption="disableAppInsightsAutoCollection",m.requestNumber=1,m.alreadyAutoCollectedFlag="_appInsightsAutoCollected",m}();t.exports=p}),yQ=F((e,t)=>{"use strict";var r=require("os"),n=Us(),o=Zn(),i=vv(),s=zf(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",u="format=json",l="ENETUNREACH",d=function(){function f(p){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=p}return f.prototype.enable=function(p,m){var h=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._handle=setInterval(function(){return h.trackHeartBeat(m,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackHeartBeat=function(p,m){var h=this,g=!1,v={},w=i.sdkVersion;v.sdk=w,v.osType=r.type(),process.env.WEBSITE_SITE_NAME?(v.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",v.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",v.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?v.azfunction_appId=process.env.WEBSITE_HOSTNAME:p&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(p,function(){h._isVM&&Object.keys(h._vmData).length>0&&(v.azInst_vmId=h._vmData.vmId||"",v.azInst_subscriptionId=h._vmData.subscriptionId||"",v.azInst_osType=h._vmData.osType||"",h._azInst_vmId=h._vmData.vmId||"",h._azInst_subscriptionId=h._vmData.subscriptionId||"",h._azInst_osType=h._vmData.osType||""),h._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),m()})):this._isVM&&(v.azInst_vmId=this._azInst_vmId,v.azInst_subscriptionId=this._azInst_subscriptionId,v.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),m())},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f.prototype._getAzureComputeMetadata=function(p,m){var h,g=this,v=a+"?"+c+"&"+u,w=(h={method:"GET"},h[s.disableCollectionRequestOption]=!0,h.headers={Metadata:"True"},h),C=o.makeRequest(p,v,w,function(E){if(E.statusCode===200){g._isVM=!0;var b="";E.on("data",function(I){b+=I}),E.on("end",function(){g._vmData=g._isJSON(b)?JSON.parse(b):{},m()})}else m()});C&&(C.on("error",function(E){E&&E.message&&E.message.indexOf(l)>-1&&(g._isVM=!1),m()}),C.end())},f.prototype._isJSON=function(p){try{return JSON.parse(p)&&!!p}catch{return!1}},f}();t.exports=d}),IM=F((e,t)=>{"use strict";var r=require("http"),n=require("https"),o=vr(),i=Zn(),s=Gf(),a=_M(),c=El(),u=Qb(),l=function(){function d(f){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=f}return d.prototype.enable=function(f){this._isEnabled=f,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(f,p){f&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(p):!f&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=f},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(f){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(f.getOperationId(this._client.context.tags),f.getRequestId(),f.getOperationName(this._client.context.tags),f.getCorrelationContextHeader(),f.getTraceparent(),f.getTracestate())},d.prototype._initialize=function(){var f=this;this._isInitialized=!0;var p=function(v){if(v){if(typeof v!="function")throw new Error("onRequest handler must be a function");return function(w,C){c.CorrelationContextManager.wrapEmitter(w),c.CorrelationContextManager.wrapEmitter(C);var E=w&&!w[d.alreadyAutoCollectedFlag];if(w&&E){var b=new a(w),I=f._generateCorrelationContext(b);c.CorrelationContextManager.runWithContext(I,function(){f._isEnabled&&(w[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(f._client,{request:w,response:C},b)),typeof v=="function"&&v(w,C)})}else typeof v=="function"&&v(w,C)}}},m=function(v){var w=v.addListener.bind(v);v.addListener=function(C,E){switch(C){case"request":case"checkContinue":return w(C,p(E));default:return w(C,E)}},v.on=v.addListener},h=r.createServer;r.createServer=function(v,w){if(w&&typeof w=="function"){var C=h(v,p(w));return m(C),C}else{var C=h(p(v));return m(C),C}};var g=n.createServer;n.createServer=function(v,w){var C=g(v,p(w));return m(C),C}},d.trackRequestSync=function(f,p){if(!p.request||!p.response||!f){o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!p.request,!p.response,!f);return}d.addResponseCorrelationIdHeader(f,p.response);var m=c.CorrelationContextManager.getCurrentContext(),h=new a(p.request,m&&m.operation.parentId);m&&(m.operation.id=h.getOperationId(f.context.tags)||m.operation.id,m.operation.name=h.getOperationName(f.context.tags)||m.operation.name,m.operation.parentId=h.getRequestId()||m.operation.parentId,m.customProperties.addHeaderData(h.getCorrelationContextHeader())),d.endRequest(f,h,p,p.duration,p.error)},d.trackRequest=function(f,p,m){if(!p.request||!p.response||!f){o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!p.request,!p.response,!f);return}var h=c.CorrelationContextManager.getCurrentContext(),g=m||new a(p.request,h&&h.operation.parentId);i.canIncludeCorrelationHeader(f,g.getUrl())&&d.addResponseCorrelationIdHeader(f,p.response),h&&!m&&(h.operation.id=g.getOperationId(f.context.tags)||h.operation.id,h.operation.name=g.getOperationName(f.context.tags)||h.operation.name,h.operation.parentId=g.getOperationParentId(f.context.tags)||h.operation.parentId,h.customProperties.addHeaderData(g.getCorrelationContextHeader())),p.response.once&&p.response.once("finish",function(){d.endRequest(f,g,p,null,null)}),p.request.on&&p.request.on("error",function(v){d.endRequest(f,g,p,null,v)}),p.request.on&&p.request.on("aborted",function(){var v="The request has been aborted and the network socket has closed.";d.endRequest(f,g,p,null,v)})},d.addResponseCorrelationIdHeader=function(f,p){if(f.config&&f.config.correlationId&&p.getHeader&&p.setHeader&&!p.headersSent){var m=p.getHeader(s.requestContextHeader);i.safeIncludeCorrelationHeader(f,p,m)}},d.endRequest=function(f,p,m,h,g){g?p.onError(g,h):p.onResponse(m.response,h);var v=p.getRequestTelemetry(m);if(v.tagOverrides=p.getRequestTags(f.context.tags),m.tagOverrides)for(var w in m.tagOverrides)v.tagOverrides[w]=m.tagOverrides[w];var C=p.getLegacyRootId();C&&(v.properties.ai_legacyRootId=C),v.contextObjects=v.contextObjects||{},v.contextObjects["http.ServerRequest"]=m.request,v.contextObjects["http.ServerResponse"]=m.response,f.trackRequest(v)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();t.exports=l}),wQ=F((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(l){for(var d,f=1,p=arguments.length;f<p;f++){d=arguments[f];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(l[m]=d[m])}return l},r.apply(this,arguments)},n=require("os"),o=rn(),i=Us(),s=Zn(),a=vr(),c=s.w3cTraceId(),u=function(){function l(){}return l.createQuickPulseEnvelope=function(d,f,p,m){var h=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",g=m.tags&&m.keys&&m.keys.cloudRoleInstance&&m.tags[m.keys.cloudRoleInstance]||h,v=m.tags&&m.keys&&m.keys.cloudRole&&m.tags[m.keys.cloudRole]||null,w={Documents:f.length>0?f:null,InstrumentationKey:p.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:m.tags[m.keys.internalSdkVersion],StreamId:c,MachineName:h,Instance:g,RoleName:v};return w},l.createQuickPulseMetric=function(d){var f;return f={Name:d.name,Value:d.value,Weight:d.count||1},f},l.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case o.TelemetryTypeString.Event:return l.createQuickPulseEventDocument(d);case o.TelemetryTypeString.Exception:return l.createQuickPulseExceptionDocument(d);case o.TelemetryTypeString.Trace:return l.createQuickPulseTraceDocument(d);case o.TelemetryTypeString.Dependency:return l.createQuickPulseDependencyDocument(d);case o.TelemetryTypeString.Request:return l.createQuickPulseRequestDocument(d)}return null},l.createQuickPulseEventDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData.name,m=r(r({},f),{Name:p});return m},l.createQuickPulseTraceDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData.severityLevel||0,m=r(r({},f),{Message:d.data.baseData.message,SeverityLevel:o.SeverityLevel[p]});return m},l.createQuickPulseExceptionDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData.exceptions,m="",h="",g="";p&&p.length>0&&(p[0].parsedStack&&p[0].parsedStack.length>0?p[0].parsedStack.forEach(function(w){m+=w.assembly+`
`}):p[0].stack&&p[0].stack.length>0&&(m=p[0].stack),h=p[0].message,g=p[0].typeName);var v=r(r({},f),{Exception:m,ExceptionMessage:h,ExceptionType:g});return v},l.createQuickPulseRequestDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData,m=r(r({},f),{Name:p.name,Success:p.success,Duration:p.duration,ResponseCode:p.responseCode,OperationName:p.name});return m},l.createQuickPulseDependencyDocument=function(d){var f=l.createQuickPulseDocument(d),p=d.data.baseData,m=r(r({},f),{Name:p.name,Target:p.target,Success:p.success,Duration:p.duration,ResultCode:p.resultCode,CommandName:p.data,OperationName:f.OperationId,DependencyTypeName:p.type});return m},l.createQuickPulseDocument=function(d){var f,p,m,h;d.data.baseType?(p=i.TelemetryTypeStringToQuickPulseType[d.data.baseType],f=i.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):a.warn("Document type invalid; not sending live metric document",d.data.baseType),m=d.tags[l.keys.operationId],h=l.aggregateProperties(d);var g={DocumentType:f,__type:p,OperationId:m,Version:"1.0",Properties:h};return g},l.aggregateProperties=function(d){var f=[],p=d.data.baseData.measurements||{};for(var m in p)if(p.hasOwnProperty(m)){var h=p[m],g={key:m,value:h};f.push(g)}var v=d.data.baseData.properties||{};for(var m in v)if(v.hasOwnProperty(m)){var h=v[m],g={key:m,value:h};f.push(g)}return f},l.keys=new o.ContextTagKeys,l}();t.exports=u}),CQ=F((e,t)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};t.exports={getTransmissionTime:r}}),EQ=F((e,t)=>{"use strict";var r=e&&e.__awaiter||function(d,f,p,m){function h(g){return g instanceof p?g:new p(function(v){v(g)})}return new(p||(p=Promise))(function(g,v){function w(b){try{E(m.next(b))}catch(I){v(I)}}function C(b){try{E(m.throw(b))}catch(I){v(I)}}function E(b){b.done?g(b.value):h(b.value).then(w,C)}E((m=m.apply(d,f||[])).next())})},n=e&&e.__generator||function(d,f){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},m,h,g,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(E){return function(b){return C([E,b])}}function C(E){if(m)throw new TypeError("Generator is already executing.");for(;p;)try{if(m=1,h&&(g=E[0]&2?h.return:E[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,E[1])).done)return g;switch(h=0,g&&(E=[E[0]&2,g.value]),E[0]){case 0:case 1:g=E;break;case 4:return p.label++,{value:E[1],done:!1};case 5:p.label++,h=E[1],E=[0];continue;case 7:E=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(E[0]===6||E[0]===2)){p=0;continue}if(E[0]===3&&(!g||E[1]>g[0]&&E[1]<g[3])){p.label=E[1];break}if(E[0]===6&&p.label<g[1]){p.label=g[1],g=E;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(E);break}g[2]&&p.ops.pop(),p.trys.pop();continue}E=f.call(d,p)}catch(b){E=[6,b],h=0}finally{m=g=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},o=require("https"),i=zf(),s=vr(),a=CQ(),c=Zn(),u={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},l=function(){function d(f){this._config=f,this._consecutiveErrors=0}return d.prototype.ping=function(f,p,m){var h=[{name:u.streamId,value:f.StreamId},{name:u.machineName,value:f.MachineName},{name:u.roleName,value:f.RoleName},{name:u.instanceName,value:f.Instance},{name:u.invariantVersion,value:f.InvariantVersion.toString()}];this._submitData(f,p,m,"ping",h)},d.prototype.post=function(f,p,m){return r(this,void 0,void 0,function(){return n(this,function(h){switch(h.label){case 0:return[4,this._submitData([f],p,m,"post")];case 1:return h.sent(),[2]}})})},d.prototype._submitData=function(f,p,m,h,g){return r(this,void 0,void 0,function(){var v,w,C,E,b,I=this;return n(this,function(T){return v=JSON.stringify(f),w=(E={},E[i.disableCollectionRequestOption]=!0,E.host=p&&p.length>0?p:this._config.quickPulseHost,E.method=u.method,E.path="/QuickPulseService.svc/"+h+"?ikey="+this._config.instrumentationKey,E.headers=(b={Expect:"100-continue"},b[u.time]=a.getTransmissionTime(),b["Content-Type"]="application/json",b["Content-Length"]=Buffer.byteLength(v),b),E),g&&g.length>0&&g.forEach(function(P){return w.headers[P.name]=P.value}),this._config.httpsAgent?w.agent=this._config.httpsAgent:w.agent=c.tlsRestrictedAgent,C=o.request(w,function(P){if(P.statusCode==200){var S=P.headers[u.subscribed]==="true",k=P.headers[u.endpointRedirect]?P.headers[u.endpointRedirect].toString():null,A=P.headers[u.pollingIntervalHint]?parseInt(P.headers[u.pollingIntervalHint].toString()):null;I._consecutiveErrors=0,m(S,P,k,A)}else I._onError("StatusCode:"+P.statusCode+" StatusMessage:"+P.statusMessage),m()}),C.on("error",function(P){I._onError(P),m()}),C.write(v),C.end(),[2]})})},d.prototype._onError=function(f){this._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%d.MAX_QPS_FAILURES_BEFORE_WARN==0?(p="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(d.TAG,p,f)):s.info(d.TAG,p,f)},d.TAG="QuickPulseSender",d.MAX_QPS_FAILURES_BEFORE_WARN=25,d}();t.exports=l}),_Q=F((e,t)=>{"use strict";var r=e&&e.__awaiter||function(l,d,f,p){function m(h){return h instanceof f?h:new f(function(g){g(h)})}return new(f||(f=Promise))(function(h,g){function v(E){try{C(p.next(E))}catch(b){g(b)}}function w(E){try{C(p.throw(E))}catch(b){g(b)}}function C(E){E.done?h(E.value):m(E.value).then(v,w)}C((p=p.apply(l,d||[])).next())})},n=e&&e.__generator||function(l,d){var f={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},p,m,h,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(C){return function(E){return w([C,E])}}function w(C){if(p)throw new TypeError("Generator is already executing.");for(;f;)try{if(p=1,m&&(h=C[0]&2?m.return:C[0]?m.throw||((h=m.return)&&h.call(m),0):m.next)&&!(h=h.call(m,C[1])).done)return h;switch(m=0,h&&(C=[C[0]&2,h.value]),C[0]){case 0:case 1:h=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,m=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(h=f.trys,!(h=h.length>0&&h[h.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!h||C[1]>h[0]&&C[1]<h[3])){f.label=C[1];break}if(C[0]===6&&f.label<h[1]){f.label=h[1],h=C;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(C);break}h[2]&&f.ops.pop(),f.trys.pop();continue}C=d.call(l,f)}catch(E){C=[6,E],m=0}finally{p=h=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},o=vr(),i=wQ(),s=EQ(),a=Us(),c=vv(),u=function(){function l(d,f){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=d,this.context=f||new c,this._sender=new s(this.config),this._isEnabled=!1}return l.prototype.addCollector=function(d){this._collectors.push(d)},l.prototype.trackMetric=function(d){this._addMetric(d)},l.prototype.addDocument=function(d){var f=i.telemetryEnvelopeToQuickPulseDocument(d);f&&this._documents.push(f)},l.prototype.enable=function(d){d&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!d&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},l.prototype.enableCollectors=function(d){this._collectors.forEach(function(f){f.enable(d)})},l.prototype._addMetric=function(d){var f=d.value,p=d.count||1,m=a.PerformanceToQuickPulseCounter[d.name];m&&(this._metrics[m]?(this._metrics[m].Value=(this._metrics[m].Value*this._metrics[m].Weight+f*p)/(this._metrics[m].Weight+p),this._metrics[m].Weight+=p):(this._metrics[m]=i.createQuickPulseMetric(d),this._metrics[m].Name=m,this._metrics[m].Weight=1))},l.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},l.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var d,f,p,m,h=this;return n(this,function(g){switch(g.label){case 0:return d=Object.keys(this._metrics).map(function(v){return h._metrics[v]}),f=i.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(f)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(f),g.label=3;case 3:return p=this._pollingIntervalHint>0?this._pollingIntervalHint:l.PING_INTERVAL,m=this._isCollectingData?l.POST_INTERVAL:p,this._isCollectingData&&Date.now()-this._lastSuccessTime>=l.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,m=l.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=l.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(m=l.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),m),this._handle.unref(),[2]}})})},l.prototype._ping=function(d){this._sender.ping(d,this._redirectedHost,this._quickPulseDone.bind(this))},l.prototype._post=function(d){return r(this,void 0,void 0,function(){return n(this,function(f){switch(f.label){case 0:return[4,this._sender.post(d,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return f.sent(),[2]}})})},l.prototype._quickPulseDone=function(d,f,p,m){d!=null?(this._isCollectingData!==d&&(o.info("Live Metrics sending data",d),this.enableCollectors(d)),this._isCollectingData=d,p&&p.length>0&&(this._redirectedHost=p,o.info("Redirecting endpoint to: ",p)),m&&m>0&&(this._pollingIntervalHint=m),f&&f.statusCode<300&&f.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},l.MAX_POST_WAIT_TIME=2e4,l.MAX_PING_WAIT_TIME=6e4,l.FALLBACK_INTERVAL=6e4,l.PING_INTERVAL=5e3,l.POST_INTERVAL=1e3,l}();t.exports=u}),bQ=F((e,t)=>{"use strict";var r=Us(),n=function(){function o(){}return o.parse=function(i){if(!i)return{};var s=i.split(o._FIELDS_SEPARATOR),a=s.reduce(function(u,l){var d=l.split(o._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var f=d[0].toLowerCase(),p=d[1];u[f]=p}return u},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return a},o._FIELDS_SEPARATOR=";",o._FIELD_KEY_VALUE_SEPARATOR="=",o}();t.exports=n}),TM=F((e,t)=>{"use strict";var r=Cl(),n=bQ(),o=vr(),i=Us(),s=require("url"),a=function(){function c(u){var l=this;this.endpointBase=i.DEFAULT_BREEZE_ENDPOINT;var d=process.env[c.ENV_connectionString],f=n.parse(u),p=n.parse(d),m=!f.instrumentationkey&&Object.keys(f).length>0?null:u;this.instrumentationKey=f.instrumentationkey||m||p.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(f.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(h){return l.correlationId=h},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=f.ingestionendpoint||p.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=f.liveendpoint||p.liveendpoint||process.env[c.ENV_quickPulseHost]||i.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(u){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=u,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(u){this._quickPulseHost=u},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var u=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!u||u=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return u},c._validateInstrumentationKey=function(u){var l="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",d=new RegExp(l);return d.test(u)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();t.exports=a}),xQ=F(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(s){for(var a,c=1,u=arguments.length;c<u;c++){a=arguments[c];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var r=TM(),n=vv(),o=vr(),i=function(){function s(a){this._disabledMetrics={},s.INSTANCE&&s.INSTANCE.dispose(),s.INSTANCE=this,this._client=a}return s.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},s.prototype.enable=function(a,c,u){var l=this;if(c===void 0&&(c={}),u===void 0&&(u=6e4),!!s.isNodeVersionCompatible()){if(s._metricsAvailable==null&&a&&!this._isInitialized)try{var d=require("applicationinsights-native-metrics");s._emitter=new d,s._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch{s._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&s._emitter?(s._emitter.enable(!0,u),this._handle||(this._handle=setInterval(function(){return l._trackNativeMetrics()},u),this._handle.unref())):s._emitter&&(s._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},s.prototype.dispose=function(){this.enable(!1)},s.parseEnabled=function(a){var c=process.env[r.ENV_nativeMetricsDisableAll],u=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(u){var l=u.split(","),d={};if(l.length>0)for(var f=0,p=l;f<p.length;f++){var m=p[f];d[m]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:t(t({},a),d)}:{isEnabled:a,disabledMetrics:d}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},s.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},s.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=s._emitter.getGCData();for(var u in c){var l=c[u].metrics,d=u+" Garbage Collection Duration",f=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:d,value:l.total,count:l.count,max:l.max,min:l.min,stdDev:f,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=s._emitter.getLoopData(),u=c.loopUsage;if(u.count!=0){var l="Event Loop CPU Time",d=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:l,value:u.total,count:u.count,min:u.min,max:u.max,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackHeapUsage=function(){var a,c,u;if(!this._disabledMetrics.heap){var l=process.memoryUsage(),d=l.heapUsed,f=l.heapTotal,p=l.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:d,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:p-f,count:1,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,u)})}},s}();e.AutoCollectNativePerformance=i}),SQ=F((e,t)=>{"use strict";var r=vr(),n=function(){function o(i,s,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=i,this._getBatchSize=s,this._getBatchIntervalMs=a,this._sender=c}return o.prototype.setUseDiskRetryCaching=function(i,s,a){this._sender.setDiskRetryMode(i,s,a)},o.prototype.send=function(i){var s=this;if(!this._isDisabled()){if(!i){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(i),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){s._timeoutHandle=null,s.triggerSend(!1)},this._getBatchIntervalMs()))}},o.prototype.triggerSend=function(i,s){var a=this._buffer.length<1;a||(i?(this._sender.saveOnCrash(this._buffer),typeof s=="function"&&s("data saved on crash")):this._sender.send(this._buffer,s)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof s=="function"&&s("no data to send")},o}();t.exports=n}),PQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function t(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=t}),IQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=rn();function r(o,i){var s=o.sampleRate,a=!1;return s==null||s>=100||o.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(o.data.baseType)?!0:(i.correlationContext&&i.correlationContext.operation?a=n(i.correlationContext.operation.id)<s:a=Math.random()*100<s,a)}e.samplingTelemetryProcessor=r;function n(o){var i=-2147483648,s=2147483647,a=5381;if(!o)return 0;for(;o.length<8;)o=o+o;for(var c=0;c<o.length;c++)a=((a<<5)+a|0)+o.charCodeAt(c)|0;return a=a<=i?s:Math.abs(a),a/s*100}e.getSamplingHashCode=n}),TQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=Qb(),r=rn();function n(o,i){switch(i&&i.addDocument(o),o.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var s=o.data.baseData;t.countRequest(s.duration,s.success);break;case r.TelemetryTypeString.Dependency:var a=o.data.baseData;t.countDependency(a.duration,a.success);break}return!0}e.performanceMetricsTelemetryProcessor=n}),kQ=F(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(s){for(var a,c=1,u=arguments.length;c<u;c++){a=arguments[c];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=rn(),n=PM(),o=rn();function i(s,a){if(n.isEnabled())switch(s.data.baseType){case o.TelemetryTypeString.Exception:var c=s.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var u={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole]};n.countException(u);break;case o.TelemetryTypeString.Trace:var l=s.data.baseData;l.properties=t(t({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var d={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[l.severity]};n.countTrace(d);break;case o.TelemetryTypeString.Request:var f=s.data.baseData;f.properties=t(t({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],requestSuccess:f.success,requestResultCode:f.responseCode};n.countRequest(f.duration,p);break;case o.TelemetryTypeString.Dependency:var m=s.data.baseData;m.properties=t(t({},m.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var h={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],dependencySuccess:m.success,dependencyType:m.type,dependencyTarget:m.target,dependencyResultCode:m.resultCode};n.countDependency(m.duration,h);break}return!0}e.preAggregatedMetricsTelemetryProcessor=i}),DQ=F(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,i,s){s===void 0&&(s=i),Object.defineProperty(n,s,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,s){s===void 0&&(s=i),n[s]=o[i]}),r=e&&e.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(PQ(),e),r(IQ(),e),r(TQ(),e),r(kQ(),e)}),RQ=F((e,t)=>{"use strict";var r=e&&e.__awaiter||function(p,m,h,g){function v(w){return w instanceof h?w:new h(function(C){C(w)})}return new(h||(h=Promise))(function(w,C){function E(T){try{I(g.next(T))}catch(P){C(P)}}function b(T){try{I(g.throw(T))}catch(P){C(P)}}function I(T){T.done?w(T.value):v(T.value).then(E,b)}I((g=g.apply(p,m||[])).next())})},n=e&&e.__generator||function(p,m){var h={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},g,v,w,C;return C={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function E(I){return function(T){return b([I,T])}}function b(I){if(g)throw new TypeError("Generator is already executing.");for(;h;)try{if(g=1,v&&(w=I[0]&2?v.return:I[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,I[1])).done)return w;switch(v=0,w&&(I=[I[0]&2,w.value]),I[0]){case 0:case 1:w=I;break;case 4:return h.label++,{value:I[1],done:!1};case 5:h.label++,v=I[1],I=[0];continue;case 7:I=h.ops.pop(),h.trys.pop();continue;default:if(w=h.trys,!(w=w.length>0&&w[w.length-1])&&(I[0]===6||I[0]===2)){h=0;continue}if(I[0]===3&&(!w||I[1]>w[0]&&I[1]<w[3])){h.label=I[1];break}if(I[0]===6&&h.label<w[1]){h.label=w[1],w=I;break}if(w&&h.label<w[2]){h.label=w[2],h.ops.push(I);break}w[2]&&h.ops.pop(),h.trys.pop();continue}I=m.call(p,h)}catch(T){I=[6,T],v=0}finally{g=w=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},o=require("fs"),i=require("os"),s=require("path"),a=require("zlib"),c=require("child_process"),u=vr(),l=zf(),d=Zn(),f=function(){function p(m,h,g){if(this._redirectedHost=null,this._config=m,this._onSuccess=h,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=p.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=p.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(i.tmpdir(),p.TEMPDIR_PREFIX+this._config.instrumentationKey),!p.OS_PROVIDES_FILE_PROTECTION)if(p.USE_ICACLS){try{p.OS_PROVIDES_FILE_PROTECTION=o.existsSync(p.ICACLS_PATH)}catch{}p.OS_PROVIDES_FILE_PROTECTION||u.warn(p.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else p.OS_PROVIDES_FILE_PROTECTION=!0}return p.prototype.setDiskRetryMode=function(m,h,g){var v=this;this._enableDiskRetryMode=p.OS_PROVIDES_FILE_PROTECTION&&m,typeof h=="number"&&h>=0&&(this._resendInterval=Math.floor(h)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),m&&!p.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(p.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){v._fileCleanupTask()},p.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},p.prototype.send=function(m,h){return r(this,void 0,void 0,function(){var g,v,w,C,E=this;return n(this,function(b){return m&&(g=this._redirectedHost||this._config.endpointUrl,v={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},w="",m.forEach(function(I){var T=E._stringify(I);typeof T=="string"&&(w+=T+`
`)}),w.length>0&&(w=w.substring(0,w.length-1)),C=Buffer.from?Buffer.from(w):new Buffer(w),a.gzip(C,function(I,T){var P=T;I?(u.warn(I),P=C,v.headers["Content-Length"]=C.length.toString()):(v.headers["Content-Encoding"]="gzip",v.headers["Content-Length"]=T.length.toString()),u.info(p.TAG,v),v[l.disableCollectionRequestOption]=!0;var S=function(A){A.setEncoding("utf-8");var N="";A.on("data",function(z){N+=z}),A.on("end",function(){if(E._numConsecutiveFailures=0,E._enableDiskRetryMode){if(A.statusCode===200)E._resendTimer||(E._resendTimer=setTimeout(function(){E._resendTimer=null,E._sendFirstFileOnDisk()},E._resendInterval),E._resendTimer.unref());else if(E._isRetriable(A.statusCode))try{var z=JSON.parse(N),Q=[];z.errors.forEach(function(ne){E._isRetriable(ne.statusCode)&&Q.push(m[ne.index])}),Q.length>0&&E._storeToDisk(Q)}catch{E._storeToDisk(m)}}if(A.statusCode===307||A.statusCode===308)if(E._numConsecutiveRedirects++,E._numConsecutiveRedirects<10){var ee=A.headers.location?A.headers.location.toString():null;ee&&(E._redirectedHost=ee,E.send(m,h))}else typeof h=="function"&&h("Error sending telemetry because of circular redirects.");else E._numConsecutiveRedirects=0,typeof h=="function"&&h(N),u.info(p.TAG,N),typeof E._onSuccess=="function"&&E._onSuccess(N)})},k=d.makeRequest(E._config,g,v,S);k.on("error",function(A){if(E._numConsecutiveFailures++,!E._enableDiskRetryMode||E._numConsecutiveFailures>0&&E._numConsecutiveFailures%p.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var N="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";E._enableDiskRetryMode&&(N="Ingestion endpoint could not be reached "+E._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(p.TAG,N,d.dumpObj(A))}else{var N="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";u.info(p.TAG,N,d.dumpObj(A))}E._onErrorHelper(A),typeof h=="function"&&(A&&h(d.dumpObj(A)),h("Error sending telemetry")),E._enableDiskRetryMode&&E._storeToDisk(m)}),k.write(P),k.end()})),[2]})})},p.prototype.saveOnCrash=function(m){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(m))},p.prototype._isRetriable=function(m){return m===206||m===408||m===429||m===439||m===500||m===503},p.prototype._runICACLS=function(m,h){var g=c.spawn(p.ICACLS_PATH,m,{windowsHide:!0});g.on("error",function(v){return h(v)}),g.on("close",function(v,w){return h(v===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v+")"))})},p.prototype._runICACLSSync=function(m){if(c.spawnSync){var h=c.spawnSync(p.ICACLS_PATH,m,{windowsHide:!0});if(h.error)throw h.error;if(h.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+h.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},p.prototype._getACLIdentity=function(m){if(p.ACL_IDENTITY)return m(null,p.ACL_IDENTITY);var h=c.spawn(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";h.stdout.on("data",function(v){return g+=v}),h.on("error",function(v){return m(v,null)}),h.on("close",function(v,w){return p.ACL_IDENTITY=g&&g.trim(),m(v===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),p.ACL_IDENTITY)})},p.prototype._getACLIdentitySync=function(){if(p.ACL_IDENTITY)return p.ACL_IDENTITY;if(c.spawnSync){var m=c.spawnSync(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(m.error)throw m.error;if(m.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+m.status+")");return p.ACL_IDENTITY=m.stdout&&m.stdout.toString().trim(),p.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},p.prototype._getACLArguments=function(m,h){return[m,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",h+":(OI)(CI)F","/inheritance:r"]},p.prototype._applyACLRules=function(m,h){var g=this;if(!p.USE_ICACLS)return h(null);if(p.ACLED_DIRECTORIES[m]===void 0)p.ACLED_DIRECTORIES[m]=!1,this._getACLIdentity(function(v,w){if(v)return p.ACLED_DIRECTORIES[m]=!1,h(v);g._runICACLS(g._getACLArguments(m,w),function(C){return p.ACLED_DIRECTORIES[m]=!C,h(C)})});else return h(p.ACLED_DIRECTORIES[m]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},p.prototype._applyACLRulesSync=function(m){if(p.USE_ICACLS){if(p.ACLED_DIRECTORIES[m]===void 0){this._runICACLSSync(this._getACLArguments(m,this._getACLIdentitySync())),p.ACLED_DIRECTORIES[m]=!0;return}else if(!p.ACLED_DIRECTORIES[m])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},p.prototype._confirmDirExists=function(m,h){var g=this;o.lstat(m,function(v,w){v&&v.code==="ENOENT"?o.mkdir(m,function(C){C&&C.code!=="EEXIST"?h(C):g._applyACLRules(m,h)}):!v&&w.isDirectory()?g._applyACLRules(m,h):h(v||new Error("Path existed but was not a directory"))})},p.prototype._getShallowDirectorySize=function(m,h){o.readdir(m,function(g,v){if(g)return h(g,-1);var w=null,C=0,E=0;if(v.length===0){h(null,0);return}for(var b=0;b<v.length;b++)o.stat(s.join(m,v[b]),function(I,T){E++,I?w=I:T.isFile()&&(C+=T.size),E===v.length&&(w?h(w,-1):h(w,C))})})},p.prototype._getShallowDirectorySizeSync=function(m){for(var h=o.readdirSync(m),g=0,v=0;v<h.length;v++)g+=o.statSync(s.join(m,h[v])).size;return g},p.prototype._storeToDisk=function(m){var h=this;u.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){u.warn(p.TAG,"Error while checking/creating directory: "+(g&&g.message)),h._onErrorHelper(g);return}h._getShallowDirectorySize(h._tempDir,function(v,w){if(v||w<0){u.warn(p.TAG,"Error while checking directory size: "+(v&&v.message)),h._onErrorHelper(v);return}else if(w>h._maxBytesOnDisk){u.warn(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+w);return}var C=new Date().getTime()+".ai.json",E=s.join(h._tempDir,C);u.info(p.TAG,"saving data to disk at: "+E),o.writeFile(E,h._stringify(m),{mode:384},function(b){return h._onErrorHelper(b)})})})},p.prototype._storeToDiskSync=function(m){try{u.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var h=this._getShallowDirectorySizeSync(this._tempDir);if(h>this._maxBytesOnDisk){u.info(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+h);return}var g=new Date().getTime()+".ai.json",v=s.join(this._tempDir,g);u.info(p.TAG,"saving data before crash to disk at: "+v),o.writeFileSync(v,m,{mode:384})}catch(w){u.warn(p.TAG,"Error while saving data to disk: "+(w&&w.message)),this._onErrorHelper(w)}},p.prototype._sendFirstFileOnDisk=function(){var m=this;o.exists(this._tempDir,function(h){h&&o.readdir(m._tempDir,function(g,v){if(g)m._onErrorHelper(g);else if(v=v.filter(function(E){return s.basename(E).indexOf(".ai.json")>-1}),v.length>0){var w=v[0],C=s.join(m._tempDir,w);o.readFile(C,function(E,b){E?m._onErrorHelper(E):o.unlink(C,function(I){if(I)m._onErrorHelper(I);else try{var T=JSON.parse(b.toString());m.send(T)}catch(P){u.warn("Failed to read persisted file",P)}})})}})})},p.prototype._onErrorHelper=function(m){typeof this._onError=="function"&&this._onError(m)},p.prototype._stringify=function(m){try{return JSON.stringify(m)}catch(h){u.warn("Failed to serialize payload",h,m)}},p.prototype._fileCleanupTask=function(){var m=this;o.exists(this._tempDir,function(h){h&&o.readdir(m._tempDir,function(g,v){g?m._onErrorHelper(g):(v=v.filter(function(w){return s.basename(w).indexOf(".ai.json")>-1}),v.length>0&&v.forEach(function(w){var C=new Date(parseInt(w.split(".ai.json")[0])),E=new Date(+new Date-p.FILE_RETEMPTION_PERIOD)>C;if(E){var b=s.join(m._tempDir,w);o.unlink(b,function(I){I&&m._onErrorHelper(I)})}}))})})},p.TAG="Sender",p.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",p.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",p.ACLED_DIRECTORIES={},p.ACL_IDENTITY=null,p.WAIT_BETWEEN_RESEND=60*1e3,p.MAX_BYTES_ON_DISK=50*1024*1024,p.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,p.CLEANUP_TIMEOUT=60*60*1e3,p.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,p.TEMPDIR_PREFIX="appInsights-node",p.OS_PROVIDES_FILE_PROTECTION=!1,p.USE_ICACLS=i.type()==="Windows_NT",p}();t.exports=f}),AQ=F((e,t)=>{"use strict";var r=rn(),n=Zn(),o=El(),i=function(){function a(){}return a.createEnvelope=function(c,u,l,d,f){var p=null;switch(u){case r.TelemetryType.Trace:p=a.createTraceData(c);break;case r.TelemetryType.Dependency:p=a.createDependencyData(c);break;case r.TelemetryType.Event:p=a.createEventData(c);break;case r.TelemetryType.Exception:p=a.createExceptionData(c);break;case r.TelemetryType.Request:p=a.createRequestData(c);break;case r.TelemetryType.Metric:p=a.createMetricData(c);break;case r.TelemetryType.Availability:p=a.createAvailabilityData(c);break;case r.TelemetryType.PageView:p=a.createPageViewData(c);break}if(l&&r.domainSupportsProperties(p.baseData)){if(p&&p.baseData)if(!p.baseData.properties)p.baseData.properties=l;else for(var m in l)p.baseData.properties[m]||(p.baseData.properties[m]=l[m]);p.baseData.properties=n.validateStringMap(p.baseData.properties)}var h=f&&f.instrumentationKey||"",g=new r.Envelope;return g.data=p,g.iKey=h,g.name="Microsoft.ApplicationInsights."+h.replace(/-/g,"")+"."+p.baseType.substr(0,p.baseType.length-4),g.tags=this.getTags(d,c.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=f?f.samplingPercentage:100,u===r.TelemetryType.Metric&&(g.sampleRate=100),g},a.createTraceData=function(c){var u=new r.MessageData;u.message=c.message,u.properties=c.properties,isNaN(c.severity)?u.severityLevel=r.SeverityLevel.Information:u.severityLevel=c.severity;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),l.baseData=u,l},a.createDependencyData=function(c){var u=new r.RemoteDependencyData;typeof c.name=="string"&&(u.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),u.data=c.data,u.target=c.target,u.duration=n.msToTimeSpan(c.duration),u.success=c.success,u.type=c.dependencyTypeName,u.properties=c.properties,u.resultCode=c.resultCode?c.resultCode+"":"",c.id?u.id=c.id:u.id=n.w3cTraceId();var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),l.baseData=u,l},a.createEventData=function(c){var u=new r.EventData;u.name=c.name,u.properties=c.properties,u.measurements=c.measurements;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),l.baseData=u,l},a.createExceptionData=function(c){var u=new r.ExceptionData;u.properties=c.properties,isNaN(c.severity)?u.severityLevel=r.SeverityLevel.Error:u.severityLevel=c.severity,u.measurements=c.measurements,u.exceptions=[];var l=c.exception.stack,d=new r.ExceptionDetails;d.message=c.exception.message,d.typeName=c.exception.name,d.parsedStack=this.parseStack(l),d.hasFullStack=n.isArray(d.parsedStack)&&d.parsedStack.length>0,u.exceptions.push(d);var f=new r.Data;return f.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),f.baseData=u,f},a.createRequestData=function(c){var u=new r.RequestData;c.id?u.id=c.id:u.id=n.w3cTraceId(),u.name=c.name,u.url=c.url,u.source=c.source,u.duration=n.msToTimeSpan(c.duration),u.responseCode=c.resultCode?c.resultCode+"":"",u.success=c.success,u.properties=c.properties;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),l.baseData=u,l},a.createMetricData=function(c){var u=new r.MetricData;u.metrics=[];var l=new r.DataPoint;l.count=isNaN(c.count)?1:c.count,l.kind=r.DataPointType.Aggregation,l.max=isNaN(c.max)?c.value:c.max,l.min=isNaN(c.min)?c.value:c.min,l.name=c.name,l.stdDev=isNaN(c.stdDev)?0:c.stdDev,l.value=c.value,u.metrics.push(l),u.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),d.baseData=u,d},a.createAvailabilityData=function(c){var u=new r.AvailabilityData;c.id?u.id=c.id:u.id=n.w3cTraceId(),u.name=c.name,u.duration=n.msToTimeSpan(c.duration),u.success=c.success,u.runLocation=c.runLocation,u.message=c.message,u.measurements=c.measurements,u.properties=c.properties;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),l.baseData=u,l},a.createPageViewData=function(c){var u=new r.PageViewData;u.name=c.name,u.duration=n.msToTimeSpan(c.duration),u.url=c.url,u.measurements=c.measurements,u.properties=c.properties;var l=new r.Data;return l.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),l.baseData=u,l},a.getTags=function(c,u){var l=o.CorrelationContextManager.getCurrentContext(),d={};if(c&&c.tags)for(var f in c.tags)d[f]=c.tags[f];if(u)for(var f in u)d[f]=u[f];return l&&(d[c.keys.operationId]=d[c.keys.operationId]||l.operation.id,d[c.keys.operationName]=d[c.keys.operationName]||l.operation.name,d[c.keys.operationParentId]=d[c.keys.operationParentId]||l.operation.parentId),d},a.parseStack=function(c){var u=void 0;if(typeof c=="string"){var l=c.split(`
`);u=[];for(var d=0,f=0,p=0;p<=l.length;p++){var m=l[p];if(s.regex.test(m)){var h=new s(l[p],d++);f+=h.sizeInBytes,u.push(h)}}var g=32*1024;if(f>g)for(var v=0,w=u.length-1,C=0,E=v,b=w;v<w;){var I=u[v].sizeInBytes,T=u[w].sizeInBytes;if(C+=I+T,C>g){var P=b-E+1;u.splice(E,P);break}E=v,b=w,v++,w--}}return u},a}(),s=function(){function a(c,u){this.sizeInBytes=0,this.level=u,this.method="<no_method>",this.assembly=n.trim(c);var l=c.match(a.regex);l&&l.length>=5&&(this.method=n.trim(l[2])||this.method,this.fileName=n.trim(l[4])||"<no_filename>",this.line=parseInt(l[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();t.exports=i}),OQ=F((e,t)=>{"use strict";var r=require("url"),n=TM(),o=vv(),i=rn(),s=SQ(),a=DQ(),c=El(),u=RQ(),l=Zn(),d=vr(),f=AQ(),p=function(){function m(h){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new n(h);this.config=g,this.context=new o,this.commonProperties={};var v=new u(this.config);this.channel=new s(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},v)}return m.prototype.trackAvailability=function(h){this.track(h,i.TelemetryType.Availability)},m.prototype.trackPageView=function(h){this.track(h,i.TelemetryType.PageView)},m.prototype.trackTrace=function(h){this.track(h,i.TelemetryType.Trace)},m.prototype.trackMetric=function(h){this.track(h,i.TelemetryType.Metric)},m.prototype.trackException=function(h){h&&h.exception&&!l.isError(h.exception)&&(h.exception=new Error(h.exception.toString())),this.track(h,i.TelemetryType.Exception)},m.prototype.trackEvent=function(h){this.track(h,i.TelemetryType.Event)},m.prototype.trackRequest=function(h){this.track(h,i.TelemetryType.Request)},m.prototype.trackDependency=function(h){h&&!h.target&&h.data&&(h.target=r.parse(h.data).host),this.track(h,i.TelemetryType.Dependency)},m.prototype.flush=function(h){this.channel.triggerSend(h?!!h.isAppCrashing:!1,h?h.callback:void 0)},m.prototype.track=function(h,g){if(h&&i.telemetryTypeToBaseType(g)){var v=f.createEnvelope(h,g,this.commonProperties,this.context,this.config);h.time&&(v.time=h.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(v,this.context);var w=this.runTelemetryProcessors(v,h.contextObjects);w=w&&a.samplingTelemetryProcessor(v,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(v,this.context),w&&(a.performanceMetricsTelemetryProcessor(v,this.quickPulseClient),this.channel.send(v))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},m.prototype.setAutoPopulateAzureProperties=function(h){this._enableAzureProperties=h},m.prototype.addTelemetryProcessor=function(h){this._telemetryProcessors.push(h)},m.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},m.prototype.runTelemetryProcessors=function(h,g){var v=!0,w=this._telemetryProcessors.length;if(w===0)return v;g=g||{},g.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var C=0;C<w;++C)try{var E=this._telemetryProcessors[C];if(E&&E.apply(null,[h,g])===!1){v=!1;break}}catch(b){v=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",b,h)}return v&&(h&&h.tags&&(h.tags=l.validateStringMap(h.tags)),h&&h.data&&h.data.baseData&&h.data.baseData.properties&&(h.data.baseData.properties=l.validateStringMap(h.data.baseData.properties))),v},m}();t.exports=p}),NQ=F((e,t)=>{"use strict";var r=e&&e.__extends||function(){var c=function(u,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p])},c(u,l)};return function(u,l){c(u,l);function d(){this.constructor=u}u.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}(),n=OQ(),o=IM(),i=zf(),s=vr(),a=function(c){r(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.prototype.trackNodeHttpRequestSync=function(l){l&&l.request&&l.response&&l.duration?o.trackRequestSync(this,l):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},u.prototype.trackNodeHttpRequest=function(l){(l.duration||l.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),l&&l.request&&l.response?o.trackRequest(this,l):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},u.prototype.trackNodeHttpDependency=function(l){l&&l.request?i.trackRequest(this,l):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},u}(n);t.exports=a}),LQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),FQ=F(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t=El(),r=aQ(),n=cQ(),o=Qb(),i=PM(),s=yQ(),a=zf(),c=IM(),u=Cl(),l=vr(),d=_Q(),f=xQ();e.TelemetryClient=NQ(),e.Contracts=rn(),e.azureFunctionsTypes=LQ();var p;(function(ke){ke[ke.AI=0]="AI",ke[ke.AI_AND_W3C=1]="AI_AND_W3C"})(p=e.DistributedTracingModes||(e.DistributedTracingModes={}));var m=!0,h=!1,g=!0,v=!0,w=!0,C=!1,E=!0,b=!0,I=!0,T=!0,P,S=!1,k=!0,A,N=void 0,z=void 0,Q,ee,ne,U,L,D,j,K,Y=!1,Z;function me(ke){return e.defaultClient?l.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(ke),Q=new r(e.defaultClient),ee=new n(e.defaultClient),ne=new o(e.defaultClient),U=new i(e.defaultClient),L=new s(e.defaultClient),j=new c(e.defaultClient),K=new a(e.defaultClient),D||(D=new f.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(I,N,z),ht}e.setup=me;function Ee(){return e.defaultClient?(Y=!0,Q.enable(m,h),ee.enable(g),ne.enable(v),U.enable(w),L.enable(C,e.defaultClient.config),D.enable(k,A),j.useAutoCorrelation(T,P),j.enable(E),K.enable(b),e.liveMetricsClient&&S&&e.liveMetricsClient.enable(S)):l.warn("Start cannot be called before setup"),ht}e.start=Ee;function _e(){return T?t.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=_e;function Ie(ke,Pe){return t.CorrelationContextManager.startOperation(ke,Pe)}e.startOperation=Ie;function Ce(ke,Pe){return t.CorrelationContextManager.wrapCallback(ke,Pe)}e.wrapWithCorrelationContext=Ce;var ht=function(){function ke(){}return ke.setDistributedTracingMode=function(Pe){return u.w3cEnabled=Pe===p.AI_AND_W3C,ke},ke.setAutoCollectConsole=function(Pe,Ae){return Ae===void 0&&(Ae=!1),m=Pe,h=Ae,Y&&Q.enable(Pe,Ae),ke},ke.setAutoCollectExceptions=function(Pe){return g=Pe,Y&&ee.enable(Pe),ke},ke.setAutoCollectPerformance=function(Pe,Ae){Ae===void 0&&(Ae=!0),v=Pe;var Ke=f.AutoCollectNativePerformance.parseEnabled(Ae);return k=Ke.isEnabled,A=Ke.disabledMetrics,Y&&(ne.enable(Pe),D.enable(Ke.isEnabled,Ke.disabledMetrics)),ke},ke.setAutoCollectPreAggregatedMetrics=function(Pe){return w=Pe,Y&&U.enable(Pe),ke},ke.setAutoCollectHeartbeat=function(Pe){return C=Pe,Y&&L.enable(Pe,e.defaultClient.config),ke},ke.setAutoCollectRequests=function(Pe){return E=Pe,Y&&j.enable(Pe),ke},ke.setAutoCollectDependencies=function(Pe){return b=Pe,Y&&K.enable(Pe),ke},ke.setAutoDependencyCorrelation=function(Pe,Ae){return T=Pe,P=Ae,Y&&j.useAutoCorrelation(Pe,Ae),ke},ke.setUseDiskRetryCaching=function(Pe,Ae,Ke){return I=Pe,N=Ae,z=Ke,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(Pe,Ae,Ke),ke},ke.setInternalLogging=function(Pe,Ae){return Pe===void 0&&(Pe=!1),Ae===void 0&&(Ae=!0),l.enableDebug=Pe,l.disableWarnings=!Ae,ke},ke.setSendLiveMetrics=function(Pe){return Pe===void 0&&(Pe=!1),e.defaultClient?(!e.liveMetricsClient&&Pe?(e.liveMetricsClient=new d(e.defaultClient.config,null),Z=new o(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(Z),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(Pe),S=Pe,ke):(l.warn("Live metrics client cannot be setup without the default client"),ke)},ke.start=Ee,ke}();e.Configuration=ht;function wt(){u.w3cEnabled=!0,e.defaultClient=null,Y=!1,Q&&Q.dispose(),ee&&ee.dispose(),ne&&ne.dispose(),U&&U.dispose(),L&&L.dispose(),D&&D.dispose(),j&&j.dispose(),K&&K.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),S=!1,e.liveMetricsClient=void 0)}e.dispose=wt}),kM={};m5(kM,{default:()=>WQ});DM.exports=h5(kM);var Yb=mv(require("os")),js=mv(require("vscode")),MQ=mv(require("https")),Io=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){let e="telemetry",t="enableTelemetry";try{let r=this.vscodeAPI.env.telemetryConfiguration;return r.isUsageEnabled&&r.isErrorsEnabled&&r.isCrashEnabled?"on":r.isErrorsEnabled&&r.isCrashEnabled?"error":"off"}catch{return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(e).get(t)?"on":"off"}}static applyReplacements(e,t){for(let r of Object.keys(e))for(let n of t)n.lookup.test(r)&&(n.replacementString!==void 0?e[r]=n.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getInstance(e){return Io._instance||(Io._instance=new Io(e)),Io._instance}},UQ=class{constructor(e,t,r,n,o,i){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.vscodeAPI=o,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),o.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(o.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(o.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(o.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=Io.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{e.indexOf(`${r}`)===0&&(t=r)}),t}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(e===null||typeof e!="object"||typeof t!="function")return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(e==null)return"";let n=[];this.vscodeAPI.env.appRoot!==""&&n.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=e;if(t){let i=[];for(let u of n)for(;(r=u.exec(e))&&r;)i.push([r.index,u.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(o="";(r=a.exec(e))&&r;)r[0]&&!s.test(r[0])&&i.every(([u,l])=>r.index<u||r.index>=l)&&(o+=e.substring(c,r.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<e.length&&(o+=e.substr(c))}for(let i of n)o=o.replace(i,"");return o}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let t={};for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let o=/@[a-zA-Z0-9-.]+/,i=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,s=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;i.test(n.toLowerCase())?t[r]="<REDACTED: secret>":o.test(n)?t[r]="<REDACTED: email>":s.test(n)?t[r]="<REDACTED: token>":t[r]=n}return t}get telemetryLevel(){switch(Io.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,r,n,o){if((this.userOptIn||o)&&e!==""){if(t=gc(gc({},t),this.getCommonProperties()),n){let i=this.cloneAndChange(t,(s,a)=>this.anonymizeFilePaths(a,this.firstParty));t=this.removePropertiesWithPossibleUserInfo(i)}t=t??{},r=r??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:r})}}sendTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!0,!1)}sendRawTelemetryEvent(e,t,r){this.internalSendTelemetryEvent(e,t,r,!1,!1)}sendDangerousTelemetryEvent(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,r,n,!0)}internalSendTelemetryErrorEvent(e,t,r,n,o){if((this.shouldSendErrorTelemetry()||o)&&e!==""){if(t=gc(gc({},t),this.getCommonProperties()),n){let i=this.cloneAndChange(t,(s,a)=>this.anonymizeFilePaths(a,this.firstParty));t=this.removePropertiesWithPossibleUserInfo(i)}t=t??{},r=r??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:r})}}sendTelemetryErrorEvent(e,t,r){this.internalSendTelemetryErrorEvent(e,t,r,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,r,n,!0)}internalSendTelemetryException(e,t,r,n,o){if((this.shouldSendErrorTelemetry()||o)&&e){if(t=gc(gc({},t),this.getCommonProperties()),n){let i=this.cloneAndChange(t,(s,a)=>this.anonymizeFilePaths(a,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(i)}t=t??{},r=r??{},this.telemetryAppender.logException(e,{properties:t,measurements:r})}}sendTelemetryException(e,t,r){this.internalSendTelemetryException(e,t,r,!0,!1)}sendDangerousTelemetryException(e,t,r,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,r,n,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},jQ=class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:e,data:t});return}this._telemetryClient.logEvent(e,t)}logException(e,t){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:e,data:t});return}this._telemetryClient.logException(e,t)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:t})=>this.logEvent(e,t)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:t})=>this.logException(e,t)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=2}))}},$Q=async(e,t,r)=>{let n=await Promise.resolve().then(()=>(dc(),ZF)),o=await Promise.resolve().then(()=>(M1(),F1)),i=new n.AppInsightsCore,s=new o.PostChannel,a={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:r};a.extensionConfig[s.identifier]=u}let c=t.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(a,[]),i.addTelemetryInitializer(u=>{!c||(u.ext=u.ext??{},u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),i},HQ=async(e,t,r)=>{let n=await $Q(e,t,r);return{logEvent:(o,i)=>{try{n==null||n.track({name:o,baseData:{name:o,properties:i==null?void 0:i.properties,measurements:i==null?void 0:i.measurements}})}catch(s){throw new Error(`Failed to log event to app insights!
`+s.message)}},logException:(o,i)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{n==null||n.unload()}catch(o){throw new Error(`Failed to flush app insights!
`+o.message)}}}},qQ=async(e,t)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let n=await Promise.resolve().then(()=>mv(FQ()));n.defaultClient?(r=new n.TelemetryClient(e),r.channel.setUseDiskRetryCaching(!0)):(n.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),r=n.defaultClient),js&&js.env&&(r.context.tags[r.context.keys.userId]=js.env.machineId,r.context.tags[r.context.keys.sessionId]=js.env.sessionId,r.context.tags[r.context.keys.cloudRole]=js.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=js.env.appName),e&&e.indexOf("AIF-")===0&&(r.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(n){return Promise.reject(`Failed to initialize app insights!
`+n.message)}return t!=null&&t.length&&BQ(r,t),{logEvent:(n,o)=>{try{r==null||r.trackEvent({name:n,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})}catch(i){throw new Error(`Failed to log event to app insights!
`+i.message)}},logException:(n,o)=>{try{r==null||r.trackException({exception:n,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})}catch(i){throw new Error(`Failed to log exception to app insights!
`+i.message)}},flush:async()=>{try{r==null||r.flush()}catch(n){throw new Error(`Failed to flush app insights!
`+n.message)}}}};function BQ(e,t){e.addTelemetryProcessor(r=>(Array.isArray(r.tags)?r.tags.forEach(n=>Io.applyReplacements(n,t)):r.tags&&Io.applyReplacements(r.tags,t),r.data.baseData&&Io.applyReplacements(r.data.baseData,t),!0))}function VQ(){return{sendPOST:(e,t)=>{let r={method:"POST",headers:p5(gc({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let n=MQ.request(e.urlString,r,o=>{o.on("data",function(i){t(o.statusCode??200,o.headers,i.toString())}),o.on("error",function(){t(0,{})})});n.write(e.data),n.end()}catch{t(0,{})}}}}var WQ=class extends UQ{constructor(e,t,r,n,o){let i=a=>qQ(a,o);Io.shouldUseOneDataSystemSDK(r)&&(i=a=>HQ(a,js,VQ()));let s=new jQ(r,i);r&&(r.indexOf("AIF-")===0||Io.shouldUseOneDataSystemSDK(r))&&(n=!0),super(e,t,s,{release:Yb.release(),platform:Yb.platform(),architecture:Yb.arch()},js,n)}}});var Jb=$(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var yv=require("vscode"),Kf=class{constructor(t,r,n){this.extensionName=t,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(t){let r=/\-[a-zA-Z0-9]+$/;return t.split(r)[0]}getFilterValue(t){switch(t){case Ui.ApplicationVersion:return Kf.trimVersionSuffix(yv.version);case Ui.Build:return yv.env.appName;case Ui.ClientId:return yv.env.machineId;case Ui.ExtensionName:return this.extensionName;case Ui.ExtensionVersion:return Kf.trimVersionSuffix(this.extensionVersion);case Ui.Language:return yv.env.language;case Ui.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let t=new Map,r=Object.values(Ui);for(let n of r)t.set(n,this.getFilterValue(n));return t}};vc.VSCodeFilterProvider=Kf;var Ui;(function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"})(Ui=vc.Filters||(vc.Filters={}));var GQ;(function(e){e.Team="team",e.Internal="internal",e.Insiders="insider",e.Public="public"})(GQ=vc.TargetPopulation||(vc.TargetPopulation={}))});var OM=$(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});var AM=class{constructor(t){this.telemetry=t,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let t=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,t}};Xb.BaseFeatureProvider=AM});var LM=$(Zb=>{"use strict";Object.defineProperty(Zb,"__esModule",{value:!0});var zQ=OM(),NM=class extends zQ.BaseFeatureProvider{constructor(t,r){super(t);this.telemetry=t,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let t=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let o of n.keys()){let i=n.get(o);t.set(o,i)}}return t}PostEventToTelemetry(t){if(this.cachedTelemetryEvents.includes(t))return;let r=JSON.stringify(t);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(t)}};Zb.FilteredFeatureProvider=NM});var MM=$(ex=>{"use strict";Object.defineProperty(ex,"__esModule",{value:!0});var KQ=LM(),FM=class extends KQ.FilteredFeatureProvider{constructor(t,r,n){super(r,n);this.httpClient=t,this.telemetry=r,this.filterProviders=n}async fetch(){let t=this.getFilters(),r={};for(let a of t.keys()){let c=t.get(a);r[a]=c}let n=await this.httpClient.get({headers:r});t.keys.length>0&&this.PostEventToTelemetry(r);let o=n.data,i=o.Configs,s=[];for(let a of i)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let u=c+(a.Parameters[c]?"":"cf");s.includes(u)||s.push(u)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};ex.TasApiFeatureProvider=FM});var tx=$((lme,UM)=>{"use strict";UM.exports=function(t,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(r,o)}}});var Mr=$((dme,HM)=>{"use strict";var QQ=tx(),yc=Object.prototype.toString;function rx(e){return yc.call(e)==="[object Array]"}function nx(e){return typeof e=="undefined"}function YQ(e){return e!==null&&!nx(e)&&e.constructor!==null&&!nx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function JQ(e){return yc.call(e)==="[object ArrayBuffer]"}function XQ(e){return typeof FormData!="undefined"&&e instanceof FormData}function ZQ(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function eY(e){return typeof e=="string"}function tY(e){return typeof e=="number"}function jM(e){return e!==null&&typeof e=="object"}function wv(e){if(yc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function rY(e){return yc.call(e)==="[object Date]"}function nY(e){return yc.call(e)==="[object File]"}function oY(e){return yc.call(e)==="[object Blob]"}function $M(e){return yc.call(e)==="[object Function]"}function iY(e){return jM(e)&&$M(e.pipe)}function sY(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function aY(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function cY(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function ox(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),rx(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function ix(){var e={};function t(o,i){wv(e[i])&&wv(o)?e[i]=ix(e[i],o):wv(o)?e[i]=ix({},o):rx(o)?e[i]=o.slice():e[i]=o}for(var r=0,n=arguments.length;r<n;r++)ox(arguments[r],t);return e}function uY(e,t,r){return ox(t,function(o,i){r&&typeof o=="function"?e[i]=QQ(o,r):e[i]=o}),e}function lY(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}HM.exports={isArray:rx,isArrayBuffer:JQ,isBuffer:YQ,isFormData:XQ,isArrayBufferView:ZQ,isString:eY,isNumber:tY,isObject:jM,isPlainObject:wv,isUndefined:nx,isDate:rY,isFile:nY,isBlob:oY,isFunction:$M,isStream:iY,isURLSearchParams:sY,isStandardBrowserEnv:cY,forEach:ox,merge:ix,extend:uY,trim:aY,stripBOM:lY}});var Cv=$((fme,BM)=>{"use strict";var _l=Mr();function qM(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}BM.exports=function(t,r,n){if(!r)return t;var o;if(n)o=n(r);else if(_l.isURLSearchParams(r))o=r.toString();else{var i=[];_l.forEach(r,function(c,u){c===null||typeof c=="undefined"||(_l.isArray(c)?u=u+"[]":c=[c],_l.forEach(c,function(d){_l.isDate(d)?d=d.toISOString():_l.isObject(d)&&(d=JSON.stringify(d)),i.push(qM(u)+"="+qM(d))}))}),o=i.join("&")}if(o){var s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}});var WM=$((pme,VM)=>{"use strict";var dY=Mr();function Ev(){this.handlers=[]}Ev.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Ev.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Ev.prototype.forEach=function(t){dY.forEach(this.handlers,function(n){n!==null&&t(n)})};VM.exports=Ev});var zM=$((mme,GM)=>{"use strict";var fY=Mr();GM.exports=function(t,r){fY.forEach(t,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[i])})}});var _v=$((hme,KM)=>{"use strict";KM.exports=function(t,r,n,o,i){return t.config=r,n&&(t.code=n),t.request=o,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var bv=$((gme,QM)=>{"use strict";var pY=_v();QM.exports=function(t,r,n,o,i){var s=new Error(t);return pY(s,r,n,o,i)}});var sx=$((vme,YM)=>{"use strict";var mY=bv();YM.exports=function(t,r,n){var o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):r(mY("Request failed with status code "+n.status,n.config,null,n.request,n))}});var XM=$((yme,JM)=>{"use strict";var xv=Mr();JM.exports=xv.isStandardBrowserEnv()?function(){return{write:function(r,n,o,i,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),xv.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),xv.isString(i)&&c.push("path="+i),xv.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var eU=$((wme,ZM)=>{"use strict";ZM.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var rU=$((Cme,tU)=>{"use strict";tU.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var ax=$((Eme,nU)=>{"use strict";var hY=eU(),gY=rU();nU.exports=function(t,r){return t&&!hY(r)?gY(t,r):r}});var iU=$((_me,oU)=>{"use strict";var cx=Mr(),vY=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];oU.exports=function(t){var r={},n,o,i;return t&&cx.forEach(t.split(`
`),function(a){if(i=a.indexOf(":"),n=cx.trim(a.substr(0,i)).toLowerCase(),o=cx.trim(a.substr(i+1)),n){if(r[n]&&vY.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([o]):r[n]=r[n]?r[n]+", "+o:o}}),r}});var cU=$((bme,aU)=>{"use strict";var sU=Mr();aU.exports=sU.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function o(i){var s=i;return t&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(s){var a=sU.isString(s)?o(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var bl=$((xme,uU)=>{"use strict";function ux(e){this.message=e}ux.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ux.prototype.__CANCEL__=!0;uU.exports=ux});var dU=$((Sme,lU)=>{"use strict";var Sv=Mr(),yY=sx(),wY=XM(),CY=Cv(),EY=ax(),_Y=iU(),bY=cU(),lx=bv(),xY=xl(),SY=bl();lU.exports=function(t){return new Promise(function(n,o){var i=t.data,s=t.headers,a=t.responseType,c;function u(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}Sv.isFormData(i)&&delete s["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",f=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+f)}var p=EY(t.baseURL,t.url);l.open(t.method.toUpperCase(),CY(p,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function m(){if(!!l){var g="getAllResponseHeaders"in l?_Y(l.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?l.responseText:l.response,w={data:v,status:l.status,statusText:l.statusText,headers:g,config:t,request:l};yY(function(E){n(E),u()},function(E){o(E),u()},w),l=null}}if("onloadend"in l?l.onloadend=m:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(m)},l.onabort=function(){!l||(o(lx("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){o(lx("Network Error",t,null,l)),l=null},l.ontimeout=function(){var v="timeout of "+t.timeout+"ms exceeded",w=t.transitional||xY.transitional;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),o(lx(v,t,w.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},Sv.isStandardBrowserEnv()){var h=(t.withCredentials||bY(p))&&t.xsrfCookieName?wY.read(t.xsrfCookieName):void 0;h&&(s[t.xsrfHeaderName]=h)}"setRequestHeader"in l&&Sv.forEach(s,function(v,w){typeof i=="undefined"&&w.toLowerCase()==="content-type"?delete s[w]:l.setRequestHeader(w,v)}),Sv.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),a&&a!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(c=function(g){!l||(o(!g||g&&g.type?new SY("canceled"):g),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c))),i||(i=null),l.send(i)})}});var Pv=$((Pme,fU)=>{fU.exports={version:"0.22.0"}});var yU=$((Ime,vU)=>{"use strict";var Qf=Mr(),pU=sx(),PY=ax(),IY=Cv(),TY=require("http"),kY=require("https"),DY=Nc().http,RY=Nc().https,mU=require("url"),AY=require("zlib"),OY=Pv().version,Iv=bv(),dx=_v(),NY=xl(),LY=bl(),hU=/https:?/;function gU(e,t,r){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth){var n=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+n}e.beforeRedirect=function(i){i.headers.host=i.host,gU(i,t,i.href)}}vU.exports=function(t){return new Promise(function(n,o){var i;function s(){t.cancelToken&&t.cancelToken.unsubscribe(i),t.signal&&t.signal.removeEventListener("abort",i)}var a=function(K){s(),n(K)},c=function(K){s(),o(K)},u=t.data,l=t.headers,d={};if(Object.keys(l).forEach(function(K){d[K.toLowerCase()]=K}),"user-agent"in d?l[d["user-agent"]]||delete l[d["user-agent"]]:l["User-Agent"]="axios/"+OY,u&&!Qf.isStream(u)){if(!Buffer.isBuffer(u))if(Qf.isArrayBuffer(u))u=Buffer.from(new Uint8Array(u));else if(Qf.isString(u))u=Buffer.from(u,"utf-8");else return c(Iv("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));d["content-length"]||(l["Content-Length"]=u.length)}var f=void 0;if(t.auth){var p=t.auth.username||"",m=t.auth.password||"";f=p+":"+m}var h=PY(t.baseURL,t.url),g=mU.parse(h),v=g.protocol||"http:";if(!f&&g.auth){var w=g.auth.split(":"),C=w[0]||"",E=w[1]||"";f=C+":"+E}f&&d.authorization&&delete l[d.authorization];var b=hU.test(v),I=b?t.httpsAgent:t.httpAgent,T={path:IY(g.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:l,agent:I,agents:{http:t.httpAgent,https:t.httpsAgent},auth:f};t.socketPath?T.socketPath=t.socketPath:(T.hostname=g.hostname,T.port=g.port);var P=t.proxy;if(!P&&P!==!1){var S=v.slice(0,-1)+"_proxy",k=process.env[S]||process.env[S.toUpperCase()];if(k){var A=mU.parse(k),N=process.env.no_proxy||process.env.NO_PROXY,z=!0;if(N){var Q=N.split(",").map(function(K){return K.trim()});z=!Q.some(function(K){return K?K==="*"||K[0]==="."&&g.hostname.substr(g.hostname.length-K.length)===K?!0:g.hostname===K:!1})}if(z&&(P={host:A.hostname,port:A.port,protocol:A.protocol},A.auth)){var ee=A.auth.split(":");P.auth={username:ee[0],password:ee[1]}}}}P&&(T.headers.host=g.hostname+(g.port?":"+g.port:""),gU(T,P,v+"//"+g.hostname+(g.port?":"+g.port:"")+T.path));var ne,U=b&&(P?hU.test(P.protocol):!0);t.transport?ne=t.transport:t.maxRedirects===0?ne=U?kY:TY:(t.maxRedirects&&(T.maxRedirects=t.maxRedirects),ne=U?RY:DY),t.maxBodyLength>-1&&(T.maxBodyLength=t.maxBodyLength),t.insecureHTTPParser&&(T.insecureHTTPParser=t.insecureHTTPParser);var L=ne.request(T,function(K){if(!L.aborted){var Y=K,Z=K.req||L;if(K.statusCode!==204&&Z.method!=="HEAD"&&t.decompress!==!1)switch(K.headers["content-encoding"]){case"gzip":case"compress":case"deflate":Y=Y.pipe(AY.createUnzip()),delete K.headers["content-encoding"];break}var me={status:K.statusCode,statusText:K.statusMessage,headers:K.headers,config:t,request:Z};if(t.responseType==="stream")me.data=Y,pU(a,c,me);else{var Ee=[],_e=0;Y.on("data",function(Ce){Ee.push(Ce),_e+=Ce.length,t.maxContentLength>-1&&_e>t.maxContentLength&&(Y.destroy(),c(Iv("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,Z)))}),Y.on("error",function(Ce){L.aborted||c(dx(Ce,t,null,Z))}),Y.on("end",function(){var Ce=Buffer.concat(Ee);t.responseType!=="arraybuffer"&&(Ce=Ce.toString(t.responseEncoding),(!t.responseEncoding||t.responseEncoding==="utf8")&&(Ce=Qf.stripBOM(Ce))),me.data=Ce,pU(a,c,me)})}}});if(L.on("error",function(K){L.aborted&&K.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(dx(K,t,null,L))}),t.timeout){var D=parseInt(t.timeout,10);if(isNaN(D)){c(Iv("error trying to parse `config.timeout` to int",t,"ERR_PARSE_TIMEOUT",L));return}L.setTimeout(D,function(){L.abort();var K=t.transitional||NY.transitional;c(Iv("timeout of "+D+"ms exceeded",t,K.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",L))})}(t.cancelToken||t.signal)&&(i=function(j){L.aborted||(L.abort(),c(!j||j&&j.type?new LY("canceled"):j))},t.cancelToken&&t.cancelToken.subscribe(i),t.signal&&(t.signal.aborted?i():t.signal.addEventListener("abort",i))),Qf.isStream(u)?u.on("error",function(K){c(dx(K,t,null,L))}).pipe(L):L.end(u)})}});var xl=$((Tme,EU)=>{"use strict";var yr=Mr(),wU=zM(),FY=_v(),MY={"Content-Type":"application/x-www-form-urlencoded"};function CU(e,t){!yr.isUndefined(e)&&yr.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function UY(){var e;return typeof XMLHttpRequest!="undefined"?e=dU():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=yU()),e}function jY(e,t,r){if(yr.isString(e))try{return(t||JSON.parse)(e),yr.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var Tv={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:UY(),transformRequest:[function(t,r){return wU(r,"Accept"),wU(r,"Content-Type"),yr.isFormData(t)||yr.isArrayBuffer(t)||yr.isBuffer(t)||yr.isStream(t)||yr.isFile(t)||yr.isBlob(t)?t:yr.isArrayBufferView(t)?t.buffer:yr.isURLSearchParams(t)?(CU(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):yr.isObject(t)||r&&r["Content-Type"]==="application/json"?(CU(r,"application/json"),jY(t)):t}],transformResponse:[function(t){var r=this.transitional||Tv.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&yr.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(i)throw s.name==="SyntaxError"?FY(s,this,"E_JSON_PARSE"):s}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};yr.forEach(["delete","get","head"],function(t){Tv.headers[t]={}});yr.forEach(["post","put","patch"],function(t){Tv.headers[t]=yr.merge(MY)});EU.exports=Tv});var bU=$((kme,_U)=>{"use strict";var $Y=Mr(),HY=xl();_U.exports=function(t,r,n){var o=this||HY;return $Y.forEach(n,function(s){t=s.call(o,t,r)}),t}});var fx=$((Dme,xU)=>{"use strict";xU.exports=function(t){return!!(t&&t.__CANCEL__)}});var IU=$((Rme,PU)=>{"use strict";var SU=Mr(),px=bU(),qY=fx(),BY=xl(),VY=bl();function mx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new VY("canceled")}PU.exports=function(t){mx(t),t.headers=t.headers||{},t.data=px.call(t,t.data,t.headers,t.transformRequest),t.headers=SU.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),SU.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||BY.adapter;return r(t).then(function(o){return mx(t),o.data=px.call(t,o.data,o.headers,t.transformResponse),o},function(o){return qY(o)||(mx(t),o&&o.response&&(o.response.data=px.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})}});var hx=$((Ame,TU)=>{"use strict";var xn=Mr();TU.exports=function(t,r){r=r||{};var n={};function o(l,d){return xn.isPlainObject(l)&&xn.isPlainObject(d)?xn.merge(l,d):xn.isPlainObject(d)?xn.merge({},d):xn.isArray(d)?d.slice():d}function i(l){if(xn.isUndefined(r[l])){if(!xn.isUndefined(t[l]))return o(void 0,t[l])}else return o(t[l],r[l])}function s(l){if(!xn.isUndefined(r[l]))return o(void 0,r[l])}function a(l){if(xn.isUndefined(r[l])){if(!xn.isUndefined(t[l]))return o(void 0,t[l])}else return o(void 0,r[l])}function c(l){if(l in r)return o(t[l],r[l]);if(l in t)return o(void 0,t[l])}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return xn.forEach(Object.keys(t).concat(Object.keys(r)),function(d){var f=u[d]||i,p=f(d);xn.isUndefined(p)&&f!==c||(n[d]=p)}),n}});var RU=$((Ome,DU)=>{"use strict";var WY=Pv().version,gx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){gx[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var kU={};gx.transitional=function(t,r,n){function o(i,s){return"[Axios v"+WY+"] Transitional option '"+i+"'"+s+(n?". "+n:"")}return function(i,s,a){if(t===!1)throw new Error(o(s," has been removed"+(r?" in "+r:"")));return r&&!kU[s]&&(kU[s]=!0,console.warn(o(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,s,a):!0}};function GY(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-- >0;){var i=n[o],s=t[i];if(s){var a=e[i],c=a===void 0||s(a,i,e);if(c!==!0)throw new TypeError("option "+i+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+i)}}DU.exports={assertOptions:GY,validators:gx}});var MU=$((Nme,FU)=>{"use strict";var AU=Mr(),zY=Cv(),OU=WM(),NU=IU(),kv=hx(),LU=RU(),Sl=LU.validators;function Yf(e){this.defaults=e,this.interceptors={request:new OU,response:new OU}}Yf.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=kv(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&LU.assertOptions(r,{silentJSONParsing:Sl.transitional(Sl.boolean),forcedJSONParsing:Sl.transitional(Sl.boolean),clarifyTimeoutError:Sl.transitional(Sl.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(o=o&&f.synchronous,n.unshift(f.fulfilled,f.rejected))});var i=[];this.interceptors.response.forEach(function(f){i.push(f.fulfilled,f.rejected)});var s;if(!o){var a=[NU,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(i),s=Promise.resolve(t);a.length;)s=s.then(a.shift(),a.shift());return s}for(var c=t;n.length;){var u=n.shift(),l=n.shift();try{c=u(c)}catch(d){l(d);break}}try{s=NU(c)}catch(d){return Promise.reject(d)}for(;i.length;)s=s.then(i.shift(),i.shift());return s};Yf.prototype.getUri=function(t){return t=kv(this.defaults,t),zY(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};AU.forEach(["delete","get","head","options"],function(t){Yf.prototype[t]=function(r,n){return this.request(kv(n||{},{method:t,url:r,data:(n||{}).data}))}});AU.forEach(["post","put","patch"],function(t){Yf.prototype[t]=function(r,n,o){return this.request(kv(o||{},{method:t,url:r,data:n}))}});FU.exports=Yf});var jU=$((Lme,UU)=>{"use strict";var KY=bl();function Pl(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(o){t=o});var r=this;this.promise.then(function(n){if(!!r._listeners){var o,i=r._listeners.length;for(o=0;o<i;o++)r._listeners[o](n);r._listeners=null}}),this.promise.then=function(n){var o,i=new Promise(function(s){r.subscribe(s),o=s}).then(n);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o){r.reason||(r.reason=new KY(o),t(r.reason))})}Pl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Pl.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Pl.prototype.unsubscribe=function(t){if(!!this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};Pl.source=function(){var t,r=new Pl(function(o){t=o});return{token:r,cancel:t}};UU.exports=Pl});var HU=$((Fme,$U)=>{"use strict";$U.exports=function(t){return function(n){return t.apply(null,n)}}});var BU=$((Mme,qU)=>{"use strict";qU.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var GU=$((Ume,vx)=>{"use strict";var VU=Mr(),QY=tx(),Dv=MU(),YY=hx(),JY=xl();function WU(e){var t=new Dv(e),r=QY(Dv.prototype.request,t);return VU.extend(r,Dv.prototype,t),VU.extend(r,t),r.create=function(o){return WU(YY(e,o))},r}var ti=WU(JY);ti.Axios=Dv;ti.Cancel=bl();ti.CancelToken=jU();ti.isCancel=fx();ti.VERSION=Pv().version;ti.all=function(t){return Promise.all(t)};ti.spread=HU();ti.isAxiosError=BU();vx.exports=ti;vx.exports.default=ti});var KU=$((jme,zU)=>{zU.exports=GU()});var YU=$(yx=>{"use strict";Object.defineProperty(yx,"__esModule",{value:!0});var XY=KU(),QU=class{constructor(t){this.endpoint=t}get(t){return XY.default.get(this.endpoint,Object.assign(Object.assign({},t),{proxy:!1}))}};yx.AxiosHttpClient=QU});var XU=$(wx=>{"use strict";Object.defineProperty(wx,"__esModule",{value:!0});var JU=class{constructor(){this.storage=new Map}async getValue(t,r){return this.storage.has(t)?await Promise.resolve(this.storage.get(t)):await Promise.resolve(r||void 0)}setValue(t,r){this.storage.set(t,r)}};wx.MemoryKeyValueStorage=JU});var ej=$(Cx=>{"use strict";Object.defineProperty(Cx,"__esModule",{value:!0});var ZY=XU(),ZU=class{constructor(t,r,n,o,i,s){this.telemetry=t,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=o,this.storageKey=i,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new ZY.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,c)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(t){this._features=t,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(t=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,t)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(t,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let o of t){for(let i of o.features)n.features.includes(i)||n.features.push(i);for(let i of o.configs){let s=n.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):n.configs.push(i)}n.assignmentContext+=o.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let t;this.storage&&(t=await this.storage.getValue(this.storageKey),t!==void 0&&t.configs===void 0&&(t.configs=[])),this.features.features.length===0&&(this.features=t||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(t){return this.featuresConsumed=!0,this.PostEventToTelemetry(t),this.features.features.includes(t)}async isCachedFlightEnabled(t){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(t),this.features.features.includes(t)}async isFlightEnabledAsync(t){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(t),r.features.includes(t)}getTreatmentVariable(t,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${t}.${r}`),(n=this.features.configs.find(i=>i.Id===t))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(t,r,n){if(n){let o=this.featuresConsumed,i=this.getTreatmentVariable(t,r);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(t,r)}PostEventToTelemetry(t){this.cachedTelemetryEvents.includes(t)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",t]])),this.cachedTelemetryEvents.push(t))}invokeInit(){this.init()}addFeatureProvider(...t){if(!(t==null||this.featureProviders==null))for(let r of t)this.featureProviders.push(r)}};Cx.ExperimentationServiceBase=ZU});var rj=$(Ex=>{"use strict";Object.defineProperty(Ex,"__esModule",{value:!0});var tj=class{constructor(t){this.fetchInterval=t}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(t){this.onTick=t}StartPolling(t=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(t&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};Ex.PollingService=tj});var oj=$(_x=>{"use strict";Object.defineProperty(_x,"__esModule",{value:!0});var eJ=ej(),tJ=rj(),nj=class extends eJ.ExperimentationServiceBase{constructor(t,r,n,o,i,s,a,c){super(t,o,i,s,a,c);if(this.telemetry=t,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=o,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new tJ.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(t=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(t);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(t)}};_x.ExperimentationServiceAutoPolling=nj});var ij=$(xx=>{"use strict";Object.defineProperty(xx,"__esModule",{value:!0});var rJ=MM(),nJ=YU(),oJ=oj(),bx=class extends oJ.ExperimentationServiceAutoPolling{constructor(t){super(t.telemetry,t.filterProviders||[],t.refetchInterval!=null?t.refetchInterval:0,t.featuresTelemetryPropertyName,t.assignmentContextTelemetryPropertyName,t.telemetryEventName,t.storageKey,t.keyValueStorage);this.options=t,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new rJ.TasApiFeatureProvider(new nJ.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};xx.ExperimentationService=bx;bx.REFRESH_RATE_IN_MINUTES=30});var sj=$(Sx=>{"use strict";Object.defineProperty(Sx,"__esModule",{value:!0});var iJ=ij();Sx.ExperimentationService=iJ.ExperimentationService});var cj=$(Px=>{"use strict";Object.defineProperty(Px,"__esModule",{value:!0});var aj=class{constructor(t){this.mementoGlobalStorage=t}async getValue(t,r){return await this.mementoGlobalStorage.get(t)||r}setValue(t,r){this.mementoGlobalStorage.update(t,r)}};Px.MementoKeyValueStorage=aj});var lj=$(Ix=>{"use strict";Object.defineProperty(Ix,"__esModule",{value:!0});var uj=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(t){return!1}isCachedFlightEnabled(t){return Promise.resolve(!1)}isFlightEnabledAsync(t){return Promise.resolve(!1)}getTreatmentVariable(t,r){}getTreatmentVariableAsync(t,r){return Promise.resolve(void 0)}};Ix.default=uj});var fj=$(Rv=>{"use strict";Object.defineProperty(Rv,"__esModule",{value:!0});var sJ=Jb(),aJ=sj(),Tx=require("vscode"),cJ=cj(),uJ=lj(),lJ="https://default.exp-tas.com/vscode/ab",dJ="query-expfeature",fJ="VSCode.ABExp.Features",pJ="abexp.assignmentcontext",mJ="VSCode.ABExp.FeatureData",hJ=1e3*60*30;function dj(e,t,r,n,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=Tx.workspace.getConfiguration("telemetry");if(!(Tx.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):Tx.env.isTelemetryEnabled))return new uJ.default;let u=[new sJ.VSCodeFilterProvider(e,t,r),...i],l=new cJ.MementoKeyValueStorage(o);return new aJ.ExperimentationService({filterProviders:u,telemetry:n,storageKey:mJ,keyValueStorage:l,featuresTelemetryPropertyName:fJ,assignmentContextTelemetryPropertyName:pJ,telemetryEventName:dJ,endpoint:lJ,refetchInterval:hJ})}Rv.getExperimentationService=dj;async function gJ(e,t,r,n,o,...i){let s=dj(e,t,r,n,o,...i);return await s.initializePromise,s}Rv.getExperimentationServiceAsync=gJ});var mj=$(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var pj=fj();Jf.getExperimentationService=pj.getExperimentationService;Jf.getExperimentationServiceAsync=pj.getExperimentationServiceAsync;var vJ=Jb();Jf.TargetPopulation=vJ.TargetPopulation});var Z$=$((xwe,HX)=>{HX.exports={name:"remote-containers",displayName:"Dev Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.266.1",preview:!0,publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.71.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","onCommand:remote-containers.reopenInContainer","onCommand:remote-containers.rebuildAndReopenInContainer","onCommand:remote-containers.rebuildNoCacheAndReopenInContainer","onCommand:remote-containers.reopenLocally","onCommand:remote-containers.reopenInWSL","onCommand:remote-containers.reopenInSSH","onCommand:remote-containers.openFolder","onCommand:remote-containers.openRepositoryInVolume","onCommand:remote-containers.openRepositoryInUniqueVolume","onCommand:remote-containers.openRepositoryFromRemoteHubWithEditSession","onCommand:remote-containers.openPullRequestInVolume","onCommand:remote-containers.createDevContainer","onCommand:remote-containers.inspectVolume","onCommand:remote-containers.inspectVolumeFromViewlet","onCommand:remote-containers.inspectInBasicDevContainer","onCommand:remote-containers.cloneInVolumeFromViewlet","onCommand:remote-containers.pruneVolumes","onCommand:remote-containers.openWorkspace","onCommand:remote-containers.attachToRunningContainer","onCommand:remote-containers.attachToRunningContainerFromViewlet","onCommand:remote-containers.attachToK8sContainerFromViewlet","onCommand:remote-containers.checkoutPRInVolume","onCommand:remote-containers.rebuildContainer","onCommand:remote-containers.rebuildContainerNoCache","onCommand:remote-containers.createDevContainerFile","onCommand:remote-containers.openDevContainerFile","onCommand:remote-containers.openAttachDevContainerFile","onCommand:remote-containers.settings","onCommand:remote-containers.getHelp","onCommand:remote-containers.getStarted","onCommand:remote-containers.trySample","onCommand:remote-containers.reportIssue","onCommand:remote-containers.provideFeedback","onCommand:remote-containers.revealLogTerminal","onCommand:remote-containers.openLogFile","onCommand:remote-containers.openLastLogFile","onCommand:remote-containers.addExtensionToConfig","onCommand:remote-containers.showReopenInContainerNotificationReset","onCommand:remote-containers.showRecoveryContainerNotificationReset","onCommand:remote-containers.labelPortAndUpdateConfig","onCommand:remote-containers.installDocker","onCommand:remote-containers.installUserCLI","onCommand:remote-containers.configureContainerFeatures","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost","onView:targetsContainers"],main:"./dist/extension/extension",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"Continue Working in a Container Volume"}],languages:[{id:"jsonc",filenames:["devcontainer-features.json"]}],jsonValidation:[{fileMatch:"devcontainer-features.json",url:"./schemas/devcontainer-features.schema.json"}],configuration:{title:"Dev Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"Use 'dev.containers.defaultExtensions' instead.",markdownDeprecationMessage:"Use `#dev.containers.defaultExtensions#` instead."},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"Configures the list of features to always install while creating a container.",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"Use 'dev.containers.workspaceMountConsistency' instead.",markdownDeprecationMessage:"Use `#dev.containers.workspaceMountConsistency#` instead."},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"Use 'dev.containers.cacheVolume' instead.",markdownDeprecationMessage:"Use `#dev.containers.cacheVolume#` instead."},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"Use 'dev.containers.copyGitConfig' instead.",markdownDeprecationMessage:"Use `#dev.containers.copyGitConfig#` instead."},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"Use 'dev.containers.gitCredentialHelperConfigLocation' instead.",markdownDeprecationMessage:"Use `#dev.containers.gitCredentialHelperConfigLocation#` instead."},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",deprecationMessage:"Use 'dev.containers.logLevel' instead.",markdownDeprecationMessage:"Use `#dev.containers.logLevel#` instead."},"dev.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"Use 'dev.containers.dockerPath' instead.",markdownDeprecationMessage:"Use `#dev.containers.dockerPath#` instead."},"dev.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"Use 'dev.containers.dockerComposePath' instead.",markdownDeprecationMessage:"Use `#dev.containers.dockerComposePath#` instead."},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"Use 'dev.containers.executeInWSL' instead.",markdownDeprecationMessage:"Use `#dev.containers.executeInWSL#` instead."},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"Controls whether CLI commands should always be executed in WSL. The default is to only execute in WSL for workspace folders in WSL. This setting has no effect on other platforms than Windows.",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"Use 'dev.containers.executeInWSLDistro' instead.",markdownDeprecationMessage:"Use `#dev.containers.executeInWSLDistro#` instead."},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"WSL distro to use when not reopening a WSL folder. The default is to use the default WSL distro (see `wsl -l`). This setting has no effect when `#dev.containers.executeInWSL#` is not enabled or on other platforms than Windows."},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"Use 'dotfiles.repository' instead.",markdownDeprecationMessage:"Use `#dotfiles.repository#` instead."},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"Use 'dotfiles.installCommand' instead.",markdownDeprecationMessage:"Use `#dotfiles.installCommand#` instead."},"remote.containers.dotfiles.targetPath":{scope:"machine",description:"Deprecated setting. Use 'dotfiles.targetPath' instead.",deprecationMessage:"Use 'dotfiles.targetPath' instead.",markdownDeprecationMessage:"Use `#dotfiles.targetPath#` instead."},"remote.containers.repositoryConfigurationPaths":{scope:"application",description:"Deprecated setting. Use 'dev.containers.repositoryConfigurationPaths' instead.",deprecationMessage:"Use 'dev.containers.repositoryConfigurationPaths' instead.",markdownDeprecationMessage:"Use `#dev.containers.repositoryConfigurationPaths#` instead."},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Dev Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Dev Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Dev Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Dev Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Dev Containers"},{command:"remote-containers.reopenInSSH",title:"Reopen Folder in SSH",category:"Dev Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Dev Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Dev Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Dev Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Dev Containers"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Dev Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Dev Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Dev Container...",category:"Dev Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Dev Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Dev Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Dev Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Dev Container",category:"Dev Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Dev Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Dev Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Dev Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Dev Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Dev Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Dev Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Dev Container Configuration Files...",category:"Dev Containers"},{command:"remote-containers.createDevContainer",title:"Create Dev Container...",category:"Dev Containers"},{command:"remote-containers.settings",title:"Settings for Dev Containers",category:"Dev Containers"},{command:"remote-containers.getHelp",title:"Help for Dev Containers",category:"Dev Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Dev Containers",category:"Dev Containers"},{command:"remote-containers.trySample",title:"Try a Dev Container Sample...",category:"Dev Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Dev Containers...",category:"Dev Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Dev Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Dev Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Dev Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Dev Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Dev Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Dev Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Dev Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Dev Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Dev Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Dev Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Dev Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Dev Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Dev Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Dev Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Dev Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Dev Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Dev Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Dev Container",category:"Dev Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Dev Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Dev Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Dev Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Dev Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Dev Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Dev Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Dev Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Dev Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Dev Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Dev Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Dev Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features...",category:"Dev Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenLocally",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.createDevContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@4",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@6",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@7",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@8",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@9",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@9",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_1_actions@1",when:"canReopenInSSH"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"canReopenLocally"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@10",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Dev Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Dev Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist definitions compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist definitions compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npx npm-run-all --npm-path npm definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":"copy-and-watch node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js dist/spec-node/","watch-cli":"copy-and-watch --watch node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js dist/spec-node/","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --up 3 --all "node_modules/@devcontainers/cli/node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --up 3 --all "node_modules/@devcontainers/cli/node_modules/vscode-dev-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --up 3 --all "node_modules/@devcontainers/cli/node_modules/vscode-dev-containers/**/*" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},devDependencies:{"@types/chai":"^4.3.0","@types/follow-redirects":"^1.13.1","@types/js-yaml":"^4.0.5","@types/markdown-it":"^12.2.3","@types/minimist":"^1.2.2","@types/mocha":"^9.1.0","@types/ncp":"^2.0.5","@types/node":"^16.11.7","@types/pull-stream":"^3.6.2","@types/recursive-readdir":"^2.2.1","@types/semver":"^7.3.9","@types/shell-quote":"^1.7.1","@types/stats-lite":"^2.2.0","@types/tar":"^6.1.1","@types/uuid":"^8.3.4","@types/vscode":"^1.71.0","@types/yargs":"^17.0.8","@typescript-eslint/eslint-plugin":"^4.31.2","@typescript-eslint/parser":"^4.31.2",ajv:"^8.9.0",chai:"^4.3.4","copy-and-watch":"^0.1.6",copyfiles:"^2.4.1",esbuild:"^0.13.14",eslint:"^7.32.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^7.0.4",jsonc:"^2.0.0",mocha:"^9.2.1","mocha-junit-reporter":"^2.0.2","npm-run-all":"^4.1.5","p-all":"^4.0.0",rimraf:"^3.0.2","ts-node":"^10.4.0",typescript:"^4.5.5","typescript-formatter":"^7.2.2",vinyl:"^2.2.1","vinyl-fs":"^3.0.3",vsce:"^2.6.7"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#1289e4e9fd2e804df2cb5b58180129525c847dd6","@vscode/extension-telemetry":"^0.6.2",applicationinsights:"^2.2.0","find-process":"^1.4.7","follow-redirects":"^1.14.8","js-yaml":"^4.1.0","jsonc-parser":"^3.0.0","markdown-it":"^12.3.2",minimist:"^1.2.6",muxrpc:"^6.5.4","node-pty":"^0.10.1","pull-pushable":"^2.2.0","pull-stream":"^3.6.14","pull-stream-to-stream":"^2.0.0",semver:"^7.3.5","shell-quote":"^1.7.3","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.11",uuid:"^8.3.2","vscode-tas-client":"^0.1.27","vscode-uri":"^3.0.3",yaml:"^2.0.0-10",yargs:"~17.0.1"}}});yy(exports,{activate:()=>qX,attachToContainer:()=>ny,deactivate:()=>GX});var q=ie(require("vscode")),eH=ie(require("os")),sy=ie(require("fs")),or=ie(require("path")),tH=ie(require("querystring"));"use strict";function Hl(e,t){t===void 0&&(t=!1);var r=e.length,n=0,o="",i=0,s=16,a=0,c=0,u=0,l=0,d=0;function f(C,E){for(var b=0,I=0;b<C||!E;){var T=e.charCodeAt(n);if(T>=48&&T<=57)I=I*16+T-48;else if(T>=65&&T<=70)I=I*16+T-65+10;else if(T>=97&&T<=102)I=I*16+T-97+10;else break;n++,b++}return b<C&&(I=-1),I}function p(C){n=C,o="",i=0,s=16,d=0}function m(){var C=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&kc(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&kc(e.charCodeAt(n)))for(n++;n<e.length&&kc(e.charCodeAt(n));)n++;else return d=3,e.substring(C,n);var E=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&kc(e.charCodeAt(n))){for(n++;n<e.length&&kc(e.charCodeAt(n));)n++;E=n}else d=3;return e.substring(C,E)}function h(){for(var C="",E=n;;){if(n>=r){C+=e.substring(E,n),d=2;break}var b=e.charCodeAt(n);if(b===34){C+=e.substring(E,n),n++;break}if(b===92){if(C+=e.substring(E,n),n++,n>=r){d=2;break}var I=e.charCodeAt(n++);switch(I){case 34:C+='"';break;case 92:C+="\\";break;case 47:C+="/";break;case 98:C+="\b";break;case 102:C+="\f";break;case 110:C+=`
`;break;case 114:C+="\r";break;case 116:C+="	";break;case 117:var T=f(4,!0);T>=0?C+=String.fromCharCode(T):d=4;break;default:d=5}E=n;continue}if(b>=0&&b<=31)if(ql(b)){C+=e.substring(E,n),d=2;break}else d=6;n++}return C}function g(){if(o="",d=0,i=n,c=a,l=u,n>=r)return i=r,s=17;var C=e.charCodeAt(n);if(wy(C)){do n++,o+=String.fromCharCode(C),C=e.charCodeAt(n);while(wy(C));return s=15}if(ql(C))return n++,o+=String.fromCharCode(C),C===13&&e.charCodeAt(n)===10&&(n++,o+=`
`),a++,u=n,s=14;switch(C){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,o=h(),s=10;case 47:var E=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<r&&!ql(e.charCodeAt(n));)n++;return o=e.substring(E,n),s=12}if(e.charCodeAt(n+1)===42){n+=2;for(var b=r-1,I=!1;n<b;){var T=e.charCodeAt(n);if(T===42&&e.charCodeAt(n+1)===47){n+=2,I=!0;break}n++,ql(T)&&(T===13&&e.charCodeAt(n)===10&&n++,a++,u=n)}return I||(n++,d=1),o=e.substring(E,n),s=13}return o+=String.fromCharCode(C),n++,s=16;case 45:if(o+=String.fromCharCode(C),n++,n===r||!kc(e.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=m(),s=11;default:for(;n<r&&v(C);)n++,C=e.charCodeAt(n);if(i!==n){switch(o=e.substring(i,n),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(C),n++,s=16}}function v(C){if(wy(C)||ql(C))return!1;switch(C){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function w(){var C;do C=g();while(C>=12&&C<=15);return C}return{setPosition:p,getPosition:function(){return n},scan:t?w:g,getToken:function(){return s},getTokenValue:function(){return o},getTokenOffset:function(){return i},getTokenLength:function(){return n-i},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return i-l},getTokenError:function(){return d}}}function wy(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function ql(e){return e===10||e===13||e===8232||e===8233}function kc(e){return e>=48&&e<=57}"use strict";function Cy(e,t,r){var n,o,i,s,a;if(t){for(s=t.offset,a=s+t.length,i=s;i>0&&!Bl(e,i-1);)i--;for(var c=a;c<e.length&&!Bl(e,c);)c++;o=e.substring(i,c),n=XH(o,r)}else o=e,n=0,i=0,s=0,a=e.length;var u=ZH(r,e),l=!1,d=0,f;r.insertSpaces?f=Ey(" ",r.tabSize||4):f="	";var p=Hl(o,!1),m=!1;function h(){return u+Ey(f,n+d)}function g(){var N=p.scan();for(l=!1;N===15||N===14;)l=l||N===14,N=p.scan();return m=N===16||p.getTokenError()!==0,N}var v=[];function w(N,z,Q){!m&&(!t||z<a&&Q>s)&&e.substring(z,Q)!==N&&v.push({offset:z,length:Q-z,content:N})}var C=g();if(C!==17){var E=p.getTokenOffset()+i,b=Ey(f,n);w(b,i,E)}for(;C!==17;){for(var I=p.getTokenOffset()+p.getTokenLength()+i,T=g(),P="",S=!1;!l&&(T===12||T===13);){var k=p.getTokenOffset()+i;w(" ",I,k),I=p.getTokenOffset()+p.getTokenLength()+i,S=T===12,P=S?h():"",T=g()}if(T===2)C!==1&&(d--,P=h());else if(T===4)C!==3&&(d--,P=h());else{switch(C){case 3:case 1:d++,P=h();break;case 5:case 12:P=h();break;case 13:l?P=h():S||(P=" ");break;case 6:S||(P=" ");break;case 10:if(T===6){S||(P="");break}case 7:case 8:case 9:case 11:case 2:case 4:T===12||T===13?S||(P=" "):T!==5&&T!==17&&(m=!0);break;case 16:m=!0;break}l&&(T===12||T===13)&&(P=h())}T===17&&(P=r.insertFinalNewline?u:"");var A=p.getTokenOffset()+i;w(P,I,A),C=T}return v}function Ey(e,t){for(var r="",n=0;n<t;n++)r+=e;return r}function XH(e,t){for(var r=0,n=0,o=t.tabSize||4;r<e.length;){var i=e.charAt(r);if(i===" ")n++;else if(i==="	")n+=o;else break;r++}return Math.floor(n/o)}function ZH(e,t){for(var r=0;r<t.length;r++){var n=t.charAt(r);if(n==="\r")return r+1<t.length&&t.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return e&&e.eol||`
`}function Bl(e,t){return`\r
`.indexOf(e.charAt(t))!==-1}"use strict";var Vl;(function(e){e.DEFAULT={allowTrailingComma:!1}})(Vl||(Vl={}));function PS(e,t){var r=[],n=new Object,o=void 0,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,u,l,d){i.value=c,i.offset=u,i.length=l,i.type=d,i.colonOffset=void 0,o=i}try{wp(e,{onObjectBegin:function(c,u){if(t<=c)throw n;o=void 0,s=t>c,r.push("")},onObjectProperty:function(c,u,l){if(t<u||(a(c,u,l,"property"),r[r.length-1]=c,t<=u+l))throw n},onObjectEnd:function(c,u){if(t<=c)throw n;o=void 0,r.pop()},onArrayBegin:function(c,u){if(t<=c)throw n;o=void 0,r.push(0)},onArrayEnd:function(c,u){if(t<=c)throw n;o=void 0,r.pop()},onLiteralValue:function(c,u,l){if(t<u||(a(c,u,l,TS(c)),t<=u+l))throw n},onSeparator:function(c,u,l){if(t<=u)throw n;if(c===":"&&o&&o.type==="property")o.colonOffset=u,s=!1,o=void 0;else if(c===","){var d=r[r.length-1];typeof d=="number"?r[r.length-1]=d+1:(s=!0,r[r.length-1]=""),o=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:o,isAtPropertyKey:s,matches:function(c){for(var u=0,l=0;u<c.length&&l<r.length;l++)if(c[u]===r[l]||c[u]==="*")u++;else if(c[u]!=="**")return!1;return u===c.length}}}function IS(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=Vl.DEFAULT);var n=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):n!==null&&(o[n]=c)}var a={onObjectBegin:function(){var c={};s(c),i.push(o),o=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){o=i.pop()},onArrayBegin:function(){var c=[];s(c),i.push(o),o=c,n=null},onArrayEnd:function(){o=i.pop()},onLiteralValue:s,onError:function(c,u,l){t.push({error:c,offset:u,length:l})}};return wp(e,a,r),o[0]}function vp(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=Vl.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function i(c){return n.children.push(c),c}var s={onObjectBegin:function(c){n=i({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:function(c,u,l){n=i({type:"property",offset:u,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:u,length:l,parent:n})},onObjectEnd:function(c,u){o(c+u),n.length=c+u-n.offset,n=n.parent,o(c+u)},onArrayBegin:function(c,u){n=i({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:function(c,u){n.length=c+u-n.offset,n=n.parent,o(c+u)},onLiteralValue:function(c,u,l){i({type:TS(c),offset:u,length:l,parent:n,value:c}),o(u+l)},onSeparator:function(c,u,l){n.type==="property"&&(c===":"?n.colonOffset=u:c===","&&o(u))},onError:function(c,u,l){t.push({error:c,offset:u,length:l})}};wp(e,s,r);var a=n.children[0];return a&&delete a.parent,a}function Wl(e,t){if(!!e){for(var r=e,n=0,o=t;n<o.length;n++){var i=o[n];if(typeof i=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var u=c[a];if(Array.isArray(u.children)&&u.children[0].value===i){r=u.children[1],s=!0;break}}if(!s)return}else{var l=i;if(r.type!=="array"||l<0||!Array.isArray(r.children)||l>=r.children.length)return;r=r.children[l]}}return r}}function yp(e){switch(e.type){case"array":return e.children.map(yp);case"object":for(var t=Object.create(null),r=0,n=e.children;r<n.length;r++){var o=n[r],i=o.children[1];i&&(t[o.children[0].value]=yp(i))}return t;case"null":case"string":case"number":case"boolean":return e.value;default:return}}function wp(e,t,r){r===void 0&&(r=Vl.DEFAULT);var n=Hl(e,!1);function o(S){return S?function(){return S(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function i(S){return S?function(k){return S(k,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=o(t.onObjectBegin),a=i(t.onObjectProperty),c=o(t.onObjectEnd),u=o(t.onArrayBegin),l=o(t.onArrayEnd),d=i(t.onLiteralValue),f=i(t.onSeparator),p=o(t.onComment),m=i(t.onError),h=r&&r.disallowComments,g=r&&r.allowTrailingComma;function v(){for(;;){var S=n.scan();switch(n.getTokenError()){case 4:w(14);break;case 5:w(15);break;case 3:w(13);break;case 1:h||w(11);break;case 2:w(12);break;case 6:w(16);break}switch(S){case 12:case 13:h?w(10):p();break;case 16:w(1);break;case 15:case 14:break;default:return S}}}function w(S,k,A){if(k===void 0&&(k=[]),A===void 0&&(A=[]),m(S),k.length+A.length>0)for(var N=n.getToken();N!==17;){if(k.indexOf(N)!==-1){v();break}else if(A.indexOf(N)!==-1)break;N=v()}}function C(S){var k=n.getTokenValue();return S?d(k):a(k),v(),!0}function E(){switch(n.getToken()){case 11:var S=n.getTokenValue(),k=Number(S);isNaN(k)&&(w(2),k=0),d(k);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return v(),!0}function b(){return n.getToken()!==10?(w(3,[],[2,5]),!1):(C(!1),n.getToken()===6?(f(":"),v(),P()||w(4,[],[2,5])):w(5,[],[2,5]),!0)}function I(){s(),v();for(var S=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(S||w(4,[],[]),f(","),v(),n.getToken()===2&&g)break}else S&&w(6,[],[]);b()||w(4,[],[2,5]),S=!0}return c(),n.getToken()!==2?w(7,[2],[]):v(),!0}function T(){u(),v();for(var S=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(S||w(4,[],[]),f(","),v(),n.getToken()===4&&g)break}else S&&w(6,[],[]);P()||w(4,[],[4,5]),S=!0}return l(),n.getToken()!==4?w(8,[4],[]):v(),!0}function P(){switch(n.getToken()){case 3:return T();case 1:return I();case 10:return C(!0);default:return E()}}return v(),n.getToken()===17?r.allowEmptyContent?!0:(w(4,[],[]),!1):P()?(n.getToken()!==17&&w(9,[],[]),!0):(w(4,[],[]),!1)}function TS(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(e){if(Array.isArray(e))return"array"}else return"null";return"object"}default:return"null"}}"use strict";function kS(e,t,r,n){for(var o,i=t.slice(),s=[],a=vp(e,s),c=void 0,u=void 0;i.length>0&&(u=i.pop(),c=Wl(a,i),c===void 0&&r!==void 0);)typeof u=="string"?r=(o={},o[u]=r,o):r=[r];if(c)if(c.type==="object"&&typeof u=="string"&&Array.isArray(c.children)){var l=Wl(c,[u]);if(l!==void 0)if(r===void 0){if(!l.parent)throw new Error("Malformed AST");var d=c.children.indexOf(l.parent),f=void 0,p=l.parent.offset+l.parent.length;if(d>0){var m=c.children[d-1];f=m.offset+m.length}else if(f=c.offset+1,c.children.length>1){var h=c.children[1];p=h.offset}return aa(e,{offset:f,length:p-f,content:""},n)}else return aa(e,{offset:l.offset,length:l.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];var g=JSON.stringify(u)+": "+JSON.stringify(r),v=n.getInsertionIndex?n.getInsertionIndex(c.children.map(function(S){return S.children[0].value})):c.children.length,w=void 0;if(v>0){var m=c.children[v-1];w={offset:m.offset+m.length,length:0,content:","+g}}else c.children.length===0?w={offset:c.offset+1,length:0,content:g}:w={offset:c.offset+1,length:0,content:g+","};return aa(e,w,n)}}else if(c.type==="array"&&typeof u=="number"&&Array.isArray(c.children)){var C=u;if(C===-1){var g=""+JSON.stringify(r),w=void 0;if(c.children.length===0)w={offset:c.offset+1,length:0,content:g};else{var m=c.children[c.children.length-1];w={offset:m.offset+m.length,length:0,content:","+g}}return aa(e,w,n)}else if(r===void 0&&c.children.length>=0){var E=u,b=c.children[E],w=void 0;if(c.children.length===1)w={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===E){var m=c.children[E-1],I=m.offset+m.length,T=c.offset+c.length;w={offset:I,length:T-2-I,content:""}}else w={offset:b.offset,length:c.children[E+1].offset-b.offset,content:""};return aa(e,w,n)}else if(r!==void 0){var w=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&c.children.length>u){var P=c.children[u];w={offset:P.offset,length:P.length,content:g}}else if(c.children.length===0||u===0)w={offset:c.offset+1,length:0,content:c.children.length===0?g:g+","};else{var v=u>c.children.length?c.children.length:u,m=c.children[v-1];w={offset:m.offset+m.length,length:0,content:","+g}}return aa(e,w,n)}else throw new Error("Can not "+(r===void 0?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+C+" as length is not sufficient")}else throw new Error("Can not add "+(typeof u!="number"?"index":"property")+" to parent of type "+c.type);else{if(r===void 0)throw new Error("Can not delete in empty document");return aa(e,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function aa(e,t,r){if(!r.formattingOptions)return[t];var n=Cp(e,t),o=t.offset,i=t.offset+t.content.length;if(t.length===0||t.content.length===0){for(;o>0&&!Bl(n,o-1);)o--;for(;i<n.length&&!Bl(n,i);)i++}for(var s=Cy(n,{offset:o,length:i-o},r.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];n=Cp(n,c),o=Math.min(o,c.offset),i=Math.max(i,c.offset+c.length),i+=c.content.length-c.length}var u=e.length-(n.length-i)-o;return[{offset:o,length:u,content:n.substring(o,i)}]}function Cp(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}"use strict";var DS=PS,Rt=IS,Ep=vp,Vi=Wl;var _p=yp;function ir(e,t,r,n){return kS(e,t,r,n)}function Rn(e,t){for(var r=t.length-1;r>=0;r--)e=Cp(e,t[r]);return e}var Lt=ie(require("fs")),Oo=ie(require("util"));function Jt(e){return new Promise(t=>Lt.stat(e,(r,n)=>t(!r&&n.isFile())))}function RS(e){return new Promise(t=>Lt.stat(e,(r,n)=>t(!r&&n.isDirectory())))}var vt=(0,Oo.promisify)(Lt.readFile),bp=(0,Oo.promisify)(Lt.writeFile),AZ=(0,Oo.promisify)(Lt.appendFile),ai=(0,Oo.promisify)(Lt.rename),Wi=(0,Oo.promisify)(Lt.readdir),AS=(0,Oo.promisify)(Lt.unlink),oo=e=>new Promise((t,r)=>Lt.mkdir(e,{recursive:!0},n=>n?r(n):t())),OS=(0,Oo.promisify)(Lt.rmdir),Gi=(0,Oo.promisify)(Lt.rm),OZ=(0,Oo.promisify)(Lt.copyFile),Gl;(function(o){o[o.Unknown=0]="Unknown",o[o.File=1]="File",o[o.Directory=2]="Directory",o[o.SymbolicLink=64]="SymbolicLink"})(Gl||(Gl={}));var tt=ie(require("vscode")),eS=ie(require("path"));var Au=ie(require("path"));var LS=ie(require("os")),Kl=ie(require("fs")),FS=ie(require("path"));var _y=ie(require("events")),zl=class{constructor(...t){this.nodeEmitter=new _y.EventEmitter;this.event=t=>(this.nodeEmitter.on("event",t),{dispose:()=>{this.nodeEmitter.off("event",t)}});this.disposables=t}fire(t){this.nodeEmitter.emit("event",t)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(t=>t.dispose())}},by=class{constructor(){this.nodeEmitter=new _y.EventEmitter;this.event=t=>{let r=n=>n.results.push(t(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(t){let r=[];return this.nodeEmitter.emit("event",{data:t,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};async function NS(e,t){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await t,package:await e,getTelemetryLevel:()=>"off"}}var qe;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(qe||(qe={}));var xy={info:3,debug:2,trace:1},eq=Object.keys(xy).reduce((e,t)=>(e[xy[t]]=t,e),[]);function MS(e){return xy[e]||3}function zi(e){return eq[e]||3}var pt={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Dc=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function US(e,t){let r=!!t;return{event:n=>{r&&(r=!1,e.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:t}))),e.forEach(o=>o.event(n))}}}function jS(e,t){let r=nq(e);return{event(n){let o=rq(n,t());o&&r.write(o)},join:r.join}}function $S(e,t,r){return{event(n){let o=tq(n,t(),r.getTime());o&&e(o)}}}function An(e,t=2){return{event:e.event,write(r,n=t){e.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=t){e.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=t){let o=Date.now();return e.event({type:"start",level:n,timestamp:o,text:r}),o},stop(r,n,o=t){e.event({type:"stop",level:o,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return e.dimensions},onDidChangeDimensions:e.onDidChangeDimensions}}function tq(e,t,r){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":return`[${Ql(BS,`${e.timestamp-r} ms`)}] ${xp(e.text)}`;case"raw":return e.text;case"start":return 1>=t?`${Ql(aq,`[${e.timestamp-r} ms] Start`)}: ${xp(e.text)}`:`[${Ql(BS,`${e.timestamp-r} ms`)}] Start: ${xp(e.text)}`;case"stop":return 1>=t?`${Ql(sq,`[${e.timestamp-r} ms] Stop`)} (${e.timestamp-e.startTimestamp} ms): ${xp(e.text)}`:void 0;default:throw HS(e)}}function xp(e){return uq(e).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function rq(e,t){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":case"raw":return`[${new Date(e.timestamp).toISOString()}] ${Sy(e.text)}`;case"start":return`[${new Date(e.timestamp).toISOString()}] Start: ${Sy(e.text)}`;case"stop":return 2>=t?`[${new Date(e.timestamp).toISOString()}] Stop (${e.timestamp-e.startTimestamp} ms): ${Sy(e.text)}`:void 0;default:throw HS(e)}}function Sy(e){return e.replace(Dc,"").replace(/(\r?\n)?$/,LS.EOL)}function HS(e){return new Error(`Unknown log event type: ${e.type}`)}function nq(e){let t=[],r=!1,n,o;function i(){r=!1,o&&!t.length&&(n=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&t.push(a),!c&&!r&&t.length){r=!0;let u=t.join("");t.length=0,Kl.appendFile(e,u,l=>{l&&(l.code==="ENOENT"?Kl.mkdir(FS.dirname(e),{recursive:!0},d=>{d?(i(),console.error(d)):Kl.appendFile(e,u,f=>{i(),f&&console.error(f),s()})}):(i(),console.error(l))),i(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>o=a):Promise.resolve())}}var oq="38;2;143;99;79",qS="38;2;99;143;79",iq="38;2;86;156;214",sq=oq,aq=qS,BS=qS,cq=iq;function Ql(e,t){return t.split(`
`).map(r=>`[1m[${e}m${r}[39m[22m`).join(`
`)}function uq(e){let t,r=0,n=[];for(Dc.lastIndex=0;t=Dc.exec(e);)n.push(VS(e.substring(r,t.index))),n.push(t[0]),r=Dc.lastIndex;return n.push(VS(e.substr(r))),n.join("")}function VS(e){let t=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,o=[];for(;r=t.exec(e);)o.push(e.substring(n,r.index)),o.push(Ql(cq,r[0])),n=t.lastIndex;return o.push(e.substr(n)),o.join("")}function at(e){return e.split(/\r?\n/).map(t=>`[1m[31m${t}[39m[22m`).join(`\r
`)+`\r
`}function Py(e){return e.split(/\r?\n/).map(t=>`[1m[33m${t}[39m[22m`).join(`\r
`)+`\r
`}var je=class extends Error{constructor(t){super(t.originalError&&t.originalError.message||t.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,t),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var De=ie(require("path")),wh=ie(require("fs")),FA=ie(Nc()),iE=ie(require("string_decoder")),Ch=ie(bm());var MA=ie(require("crypto")),UA=ie(require("util"));var $o=ie(kT()),ste=$o.default.v1,ate=$o.default.v3,mn=$o.default.v4,cte=$o.default.v5,ute=$o.default.NIL,lte=$o.default.version,dte=$o.default.validate,fte=$o.default.stringify,pte=$o.default.parse;var CG=ie(require("path")),YC=ie(require("string_decoder"));var fr=ie(require("path")),aA=ie(require("fs")),cA=ie(require("os")),mu=ie(require("child_process")),zC=ie(require("string_decoder"));var ZR=ie(require("path"));var DT;DT=(()=>{"use strict";var e={470:n=>{function o(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function i(a,c){for(var u,l="",d=0,f=-1,p=0,m=0;m<=a.length;++m){if(m<a.length)u=a.charCodeAt(m);else{if(u===47)break;u=47}if(u===47){if(!(f===m-1||p===1))if(f!==m-1&&p===2){if(l.length<2||d!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var h=l.lastIndexOf("/");if(h!==l.length-1){h===-1?(l="",d=0):d=(l=l.slice(0,h)).length-1-l.lastIndexOf("/"),f=m,p=0;continue}}else if(l.length===2||l.length===1){l="",d=0,f=m,p=0;continue}}c&&(l.length>0?l+="/..":l="..",d=2)}else l.length>0?l+="/"+a.slice(f+1,m):l=a.slice(f+1,m),d=m-f-1;f=m,p=0}else u===46&&p!==-1?++p:p=-1}return l}var s={resolve:function(){for(var a,c="",u=!1,l=arguments.length-1;l>=-1&&!u;l--){var d;l>=0?d=arguments[l]:(a===void 0&&(a=process.cwd()),d=a),o(d),d.length!==0&&(c=d+"/"+c,u=d.charCodeAt(0)===47)}return c=i(c,!u),u?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(o(a),a.length===0)return".";var c=a.charCodeAt(0)===47,u=a.charCodeAt(a.length-1)===47;return(a=i(a,!c)).length!==0||c||(a="."),a.length>0&&u&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return o(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var u=arguments[c];o(u),u.length>0&&(a===void 0?a=u:a+="/"+u)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(o(a),o(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var l=a.length,d=l-u,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var p=c.length-f,m=d<p?d:p,h=-1,g=0;g<=m;++g){if(g===m){if(p>m){if(c.charCodeAt(f+g)===47)return c.slice(f+g+1);if(g===0)return c.slice(f+g)}else d>m&&(a.charCodeAt(u+g)===47?h=g:g===0&&(h=0));break}var v=a.charCodeAt(u+g);if(v!==c.charCodeAt(f+g))break;v===47&&(h=g)}var w="";for(g=u+h+1;g<=l;++g)g!==l&&a.charCodeAt(g)!==47||(w.length===0?w+="..":w+="/..");return w.length>0?w+c.slice(f+h):(f+=h,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(a){return a},dirname:function(a){if(o(a),a.length===0)return".";for(var c=a.charCodeAt(0),u=c===47,l=-1,d=!0,f=a.length-1;f>=1;--f)if((c=a.charCodeAt(f))===47){if(!d){l=f;break}}else d=!1;return l===-1?u?"/":".":u&&l===1?"//":a.slice(0,l)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');o(a);var u,l=0,d=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,m=-1;for(u=a.length-1;u>=0;--u){var h=a.charCodeAt(u);if(h===47){if(!f){l=u+1;break}}else m===-1&&(f=!1,m=u+1),p>=0&&(h===c.charCodeAt(p)?--p==-1&&(d=u):(p=-1,d=m))}return l===d?d=m:d===-1&&(d=a.length),a.slice(l,d)}for(u=a.length-1;u>=0;--u)if(a.charCodeAt(u)===47){if(!f){l=u+1;break}}else d===-1&&(f=!1,d=u+1);return d===-1?"":a.slice(l,d)},extname:function(a){o(a);for(var c=-1,u=0,l=-1,d=!0,f=0,p=a.length-1;p>=0;--p){var m=a.charCodeAt(p);if(m!==47)l===-1&&(d=!1,l=p+1),m===46?c===-1?c=p:f!==1&&(f=1):c!==-1&&(f=-1);else if(!d){u=p+1;break}}return c===-1||l===-1||f===0||f===1&&c===l-1&&c===u+1?"":a.slice(c,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,u){var l=u.dir||u.root,d=u.base||(u.name||"")+(u.ext||"");return l?l===u.root?l+d:l+"/"+d:d}(0,a)},parse:function(a){o(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var u,l=a.charCodeAt(0),d=l===47;d?(c.root="/",u=1):u=0;for(var f=-1,p=0,m=-1,h=!0,g=a.length-1,v=0;g>=u;--g)if((l=a.charCodeAt(g))!==47)m===-1&&(h=!1,m=g+1),l===46?f===-1?f=g:v!==1&&(v=1):f!==-1&&(v=-1);else if(!h){p=g+1;break}return f===-1||m===-1||v===0||v===1&&f===m-1&&f===p+1?m!==-1&&(c.base=c.name=p===0&&d?a.slice(1,m):a.slice(p,m)):(p===0&&d?(c.name=a.slice(1,f),c.base=a.slice(1,m)):(c.name=a.slice(p,f),c.base=a.slice(p,m)),c.ext=a.slice(f,m)),p>0?c.dir=a.slice(0,p-1):d&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,o,i)=>{var s;if(i.r(o),i.d(o,{URI:()=>w,Utils:()=>z}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,u,l=(c=function(U,L){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,j){D.__proto__=j}||function(D,j){for(var K in j)Object.prototype.hasOwnProperty.call(j,K)&&(D[K]=j[K])})(U,L)},function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function D(){this.constructor=U}c(U,L),U.prototype=L===null?Object.create(L):(D.prototype=L.prototype,new D)}),d=/^\w[\w\d+.-]*$/,f=/^\//,p=/^\/\//;function m(U,L){if(!U.scheme&&L)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(U.authority,'", path: "').concat(U.path,'", query: "').concat(U.query,'", fragment: "').concat(U.fragment,'"}'));if(U.scheme&&!d.test(U.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(U.path){if(U.authority){if(!f.test(U.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(U.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var h="",g="/",v=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,w=function(){function U(L,D,j,K,Y,Z){Z===void 0&&(Z=!1),typeof L=="object"?(this.scheme=L.scheme||h,this.authority=L.authority||h,this.path=L.path||h,this.query=L.query||h,this.fragment=L.fragment||h):(this.scheme=function(me,Ee){return me||Ee?me:"file"}(L,Z),this.authority=D||h,this.path=function(me,Ee){switch(me){case"https":case"http":case"file":Ee?Ee[0]!==g&&(Ee=g+Ee):Ee=g}return Ee}(this.scheme,j||h),this.query=K||h,this.fragment=Y||h,m(this,Z))}return U.isUri=function(L){return L instanceof U||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="string"&&typeof L.with=="function"&&typeof L.toString=="function"},Object.defineProperty(U.prototype,"fsPath",{get:function(){return P(this,!1)},enumerable:!1,configurable:!0}),U.prototype.with=function(L){if(!L)return this;var D=L.scheme,j=L.authority,K=L.path,Y=L.query,Z=L.fragment;return D===void 0?D=this.scheme:D===null&&(D=h),j===void 0?j=this.authority:j===null&&(j=h),K===void 0?K=this.path:K===null&&(K=h),Y===void 0?Y=this.query:Y===null&&(Y=h),Z===void 0?Z=this.fragment:Z===null&&(Z=h),D===this.scheme&&j===this.authority&&K===this.path&&Y===this.query&&Z===this.fragment?this:new E(D,j,K,Y,Z)},U.parse=function(L,D){D===void 0&&(D=!1);var j=v.exec(L);return j?new E(j[2]||h,N(j[4]||h),N(j[5]||h),N(j[7]||h),N(j[9]||h),D):new E(h,h,h,h,h)},U.file=function(L){var D=h;if(s&&(L=L.replace(/\\/g,g)),L[0]===g&&L[1]===g){var j=L.indexOf(g,2);j===-1?(D=L.substring(2),L=g):(D=L.substring(2,j),L=L.substring(j)||g)}return new E("file",D,L,h,h)},U.from=function(L){var D=new E(L.scheme,L.authority,L.path,L.query,L.fragment);return m(D,!0),D},U.prototype.toString=function(L){return L===void 0&&(L=!1),S(this,L)},U.prototype.toJSON=function(){return this},U.revive=function(L){if(L){if(L instanceof U)return L;var D=new E(L);return D._formatted=L.external,D._fsPath=L._sep===C?L.fsPath:null,D}return L},U}(),C=s?1:void 0,E=function(U){function L(){var D=U!==null&&U.apply(this,arguments)||this;return D._formatted=null,D._fsPath=null,D}return l(L,U),Object.defineProperty(L.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=P(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),L.prototype.toString=function(D){return D===void 0&&(D=!1),D?S(this,!0):(this._formatted||(this._formatted=S(this,!1)),this._formatted)},L.prototype.toJSON=function(){var D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=C),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D},L}(w),b=((u={})[58]="%3A",u[47]="%2F",u[63]="%3F",u[35]="%23",u[91]="%5B",u[93]="%5D",u[64]="%40",u[33]="%21",u[36]="%24",u[38]="%26",u[39]="%27",u[40]="%28",u[41]="%29",u[42]="%2A",u[43]="%2B",u[44]="%2C",u[59]="%3B",u[61]="%3D",u[32]="%20",u);function I(U,L){for(var D=void 0,j=-1,K=0;K<U.length;K++){var Y=U.charCodeAt(K);if(Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57||Y===45||Y===46||Y===95||Y===126||L&&Y===47)j!==-1&&(D+=encodeURIComponent(U.substring(j,K)),j=-1),D!==void 0&&(D+=U.charAt(K));else{D===void 0&&(D=U.substr(0,K));var Z=b[Y];Z!==void 0?(j!==-1&&(D+=encodeURIComponent(U.substring(j,K)),j=-1),D+=Z):j===-1&&(j=K)}}return j!==-1&&(D+=encodeURIComponent(U.substring(j))),D!==void 0?D:U}function T(U){for(var L=void 0,D=0;D<U.length;D++){var j=U.charCodeAt(D);j===35||j===63?(L===void 0&&(L=U.substr(0,D)),L+=b[j]):L!==void 0&&(L+=U[D])}return L!==void 0?L:U}function P(U,L){var D;return D=U.authority&&U.path.length>1&&U.scheme==="file"?"//".concat(U.authority).concat(U.path):U.path.charCodeAt(0)===47&&(U.path.charCodeAt(1)>=65&&U.path.charCodeAt(1)<=90||U.path.charCodeAt(1)>=97&&U.path.charCodeAt(1)<=122)&&U.path.charCodeAt(2)===58?L?U.path.substr(1):U.path[1].toLowerCase()+U.path.substr(2):U.path,s&&(D=D.replace(/\//g,"\\")),D}function S(U,L){var D=L?T:I,j="",K=U.scheme,Y=U.authority,Z=U.path,me=U.query,Ee=U.fragment;if(K&&(j+=K,j+=":"),(Y||K==="file")&&(j+=g,j+=g),Y){var _e=Y.indexOf("@");if(_e!==-1){var Ie=Y.substr(0,_e);Y=Y.substr(_e+1),(_e=Ie.indexOf(":"))===-1?j+=D(Ie,!1):(j+=D(Ie.substr(0,_e),!1),j+=":",j+=D(Ie.substr(_e+1),!1)),j+="@"}(_e=(Y=Y.toLowerCase()).indexOf(":"))===-1?j+=D(Y,!1):(j+=D(Y.substr(0,_e),!1),j+=Y.substr(_e))}if(Z){if(Z.length>=3&&Z.charCodeAt(0)===47&&Z.charCodeAt(2)===58)(Ce=Z.charCodeAt(1))>=65&&Ce<=90&&(Z="/".concat(String.fromCharCode(Ce+32),":").concat(Z.substr(3)));else if(Z.length>=2&&Z.charCodeAt(1)===58){var Ce;(Ce=Z.charCodeAt(0))>=65&&Ce<=90&&(Z="".concat(String.fromCharCode(Ce+32),":").concat(Z.substr(2)))}j+=D(Z,!0)}return me&&(j+="?",j+=D(me,!1)),Ee&&(j+="#",j+=L?Ee:I(Ee,!1)),j}function k(U){try{return decodeURIComponent(U)}catch{return U.length>3?U.substr(0,3)+k(U.substr(3)):U}}var A=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(U){return U.match(A)?U.replace(A,function(L){return k(L)}):U}var z,Q=i(470),ee=function(U,L,D){if(D||arguments.length===2)for(var j,K=0,Y=L.length;K<Y;K++)!j&&K in L||(j||(j=Array.prototype.slice.call(L,0,K)),j[K]=L[K]);return U.concat(j||Array.prototype.slice.call(L))},ne=Q.posix||Q;(function(U){U.joinPath=function(L){for(var D=[],j=1;j<arguments.length;j++)D[j-1]=arguments[j];return L.with({path:ne.join.apply(ne,ee([L.path],D,!1))})},U.resolvePath=function(L){for(var D=[],j=1;j<arguments.length;j++)D[j-1]=arguments[j];var K=L.path||"/";return L.with({path:ne.resolve.apply(ne,ee([K],D,!1))})},U.dirname=function(L){var D=ne.dirname(L.path);return D.length===1&&D.charCodeAt(0)===46?L:L.with({path:D})},U.basename=function(L){return ne.basename(L.path)},U.extname=function(L){return ne.extname(L.path)}})(z||(z={}))}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.d=(n,o)=>{for(var i in o)r.o(o,i)&&!r.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:o[i]})},r.o=(n,o)=>Object.prototype.hasOwnProperty.call(n,o),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:Qe,Utils:hn}=DT;var RT=ie(require("path"));function mt(e,t){if(gd(t)){let r=e.dirname(t);return{isWorkspaceFile:!0,workspaceOrFolderPath:t,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:t,rootFolderPath:t,configFolderPath:t}}function gd(e){return RT.extname(e)===".code-workspace"}async function Um(e,t){if(!!t.isWorkspaceFile)try{let r=t.rootFolderPath,n=(await e.readFile(t.workspaceOrFolderPath)).toString(),i=Rt(n).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(e.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=e.path.resolve(r,a)}else{let u=s.uri;return u?Qe.parse(u).scheme!=="file"?`Workspace contains folder '${u}' not on the local file system.`:`Workspace contains an absolute folder path '${u}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!vW(e,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${t.workspaceOrFolderPath}: ${r&&(r.message||r.toString())}`}}function vW(e,t,r){return t===r?!0:!t||!r||r.length>t.length||t.length>r.length&&t.charAt(r.length)!==e.path.sep?!1:yW(e.platform,r,t.substr(0,r.length))}function yW(e,t,r){return e==="linux"?t===r:t.toLowerCase()===r.toLowerCase()}var gn=ie(require("path")),th=ie(bm()),GR=ie(require("crypto")),rh=ie(qm()),zR=ie(require("util")),KR=ie(require("string_decoder"));var vd=ie(require("path"));async function mC(e,t,r){let n=await Nk(e,"agent-extra-socket",r);if(!n)return;let o=await hC(t,"agent-socket");if(!o)return;let i=await hC(t,"homedir");try{let{stdout:a}=await t.exec(`ls '${i}/private-keys-v1.d' 2>/dev/null`);if(a.trim())return}catch{}let s=(async()=>{await t.exec(`mkdir -p -m 700 '${vd.posix.dirname(o)}'`);let a=await Nk(e,"homedir",r),c=await hC(t,"homedir");a&&c&&(await ou({cliHost:e},{shellServer:t},e.path.join(a,"pubring.kbx"),vd.posix.join(c,"pubring.kbx"),"gpg"),await ou({cliHost:e},{shellServer:t},e.path.join(a,"pubring.gpg"),vd.posix.join(c,"pubring.gpg"),"gpg"),await ou({cliHost:e},{shellServer:t},e.path.join(a,"trustdb.gpg"),vd.posix.join(c,"trustdb.gpg"),"gpg")),await BW(e,r)})();return{cliHost:e,remoteGpgSocket:o,localGpgSocket:n,ready:s}}async function Nk(e,t,r){try{let{stdout:n}=await He({exec:e.exec,cmd:"gpgconf",args:["--list-dir",t],output:r,print:!0}),o=n.toString().trim();if(o.indexOf(`
`)!==-1){let i=new RegExp(`^${t}:(.*)$`,"m").exec(o);i&&(o=i[1])}return e.platform==="win32"&&/^\/.\//.test(o)&&(o=`${o.charAt(1)}:${o.substr(2).replace(/\//g,"\\")}`),o}catch{return}}async function hC(e,t){try{let{stdout:r}=await e.exec(`gpgconf --list-dir ${t}`),n=r.trim();if(n.indexOf(`
`)!==-1){let o=new RegExp(`^${t}:(.*)$`,"m").exec(n);if(o)return o[1]}return n}catch{return}}async function BW(e,t){try{await He({exec:e.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:t})}catch{}}async function yd(e,t,r){if(!("exec"in e)){for(let n=t,o="";n!==o;o=n,n=e.path.dirname(n))if(await e.isFile(e.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await He({exec:e.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:t,output:r}),o=n.toString().trim();return e.path.resolve(t,o)}catch{return}}async function gC(e,t,r){try{return await He({exec:e.exec,cmd:"git",args:["ls-remote",t],cwd:".",output:r,print:"onerror"}),!0}catch(n){return(n==null?void 0:n.code)==="ENOENT"?void 0:!1}}async function vC({exec:e},t,r){try{let{stdout:n,stderr:o}=await He({exec:e,cmd:"git",args:["credential",t],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:pt});return{stdout:n.toString(),stderr:o.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:o,stderr:i,code:s}=n;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function Lk(e,t,r){let n=await yC(e,t,r);if(!n)return;n.startsWith("refs/")&&(n=n.substr(5)),n.startsWith("remotes/")&&(n=n.substr(8));let o=n.indexOf("/");if(o===-1)return;let i=n.substr(0,o),s=n.substr(o+1);try{let{stdout:a}=await He({exec:e.exec,cmd:"git",args:["remote","get-url",i],cwd:t.rootFolderPath,output:r}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let u=await zW(e,t,i,r);if(u&&s!==u)return`${c}/tree/${s}`}return c}catch{return}}async function Fk(e,t,r){if(!("exec"in e)){let o=await yd(e,t.rootFolderPath,r);if(!o)return;try{return(await e.readFile(e.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let n;try{let{stdout:o}=await He({exec:e.exec,cmd:"git",args:["remote","-v"],cwd:t.rootFolderPath,output:r});n=o.toString()}catch{return}return Array.from(new Set(VW(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function VW(e,t,r){return{[Symbol.iterator]:function*(){let n;for(;n=e.exec(t);)yield n[r],e.lastIndex===n.index&&e.lastIndex++}}}async function Mk(e,t,r){return await WW(e,t,r)||GW(e,t,r)}async function WW(e,t,r){try{let{stdout:n}=await He({exec:e.exec,cmd:"git",args:["status","--porcelain"],cwd:t.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function GW(e,t,r){let n=await yC(e,t,r);if(!!n)try{let{stdout:o}=await He({exec:e.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:t.rootFolderPath,output:r});return!!o.toString().trim()}catch{return}}async function Uk(e,t,r,n){let o=await yC(e,t,n);if(!o)return!1;try{let i=e.platform==="win32"?r.replace(/\\/g,"/"):r;return await He({exec:e.exec,cmd:"git",args:["cat-file","-e",`${o}:${i}`],cwd:t.rootFolderPath,output:n}),!0}catch{return!1}}async function yC(e,t,r){try{let{stdout:n}=await He({exec:e.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:t.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function zW(e,t,r,n){try{let{stdout:o}=await He({exec:e.exec,cmd:"git",args:["remote","show",r],cwd:t.rootFolderPath,output:n});return(o.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function Bm(e,t,r,n,o,i){let{extensionPath:s}=e;if(await t.isFolder(t.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await t.mkdirp(r);let a=n.tokenEnvVar?Ne(X({},n.env),{GIT_ASKPASS:t.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:t.env[n.tokenEnvVar]}):n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let u=iu({ptyExec:t.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:An(o,qe.Info)}),l=n.fullClone?u:(async()=>(await u,await iu({ptyExec:t.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:i}),iu({ptyExec:t.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:i})))();return{gitClone:u,gitUnshallow:l}}var cs=ie(require("stream"));async function jk(e,t){let{stdout:r}=await e.exec(`cat /proc/${t}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let o=n.indexOf("=");return o!==-1?[n.slice(0,o),n.slice(o+1)]:[]}).reduce((n,[o,i])=>(o&&(n[o]=i),n),{})}async function wC(e){let t=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:r}=await e.exec(t,{logOutput:!1}),n=6,o=r.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,u,l,d,f])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(l)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:u,cmd:f.replace(/\0/g," "),env:d.split("\0").reduce((m,h)=>{let g=h.indexOf("=");return g!==-1&&(m[h.substr(0,g)]=h.substr(g+1)),m},{})}}),mntNS:i}}function $k(e){let t={};return e.forEach(r=>t[r.pid]={process:r,childProcesses:[]}),e.filter(r=>r.ppid).forEach(r=>{var n;return(n=t[r.ppid])==null?void 0:n.childProcesses.push(t[r.pid])}),t}function CC(e,t="  ",r="  "){return`${r}${e.process.pid}: ${e.process.cmd}
${e.childProcesses.map(n=>CC(n,t,r+t))}`}var tG=UR(),QR=OC(),LC=BR(),rG=WR();async function xd(e,t){var b,I,T,P;let{cliHost:r,output:n}=e,o="Launching Dev Containers helper.",i=n.start(o);if(Ho)return n.stop(o,i),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let s=r.type==="local",a=s?r:await oh(process.cwd(),e.loadNativeModule,n),u=(await(0,zR.promisify)(GR.randomBytes)(20)).toString("hex"),l={},d=JR(e.cliHost)||JR(a),f=d?gn.posix.join(((b=t.env)==null?void 0:b.TMPDIR)||"/tmp",`vscode-ssh-auth-${u}.sock`):void 0;d?(l[f]=d,n.write(`ssh-agent: SSH_AUTH_SOCK in container (${f}) forwarded to ${d.cliHost!==a?"remote":"local"} host (${d.socketPath}).`)):n.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let p=await mC(r,t.shellServer,n)||(s?void 0:await mC(a,t.shellServer,n));p&&(l[p.remoteGpgSocket]={cliHost:p.cliHost,socketPath:p.localGpgSocket});let m=gn.posix.join(((I=t.env)==null?void 0:I.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${u}.sock`),h=gn.posix.join(((T=t.env)==null?void 0:T.TMPDIR)||"/tmp",`vscode-remote-containers-server-${u}.js`),g=gn.posix.join(((P=t.env)==null?void 0:P.TMPDIR)||"/tmp",`vscode-remote-containers-${u}.js`),v=YR(e,t,"Container",void 0,!1,!1,h,g,l,m,a),w=v.then(S=>S.ready),C=v.then(S=>S.mrpcExec),E=v.then(S=>S.mrpcPtyExec);return w.catch(console.error),e.onAdoptProcess(S=>aG(t.shellServer,m,f,S).catch(console.error)),n.stop(o,i),{remoteContainersCLI:g,remoteEnv:f?{SSH_AUTH_SOCK:f,REMOTE_CONTAINERS_IPC:m}:{REMOTE_CONTAINERS_IPC:m},mrpcExec:C,mrpcPtyExec:E,ready:w,reconnect:()=>v.then(S=>S.reconnect())}}async function Sd(e,t,r,n,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:u,setBaseEnv:l,connect:d,reconnect:f,terminate:p}=await YR(e,{remoteExec:t,platform:o},"Host",r,!0,n,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:u,setBaseEnv:l,connect:d,reconnect:f,terminate:p}}async function YR(e,{remoteExec:t,platform:r,nodeExecutable:n},o,i,s,a,c,u,l,d,f){let{product:p,output:m}=e,h=u&&vt(gn.join(e.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),g=vt(gn.join(e.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),v=await fo(t,m,void 0,r,o),w=s?await UC(v,await MC(v)):void 0,C=(await v.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],E=!0;if(!n||!c){let P=v.path.join(C,".vscode-remote-containers");n||(n=await cG(e,v,P,C,p,a)),c||(c=v.path.join(P,"dist",`vscode-remote-containers-server-${e.package.version}.js`),await Pd(v,c)?E=!1:await v.exec(`mkdir -p '${v.path.dirname(c)}'`))}if(u){let P=`EOF-${u}`;await v.exec(`cat <<'${P}' >${u}
${await h}
${P}
`)}if(E){let P=`EOF-${c}`,S=`${c}_${Date.now()}`;await v.exec(`cat <<'${P}' >${S}
${await g}
${P}
mv ${S} ${c}`)}let b=()=>nG(e,o,v,n,c,l,d,f),I=await b(),T;return{ready:I.ready,passwdUser:w,nodeExecutable:n,homeFolder:C,mrpcExec:oG(()=>I.mrpc,o,i||C),mrpcPtyExec:iG(()=>I.mrpc,o,i||C),mrpcExecToEnd:sG(()=>I.mrpc,o,i||C),setBaseEnv:P=>new Promise((S,k)=>{T=P,I.mrpc.setBaseEnv(P,A=>A?k(A):S())}),connect:I.mrpc.connect,reconnect:async()=>{let P=`${o}: Reconnecting exec server`,S=m.start(P);await I.process.terminate().catch(()=>{}),v=await fo(t,m,void 0,void 0,o),I=await b(),T&&await new Promise((k,A)=>{I.mrpc.setBaseEnv(T,N=>N?A(N):k())}),m.stop(P,S)},terminate:()=>I.process.terminate()}}async function nG(e,t,r,n,o,i,s,a){let{cliHost:c,output:u}=e,l=Object.keys(i||{}),d=Ne(X({},l.reduce((T,P)=>(T[P]="duplex",T),{})),{rpc:"async",connected:"async",ready:"async"}),f={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},p=r.process,m=`echo -n ${vn} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(l)}' REMOTE_CONTAINERS_IPC='${s||""}' '${n}' '${o}'
`;p.stdin.write(m);let h,g=new Promise(T=>h=T),v=new KR.StringDecoder;p.stderr.on("data",T=>{let P=v.write(T).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(h){let S=P.indexOf(vn);S!==-1&&(h(),h=void 0,P=P.substr(0,S)+P.substr(S+1))}P&&u.write(at(`${t} server: ${P}`))}),p.exit.then(({code:T,signal:P})=>{u.write(`${t} server terminated (code: ${T}, signal: ${P}).`)},T=>{u.write(`${t} server did not launch or terminated: ${T&&T.message||String(T)}`)});let C=(c==null?void 0:c.type)==="local",E,b=new Promise(T=>E=T),I=tG(f,d)(Ne(X({},l.reduce((T,P)=>{let S=i[P];return T[P]=()=>S.cliHost.connect(S.socketPath),T},{})),{rpc:async(T,P)=>{try{let S=JSON.parse(T),k=await vC(C?a:c,S.command,S.stdin).catch(A=>{if(C)throw A});!C&&(k==null?void 0:k.code)!==0&&(k=await vC(a,S.command,S.stdin),k.code===0&&(C=!0)),P(void 0,JSON.stringify(k))}catch(S){console.error(S),P(S)}},connected:T=>{T()},ready:T=>{E(),T()}}));return(0,rh.default)(QR.source(p.stdout),I.createStream(),QR.sink(p.stdin)),await Promise.race([g,p.exit.then(({code:T,signal:P})=>{throw new Error(`${t} server terminated (code: ${T}, signal: ${P}).`)})]),{ready:b,mrpc:I,process:p}}function oG(e,t,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,u=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,l=c.start(u),d=e(),f=await new Promise((p,m)=>{d.exec({cmd:o,args:i,cwd:s||r,env:a},(h,g)=>{h?m(h):p(g)})});return{stdin:LC.sink(d.stdin(f,p=>{p&&p.message!=="unexpected end of parent stream"&&console.error(p)})),stdout:LC.source(d.stdout(f)),stderr:LC.source(d.stderr(f)),exit:new Promise((p,m)=>{d.exit(f,(h,g)=>{var v;c.stop(u,l),h?(((v=h.message)==null?void 0:v.endsWith("ENOENT"))&&!h.code&&(h.code="ENOENT"),m(h)):p(g)})}),terminate:async()=>new Promise((p,m)=>{d.terminate(f,h=>{h?m(h):p()})})}}}function iG(e,t,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,u=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,l=c.start(u),d=e(),f=await new Promise((g,v)=>{var w,C;d.ptyExec({cmd:o,args:i,cwd:s||r,env:a,rows:(w=c.dimensions)==null?void 0:w.rows,cols:(C=c.dimensions)==null?void 0:C.columns},(E,b)=>{E?v(E):g(b)})}),p=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>d.ptyResize(f,g.columns,g.rows))],m=rG();(0,rh.default)(m,d.ptyIn(f,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let h=new zl;return(0,rh.default)(d.ptyOut(f),g=>{g(null,function v(w,C){if(w!==!0){if(w)throw w;h.fire(C),g(null,v)}})}),{write:g=>m.push(g),onData:h.event,resize:(g,v)=>d.ptyResize(f,g,v),exit:new Promise((g,v)=>{d.ptyExit(f,(w,C)=>{p.forEach(E=>E==null?void 0:E.dispose()),c.stop(u,l),w?v(w):g(C)})}),terminate:async()=>new Promise((g,v)=>{d.ptyTerminate(f,w=>{w?v(w):g()})})}}}function sG(e,t,r){return async n=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=n,u=`Run in ${t}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,l=c.start(u),d=e();return new Promise((f,p)=>{d.execToEnd({cmd:o,args:i,cwd:s||r,env:a},(m,h)=>{if(c.stop(u,l),m||!h)p({stdin:new cs.Writable,stdout:cs.Readable.from([]),stderr:cs.Readable.from([]),exit:Promise.reject(m),terminate:async()=>{}});else{let g=cs.Readable.from([Buffer.from(h.stdout.data)]),v=new Promise(E=>g.on("end",E)),w=cs.Readable.from([Buffer.from(h.stderr.data)]),C=new Promise(E=>w.on("end",E));f({stdin:new cs.Writable,stdout:g,stderr:w,exit:Promise.all([v,C]).then(()=>({code:h.code,signal:h.signal})),terminate:async()=>{}})}})})}}var FC="\\\\.\\pipe\\openssh-ssh-agent";function JR(e){if(e.env.SSH_AUTH_SOCK)return{cliHost:e,socketPath:e.env.SSH_AUTH_SOCK};if(e.platform==="win32")return{cliHost:e,socketPath:FC}}var nh=new Set;async function aG(e,t,r,n){let o=await n.processId;if(o&&o>0){let i=await jk(e,o),s=i.REMOTE_CONTAINERS_IPC;s&&s!==t&&!nh.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(nh.add(s),await e.exec(`rm '${s}' && ln -s '${t}' '${s}'`));let a=i.SSH_AUTH_SOCK;a&&r&&a!==r&&!nh.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(nh.add(a),await e.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}async function cG(e,t,r,n,o,i){let s=(o==null?void 0:o.commit)||"b3318bc0524af3d74034b8bb8a64df0ccf35549a",a=(o==null?void 0:o.commit)?o.quality||"insider":"stable",{localCacheFolder:c,output:u,alternateDownload:l}=e,d=gn.posix.join(r,"bin",s),f=gn.posix.join(d,"node");try{await t.exec(`test -x '${f}'`)}catch{if(o)try{let v=gn.posix.join(jC(n,o),"bin",s),w=gn.posix.join(v,"node");await t.exec(`test -x '${w}'`);let C=gn.posix.join(v,"node_modules","node-pty","package.json");return await t.exec(`test -f '${C}'`),w}catch{}let p;if((await t.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")p=$C;else{let v=await qC(t);p=HC(v,!1)}let h={localCacheFolder:c,build:p,commit:s,quality:a,web:!1,output:u,alternateDownload:l},g=Td(h);if(await Jt(g)||await ih(h),p===$C)await Id({output:u},t,g,d,i);else{let v=[];await th.t({file:g,filter:C=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(C),onentry:C=>{new th.WriteEntry.Tar(C).on("data",b=>v.push(b))}});let w=Buffer.concat(v);await Id({output:u},t,w,d,i,!1)}}return f}var VC=ie(require("path"));var uG=ie(require("http")),lG=ie(require("https"));function BC(e,t={}){return new Promise((r,n)=>{let o=e.startsWith("https:")?lG:uG,i;if(Object.keys(t).length>0){let a=new URL(e);i={headers:t,host:a.host,path:a.pathname}}o.get(i??e,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let u=(c=a.headers)==null?void 0:c.location;u&&r(BC(u,t))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let u=[];a.on("data",l=>u.push(l)),a.on("end",()=>r(Buffer.concat(u)))}}).on("error",n)})}async function Gr(e){let t=await vt(VC.join(e,"package.json"),"utf8");return JSON.parse(t)}async function kd(e){let t=await vt(VC.join(e,"product.json"),"utf8"),r=JSON.parse(t);return r.commit||(r.commit=await dG(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function dG(e="insider"){let t=`https://update.code.visualstudio.com/api/update/server-linux-x64/${e}/latest`,r=await BC(t);return JSON.parse(r.toString()).version}var XR=!0;function Dd(e,t=!1){let{serverApplicationName:r}=e;return!t&&r?["bin",r]:["server.sh"]}var eA=/^\\\\wsl(\.localhost|\$)?\\/;function Rr(e){return eA.test(e.toLowerCase())}function uu(e){let t=e.toLowerCase(),r=eA.exec(t);if(!r)return"";let n=t.indexOf("\\",r[0].length);return e.substring(r[0].length,n)}async function sh(e){let{stdout:t}=await He({exec:gi(void 0),cmd:"wsl",args:["-l","-v"],output:e}),r=t.toString(t[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function Pa(e,t,r){let{stdout:n}=await He({exec:gi(void 0),cmd:"wsl",args:["-d",e,"-e","wslpath","-u",t],output:r});return n.toString().trim()}async function fG(e,t){let{stdout:r}=await He({exec:gi(void 0),cmd:"wsl",args:["-d",e,"-e","/bin/sh","-c","echo ~"],output:t});return r.toString().trim()}async function lu(e,t){let r=uu(e),n=await Pa(r,e,t);return Qe.parse(`vscode-remote://wsl+${r}${n}`)}function du(e){if(e.scheme==="vscode-remote"){let t=ah(e.authority);if(t){let r=e.path;return gd(r)&&(r=ZR.posix.dirname(r)),{wslDistro:t,wslPath:r}}}}function ah(e){return(/wsl\+(.*)/.exec(e)||[])[1]}async function tA(e,t,r,n,o,i,s,a){var m;let{distro:c,cwd:u}=await WC(e,t,s),l=fu("wsl",["-d",c,"-e"],u),d=await Sd({extensionPath:r,localCacheFolder:n,package:await Gr(r),product:o,loadNativeModule:i,output:s,alternateDownload:a},l,u,!1),f=await pu({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((m=d.passwdUser)==null?void 0:m.shell)||"/bin/sh",remoteExec:d.exec});delete f.WSL_INTEROP,await d.setBaseEnv(f);let p=$n("wsl",u,f,d.exec,d.ptyExec,d.connect,d.nodeExecutable,s);return p.toCommonURI=async h=>{try{return Qe.file((await He({exec:d.exec,cmd:"wslpath",args:["-w",h],output:s})).stdout.toString().trim())}catch{return}},p}async function WC(e,{defaultDistro:t},r){let n,o;return typeof e=="object"?(n=e.wslDistro,o=e.wslPath):e&&Rr(e)?(n=uu(e),o=await Pa(n,e,r)):(n=t||await sh(r)||(()=>{throw new Error("No default WSL distro found.")})(),o=e?await Pa(n,e,r):await fG(n,r)),{distro:n,cwd:o}}var oA=ie(require("path")),ch=ie(require("net")),uh=ie(require("os"));var rA=ie(require("os"));async function nA(e,t,r,n,o,i,s,a,c,u){var v;let l=e.substr(6),d=l.indexOf(":"),f=[(u==null?void 0:u.settings.executablePath)||"ssh"];(u==null?void 0:u.settings.configFilePath)&&f.push("-F",pG(u==null?void 0:u.settings.configFilePath)),d!==-1?f.push("-p",l.substr(d+1),l.substr(0,d)):f.push(l);let p=fu(f[0],f.slice(1),void 0,await(u==null?void 0:u.sshAskpassEnv)||{}),m=await Sd({extensionPath:n,localCacheFolder:o,package:await Gr(n),product:i,loadNativeModule:s,output:a,alternateDownload:c},p,t,!1),h=await pu({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=m.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:m.exec});await m.setBaseEnv(h);let g=$n("ssh",t||m.homeFolder,h,m.exec,m.ptyExec,m.connect,m.nodeExecutable,a);return g.toCommonURI=()=>Promise.resolve(void 0),g.reconnect=()=>m.reconnect(),g.terminate=()=>m.terminate(),g}function pG(e){return e.replace(/^~($|\/|\\)/,`${rA.homedir()}$1`)}function Rd(e,t){let r=mG(e);if(!r)return;let n=r.hostName;if(r.user||r.hostName.toLowerCase()!==r.hostName||r.port||r.hostName.match(/[\/\\\+]/)){let o=JSON.stringify(r);n=Buffer.from(o,"utf8").toString("hex")}return Qe.parse(`vscode-remote://ssh-remote+${n}${t}`)}function mG(e){if(!e.startsWith("ssh://"))return;let t=e.substr(6),r=t.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(r){let[,n,o,i]=r;return{hostName:o,user:n,port:i?parseInt(i,10):void 0}}return{hostName:t}}var iA=OC(),Ia;(function(o){o[o.Unknown=0]="Unknown",o[o.File=1]="File",o[o.Directory=2]="Directory",o[o.SymbolicLink=64]="SymbolicLink"})(Ia||(Ia={}));async function yn(e,t,r,n,o,i,s,a,c,u){return(e==null?void 0:e.startsWith("ssh://"))&&!(u==null?void 0:u.localDocker)?nA(e,t,n,o,i,s,r,a,c,u):typeof t=="object"||n.executeInWSL==="forWSLPath"&&t&&Rr(t)||n.executeInWSL==="always"?tA(t,n,o,i,s,r,a,c):oh(t||process.cwd(),r,a)}async function oh(e,t,r){let n=gi(e),o=await sA(e,t);return hG(e,n,o,wG)}function $n(e,t,r,n,o,i,s,a){let c,u;return{type:e,platform:"linux",exec:n,ptyExec:o,cwd:t,env:r,path:oA.posix,async homedir(){var l;return typeof u=="undefined"&&(u=this.env.HOME||((l=GC((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:l.home)||"/"),u},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async l=>{try{return await He({exec:n,cmd:"test",args:["-f",l],output:pt}),!0}catch(d){if((d==null?void 0:d.code)!==1)throw d;return!1}},isFolder:async l=>{try{return await He({exec:n,cmd:"test",args:["-d",l],output:pt}),!0}catch(d){if((d==null?void 0:d.code)!==1)throw d;return!1}},readFile:async l=>{try{return(await He({exec:n,cmd:"cat",args:[l],output:pt})).stdout}catch(d){let f=new Error(`Could not read file: ${l}`);throw f.originalError=d,f.code="ENOENT",f}},writeFile:async(l,d)=>{await He({exec:n,cmd:"/bin/sh",args:["-c",`cat >'${l}'`],stdin:d,output:pt})},rename:async(l,d)=>{await He({exec:n,cmd:"mv",args:[l,d],output:pt})},rm:async(l,{recursive:d,force:f})=>{await He({exec:n,cmd:"rm",args:[...d?["-r"]:[],...f?["-f"]:[],l],output:pt})},mkdirp:async l=>{await He({exec:n,cmd:"mkdir",args:["-p",l],output:pt})},readDir:async l=>(await He({exec:n,cmd:"ls",args:["-a",l],output:pt})).stdout.toString().trim().split(`
`).filter(d=>d!=="."&&d!==".."),readDirWithTypes:async l=>{let d={f:1,"*":1,"/":2,"@":64};return(await He({exec:n,cmd:"ls",args:["-aF",l],output:pt})).stdout.toString().trim().split(`
`).map(f=>"/*@=%|>".indexOf(f[f.length-1])!==-1?[f.substr(0,f.length-1),f[f.length-1]]:[f,"f"]).filter(([f])=>f!=="."&&f!=="..").map(([f,p])=>[f,d[p]||0])},getUsername:async()=>(c===void 0&&(c=(await He({exec:n,cmd:"id",args:["-u","-n"],output:pt})).stdout.toString().trim()),c),getuid:async()=>{let l=await He({exec:n,cmd:"id",args:["-u"],output:pt});return parseInt(l.stdout.toString().trim(),10)},getgid:async()=>{let l=await He({exec:n,cmd:"id",args:["-g"],output:pt});return parseInt(l.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0),connect:i,nodeExecutable:s}}function hG(e,t,r,n){return{type:"local",platform:process.platform,exec:t,ptyExec:r,cwd:e,env:process.env,path:oA,homedir:async()=>uh.homedir(),tmpdir:async()=>uh.tmpdir(),isFile:Jt,isFolder:RS,readFile:vt,writeFile:bp,rename:ai,rm:Gi,mkdirp:async o=>{await oo(o)},readDir:Wi,getUsername:lh,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async o=>Qe.file(o),connect:n}}function gG(e){let t=[];return e.split("-").map(r=>{let n=r.match(/.{2}/g);n!==null&&n.reverse().map(o=>{t.push(parseInt(o,16))})}),Buffer.from(t)}function vG(e,t,r){return t||r===void 0?{headerSize:e,err:t}:e===0?{headerSize:e,data:r}:r.length>e?(r=r.slice(e,r.length),e=0,{headerSize:e,data:r}):(e=e-r.length,{headerSize:e})}function yG(e,t){let r=0,n=[],o=[],i,s=l=>{l instanceof Error&&console.error(l),e.destroy();for(let d of n)d.cb(l,void 0);n=[];for(let d of o)d(l,(f,p)=>{});o=[]};function a(l,d){i.source(l,function(f,p){let m=vG(r,f,p);r=m.headerSize,m.err||m.data?d(m.err||null,m.data):a(l,d)})}return(async()=>{let l=await vt(t),f=l.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),p,m;if(f!==null){let h=f[1],g=f[3];p=parseInt(h,10);let v=gG(g),w=Buffer.alloc(12);w.writeUInt32LE(process.pid,0),m=Buffer.concat([v,w]),r=16+3*4}else{let h=l.indexOf(10);p=parseInt(l.slice(0,h).toString(),10),m=l.slice(h+1),r=0}e.on("error",h=>{s(h)}),e.connect(p,"127.0.0.1",()=>{e.write(m,h=>{if(!h){i=iA.duplex(e);for(let g of n)a(g.abort,g.cb);n=[];for(let g of o)i.sink(g);o=[]}})})})().catch(l=>{s(l)}),{source:function(l,d){i!==void 0?a(l,d):n.push({abort:l,cb:d})},sink:function(l){i!==void 0?i.sink(l):o.push(l)}}}function wG(e){if(process.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return iA.duplex(ch.connect(e));let t=new ch.Socket;return yG(t,e)}function uA(e,t,r){return e==="linux"?t===r:t.toLowerCase()===r.toLowerCase()}var KC=fr.join(__dirname,"..","..","node_modules",".bin","ts-node"),Ho=fr.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function He(e){let{exec:t,cmd:r,args:n,cwd:o,env:i,stdin:s,output:a,print:c}=e,u=await t({cmd:r,args:n,cwd:o,env:i,output:a});return new Promise((l,d)=>{let f=[],p=[],m=c==="continuous"?new zC.StringDecoder:void 0;u.stdout.on("data",v=>{f.push(v),c==="continuous"&&a.write(m.write(v))}),u.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let h=c==="continuous"?new zC.StringDecoder:void 0;u.stderr.on("data",v=>{p.push(v),c==="continuous"&&a.write(at(h.write(v)))}),u.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=[];u.exit.then(({code:v})=>{try{g.forEach(E=>E.dispose());let w=Buffer.concat(f),C=Buffer.concat(p);(c===!0||v&&c==="onerror")&&(a.write(w.toString().replace(/\r?\n/g,`\r
`)),a.write(at(C.toString()))),c&&v&&a.write(`Exit code ${v}`),v?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:w,stderr:C,code:v}):l({stdout:w,stderr:C})}catch(w){d(w)}},d),s instanceof Buffer?(u.stdin.write(s,v=>{v&&d(v)}),u.stdin.end()):s instanceof aA.ReadStream?s.pipe(u.stdin):typeof s=="function"&&g.push(s(v=>u.stdin.write(v)))})}async function iu(e){let{ptyExec:t,cmd:r,args:n,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=e,u=await t({cmd:r,args:n,cwd:o,env:i,output:s});return new Promise((l,d)=>{let f="",p=[c&&c(m=>u.write(m))];u.onData(m=>{f+=m,s.raw(m),a&&a.exec(f)&&l({cmdOutput:f})}),u.exit.then(({code:m,signal:h})=>{try{p.forEach(g=>g==null?void 0:g.dispose()),m||h?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:f,code:m,signal:h}):l({cmdOutput:f})}catch(g){d(g)}},m=>{p.forEach(h=>h==null?void 0:h.dispose()),d(m)})})}function gi(e){return async function(t){let{cmd:r,args:n,output:o}=t,i=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=t.cwd||e,c=t.env?X(X({},process.env),t.env):process.env,u=await dh(r,a,c,o),l=mu.spawn(u,n,{cwd:a,env:c,windowsHide:!0});return{stdin:l.stdin,stdout:l.stdout,stderr:l.stderr,exit:new Promise((d,f)=>{l.once("error",p=>{o.stop(i,s),f(p)}),l.once("close",(p,m)=>{o.stop(i,s),d({code:p,signal:m})})}),async terminate(){l.kill("SIGKILL")}}}}async function sA(e,t){let r=await t("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var h,g;let{cmd:o,args:i,output:s}=n,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),u=!1,l=n.cwd||e,d=n.env?X(X({},process.env),n.env):process.env,f=await dh(o,l,d,s),p=r.spawn(f,i||[],{cwd:l,env:d,cols:(h=s.dimensions)==null?void 0:h.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:u}),m=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>p.resize(v.columns,v.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(v=>{p.onExit(({exitCode:w,signal:C})=>{if(m.forEach(E=>E==null?void 0:E.dispose()),s.stop(a,c),v({code:w,signal:C}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function fu(e,t,r,n){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,u=o.cwd||r,l=u?`cd '${u}' && `:"",d=Object.keys(i||{}).map(E=>`${E}='${i[E]}' `).join(""),f=(a||[]).map(E=>` '${E.replace(/'/g,`'"'"'`)}'`).join(""),p=`${l}${d}${s}${f}`,m=p!==s?["/bin/sh","-c",p]:[p],h=[...t,...m],g=`Run: ${e} ${h.join(" ").replace(/\n.*/g,"")}`,v=c.start(g),w=await dh(e,process.cwd(),process.env,c),C=mu.spawn(w,h,{windowsHide:!0,env:n?X(X({},process.env),n):void 0});return{stdin:C.stdin,stdout:C.stdout,stderr:C.stderr,exit:new Promise((E,b)=>{C.once("error",I=>{c.stop(g,v),b(I)}),C.once("close",(I,T)=>{c.stop(g,v),E({code:I,signal:T})})}),async terminate(){C.kill("SIGKILL")}}}}async function lA(e,t,r,n){let o=await n("node-pty");if(!o)throw new Error("Missing node-pty");return async function(i){var I,T;let{env:s,cmd:a,args:c,output:u}=i,l=i.cwd||r,d=l?`cd '${l}' && `:"",f=Object.keys(s||{}).map(P=>`${P}='${s[P]}' `).join(""),p=(c||[]).map(P=>` '${P.replace(/'/g,`'"'"'`)}'`).join(""),m=`${d}${f}${a}${p}`,h=[...t,"/bin/sh","-c",m],g=`Run: ${e} ${h.join(" ").replace(/\n.*/g,"")}`,v=u.start(g),w=!1,C=await dh(e,process.cwd(),process.env,u),E=o.spawn(C,h,{cols:(I=u.dimensions)==null?void 0:I.columns,rows:(T=u.dimensions)==null?void 0:T.rows,useConpty:w}),b=[u.onDidChangeDimensions&&u.onDidChangeDimensions(P=>E.resize(P.columns,P.rows))];return{onData:E.onData.bind(E),write:E.write.bind(E),resize:E.resize.bind(E),exit:new Promise(P=>{E.onExit(({exitCode:S,signal:k})=>{if(b.forEach(A=>A==null?void 0:A.dispose()),u.stop(g,v),P({code:S,signal:k}),process.platform==="win32")try{E.kill()}catch{}})}),async terminate(){E.kill("SIGKILL")}}}}async function dh(e,t=process.cwd(),r,n){if(process.platform!=="win32")return e;if(fr.isAbsolute(e))return await Ad(e)||e;if(/[/\\]/.test(e)){let a=fr.join(t,e);return await Ad(a)||a}let o,i;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(o=c,i=c.split(fr.delimiter).filter(Boolean),i.push(fr.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(i===void 0||i.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${e}'.`);let a=fr.join(t,e);return await Ad(a)||a}for(let a of i){let c;fr.isAbsolute(a)?c=fr.join(a,e):c=fr.join(t,a,e);let u=await Ad(c);if(u)return u}n.write(`findLocalWindowsExecutable: Exectuable '${e}' not found on PATH '${o}'.`);let s=fr.join(t,e);return await Ad(s)||s}var dA=process.env.PATHEXT,fA=dA?dA.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function Ad(e){if(fA.indexOf(fr.extname(e))!==-1)return await Jt(e)?e:void 0;for(let t of fA){let r=e+t;if(await Jt(r))return r}}function hu(e){let t=/^'?v?(\d+(\.\d+)*)/.exec(e);if(!!t)return t[1].split(".").map(r=>parseInt(r,10))}function gu(e,t){for(let r=0,n=Math.max(e.length,t.length);r<n;r++){let o=e[r]||0,i=t[r]||0;if(o!==i)return o<i}return!1}var pA=Ho?(e,t,r)=>mu.spawn(KC,[e,...t||[]],Ne(X({},r),{windowsHide:!0})):mu.fork;async function fh(e,t){if(!t){try{return require(e)}catch{}return}try{return require(`${t}/node_modules.asar/${e}`)}catch{}try{return require(`${t}/node_modules/${e}`)}catch{}try{return __non_webpack_require__(`${t}/node_modules.asar/${e}`)}catch{}try{return __non_webpack_require__(`${t}/node_modules/${e}`)}catch{}}function Od(e){let{output:t}=e,r=[];return{output:An(Ne(X({},t),{get dimensions(){return t.dimensions},event:o=>r?r.push(o):t.event(o)})),flush:()=>{r&&(r.forEach(o=>t.event(o)),r=void 0)}}}function mA(e,t,r){return An(Ne(X({},e),{get dimensions(){return e.dimensions},event:o=>{o.channel===t&&e.event(o),r.event(o)}}))}function ph(e,t){return typeof t!="string"&&"win32"in t?e==="win32"?t.win32:t.posix:t}async function Pd(e,t){return ph(e.platform,{posix:async()=>{try{return await e.exec(`test -f '${t}'`),!0}catch{return!1}},win32:async()=>(await e.exec(`Test-Path '${t}' -PathType Leaf`)).stdout.trim()==="True"})()}var QC;async function lh(){return QC===void 0&&(QC=(async()=>{try{return cA.userInfo().username}catch(e){if(process.platform!=="linux")throw e;return(await He({exec:gi(void 0),cmd:"id",args:["-u","-n"],output:pt})).stdout.toString().trim()}})()),QC}var vn="\u2404";async function fo(e,t,r,n="linux",o="Container"){let i=typeof e=="function",s=n==="win32",a=i?await e({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:t}):e;if(!i){let f=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${vn}; /bin/sh'
`;a.stdin.write(f),await new Promise(m=>{let h="",g=new YC.StringDecoder;a.stdout.on("data",function v(w){h+=g.write(w),h.includes(f)&&(a.stdout.off("data",v),m())})})}let c=EG(a),u;async function l(f,p){let m=u=(async()=>{try{await u}catch{}return d(ph(n,f),p)})();try{return await Promise.race([m,c.unexpectedExit])}finally{c.disposeStdioListeners(),u===m&&(u=void 0)}}async function d(f,p){let m=`Run in ${o.toLowerCase()}: ${f.replace(/\n.*/g,"")}`,h;if((p==null?void 0:p.logOutput)!=="silent"&&(h=t.start(m,p==null?void 0:p.logLevel)),a.stdin.destroyed){t.write("Stdin closed!");let{code:T,signal:P}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${T}, signal: ${P})`,code:T,signal:P})}n==="win32"?a.stdin.write(`[Console]::Write('${vn}'); ( ${f} ); [Console]::Write("${vn}$LastExitCode ${vn}"); [Console]::Error.Write('${vn}')
`):a.stdin.write(`echo -n ${vn}; ( ${f} ); echo -n ${vn}$?${vn}; echo -n ${vn} >&2
`);let[g,v]=hA(a.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(T,P,S)=>{P===1&&S===0&&t.write(T,p==null?void 0:p.logLevel)}:()=>{}),w=hA(a.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(T,P,S)=>{P===0&&S===0&&t.write(T,p==null?void 0:p.logLevel)}:()=>{})[0];(p==null?void 0:p.stdin)&&(await g,a.stdin.write(p==null?void 0:p.stdin));let[C,E]=await v,[b]=await w,I=parseInt(E,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(t.write(C,p==null?void 0:p.logLevel),t.write(b,p==null?void 0:p.logLevel),I&&t.write(`Exit code ${I}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&I&&t.write(`Exit code ${I}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&t.stop(m,h,p==null?void 0:p.logLevel),I?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${f}`,code:I,stdout:C,stderr:b}):{stdout:C,stderr:b}}return{exec:l,process:a,platform:n,path:ph(n,CG)}}function hA(e,t,r){let n=t.map(()=>{let l,d=new Promise((f,p)=>l={resolve:f,reject:p});return X({promise:d},l)}),o=new YC.StringDecoder("utf8"),i=[],s=0,a=[];function c(l){let d=o.write(l);u(d)}function u(l){let d=l.indexOf(vn);if(d!==-1){let f=l.substr(0,d);i.push(f),r(f,s,a.length),a.push(i.join("")),i.length=0,a.length===t[s]&&(n[s].resolve(a),s++,a=[],s===t.length&&e.off("data",c)),d+1<l.length&&u(l.substr(d+1))}else i.push(l),r(l,s,a.length)}return e.on("data",c),n.map(l=>l.promise)}function EG(e){let t,r=new Promise((c,u)=>t=u),n=[],o=[],i=c=>n.push(c),s=c=>o.push(c);return e.stdout.on("data",i),e.stderr.on("data",s),e.exit.then(({code:c,signal:u})=>{t(`Shell server terminated (code: ${c}, signal: ${u})
${Buffer.concat(n).toString()}
${Buffer.concat(o).toString()}`)},c=>{t(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{e.stdout.off("data",i),e.stderr.off("data",s),n.length=0,o.length=0}}}var gA=ie(require("path"));var Ct;(function(m){m.enableWebAccess="enableWebAccess",m.workspaceMountConsistency="workspaceMountConsistency",m.experimentalUpdateRemoteUserUIDOnMacOS="experimentalUpdateRemoteUserUIDOnMacOS",m.cacheVolume="cacheVolume",m.copyGitConfig="copyGitConfig",m.gitCredentialHelperConfigLocation="gitCredentialHelperConfigLocation",m.dockerPath="dockerPath",m.executeInWSL="executeInWSL",m.executeInWSLDistro="executeInWSLDistro",m.dockerComposePath="dockerComposePath",m.repositoryConfigurationPaths="repositoryConfigurationPaths",m.logLevel="logLevel",m.defaultExtensions="defaultExtensions",m.defaultFeatures="defaultFeatures"})(Ct||(Ct={}));var qo;(function(n){n.repository="dotfiles.repository",n.installCommand="dotfiles.installCommand",n.targetPath="dotfiles.targetPath"})(qo||(qo={}));function us(e){return`remote.containers.${e}`}function Nd(e){return`dev.containers.${e}`}var _G=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function JC(e,t,r,n,o){let{repository:i,installCommand:s,targetPath:a}=e.dotfilesConfiguration;if(i=o.getDotfileConfiguration(qo.repository)||i,s=o.getDotfileConfiguration(qo.installCommand)||s,a=o.getDotfileConfiguration(qo.targetPath)||a,!i)return;await n;let c=await r;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let u=t.shellServer,l=xG(t),d=Object.keys(c).filter(f=>!(f.startsWith("BASH_FUNC_")&&f.endsWith("%%"))).reduce((f,p)=>`${f}${p}=${bG(c[p])} `,"");try{e.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await u.exec(`# Clone & install dotfiles
${mh(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${d}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:qe.Info}):await u.exec(`# Clone & install dotfiles
${mh(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${_G.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${d}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:qe.Info}),e.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{e.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function bG(e){return`'${(e||"").replace(/'+/g,`'"$&"'`)}'`}function xG(e){return gA.posix.join(Hn(e),".dotfilesMarker")}var RA=ie(require("net")),AA=ie(DA());async function nE({forwardedPorts:e,output:t,getLogLevel:r},n,o,i){t.write(`Port forwarding for container port ${o} starts listening on local port.`,qe.Debug);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let u=new Set,l=RA.createServer({pauseOnConnect:!0},d=>{let f=d.remotePort,p=l.address().port;t.write(`Port forwarding connection from ${f} > ${p} > ${o} in the container.`),r()===qe.Trace&&(async()=>{let m=await(0,AA.default)("port",f);t.write(`Port forwarding process for ${f} > ${p} > ${o} in the container:
${JSON.stringify(m,void 0,"  ")}`)})().catch(console.error),AG(t,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(m=>{let h;m.exit.then(({code:g,signal:v})=>{h||(u.delete(d),d.end()),t.write(`Port forwarding ${f} > ${p} > ${o} terminated${h?` by extension (${h})`:""} with code ${g} and signal ${v}.`)},g=>{u.delete(d),d.end(),t.write(`Port forwarding ${f} > ${p} > ${o} terminated with error: ${g&&g.message||String(g)}`)}),m.stderr.on("data",g=>{t.write(`Port forwarding ${f} > ${p} > ${o} stderr: ${g.toString("utf8")}`,qe.Debug)}),d.on("close",g=>{t.write(`Port forwarding ${f} > ${p} > ${o}: Local close${g?" with error":""}`,qe.Debug),u.delete(d),h="closed",m.stdin.end(),setTimeout(()=>{h="killed",m.terminate().catch(console.error)},5e3)}),m.stdout.pipe(d),d.pipe(m.stdin),u.add(d)}).catch(console.error)});l.on("listening",()=>{let d={targetPort:o,server:l,connections:u};l.on("close",()=>{e.delete(d)}),e.add(d),t.write(`Port forwarding local port ${l.address().port} to container port ${o}`),a(l)}),l.on("error",d=>{if(d&&(d.code==="EADDRINUSE"||d.code==="EACCES")){l.listen(0,"127.0.0.1");return}c(d)}),l.on("close",()=>{c(new Error("Closed"))}),l.listen(o,"127.0.0.1")})}async function AG(e,t,r,n){return t.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:e})}var vu=ie(require("path"));function vh(e,t){let r,n=e.platform==="win32",o=Ne(X({},e),{get env(){return r||(r=OA(n,e.env))}}),i=LG.bind(void 0,n,o);return e.containerWorkspaceFolder&&(o.containerWorkspaceFolder=NA(i,e.containerWorkspaceFolder)),yh(i,t)}function oE(e,t,r,n){let o=e==="win32";return yh(FG.bind(void 0,o,t,OA(o,r)),n)}function yh(e,t){if(typeof t=="string")return NA(e,t);if(Array.isArray(t))return t.map(r=>yh(e,r));if(t&&typeof t=="object"){let r=Object.create(null);return Object.keys(t).forEach(n=>{r[n]=yh(e,t[n])}),r}return t}var OG=/\$\{(.*?)\}/g;function OA(e,t){if(e){let r=Object.create(null);return Object.keys(t).forEach(n=>{r[n.toLowerCase()]=t[n]}),r}return t}function NA(e,t){return t.replace(OG,NG.bind(void 0,e))}function NG(e,t,r){let n,o=r.split(":");return o.length>1&&(r=o[0],n=o[1]),e(t,r,n)}function LG(e,t,r,n,o){switch(n){case"env":case"localEnv":return LA(e,t.env,o,r,t.configFile);case"localWorkspaceFolder":return t.localWorkspaceFolder!==void 0?t.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return t.localWorkspaceFolder!==void 0?(e?vu.win32:vu.posix).basename(t.localWorkspaceFolder):r;case"containerWorkspaceFolder":return t.containerWorkspaceFolder!==void 0?t.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return t.containerWorkspaceFolder!==void 0?vu.posix.basename(t.containerWorkspaceFolder):r;default:return r}}function FG(e,t,r,n,o,i){switch(o){case"containerEnv":return LA(e,r,i,n,t);default:return n}}function LA(e,t,r,n,o){if(r){e&&(r=r.toLowerCase());let i=t[r];return typeof i=="string"?i:""}throw new je({description:`'${n}'${o?` in ${vu.posix.basename(o.path)}`:""} can not be resolved because no environment variable name is given.`})}async function Bo(e){return new Promise(t=>setTimeout(t,e))}var ds=0,jA=/Extension host agent listening on (\d+)/;var Ar;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(Ar||(Ar={}));var sE="updateContentCommand";async function Eh(e){let{params:t,createdAt:r,startedAt:n,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:u,remoteExec:l,remotePtyExec:d,remoteExecAsRoot:f,rootShellServer:p}=e,m;if(p&&a==="root"?m=p:m=await fo(l,t.output,t.sessionId),!u){let N=(await m.exec("echo $PATH")).stdout.trim();u=N?{PATH:N}:{}}a||(a=await MC(m)),!f&&a==="root"&&(f=l);let h=await qC(m),g=await UC(m,a);g||t.output.write(Py(`User ${a} not found in /etc/passwd.`));let v=await UG(u,g),w=await MG(u,g),C=jC(w,t.product),{commit:E,quality:b}=t.product,I=E&&await jG(C,E,b||"insider",t.web),T=HC(h,b==="stable"),P=E&&o&&await $A(De.posix,o,T,E,b||"insider",t.web),S=I&&await HG(I),k;p?k=Promise.resolve(p):a==="root"&&(k=Promise.resolve(m));let A={createdAt:r,startedAt:n,osRelease:h,build:T,user:a,gid:c||(g==null?void 0:g.gid),env:u,shell:v,homeFolder:w,userDataFolder:C,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,installFolder:I,sharedInstallFolder:P,remoteWorkspaceFolder:s,nodeExecutable:S,remoteExec:l,remotePtyExec:d,remoteExecAsRoot:f,shellServer:m};return(k||f)&&(A.launchRootShellServer=()=>k||(k=fo(f,t.output))),A}async function MC(e){return(await e.exec("id -un")).stdout.trim()}async function MG(e,t){return e.HOME||t&&t.home||"/root"}async function UG(e,t){return e.SHELL||t&&t.shell||"/bin/sh"}async function UC(e,t){let{stdout:r}=await e.exec("cat /etc/passwd",{logOutput:!1});return GC(r,t)}function GC(e,t){return e.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===t||n.uid===t)}async function jG(e,t,r,n){return De.posix.join(e,"bin",`${t}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function $A(e,t,r,n,o,i){return e.join(t,"bin",r.id,`${n}${o==="stable"?"":`-${o}`}${i?"-web":""}`)}function HA(e){return De.posix.join(e.userDataFolder,"extensions")}function Hn(e){return De.posix.join(typeof e=="string"?e:e.userDataFolder,"data/Machine")}function _h(e){return De.posix.join(e.userDataFolder,"data/Machine/settings.json")}function $G(e){return De.posix.join(e,".vscode-remote")}function jC(e,t){return De.posix.join(e,t.serverDataFolderName)}function yu(e){return De.posix.join("/var",/^\.*(.*)$/.exec(e)[1])}async function HG(e){return De.posix.join(e,"node")}var bh=class{constructor(t){this.settings=t}getConfiguration(t){return this.settings[Nd(t)]||this.settings[us(t)]}getDotfileConfiguration(t){return this.settings[us(t)]||this.settings[t]}};async function xh(e,t,r,n,o=ds){await qA(e,t),await az(e,t),await cz(e,t);let i=await BA(e,t,r),{serverDownloaded:s}=await VA(e,t),a,c,u=Promise.resolve(),l;if(!e.cliMode&&t.nodeExecutable){let w=await xd(e,t);a=w.remoteContainersCLI,c=w.remoteEnv,u=w.ready,l=w.mrpcExec;let C=e.cliHost.reconnect;C&&(e.cliHost.reconnect=async()=>{await C(),w.reconnect().catch(E=>e.output.write(at(E&&(E.stack||E.message)||String(E))))})}let f=e.computeExtensionHostEnv||t.installFolder&&e.cliMode||e.postCreate.enabled?pu(e,t,r,l).then(w=>X(X(X(X({},w),c),e.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?oE(e.cliHost.platform,r.configFilePath,t.env,r.remoteEnv):{})):Promise.resolve({}),p=i.getConfiguration(Ct.gitCredentialHelperConfigLocation)??e.credentialHelperConfigLocation;!e.cliMode&&t.nodeExecutable&&(await Ta(e,t,[".ssh","known_hosts"],"ssh"),p!=="none"&&await wu(t,a,e.output,"system"));let m,h,g,v;if(t.installFolder){let C=await JA(e,t,o,l,async()=>zA(e,t,async()=>{var I,T,P;return Array.from(new Set([...((T=(I=r.customizations)==null?void 0:I.vscode)==null?void 0:T.extensions)||[],...((P=await n())==null?void 0:P.allFeatures.filter(S=>(XR||S.included)&&S.value).reduce((S,k)=>{var A,N;return S.concat(((N=(A=k.customizations)==null?void 0:A.vscode)==null?void 0:N.extensions)||[])},[]))||[]]))}),f),E=C.serverPort;g=C.connectionToken,v=C.webConnectionToken,m=E,e.forwardServerPort&&t.nodeExecutable&&(h=await nE(e,t,E,e.sessionId),m=h.address().port,e.backgroundTasks.push(async()=>tO(e,t,r)))}if(e.postCreate.enabled){let w,C=!1,E=new Promise(I=>w=()=>{C=!0,I()}),b=(async()=>{if((r.waitFor||sE)==="initializeCommand"&&w(),!(e.postCreate.skipNonBlocking&&C)&&(await cE(e,t,r,"onCreateCommand",f,u,!1,w),!(e.postCreate.skipNonBlocking&&C)&&(await cE(e,t,r,"updateContentCommand",f,u,!!e.prebuild,w),!(e.postCreate.skipNonBlocking&&C)))){if(!e.prebuild){if(await cE(e,t,r,"postCreateCommand",f,u,!1,w),e.postCreate.skipNonBlocking&&C||(await JC(e,t,f,u,i),!e.cliMode&&t.nodeExecutable&&((i.getConfiguration(Ct.copyGitConfig)??e.isCopyGitConfigEnabled)&&(await Ta(e,t,[".gitconfig"],"git"),await Ih(e,t,f.then(I=>X(X({},t.env),I)))),await wu(t,a,e.output,p)),await ez(e,t,r,f,u,w),e.postCreate.skipNonBlocking&&C))return;await tz(e,t,r,f,u,w)}e.postCreate.done()}})();e.backgroundTasks.push(b),await Promise.race([E,b])}return{hostOrContainerPort:m,hostPortServer:h,connectionToken:g,webConnectionToken:v,remoteEnv:e.computeExtensionHostEnv?await f:{},serverDownloaded:s}}async function Sh(e,t,r,n,o=ds,i){await qA(e,t);let s=await BA(e,t,n),{serverDownloaded:a}=await VA(e,t),c,u,l=Promise.resolve(),d;if(!e.cliMode&&t.nodeExecutable){let C=await xd(e,t);c=C.remoteContainersCLI,u=C.remoteEnv,l=C.ready,d=C.mrpcExec;let E=e.cliHost.reconnect;E&&(e.cliHost.reconnect=async()=>{await E(),C.reconnect().catch(b=>e.output.write(at(b&&(b.stack||b.message)||String(b))))})}let p=e.computeExtensionHostEnv||t.installFolder&&e.cliMode||e.postCreate.enabled?pu(e,t,n,d).then(C=>X(X(X(X({},C),u),e.cliMode?{}:{REMOTE_CONTAINERS:"true"}),oE(e.cliHost.platform,r.configFilePath,t.env,n.remoteEnv||{}))):Promise.resolve({}),m=s.getConfiguration(Ct.gitCredentialHelperConfigLocation)??e.credentialHelperConfigLocation;!e.cliMode&&t.nodeExecutable&&(await Ta(e,t,[".ssh","known_hosts"],"ssh"),m!=="none"&&await wu(t,c,e.output,"system"));let h,g,v,w;if(t.installFolder){let E=await JA(e,t,o,d,async()=>zA(e,t,async()=>{var T;return[...new Set([].concat(...(((T=n.customizations)==null?void 0:T.vscode)||[]).map(P=>P.extensions||[])))]}),p),b=E.serverPort;v=E.connectionToken,w=E.webConnectionToken,h=b,e.forwardServerPort&&t.nodeExecutable&&(g=await nE(e,t,b,e.sessionId),h=g.address().port,e.backgroundTasks.push(async()=>tO(e,t,n)))}if(e.postCreate.enabled){let C,E=new Promise(I=>C=()=>{I()}),b=(async()=>{let I=X(X({},u),e.cliMode?{}:{REMOTE_CONTAINERS:"true"}),T=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],P=T.reduce((S,k)=>(S[k]=(n[`${k}s`]||[]).length>0,S),{});if(e.prebuild){let S=T.indexOf("updateContentCommand");if((!T.slice(0,S+1).some(N=>P[N])?"prebuild":await i(!1,!1,!0,I))!=="prebuild")throw new Error('"prebuild" expected')}else{let S=!0,k=!0,A=n.waitFor||sE,N=T.indexOf(A),z=T.indexOf("postCreateCommand"),Q=N<=z&&!T.slice(0,N+1).some(U=>P[U]),ee=!T.slice(0,z+1).some(U=>P[U]),ne=Q?"skipNonBlocking":ee?"stopForPersonalization":await i(S,k,!1,I);if(ne==="skipNonBlocking"){if(C(),e.postCreate.skipNonBlocking)return;S=!1,ne=!T.slice(N+1,z+1).some(L=>P[L])?"stopForPersonalization":await i(S,k,!1,I)}if(ne==="stopForPersonalization"){await JC(e,t,p,l,s),!e.cliMode&&t.nodeExecutable&&((s.getConfiguration(Ct.copyGitConfig)??e.isCopyGitConfigEnabled)&&(await Ta(e,t,[".gitconfig"],"git"),await Ih(e,t,p.then(D=>X(X({},t.env),D)))),await wu(t,c,e.output,m)),k=!1;let U=N>z&&!T.slice(z+1,N+1).some(D=>P[D]),L=!T.slice(z+1).some(D=>P[D]);ne=U?"skipNonBlocking":L?"done":await i(S,k,!1,I)}if(ne==="skipNonBlocking"){if(C(),e.postCreate.skipNonBlocking)return;S=!1,ne=!T.slice(N+1).some(L=>P[L])?"done":await i(S,k,!1,I)}if(ne!=="done")throw new Error('"done" expected')}})();b.then(()=>{e.postCreate.done()},I=>{e.postCreate.done(I)}),e.backgroundTasks.push(b),await Promise.race([E,b])}return{hostOrContainerPort:h,hostPortServer:g,connectionToken:v,webConnectionToken:w,remoteEnv:e.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function qA(e,t){let r=$G(t.homeFolder);!await kh(t.shellServer,t.userDataFolder)&&await kh(t.shellServer,r)&&await vi(e,t,["/bin/sh","-c",`cp -r '${r}' '${t.userDataFolder}'`])}async function BA(e,t,r){var s;let n=Hn(t),o=De.posix.join(n,".writeMachineSettingsMarker"),i=_h(t);if(await Th(t.shellServer,o)){let a=(s=r.customizations)==null?void 0:s.vscode,c=Object.assign({},...(Array.isArray(a)?a:a?[a]:[]).map(u=>u.settings));if(qG(c,r.portsAttributes),BG(c,r.otherPortsAttributes),Object.keys(c).length)return await t.shellServer.exec(`mkdir -p '${De.posix.dirname(i)}' && cat >'${i}' <<'settingsJSON'
${JSON.stringify(c,null,"	")}
settingsJSON
`),new bh(c)}try{let{stdout:a}=await t.shellServer.exec(`cat ${i}`);return new bh(Rt(a)||{})}catch{return new bh({})}}function qG(e,t){if(!e||!t||!Object.keys(t).length)return;let r="remote.portsAttributes";if(!e[r]){e[r]=t;return}for(let n in t)e[r][n]||(e[r][n]=t[n])}function BG(e,t){if(!e||!t)return;let r="remote.otherPortsAttributes";e[r]||(e[r]=t)}async function Ph(e,t,r,n){let o=typeof e.gid=="string"?`${e.user}:${e.gid}`:e.user,i=await t();if((await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let c=De.posix.dirname(r);c!=="/"&&await i.exec(`chown ${o} ${c}`),r!=="/"&&await i.exec(`chown -R ${o} ${r}`)}else if(n&&(await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let l=De.posix.dirname(n);l!=="/"&&await i.exec(`chown -R ${o} ${l}`)}}async function wu(e,t,r,n){if((t||Ho)&&n!=="none"){let o=n==="system"?e.launchRootShellServer&&await e.launchRootShellServer():e.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${e.nodeExecutable} ${t} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function Ta(e,t,r,n){let{cliHost:o}=e,i=o.path.join(await o.homedir(),...r),s=De.posix.join(t.homeFolder,...r);await ou(e,t,i,s,n)}async function Ih(e,t,r){let{cliHost:n}=e,{env:o}=n,i=["git","config"],s=o.XDG_CONFIG_HOME?[o.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...i),c=(async()=>{let u=await r,l=u.XDG_CONFIG_HOME?[u.XDG_CONFIG_HOME]:[t.homeFolder,".config"];return De.posix.join(...l,...i)})();await ou(e,t,a,c,"git")}async function ou(e,t,r,n,o){let i=await VG(e.cliHost,r);if(i)try{let s=await n;await t.shellServer.exec(`# Test for ${s} and ${o}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p ${De.posix.dirname(s)}`),await t.shellServer.exec(`# Copy ${r} to ${s}
${lE(i.byteLength)} >${s}`,{stdin:i})}catch(s){if(s&&s.code!==1)throw s}}async function VG(e,t){try{return await e.readFile(t)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function VA(e,t){let{commit:r}=e.product,{installFolder:n,shellServer:o,launchRootShellServer:i,build:s}=t;if(!(r&&n))return{serverDownloaded:void 0};WG(t.osRelease,s),s.preview&&e.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await kh(o,n),c;a||s===QA[s.arch]&&(i?c=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let u=t.sharedInstallFolder;if(u&&await kh(o,u))return a||await o.exec(`mkdir -p '${De.posix.dirname(n)}' && ln -snf '${u}' '${n}'`),i&&(async()=>{await(await i()).exec(`touch '${u}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};e.progress(4),e.output.write(`Installing VS Code Server for commit ${r}\r
`);let l=!!(u&&i),d=l?u:n,f=l?await i():o,p={localCacheFolder:e.localCacheFolder,build:s,commit:r,quality:e.product.quality||"insider",web:e.web,output:e.output,alternateDownload:e.alternateDownload},m=Td(p),h=await Jt(m);h||await ih(p);try{t.sharedDataFolderIsLocalCacheFolder?await WA(p):await Id(e,f,m,d)}catch(g){if(g&&g.stderr&&/unexpected end of file|not in gzip format/i.test(g.stderr.toString()))await ih(p),t.sharedDataFolderIsLocalCacheFolder?await WA(p):await Id(e,f,m,d);else throw g}return l&&(await o.exec(`mkdir -p '${De.posix.dirname(n)}' && ln -snf '${u}' '${n}'`),(async()=>{await f.exec(`touch '${u}' && cd '${De.posix.dirname(u)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!h}}function WG(e,t){let r=e.version;if(t.minVersion&&r){let n=hu(r.trim());if(n&&gu(n,t.minVersion)){let o=`${t.label} ${t.minVersion.join(".")} or later required.`;throw new je({description:o,data:{reload:!1}})}}}async function ih(e){let{build:t,commit:r,quality:n,web:o,output:i}=e,s="Downloading VS Code Server",a=i.start(s);i.write(`${r} ${t.id} ${n} ${o?"web":""}`);let c=Td(e);await oo(De.dirname(c));let u=`https://update.code.visualstudio.com/commit:${r}/server-${t.id}${o?"-web":""}/${n}`;try{let l=`${c}_${Date.now()}`;await new Promise((d,f)=>{let p=wh.createWriteStream(l);i.write("Starting download.",qe.Trace),FA.https.get(u,h=>{if(h.statusCode<200||h.statusCode>299){i.write(`Download failed: ${h.statusCode} ${h.statusMessage}.`,qe.Trace),f(new je({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${u}): HTTP ${h.statusCode} - ${h.statusMessage}`}));return}i.write("Downloading data.",qe.Trace),h.on("error",f),h.pipe(p),h.on("end",d)}).on("error",f)}),await ai(l,c)}catch(l){if(i.write("Downloading failed.",qe.Trace),i.write((l==null?void 0:l.stack)||(l==null?void 0:l.message)||String(l),qe.Trace),e.alternateDownload){i.write(l&&(l.originalError||l.message)),i.write("Retrying to download VS Code Server.");let d=`${c}_${Date.now()}`;await e.alternateDownload(u,d),await ai(d,c)}else throw l||new Error("Failed to download VS Code Server.")}finally{i.stop(s,a)}}async function Id(e,t,r,n,o,i=!0){let s="Installing VS Code Server",a=e.output.start(s),c=`${n}_${Date.now()}`;try{if(await t.exec(`mkdir -p ${c}`),o)typeof r=="string"&&r.endsWith(".zip")?await t.exec(`unzip ${r} -d ${c}`):await t.exec(`cat ${r} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let u=typeof r=="string"?await vt(r):r;await t.exec(`${lE(u.byteLength)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:u})}await t.exec(`mv -n ${De.posix.join(c,"*",".")} ${n} && rmdir ${c}`)}catch(u){try{await t.exec(`rm -rf ${c}`)}catch{}throw u}finally{e.output.stop(s,a)}}async function WA(e){let{localCacheFolder:t,build:r,commit:n,quality:o,web:i,output:s}=e,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${o} ${i?"web":""}`);let u=await $A(De,t,r,n,o,i),l=`${u}_${Date.now()}`;try{await oo(l);let d=Td(e);await(await gi(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",d,"--strip-components","1","-C",l],cwd:process.cwd(),output:s})).exit,await Gi(u,{recursive:!0,force:!0}),await ai(l,u)}catch(d){try{await Gi(l,{recursive:!0,force:!0})}catch{}throw d}finally{s.stop(a,c)}}function Td(e){let{localCacheFolder:t,build:r,commit:n,quality:o,web:i}=e,s=De.join(t,"serverCache",n),a=`vscode-server-${r.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${r.archiveExt||".tar.gz"}`;return De.join(s,a)}async function GA(e,t){let r={VSCODE_AGENT_FOLDER:t.userDataFolder},{stdout:n}=await vi(e,t,[De.posix.join(t.installFolder,...Dd(e.product)),...XA(t.userDataFolder),...eO(e.getTelemetryLevel()),"--list-extensions"],t.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(o=>!!o)}async function zA(e,t,r){let n="Preparing Extensions",o=e.output.start(n),{sharedDataFolder:i}=t,s=i?JG(i):void 0,a=KA(t),c=await GG(e,t,r);if(t.sharedDataFolderIsLocalCacheFolder)t.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),t.launchRootShellServer&&(await t.launchRootShellServer()).exec(`chown -R ${t.user} ${s}`);else{let u=YG(e.localCacheFolder),l=await zG(e,t,u,s,a,[...c.builtinExtensions,...c.extensions]);KG(e,t,u,s,a,l).catch(console.error)}return e.output.stop(n,o),c}async function GG(e,t,r){let n=Hn(t),o=De.posix.join(n,".installExtensionsMarker"),i=!await Th(t.shellServer,o),s=i?[]:e.installBuiltinExtensions||[],a=await e.getAdditionalExtensionsToInstall(i),c=i?[]:await r();for(let l of a)c.indexOf(l)===-1&&c.push(l);let u=[].concat(...s.map(l=>["--install-builtin-extension",l]),...c.map(l=>["--install-extension",l]));return e.cliMode&&u.length&&u.push("--do-not-sync"),{builtinExtensions:s,extensions:c,args:u}}async function zG(e,t,r,n,o,i){e.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=t,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(l=>!!l),u=c.filter(l=>i.some(d=>l.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(l)===-1);if(e.output.write(`Extensions cache, link in container: ${u.join(", ")||"None"}`),u.length){await s.exec(`mkdir -p '${o}' && ln -s '${n}'/* '${o}' || true`);let{launchRootShellServer:l}=t;l&&(async()=>{await(await l()).exec(`cd ${n} && touch ${u.map(f=>`'${f}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await oo(r);let c=await Wi(r),u=c.filter(l=>i.some(d=>l.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(l)===-1);if(e.output.write(`Extensions cache, copy to remote: ${u.join(", ")||"None"}`),u.length){let l=De.basename(r),d=Ch.c({cwd:De.dirname(r)},u.map(m=>De.join(l,m))),f=De.posix.join(o,`tmp-${Date.now()}`),p=await new Promise(m=>{let h=[];d.on("data",g=>h.push(g)),d.on("end",()=>m(Buffer.concat(h)))});await s.exec(`# Copy extensions to remote
mkdir -p ${f}
${lE(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${f}
mv ${f}/* ${o} && rmdir ${f}`,{stdin:p})}return{remoteExtensions:a.concat(u),cachedExtensions:c}}}async function KG(e,t,r,n,o,i){if(n&&!t.launchRootShellServer)return;let s=1e4,a=6e4;for(await Bo(s);;)i=await QG(e,t,r,n,o,i),await Bo(a)}async function QG(e,t,r,n,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:u}=t,l=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(f=>!!f);if(!n){let f=i.filter(p=>l.indexOf(p)===-1);e.output.write(`Extensions cache, remote removals: ${f.join(", ")||"None"}`);for(let p of f)try{await AS(De.join(r,p))}catch(m){if(!(m&&m.code==="ENOENT"))throw m}}let d=l.filter(f=>i.indexOf(f)===-1&&s.indexOf(f)===-1);if(e.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${d.join(", ")||"None"}`,qe.Trace),d.length)if(n){let f=await c();await f.exec(`mkdir -p '${n}' && cd '${o}' && cp ${d.map(p=>`'${p}'`).join(" ")} '${n}'`),await f.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let f=De.posix.basename(o),p=await u({cmd:"tar",cwd:De.posix.dirname(o),args:["c",...d.map(v=>De.posix.join(f,v))],output:e.output}),m=De.join(De.dirname(r),`${De.basename(r)}-${Date.now()}`);await oo(m);let h=Ch.x({cwd:m,strip:1}),g=new Promise((v,w)=>{h.on("error",w),h.on("finish",v)});p.stdout.pipe(h),await g;for(let v of await Wi(m))await ai(De.join(m,v),De.join(r,v));await OS(m)}return{remoteExtensions:l,cachedExtensions:s}}var aE="extensionsCache";function YG(e){return De.join(e,aE)}function JG(e){return De.posix.join(e,aE)}function KA(e){return De.posix.join(e.userDataFolder,aE)}var XG={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},QA={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},$C={label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},ZG={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function HC(e,t){let r=ZG[e.hardware];if(e.id==="alpine"){let o=r&&QA[r];if(!o)throw new je({description:`Alpine Linux is not supported on the hardware architecture '${e.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return o}let n=r&&XG[r];if(!n||t&&!n.stable)throw new je({description:`The hardware architecture '${e.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function qC(e){let t="unknown",r="unknown",n="unknown";try{t=(await e.exec("uname -m")).stdout.trim();let{stdout:o}=await e.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(o.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(o.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(o){console.error(o)}return{hardware:t,id:r,version:n}}async function cE(e,t,r,n,o,i,s,a){let c=De.posix.join(Hn(t),`.${n}Marker`),u=!!t.createdAt&&await YA(t.shellServer,c,t.createdAt)||s;await uE(e,t,r,n,o,i,u,a)}async function ez(e,t,r,n,o,i){let s=De.posix.join(Hn(t),".postStartCommandMarker"),a=!!t.startedAt&&await YA(t.shellServer,s,t.startedAt);await uE(e,t,r,"postStartCommand",n,o,a,i)}async function YA(e,t,r){try{return await e.exec(`mkdir -p '${De.posix.dirname(t)}' && CONTENT="$(cat '${t}' 2>/dev/null || echo ENOENT)" && [ "\${CONTENT:-${r}}" != '${r}' ] && echo '${r}' > '${t}'`),!0}catch{return!1}}async function tz(e,t,r,n,o,i){await uE(e,t,r,"postAttachCommand",n,o,!0,i)}async function uE({postCreate:e},t,r,n,o,i,s,a){let c=r[n];if(s&&c&&(typeof c=="string"?c.trim():c.length)){await i;let u=`Running ${n}...`,l=typeof c=="string"?c:c.join(" "),d=An({event(f){e.output.event(f),f.type==="raw"&&f.text.includes("::endstep::")&&e.output.event({type:"progress",name:u,status:"running",stepDetail:""}),f.type==="raw"&&f.text.includes("::step::")&&e.output.event({type:"progress",name:u,status:"running",stepDetail:`${f.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return e.output.dimensions},onDidChangeDimensions:e.output.onDidChangeDimensions},qe.Info);try{d.event({type:"progress",name:u,status:"running",stepDetail:l});let f=t.remoteWorkspaceFolder||t.homeFolder;d.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await sz(Ne(X({},e),{output:d}),t,typeof c=="string"?["/bin/sh","-c",c]:c,f,{remoteEnv:await o,print:"continuous"}),d.raw(`\r
`),d.event({type:"progress",name:u,status:"succeeded"})}catch(f){if(d.event({type:"progress",name:u,status:"failed"}),f&&(f.code===130||f.signal===2))d.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw(f==null?void 0:f.code)&&d.write(at(`${n} failed with exit code ${f.code}. Skipping any further user-provided commands.`)),new je({description:`The ${n} in the devcontainer.json failed.`,originalError:f})}}n===(r.waitFor||sE)&&a()}async function Th(e,t){try{return await e.exec(mh(t)),!0}catch{return!1}}function mh(e){return`test ! -f '${e}' && set -o noclobber && mkdir -p '${De.posix.dirname(e)}' && { > '${e}' ; } 2> /dev/null`}async function kh(e,t){try{return await rz(e,t),!0}catch{return!1}}async function rz(e,t){return e.exec(`test -d ${t}`)}async function JA(e,t,r,n,o,i){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:u}=t,{processes:l,mntNS:d}=await wC(u),f=`(${De.posix.join(...Dd(e.product,!1))}|${De.posix.join(...Dd(e.product,!0))})`.replace(".","\\."),p=new RegExp(`${De.posix.join(De.posix.dirname(a).replace(".","\\."),"[^/]*",f)}`),m=l.filter(Q=>Q.mntNS===d&&p.test(Q.cmd));e.output.write(`Running extension host agents:
${JSON.stringify(m,void 0,"  ")}`,qe.Trace);let{current:h,others:g}=m.reduce((Q,ee)=>(Q[(ee.cwd===a||ee.cwd===c)&&p.test(ee.cmd)?"current":"others"].push(ee),Q),{current:[],others:[]});if(!e.cliMode&&g.length){e.output.write(`Terminating old extension host agent.\r
`);try{await u.exec(`kill -9 ${g.map(Q=>Q.pgrp?`-${Q.pgrp}`:Q.pid).join(" ")}`)}catch{}}let{commit:v,quality:w}=e.product,C=De.posix.join(Hn(t),`.connection-token-${v}${w==="stable"?"":`-${w}`}${e.web?"-web":""}`),E=De.posix.join(Hn(t),`.devport-${v}${w==="stable"?"":`-${w}`}${e.web?"-web":""}`);if(h.length){e.output.write(`Extension host agent is already running.\r
`);try{let{stdout:Q}=await u.exec(`cat '${E}' 2>/dev/null`),ee=Q.toString().trim(),ne=parseInt(ee,10),U=new RegExp(` '?${ZA(e.product)}'? `).test(h[0].cmd)?(await u.exec(`cat '${C}'`)).stdout.toString().trim():void 0,L=(/'?--connectionToken'? '?([^ ']+)'? /.exec(h[0].cmd)||[])[1];return{serverPort:ne,connectionToken:U,webConnectionToken:L}}catch(Q){console.error(Q),e.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await u.exec(`kill -9 ${h.map(ee=>ee.pgrp?`-${ee.pgrp}`:ee.pid).join(" ")}`)}catch{}}}let b=!!e.webConnectionToken,I;if(!b){let Q=`${C}-${mn()}`,{stdout:ee}=await u.exec(`cat '${C}' 2>/dev/null || (umask 377 && echo '${mn()}' >'${Q}' && mv -n '${Q}' '${C}' && rm -f '${Q}' && cat '${C}')`);I=ee.toString().trim()}e.progress(5);let T="Starting VS Code Server",P=e.output.start(T),S=[De.posix.join(a,...Dd(e.product,b)),"--log",zi(e.getLogLevel()),"--force-disable-user-env",...XA(t.userDataFolder),...nz(e),...eO(e.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(r),...e.webConnectionToken?["--connectionToken",e.webConnectionToken]:[],...I?[ZA(e.product),C]:[],"--extensions-download-dir",KA(t),...(await o()).args,"--start-server",...e.isLocalContainer?["--disable-websocket-compression"]:[""],...e.cliMode?["--enable-remote-auto-shutdown"]:[]],A=(await vi(e,{remoteExec:t.remoteExec},S,a,{remoteEnv:X({SHELL:t.shell,VSCODE_AGENT_FOLDER:s},e.cliMode?await i:{}),resolveOn:jA,print:"continuous"})).cmdOutput;e.output.stop(T,P);let N=(jA.exec(A)||[])[1];if(!N)throw new Error("Port not found");return await u.exec(`echo ${N} >'${E}'`),{serverPort:parseInt(N,10),connectionToken:I,webConnectionToken:e.webConnectionToken}}function XA(e){return["--server-data-dir",e]}function ZA(e){return e.serverApplicationName?"--connection-token-file":"--connection-secret"}function nz(e){return e.isLocalContainer?["--use-host-proxy"]:[]}function eO(e){return e?["--telemetry-level",e]:[]}var oz=/^([a-z0-9\-]+):(\d{1,5})$/;function iz(e){let t=e.match(oz);if(!(!t||t.length!==3))return{host:t[1],port:Number(t[2])}}async function tO(e,t,r){let n=(r.forwardPorts||[]).map(i=>typeof i=="number"?`localhost:${i}`:i).map(iz).filter(Boolean),o=await e.getTunnels();await Promise.all(n.filter(i=>!o.find(s=>s.remoteAddress.host===i.host&&s.remoteAddress.port===i.port)).map(async({host:i,port:s})=>e.openTunnel(t,s,i)))}async function sz(e,{remotePtyExec:t},r,n,o={}){let i=o.print||(o.silent?"off":"end"),s=await t({env:o.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:o.silent?pt:e.output}),a="",c,u=new Promise(f=>{c=f});s.onData(f=>{a+=f,i==="continuous"&&e.output.raw(f),o.resolveOn&&o.resolveOn.exec(a)&&c()});let l=e.onDidInput&&e.onDidInput(f=>s.write(f)),d=await Promise.race([s.exit,u]);return l&&l.dispose(),i==="end"&&e.output.raw(a),d&&(d.code||d.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:d.code,signal:d.signal}):{cmdOutput:a}}async function vi(e,{remoteExec:t},r,n,o={}){let i=o.print||(o.silent?"off":"end"),s=await t({env:o.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:o.silent?pt:e.output}),a=[],c=[],u=new iE.StringDecoder,l=new iE.StringDecoder,d="",f="",p,m,h=new Promise((E,b)=>{p=E,m=b});s.stdout.on("data",E=>{a.push(E);let b=u.write(E);i==="continuous"&&e.output.write(b.replace(/\r?\n/g,`\r
`)),d+=b,o.resolveOn&&o.resolveOn.exec(d)&&p()}),s.stderr.on("data",E=>{c.push(E),f+=l.write(E)}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,E=>{E&&m(E)}),s.stdin.end()):o.stdin instanceof wh.ReadStream&&o.stdin.pipe(s.stdin);let g=await Promise.race([s.exit,h]),v=Buffer.concat(a),w=Buffer.concat(c);i==="end"&&(e.output.write(d.replace(/\r?\n/g,`\r
`)),e.output.write(at(f)));let C=`${d}
${f}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:C,stdout:v,stderr:w,code:g.code,signal:g.signal}):{cmdOutput:C,stdout:v,stderr:w}}function lE(e){let t=8*1024,r=e%t,n=(e-r)/t;return`(dd iflag=fullblock bs=${t} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function az(e,t){let r=De.posix.join(yu(e.product.serverDataFolderName),".patchEtcEnvironmentMarker");if(e.allowSystemConfigChange&&t.launchRootShellServer&&!await Pd(t.shellServer,r)){let n=await t.launchRootShellServer();await Th(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(t.env).map(o=>`
${o}="${t.env[o]}"`).join("")}
etcEnvrionmentEOF
`)}}async function cz(e,t){let r=De.posix.join(yu(e.product.serverDataFolderName),".patchEtcProfileMarker");if(e.allowSystemConfigChange&&t.launchRootShellServer&&!await Pd(t.shellServer,r)){let n=await t.launchRootShellServer();await Th(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function pu(e,t,r,n){let o=await rO(e,t,r,n,"cat /proc/self/environ","\0");return o||(e.output.write("userEnvProbe: falling back to printenv"),await rO(e,t,r,n,"printenv",`
`)||{})}async function rO(e,t,r,n,o,i){var a;let{userEnvProbe:s}=r||{};if(e.output.write(`userEnvProbe: ${s||e.defaultUserEnvProbe}${s?"":" (default)"}`),s||(s=e.defaultUserEnvProbe),s==="none")return{};try{let u=(await(0,UA.promisify)(MA.randomBytes)(16)).toString("hex"),l=new RegExp(u+"([^]*)"+u),d=t.shell;e.output.write(`userEnvProbe shell: ${d}`);let f=De.posix.basename(d),p=`echo -n ${u}; ${o}; echo -n ${u}`,m;/^pwsh(-preview)?$/.test(f)?m=s==="loginInteractiveShell"||s==="loginShell"?["-Login","-Command"]:["-Command"]:m=[s==="loginInteractiveShell"?"-lic":s==="loginShell"?"-lc":s==="interactiveShell"?"-ic":"-c"];let h=An(e.output,qe.Trace),g=vi({output:h},{remoteExec:await n||t.remoteExec},[d,...m,p],t.installFolder);Promise.race([g,Bo(2e3)]).then(async S=>{if(!S){let k,A=t.shellServer||await fo(t.remoteExec,e.output);try{({processes:k}=await wC(A))}finally{t.shellServer||await A.process.terminate()}let N=k.find(z=>z.cmd.startsWith(d)&&z.cmd.indexOf(u)!==-1);if(N){let Q=$k(k)[N.pid];e.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${CC(Q)}`)}else e.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(S=>e.output.write(at(S&&(S.stack||S.message)||"Error reading process tree.")));let v=await Promise.race([g,Bo(1e4)]);if(!v)return e.output.write(at("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let w=v.stdout.toString(),C=l.exec(w),E=C?C[1]:"";if(!E||E.trim()==="-n")return;let b=E.split(i).reduce((S,k)=>{let A=k.indexOf("=");return A!==-1&&(S[k.substring(0,A)]=k.substring(A+1)),S},{});e.output.write(`userEnvProbe parsed: ${JSON.stringify(b,void 0,"  ")}`,qe.Trace),delete b.PWD;let I=b.PATH,T=(a=t.env)==null?void 0:a.PATH,P=!(e.allowSystemConfigChange&&t.launchRootShellServer)&&I&&T;if(P){let S=t.user;b.PATH=uz(I,T,S==="root"||S==="0")}return e.output.write(`userEnvProbe PATHs:
Probe:     ${typeof I=="string"?`'${I}'`:"None"}
Container: ${typeof T=="string"?`'${T}'`:"None"}${P?`
Merged:    ${typeof b.PATH=="string"?`'${b.PATH}'`:"None"}`:""}`),b}catch(c){return e.output.write(at(c&&(c.stack||c.message)||"Error reading shell environment.")),{}}}function uz(e,t,r){let n=e.split(":"),o=0;for(let i of t.split(":")){let s=n.indexOf(i);s===-1?(r||!/\/sbin(\/|$)/.test(i))&&n.splice(o++,0,i):o=s+1}return n.join(":")}async function nO(e){for(let t of e)await(typeof t=="function"?t():t)}var XO=ie(require("crypto")),Wd=ie(require("path"));function oO(e){return typeof e=="undefined"||e===null}function lz(e){return typeof e=="object"&&e!==null}function dz(e){return Array.isArray(e)?e:oO(e)?[]:[e]}function fz(e,t){var r,n,o,i;if(t)for(i=Object.keys(t),r=0,n=i.length;r<n;r+=1)o=i[r],e[o]=t[o];return e}function pz(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function mz(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var hz=oO,gz=lz,vz=dz,yz=pz,wz=mz,Cz=fz,Zt={isNothing:hz,isObject:gz,toArray:vz,repeat:yz,isNegativeZero:wz,extend:Cz};function iO(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Ld(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=iO(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ld.prototype=Object.create(Error.prototype);Ld.prototype.constructor=Ld;Ld.prototype.toString=function(t){return this.name+": "+iO(this,t)};var zr=Ld;function dE(e,t,r,n,o){var i="",s="",a=Math.floor(o/2)-1;return n-t>a&&(i=" ... ",t=n-a+i.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:i+e.slice(t,r).replace(/\t/g,"\u2192")+s,pos:n-t+i.length}}function fE(e,t){return Zt.repeat(" ",t-e.length)+e}function Ez(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],o=[],i,s=-1;i=r.exec(e.buffer);)o.push(i.index),n.push(i.index+i[0].length),e.position<=i.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,u,l=Math.min(e.line+t.linesAfter,o.length).toString().length,d=t.maxLength-(t.indent+l+3);for(c=1;c<=t.linesBefore&&!(s-c<0);c++)u=dE(e.buffer,n[s-c],o[s-c],e.position-(n[s]-n[s-c]),d),a=Zt.repeat(" ",t.indent)+fE((e.line-c+1).toString(),l)+" | "+u.str+`
`+a;for(u=dE(e.buffer,n[s],o[s],e.position,d),a+=Zt.repeat(" ",t.indent)+fE((e.line+1).toString(),l)+" | "+u.str+`
`,a+=Zt.repeat("-",t.indent+l+3+u.pos)+`^
`,c=1;c<=t.linesAfter&&!(s+c>=o.length);c++)u=dE(e.buffer,n[s+c],o[s+c],e.position-(n[s]-n[s+c]),d),a+=Zt.repeat(" ",t.indent)+fE((e.line+c+1).toString(),l)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var _z=Ez,bz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],xz=["scalar","sequence","mapping"];function Sz(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function Pz(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(bz.indexOf(r)===-1)throw new zr('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Sz(t.styleAliases||null),xz.indexOf(this.kind)===-1)throw new zr('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var xr=Pz;function sO(e,t){var r=[];return e[t].forEach(function(n){var o=r.length;r.forEach(function(i,s){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(o=s)}),r[o]=n}),r}function Iz(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function pE(e){return this.extend(e)}pE.prototype.extend=function(t){var r=[],n=[];if(t instanceof xr)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new zr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(i){if(!(i instanceof xr))throw new zr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new zr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new zr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof xr))throw new zr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(pE.prototype);return o.implicit=(this.implicit||[]).concat(r),o.explicit=(this.explicit||[]).concat(n),o.compiledImplicit=sO(o,"implicit"),o.compiledExplicit=sO(o,"explicit"),o.compiledTypeMap=Iz(o.compiledImplicit,o.compiledExplicit),o};var Tz=pE,kz=new xr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Dz=new xr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Rz=new xr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Az=new Tz({explicit:[kz,Dz,Rz]});function Oz(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Nz(){return null}function Lz(e){return e===null}var Fz=new xr("tag:yaml.org,2002:null",{kind:"scalar",resolve:Oz,construct:Nz,predicate:Lz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Mz(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Uz(e){return e==="true"||e==="True"||e==="TRUE"}function jz(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var $z=new xr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Mz,construct:Uz,predicate:jz,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Hz(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function qz(e){return 48<=e&&e<=55}function Bz(e){return 48<=e&&e<=57}function Vz(e){if(e===null)return!1;var t=e.length,r=0,n=!1,o;if(!t)return!1;if(o=e[r],(o==="-"||o==="+")&&(o=e[++r]),o==="0"){if(r+1===t)return!0;if(o=e[++r],o==="b"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(o!=="0"&&o!=="1")return!1;n=!0}return n&&o!=="_"}if(o==="x"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(!Hz(e.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}if(o==="o"){for(r++;r<t;r++)if(o=e[r],o!=="_"){if(!qz(e.charCodeAt(r)))return!1;n=!0}return n&&o!=="_"}}if(o==="_")return!1;for(;r<t;r++)if(o=e[r],o!=="_"){if(!Bz(e.charCodeAt(r)))return!1;n=!0}return!(!n||o==="_")}function Wz(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function Gz(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1==0&&!Zt.isNegativeZero(e)}var zz=new xr("tag:yaml.org,2002:int",{kind:"scalar",resolve:Vz,construct:Wz,predicate:Gz,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Kz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Qz(e){return!(e===null||!Kz.test(e)||e[e.length-1]==="_")}function Yz(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var Jz=/^[-+]?[0-9]+e/;function Xz(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Zt.isNegativeZero(e))return"-0.0";return r=e.toString(10),Jz.test(r)?r.replace("e",".e"):r}function Zz(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!=0||Zt.isNegativeZero(e))}var e4=new xr("tag:yaml.org,2002:float",{kind:"scalar",resolve:Qz,construct:Yz,predicate:Zz,represent:Xz,defaultStyle:"lowercase"}),t4=Az.extend({implicit:[Fz,$z,zz,e4]}),r4=t4,aO=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),cO=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function n4(e){return e===null?!1:aO.exec(e)!==null||cO.exec(e)!==null}function o4(e){var t,r,n,o,i,s,a,c=0,u=null,l,d,f;if(t=aO.exec(e),t===null&&(t=cO.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(r,n,o));if(i=+t[4],s=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(l=+t[10],d=+(t[11]||0),u=(l*60+d)*6e4,t[9]==="-"&&(u=-u)),f=new Date(Date.UTC(r,n,o,i,s,a,c)),u&&f.setTime(f.getTime()-u),f}function i4(e){return e.toISOString()}var s4=new xr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:n4,construct:o4,instanceOf:Date,represent:i4});function a4(e){return e==="<<"||e===null}var c4=new xr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:a4}),mE=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function u4(e){if(e===null)return!1;var t,r,n=0,o=e.length,i=mE;for(r=0;r<o;r++)if(t=i.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8==0}function l4(e){var t,r,n=e.replace(/[\r\n=]/g,""),o=n.length,i=mE,s=0,a=[];for(t=0;t<o;t++)t%4==0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(n.charAt(t));return r=o%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function d4(e){var t="",r=0,n,o,i=e.length,s=mE;for(n=0;n<i;n++)n%3==0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return o=i%3,o===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):o===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):o===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}function f4(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var p4=new xr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:u4,construct:l4,predicate:f4,represent:d4}),m4=Object.prototype.hasOwnProperty,h4=Object.prototype.toString;function g4(e){if(e===null)return!0;var t=[],r,n,o,i,s,a=e;for(r=0,n=a.length;r<n;r+=1){if(o=a[r],s=!1,h4.call(o)!=="[object Object]")return!1;for(i in o)if(m4.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}function v4(e){return e!==null?e:[]}var y4=new xr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:g4,construct:v4}),w4=Object.prototype.toString;function C4(e){if(e===null)return!0;var t,r,n,o,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],w4.call(n)!=="[object Object]"||(o=Object.keys(n),o.length!==1))return!1;i[t]=[o[0],n[o[0]]]}return!0}function E4(e){if(e===null)return[];var t,r,n,o,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],o=Object.keys(n),i[t]=[o[0],n[o[0]]];return i}var _4=new xr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:C4,construct:E4}),b4=Object.prototype.hasOwnProperty;function x4(e){if(e===null)return!0;var t,r=e;for(t in r)if(b4.call(r,t)&&r[t]!==null)return!1;return!0}function S4(e){return e!==null?e:{}}var P4=new xr("tag:yaml.org,2002:set",{kind:"mapping",resolve:x4,construct:S4}),uO=r4.extend({implicit:[s4,c4],explicit:[p4,y4,_4,P4]}),fs=Object.prototype.hasOwnProperty,Dh=1,lO=2,dO=3,Rh=4,hE=1,I4=2,fO=3,T4=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,k4=/[\x85\u2028\u2029]/,D4=/[,\[\]\{\}]/,pO=/^(?:!|!!|![a-z\-]+!)$/i,mO=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function hO(e){return Object.prototype.toString.call(e)}function Vo(e){return e===10||e===13}function ka(e){return e===9||e===32}function Kr(e){return e===9||e===32||e===10||e===13}function Cu(e){return e===44||e===91||e===93||e===123||e===125}function R4(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function A4(e){return e===120?2:e===117?4:e===85?8:0}function O4(e){return 48<=e&&e<=57?e-48:-1}function gO(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function N4(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var vO=new Array(256),yO=new Array(256);for(Da=0;Da<256;Da++)vO[Da]=gO(Da)?1:0,yO[Da]=gO(Da);var Da;function L4(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||uO,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function wO(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=_z(r),new zr(t,r)}function Re(e,t){throw wO(e,t)}function Ah(e,t){e.onWarning&&e.onWarning.call(null,wO(e,t))}var CO={YAML:function(t,r,n){var o,i,s;t.version!==null&&Re(t,"duplication of %YAML directive"),n.length!==1&&Re(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),o===null&&Re(t,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Re(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&Ah(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var o,i;n.length!==2&&Re(t,"TAG directive accepts exactly two arguments"),o=n[0],i=n[1],pO.test(o)||Re(t,"ill-formed tag handle (first argument) of the TAG directive"),fs.call(t.tagMap,o)&&Re(t,'there is a previously declared suffix for "'+o+'" tag handle'),mO.test(i)||Re(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Re(t,"tag prefix is malformed: "+i)}t.tagMap[o]=i}};function ps(e,t,r,n){var o,i,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Re(e,"expected valid JSON character");else T4.test(a)&&Re(e,"the stream contains non-printable characters");e.result+=a}}function EO(e,t,r,n){var o,i,s,a;for(Zt.isObject(r)||Re(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(r),s=0,a=o.length;s<a;s+=1)i=o[s],fs.call(t,i)||(t[i]=r[i],n[i]=!0)}function Eu(e,t,r,n,o,i,s,a,c){var u,l;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),u=0,l=o.length;u<l;u+=1)Array.isArray(o[u])&&Re(e,"nested arrays are not supported inside keys"),typeof o=="object"&&hO(o[u])==="[object Object]"&&(o[u]="[object Object]");if(typeof o=="object"&&hO(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(u=0,l=i.length;u<l;u+=1)EO(e,t,i[u],r);else EO(e,t,i,r);else!e.json&&!fs.call(r,o)&&fs.call(t,o)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,Re(e,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(t,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[o]=i,delete r[o];return t}function gE(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Re(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Vt(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);o!==0;){for(;ka(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(Vo(o))for(gE(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Ah(e,"deficient indentation"),n}function Oh(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Kr(r)))}function vE(e,t){t===1?e.result+=" ":t>1&&(e.result+=Zt.repeat(`
`,t-1))}function F4(e,t,r){var n,o,i,s,a,c,u,l,d=e.kind,f=e.result,p;if(p=e.input.charCodeAt(e.position),Kr(p)||Cu(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(o=e.input.charCodeAt(e.position+1),Kr(o)||r&&Cu(o)))return!1;for(e.kind="scalar",e.result="",i=s=e.position,a=!1;p!==0;){if(p===58){if(o=e.input.charCodeAt(e.position+1),Kr(o)||r&&Cu(o))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),Kr(n))break}else{if(e.position===e.lineStart&&Oh(e)||r&&Cu(p))break;if(Vo(p))if(c=e.line,u=e.lineStart,l=e.lineIndent,Vt(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=c,e.lineStart=u,e.lineIndent=l;break}}a&&(ps(e,i,s,!1),vE(e,e.line-c),i=s=e.position,a=!1),ka(p)||(s=e.position+1),p=e.input.charCodeAt(++e.position)}return ps(e,i,s,!1),e.result?!0:(e.kind=d,e.result=f,!1)}function M4(e,t){var r,n,o;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ps(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,o=e.position;else return!0;else Vo(r)?(ps(e,n,o,!0),vE(e,Vt(e,!1,t)),n=o=e.position):e.position===e.lineStart&&Oh(e)?Re(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);Re(e,"unexpected end of the stream within a single quoted scalar")}function U4(e,t){var r,n,o,i,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return ps(e,r,e.position,!0),e.position++,!0;if(a===92){if(ps(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Vo(a))Vt(e,!1,t);else if(a<256&&vO[a])e.result+=yO[a],e.position++;else if((s=A4(a))>0){for(o=s,i=0;o>0;o--)a=e.input.charCodeAt(++e.position),(s=R4(a))>=0?i=(i<<4)+s:Re(e,"expected hexadecimal character");e.result+=N4(i),e.position++}else Re(e,"unknown escape sequence");r=n=e.position}else Vo(a)?(ps(e,r,n,!0),vE(e,Vt(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Oh(e)?Re(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Re(e,"unexpected end of the stream within a double quoted scalar")}function j4(e,t){var r=!0,n,o,i,s=e.tag,a,c=e.anchor,u,l,d,f,p,m=Object.create(null),h,g,v,w;if(w=e.input.charCodeAt(e.position),w===91)l=93,p=!1,a=[];else if(w===123)l=125,p=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),w=e.input.charCodeAt(++e.position);w!==0;){if(Vt(e,!0,t),w=e.input.charCodeAt(e.position),w===l)return e.position++,e.tag=s,e.anchor=c,e.kind=p?"mapping":"sequence",e.result=a,!0;r?w===44&&Re(e,"expected the node content, but found ','"):Re(e,"missed comma between flow collection entries"),g=h=v=null,d=f=!1,w===63&&(u=e.input.charCodeAt(e.position+1),Kr(u)&&(d=f=!0,e.position++,Vt(e,!0,t))),n=e.line,o=e.lineStart,i=e.position,_u(e,t,Dh,!1,!0),g=e.tag,h=e.result,Vt(e,!0,t),w=e.input.charCodeAt(e.position),(f||e.line===n)&&w===58&&(d=!0,w=e.input.charCodeAt(++e.position),Vt(e,!0,t),_u(e,t,Dh,!1,!0),v=e.result),p?Eu(e,a,m,g,h,v,n,o,i):d?a.push(Eu(e,null,m,g,h,v,n,o,i)):a.push(h),Vt(e,!0,t),w=e.input.charCodeAt(e.position),w===44?(r=!0,w=e.input.charCodeAt(++e.position)):r=!1}Re(e,"unexpected end of the stream within a flow collection")}function $4(e,t){var r,n,o=hE,i=!1,s=!1,a=t,c=0,u=!1,l,d;if(d=e.input.charCodeAt(e.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)hE===o?o=d===43?fO:I4:Re(e,"repeat of a chomping mode identifier");else if((l=O4(d))>=0)l===0?Re(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Re(e,"repeat of an indentation width identifier"):(a=t+l-1,s=!0);else break;if(ka(d)){do d=e.input.charCodeAt(++e.position);while(ka(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!Vo(d)&&d!==0)}for(;d!==0;){for(gE(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Vo(d)){c++;continue}if(e.lineIndent<a){o===fO?e.result+=Zt.repeat(`
`,i?1+c:c):o===hE&&i&&(e.result+=`
`);break}for(n?ka(d)?(u=!0,e.result+=Zt.repeat(`
`,i?1+c:c)):u?(u=!1,e.result+=Zt.repeat(`
`,c+1)):c===0?i&&(e.result+=" "):e.result+=Zt.repeat(`
`,c):e.result+=Zt.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,r=e.position;!Vo(d)&&d!==0;)d=e.input.charCodeAt(++e.position);ps(e,r,e.position,!1)}return!0}function _O(e,t){var r,n=e.tag,o=e.anchor,i=[],s,a=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Re(e,"tab characters must not be used in indentation")),!(c!==45||(s=e.input.charCodeAt(e.position+1),!Kr(s))));){if(a=!0,e.position++,Vt(e,!0,-1)&&e.lineIndent<=t){i.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,_u(e,t,dO,!1,!0),i.push(e.result),Vt(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)Re(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=o,e.kind="sequence",e.result=i,!0):!1}function H4(e,t,r){var n,o,i,s,a,c,u=e.tag,l=e.anchor,d={},f=Object.create(null),p=null,m=null,h=null,g=!1,v=!1,w;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),w=e.input.charCodeAt(e.position);w!==0;){if(!g&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Re(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),i=e.line,(w===63||w===58)&&Kr(n))w===63?(g&&(Eu(e,d,f,p,m,null,s,a,c),p=m=h=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):Re(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,w=n;else{if(s=e.line,a=e.lineStart,c=e.position,!_u(e,r,lO,!1,!0))break;if(e.line===i){for(w=e.input.charCodeAt(e.position);ka(w);)w=e.input.charCodeAt(++e.position);if(w===58)w=e.input.charCodeAt(++e.position),Kr(w)||Re(e,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Eu(e,d,f,p,m,null,s,a,c),p=m=h=null),v=!0,g=!1,o=!1,p=e.tag,m=e.result;else if(v)Re(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=l,!0}else if(v)Re(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=l,!0}if((e.line===i||e.lineIndent>t)&&(g&&(s=e.line,a=e.lineStart,c=e.position),_u(e,t,Rh,!0,o)&&(g?m=e.result:h=e.result),g||(Eu(e,d,f,p,m,h,s,a,c),p=m=h=null),Vt(e,!0,-1),w=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&w!==0)Re(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return g&&Eu(e,d,f,p,m,null,s,a,c),v&&(e.tag=u,e.anchor=l,e.kind="mapping",e.result=d),v}function q4(e){var t,r=!1,n=!1,o,i,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&Re(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,o="!!",s=e.input.charCodeAt(++e.position)):o="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(i=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Re(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Kr(s);)s===33&&(n?Re(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),pO.test(o)||Re(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),D4.test(i)&&Re(e,"tag suffix cannot contain flow indicator characters")}i&&!mO.test(i)&&Re(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Re(e,"tag name is malformed: "+i)}return r?e.tag=i:fs.call(e.tagMap,o)?e.tag=e.tagMap[o]+i:o==="!"?e.tag="!"+i:o==="!!"?e.tag="tag:yaml.org,2002:"+i:Re(e,'undeclared tag handle "'+o+'"'),!0}function B4(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Re(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Kr(r)&&!Cu(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Re(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function V4(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Kr(n)&&!Cu(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Re(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),fs.call(e.anchorMap,r)||Re(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Vt(e,!0,-1),!0}function _u(e,t,r,n,o){var i,s,a,c=1,u=!1,l=!1,d,f,p,m,h,g;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=s=a=Rh===r||dO===r,n&&Vt(e,!0,-1)&&(u=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;q4(e)||B4(e);)Vt(e,!0,-1)?(u=!0,a=i,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=u||o),(c===1||Rh===r)&&(Dh===r||lO===r?h=t:h=t+1,g=e.position-e.lineStart,c===1?a&&(_O(e,g)||H4(e,g,h))||j4(e,h)?l=!0:(s&&$4(e,h)||M4(e,h)||U4(e,h)?l=!0:V4(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&Re(e,"alias node should not have any properties")):F4(e,h,Dh===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(l=a&&_O(e,g))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Re(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,f=e.implicitTypes.length;d<f;d+=1)if(m=e.implicitTypes[d],m.resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(fs.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,p=e.typeMap.multi[e.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(e.tag.slice(0,p[d].tag.length)===p[d].tag){m=p[d];break}m||Re(e,"unknown tag !<"+e.tag+">"),e.result!==null&&m.kind!==e.kind&&Re(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Re(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function W4(e){var t=e.position,r,n,o,i=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Vt(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(i=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!Kr(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),o=[],n.length<1&&Re(e,"directive name must not be less than one character in length");s!==0;){for(;ka(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Vo(s));break}if(Vo(s))break;for(r=e.position;s!==0&&!Kr(s);)s=e.input.charCodeAt(++e.position);o.push(e.input.slice(r,e.position))}s!==0&&gE(e),fs.call(CO,n)?CO[n](e,n,o):Ah(e,'unknown document directive "'+n+'"')}if(Vt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Vt(e,!0,-1)):i&&Re(e,"directives end mark is expected"),_u(e,e.lineIndent-1,Rh,!1,!0),Vt(e,!0,-1),e.checkLineBreaks&&k4.test(e.input.slice(t,e.position))&&Ah(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Oh(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Vt(e,!0,-1));return}if(e.position<e.length-1)Re(e,"end of the stream or a document separator is expected");else return}function bO(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new L4(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,Re(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)W4(r);return r.documents}function G4(e,t,r){t!==null&&typeof t=="object"&&typeof r=="undefined"&&(r=t,t=null);var n=bO(e,r);if(typeof t!="function")return n;for(var o=0,i=n.length;o<i;o+=1)t(n[o])}function z4(e,t){var r=bO(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new zr("expected a single document in the stream, but found more")}}var K4=G4,Q4=z4,xO={loadAll:K4,load:Q4},SO=Object.prototype.toString,PO=Object.prototype.hasOwnProperty,yE=65279,Y4=9,Fd=10,J4=13,X4=32,Z4=33,e6=34,wE=35,t6=37,r6=38,n6=39,o6=42,IO=44,i6=45,Nh=58,s6=61,a6=62,c6=63,u6=64,TO=91,kO=93,l6=96,DO=123,d6=124,RO=125,Sr={};Sr[0]="\\0";Sr[7]="\\a";Sr[8]="\\b";Sr[9]="\\t";Sr[10]="\\n";Sr[11]="\\v";Sr[12]="\\f";Sr[13]="\\r";Sr[27]="\\e";Sr[34]='\\"';Sr[92]="\\\\";Sr[133]="\\N";Sr[160]="\\_";Sr[8232]="\\L";Sr[8233]="\\P";var f6=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],p6=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function m6(e,t){var r,n,o,i,s,a,c;if(t===null)return{};for(r={},n=Object.keys(t),o=0,i=n.length;o<i;o+=1)s=n[o],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=e.compiledTypeMap.fallback[s],c&&PO.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function h6(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new zr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Zt.repeat("0",n-t.length)+t}var g6=1,Md=2;function v6(e){this.schema=e.schema||uO,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Zt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=m6(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Md:g6,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function AO(e,t){for(var r=Zt.repeat(" ",t),n=0,o=-1,i="",s,a=e.length;n<a;)o=e.indexOf(`
`,n),o===-1?(s=e.slice(n),n=a):(s=e.slice(n,o+1),n=o+1),s.length&&s!==`
`&&(i+=r),i+=s;return i}function CE(e,t){return`
`+Zt.repeat(" ",e.indent*t)}function y6(e,t){var r,n,o;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(o=e.implicitTypes[r],o.resolve(t))return!0;return!1}function Lh(e){return e===X4||e===Y4}function Ud(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==yE||65536<=e&&e<=1114111}function OO(e){return Ud(e)&&e!==yE&&e!==J4&&e!==Fd}function NO(e,t,r){var n=OO(e),o=n&&!Lh(e);return(r?n:n&&e!==IO&&e!==TO&&e!==kO&&e!==DO&&e!==RO)&&e!==wE&&!(t===Nh&&!o)||OO(t)&&!Lh(t)&&e===wE||t===Nh&&o}function w6(e){return Ud(e)&&e!==yE&&!Lh(e)&&e!==i6&&e!==c6&&e!==Nh&&e!==IO&&e!==TO&&e!==kO&&e!==DO&&e!==RO&&e!==wE&&e!==r6&&e!==o6&&e!==Z4&&e!==d6&&e!==s6&&e!==a6&&e!==n6&&e!==e6&&e!==t6&&e!==u6&&e!==l6}function C6(e){return!Lh(e)&&e!==Nh}function jd(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function LO(e){var t=/^\n* /;return t.test(e)}var FO=1,EE=2,MO=3,UO=4,bu=5;function E6(e,t,r,n,o,i,s,a){var c,u=0,l=null,d=!1,f=!1,p=n!==-1,m=-1,h=w6(jd(e,0))&&C6(jd(e,e.length-1));if(t||s)for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=jd(e,c),!Ud(u))return bu;h=h&&NO(u,l,a),l=u}else{for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=jd(e,c),u===Fd)d=!0,p&&(f=f||c-m-1>n&&e[m+1]!==" ",m=c);else if(!Ud(u))return bu;h=h&&NO(u,l,a),l=u}f=f||p&&c-m-1>n&&e[m+1]!==" "}return!d&&!f?h&&!s&&!o(e)?FO:i===Md?bu:EE:r>9&&LO(e)?bu:s?i===Md?bu:EE:f?UO:MO}function _6(e,t,r,n,o){e.dump=function(){if(t.length===0)return e.quotingType===Md?'""':"''";if(!e.noCompatMode&&(f6.indexOf(t)!==-1||p6.test(t)))return e.quotingType===Md?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=n||e.flowLevel>-1&&r>=e.flowLevel;function c(u){return y6(e,u)}switch(E6(t,a,e.indent,s,c,e.quotingType,e.forceQuotes&&!n,o)){case FO:return t;case EE:return"'"+t.replace(/'/g,"''")+"'";case MO:return"|"+jO(t,e.indent)+$O(AO(t,i));case UO:return">"+jO(t,e.indent)+$O(AO(b6(t,s),i));case bu:return'"'+x6(t)+'"';default:throw new zr("impossible error: invalid scalar style")}}()}function jO(e,t){var r=LO(e)?String(t):"",n=e[e.length-1]===`
`,o=n&&(e[e.length-2]===`
`||e===`
`),i=o?"+":n?"":"-";return r+i+`
`}function $O(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function b6(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,r.lastIndex=u,HO(e.slice(0,u),t)}(),o=e[0]===`
`||e[0]===" ",i,s;s=r.exec(e);){var a=s[1],c=s[2];i=c[0]===" ",n+=a+(!o&&!i&&c!==""?`
`:"")+HO(c,t),o=i}return n}function HO(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,o=0,i,s=0,a=0,c="";n=r.exec(e);)a=n.index,a-o>t&&(i=s>o?s:a,c+=`
`+e.slice(o,i),o=i+1),s=a;return c+=`
`,e.length-o>t&&s>o?c+=e.slice(o,s)+`
`+e.slice(s+1):c+=e.slice(o),c.slice(1)}function x6(e){for(var t="",r=0,n,o=0;o<e.length;r>=65536?o+=2:o++)r=jd(e,o),n=Sr[r],!n&&Ud(r)?(t+=e[o],r>=65536&&(t+=e[o+1])):t+=n||h6(r);return t}function S6(e,t,r){var n="",o=e.tag,i,s,a;for(i=0,s=r.length;i<s;i+=1)a=r[i],e.replacer&&(a=e.replacer.call(r,String(i),a)),(yi(e,t,a,!1,!1)||typeof a=="undefined"&&yi(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=o,e.dump="["+n+"]"}function qO(e,t,r,n){var o="",i=e.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],e.replacer&&(c=e.replacer.call(r,String(s),c)),(yi(e,t+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&yi(e,t+1,null,!0,!0,!1,!0))&&((!n||o!=="")&&(o+=CE(e,t)),e.dump&&Fd===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=i,e.dump=o||"[]"}function P6(e,t,r){var n="",o=e.tag,i=Object.keys(r),s,a,c,u,l;for(s=0,a=i.length;s<a;s+=1)l="",n!==""&&(l+=", "),e.condenseFlow&&(l+='"'),c=i[s],u=r[c],e.replacer&&(u=e.replacer.call(r,c,u)),!!yi(e,t,c,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),!!yi(e,t,u,!1,!1)&&(l+=e.dump,n+=l));e.tag=o,e.dump="{"+n+"}"}function I6(e,t,r,n){var o="",i=e.tag,s=Object.keys(r),a,c,u,l,d,f;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new zr("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)f="",(!n||o!=="")&&(f+=CE(e,t)),u=s[a],l=r[u],e.replacer&&(l=e.replacer.call(r,u,l)),!!yi(e,t+1,u,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&Fd===e.dump.charCodeAt(0)?f+="?":f+="? "),f+=e.dump,d&&(f+=CE(e,t)),!!yi(e,t+1,l,!0,d)&&(e.dump&&Fd===e.dump.charCodeAt(0)?f+=":":f+=": ",f+=e.dump,o+=f));e.tag=i,e.dump=o||"{}"}function BO(e,t,r){var n,o,i,s,a,c;for(o=r?e.explicitTypes:e.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,SO.call(a.represent)==="[object Function]")n=a.represent(t,c);else if(PO.call(a.represent,c))n=a.represent[c](t,c);else throw new zr("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function yi(e,t,r,n,o,i,s){e.tag=null,e.dump=r,BO(e,r,!1)||BO(e,r,!0);var a=SO.call(e.dump),c=n,u;n&&(n=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",d,f;if(l&&(d=e.duplicates.indexOf(r),f=d!==-1),(e.tag!==null&&e.tag!=="?"||f||e.indent!==2&&t>0)&&(o=!1),f&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(l&&f&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(I6(e,t,e.dump,o),f&&(e.dump="&ref_"+d+e.dump)):(P6(e,t,e.dump),f&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?qO(e,t-1,e.dump,o):qO(e,t,e.dump,o),f&&(e.dump="&ref_"+d+e.dump)):(S6(e,t,e.dump),f&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&_6(e,e.dump,t,i,c);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new zr("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function T6(e,t){var r=[],n=[],o,i;for(_E(e,r,n),o=0,i=n.length;o<i;o+=1)t.duplicates.push(r[n[o]]);t.usedDuplicates=new Array(i)}function _E(e,t,r){var n,o,i;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)r.indexOf(o)===-1&&r.push(o);else if(t.push(e),Array.isArray(e))for(o=0,i=e.length;o<i;o+=1)_E(e[o],t,r);else for(n=Object.keys(e),o=0,i=n.length;o<i;o+=1)_E(e[n[o]],t,r)}function k6(e,t){t=t||{};var r=new v6(t);r.noRefs||T6(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),yi(r,0,n,!0,!0)?r.dump+`
`:""}var D6=k6,R6={dump:D6};function bE(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var $d=xO.load,Eie=xO.loadAll,_ie=R6.dump;var bie=bE("safeLoad","load"),xie=bE("safeLoadAll","loadAll"),Sie=bE("safeDump","dump");var mo=ie(require("path")),YO=ie(require("os")),JO=ie(bm());var PE=ie(require("path")),zO=ie(require("os"));var VO=ie(require("crypto"));var WO=ie(require("util"));var po={async readDocument(e){switch(e.scheme){case"file":try{return(await vt(e.fsPath)).toString()}catch(t){if(t&&t.code==="ENOENT")return;throw t}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}},async applyEdits(e,t,r){switch(e.scheme){case"file":let n=Rn(r,t);await bp(e.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Fh=class{constructor(t){this.fileHost=t}async readDocument(t){switch(t.scheme){case Fh.scheme:try{return(await this.fileHost.readFile(We(t,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,r,n){switch(t.scheme){case Fh.scheme:let o=Rn(n,r);await this.fileHost.writeFile(We(t,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Ht=Fh;Ht.scheme="vscode-fileHost";var Ra=class{constructor(t){this.shellServer=t}async readDocument(t){switch(t.scheme){case Ra.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${t.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,r,n){switch(t.scheme){case Ra.scheme:try{if(!Ra.nonce){let s=await(0,WO.promisify)(VO.randomBytes)(20);Ra.nonce=s.toString("hex")}let o=Rn(n,r),i=`EOF-${Ra.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${t.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},xu=Ra;xu.scheme="vscode-remote";var GO=class{constructor(t){this.documents=t}async readDocument(t){let r=this.documents[t.scheme];if(!r)throw new Error(`Unsupported scheme: ${t.toString()}`);return r.readDocument(t)}async applyEdits(t,r,n){let o=this.documents[t.scheme];if(!o)throw new Error(`Unsupported scheme: ${t.toString()}`);return o.applyEdits(t,r,n)}};function Pr(e,t){let r={file:po,[Ht.scheme]:new Ht(e)};return t&&(r[xu.scheme]=new xu(t)),new GO(r)}var xE=new Map;async function SE(e,t){let r=e.toString(),n=xE.get(r);if(n||xE.set(r,n=[]),n.push(t),n.length===1){for(;n.length;)await n[0](),n.shift();xE.delete(r)}}var ms;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(ms||(ms={}));function We(e,t){let r;return e.authority&&e.path.length>1&&(e.scheme==="file"||e.scheme===Ht.scheme)?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,t==="win32"&&(r=r.replace(/\//g,"\\")),r}function Aa(e,t){return[e.join(t,".devcontainer","devcontainer.json"),e.join(t,".devcontainer.json")]}function Hd(e,t){let r=e.normalize(t);return Aa(e,"").includes(r)}async function Mh(e,t){let r=Aa(e.path,t);for(let n of r)if(await e.isFile(n))return Qe.file(n).with({scheme:Ht.scheme})}async function KO(e){let t=Aa(PE,e);for(let r of t)if(await Jt(r))return r}var wi=`{${zO.EOL}}`;async function Bn(e,t,r,n){t.scheme==="file"&&await oo(PE.dirname(t.fsPath)),await e.applyEdits(t,r,n)}function hs(e){let t=PE.posix.dirname(e.path);return e.with({path:t})}var IE=ie(require("path"));function Uh(e){let t=typeof e=="string"?IE.join(e,"dist"):e.distFolder;return IE.join(t,"node_modules","vscode-dev-containers","container-features")}function Oa(e){var t;return((t=e.options)==null?void 0:t.version)?"version":void 0}function TE(e){var r,n;let t=Oa(e);if(!t)return!!e.value;if(typeof e.value=="object"){let o=e.value[t];return o===void 0&&e.options?(r=e.options[t])==null?void 0:r.default:o}return e.value===void 0&&e.options?(n=e.options[t])==null?void 0:n.default:e.value}function QO(e){var r;let t=Oa(e);return t?e.options&&((r=e.options[t])==null?void 0:r.default):!0}var qd=ie(require("string_decoder"));function Bd(e){if(!(e.extensions||e.settings||e.devPort!==void 0))return e;let t=X({},e),r=t.customizations||(t.customizations={}),n=r.vscode||(r.vscode={});return t.extensions&&(n.extensions=(n.extensions||[]).concat(t.extensions),delete t.extensions),t.settings&&(n.settings=X(X({},t.settings),n.settings||{}),delete t.settings),t.devPort!==void 0&&n.devPort===void 0&&(n.devPort=t.devPort,delete t.devPort),t}function Vd(e,t,r){return jh(e,t.configFilePath,r)}function jh(e,t,r){let n=hs(t);return t.with({path:mo.posix.resolve(n.path,e.platform==="win32"&&t.scheme!==xu.scheme?(mo.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function Ir(e){return"dockerFile"in e||"build"in e&&"dockerfile"in e.build}function $h(e){return e&&(Ir(e)||"image"in e||"dockerComposeFile"in e)}function gs(e,t){return Vd(e,t,A6(t))}function A6(e){return"dockerFile"in e?e.dockerFile:e.build.dockerfile}async function vs(e,t,r,n){if(Array.isArray(t.dockerComposeFile)){if(t.dockerComposeFile.length)return t.dockerComposeFile.map(o=>We(Vd(e,t,o),e.platform))}else if(typeof t.dockerComposeFile=="string")return[We(Vd(e,t,t.dockerComposeFile),e.platform)];if(n){let o=r==null?void 0:r.COMPOSE_FILE;if(o)return o.split(e.path.delimiter).map(a=>e.path.resolve(n,a));try{let a=e.path.join(n,".env"),c=await e.readFile(a),u=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),l=u&&u[1].trim();if(l)return l.split(e.path.delimiter).map(d=>e.path.resolve(n,d))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[e.path.resolve(n,"docker-compose.yml")],s=e.path.resolve(n,"docker-compose.override.yml");return await e.isFile(s)&&i.push(s),i}return[]}async function ys(e,t){let{cliHost:r,postCreate:n,output:o}=e,i=await O6(e),s=N6(r),a;return await L6({exec:r.exec,cwd:i.cwd,cmd:s.cmd,args:[...s.args,i.script,...t],env:F6(e,s.cmd),stdin:n==null?void 0:n.onDidInput,output:o,stdoutData:c=>a=c,stderrData:c=>{o.event(c)}}),a}async function O6(e){let{cliHost:t,extensionPath:r,output:n}=e,o=mo.join(r,...Ho?["node_modules","@devcontainers","cli","src"]:["dist"],"spec-node",`devContainersSpecCLI.${Ho?"t":"j"}s`),i=t.type==="local"?r:t.path.join(await t.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${e.package.version}`),s=t.type==="local"?o:t.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","ssh"].indexOf(t.type)!==-1&&!await t.isFile(s)){let a=`${i}-${mn()}`,c=t.path.join(a,"dist","spec-node","devContainersSpecCLI.js");await t.mkdirp(t.path.dirname(c)),await t.writeFile(t.path.join(a,"package.json"),await vt(mo.join(r,"package.json"))),await t.writeFile(c,await vt(o));let u=Uh(r),l=t.path.join(a,"dist","node_modules","vscode-dev-containers","container-features");await Na(u,t,l,n),await Na(mo.join(r,"scripts"),t,t.path.join(a,"scripts"),n),await t.rename(a,i)}return{cwd:i,script:s}}function N6(e){if(e.type==="local")return Ho?{cmd:KC,args:[]}:{cmd:process.argv[0],args:process.versions.electron&&process.versions["microsoft-build"]?["--ms-enable-electron-run-as-node"]:[]};if(e.nodeExecutable)return{cmd:e.nodeExecutable,args:[]};throw new Error("Node executable required")}async function L6(e){let{exec:t,cmd:r,args:n,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:u}=e,l=await t({cmd:r,args:n,cwd:o,env:i,output:a});return new Promise((d,f)=>{let p=new qd.StringDecoder,m="";l.stdout.on("data",w=>{m+=p.write(w);let C=m.split(`
`);m=C.pop();for(let E of C)if(E.trim())try{c(JSON.parse(E))}catch{a.write(E)}}),l.stdout.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let h=new qd.StringDecoder,g="";l.stderr.on("data",w=>{g+=h.write(w);let C=g.split(`
`);g=C.pop();for(let E of C)if(E.trim())try{u(JSON.parse(E))}catch{a.write(E)}}),l.stderr.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let v=[];l.exit.then(({code:w})=>{try{v.forEach(C=>C.dispose()),w?(a.write(`Exit code ${w}`),f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,code:w})):d()}catch(C){f(C)}},f),typeof s=="function"&&v.push(s(w=>l.stdin.write(w)))})}function F6(e,t){let{cliHost:r,env:n,appRoot:o}=e;return X(X(X({},n),r.type==="local"?o?{NODE_PATH:`${r.path.join(o,"node_modules.asar")}${mo.delimiter}${r.path.join(o,"node_modules")}`}:void 0:r.type==="container"?void 0:{NODE_PATH:r.path.join(r.path.dirname(t),"node_modules")}),Ho?{TS_NODE_PROJECT:void 0}:{})}async function Na(e,t,r,n){await t.mkdirp(r);let o=JO.c({cwd:e,filter:u=>(console.log(u),!0)},["."]),i=new Promise((u,l)=>{o.on("error",l),o.on("finish",u)}),s=await t.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:r,output:n}),a=new qd.StringDecoder;s.stdout.on("data",u=>{n.write(a.write(u))});let c=new qd.StringDecoder;s.stderr.on("data",u=>{n.write(at(c.write(u)))}),o.pipe(s.stdin),await Promise.all([s.exit,i])}async function Vn(){return mo.join(YO.tmpdir(),process.platform==="linux"?`vsch-${await lh()}`:"vsch")}function M6(){return{contentHashes:{}}}async function ZO(e,t,r){let n=e.configurationTracking,o=n.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await kE(e,t,r)).contentHashes,u=Object.keys(c),l=new Set(u);s.forEach(p=>l.delete(p));let d=new Set(s);u.forEach(p=>d.delete(p));let f=[];for(let p of s)p in c&&c[p]!==i[p]&&f.push(p);if(l.size||d.size||f.length){let p=await kE(e,t,r);(async()=>{await n.containerOutdated([...l,...d,...f].sort())==="ignore"&&await e.configurationTracking.updateConfigurationState(p)})().catch(console.error)}}else await eN(e,t,r)}async function Hh(e,t,r){let n="Updating configuration state",o=e.common.output.start(n);await eN(e,t,r),e.common.output.stop(n,o)}async function eN(e,t,r){let n=await kE(e,t,r);await e.configurationTracking.updateConfigurationState(n)}async function kE(e,t,r){let n=M6();qh(n,Wd.posix.basename(r.configFilePath.path),JSON.stringify(Ne(X({},r),{forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0})));let o=hs(r.configFilePath).path;if(Ir(r)){let i=gs(e.common.cliHost,r),s=await t.readDocument(i);s!==void 0&&qh(n,Wd.posix.relative(o,i.path),s)}if("dockerComposeFile"in r){let i=await vs(e.common.cliHost,r,e.common.cliHost.env,e.common.cliHost.cwd),s=await Promise.all(i.map(async a=>{let c=Qe.file(a).with({scheme:Ht.scheme});return{uri:c,content:await t.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&qh(n,Wd.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:u}=s[a];if(u){let l=$d(u),d=l&&l.services,f=d&&d[r.service],p=f&&f.build,m=p&&(typeof p=="string"?p:p.context);if(m){let h=jh(e.common.cliHost,c,m),g=tN(h,p.dockerfile||"Dockerfile"),v=await t.readDocument(g);v!==void 0&&qh(n,Wd.posix.relative(o,g.path),v)}if(f&&(f.image||f.build))break}}}return n}function qh(e,t,r){let n=XO.createHash("sha256").update(r).digest("hex");e.contentHashes[t]=n}var ho=ie(require("path")),NN=ie(require("crypto"));var ar=ie(require("path"));var aN=ie(require("net")),NE=ie(require("path"));var DE=ie(require("path")),RE=ie(require("http")),rN=ie(require("os")),nN=ie(require("crypto"));async function oN(e,t){let r=await AE(e),n=new iN(r,t);return n.listen(),n}var iN=class{constructor(t,r){this.ipcHandlePath=t;this.server=RE.createServer((n,o)=>{Promise.resolve(r(n,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function sN(e){return new Promise((t,r)=>{let n=[];e.setEncoding("utf8"),e.on("data",o=>n.push(o)),e.on("error",o=>r(o)),e.on("end",()=>{let o=JSON.parse(n.join(""));t(o)})})}async function U6(e){return new Promise((t,r)=>{nN.randomBytes(e,(n,o)=>{n?r(n):t(o)})})}async function AE(e){let r=(await U6(20)).toString("hex"),n=`${e}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?DE.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):DE.join(rN.tmpdir(),`${n}.sock`)}var OE=class{constructor(){this.messages=[]}push(t){this.messages.push(t),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(t){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof t=="number"&&setTimeout(n,t)})}};async function Wo(e,t,r){let n=await AE("ssh-askpass");return await new Promise((o,i)=>{aN.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{r.write(`SSH askpass request: ${a}`,qe.Trace);let u=await t(JSON.parse(a));s.write(u,l=>{l&&console.error(l)}),s.end()}catch(u){console.error(u)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(n,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:NE.join(e,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:NE.join(e,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:n}}var j6=0;function er(e){return e.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++j6)}:{}}async function Qr(e,t){return(await ws(e,[t]))[0]}async function ws(e,t){let r=await Vh(e,"container",t);for(let n of r){n.Ports=[];let o=n.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:u,HostPort:l}=c;n.Ports.push({IP:u,PrivatePort:parseInt(s),PublicPort:parseInt(l),Type:a})}}}return r}async function cN(e,t){return(await Vh(e,"image",[t]))[0]}async function Bh(e,t){return(await Vh(e,"volume",[t]))[0]}async function Gd(e,t){return Vh(e,"volume",t)}async function Vh(e,t,r){if(!r.length)return[];let n=Kd(e),o=await He(Ne(X({},n),{args:(n.args||[]).concat(["inspect","--type",t,...r])}));try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function Ci(e,t=!1,r=[]){let n=[];t&&n.push("-a");for(let i of r)n.push("--filter",`label=${i}`);return(await it(e,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Wn(e,t=[]){let r=[];for(let o of t)r.push("--filter",`label=${o}`);return(await it(e,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function LE(e){return(await it(e,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function uN(e){return(await it(e,"volume","prune","-f")).stdout.toString()}async function Wh(e,t,r){let n=[];for(let o of r||[])n.push("--label",o);await it(e,"volume","create",...n,t)}async function FE(e,t){let{exec:r,cmd:n,args:o,env:i,output:s}=Kd(e),a=[];for(let f in t)for(let p of t[f])a.push("--filter",`${f}=${p}`);let c=await UE(e)?"json":"{{json .}}",u=(o||[]).concat(["events","--format",c,...a]),l=await r({cmd:n,args:u,env:i,output:s}),d=[];return l.stderr.on("data",f=>d.push(f)),l.exit.then(({code:f,signal:p})=>{d.length&&s.write(at(Buffer.concat(d).toString())),(f||p&&p!=="SIGKILL")&&s.write(at(`Docker events terminated (code: ${f}, signal: ${p}).`))},f=>{s.write(at(f&&(f.stack||f.message)))}),l}async function it(e,...t){let r=Kd(e);return He(Ne(X({},r),{args:(r.args||[]).concat(t)}))}async function ME(e){var t;try{let{stdout:r}=await it(e,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(t=JSON.parse(n).find(s=>s.Current))==null?void 0:t.Name}catch{return}}async function UE(e){if(("cliHost"in e?e.cliHost:e.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await it(e,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function lN(e,...t){let r=pN(e);return iu(Ne(X({},r),{args:(r.args||[]).concat(t)}))}async function zd(e,...t){let r=Kd(e,"dockerComposeCLI"in e?await e.dockerComposeCLI():void 0);return He(Ne(X({},r),{args:(r.args||[]).concat(t)}))}function Go(e,t,r){return async function(n){let{exec:o,cmd:i,args:s,env:a}=Kd(e),{argsPrefix:c,args:u}=fN(t,r,n,!1);return o({cmd:i,args:(s||[]).concat(u),env:a,output:dN(n.output,i,c)})}}async function Ei(e,t,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:u}=pN(e),{argsPrefix:l,args:d}=fN(t,r,i,!0);return s({cmd:a,args:(c||[]).concat(d),env:u,output:dN(i.output,a,l)})}}function dN(e,t,r){return $6(e,`Run: ${t} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function $6(e,t,r){let n=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return An(Ne(X({},e),{get dimensions(){return e.dimensions},event:i=>e.event("text"in i?Ne(X({},i),{text:i.text.replace(n,r)}):i)}))}function fN(e,t,r,n){let{env:o,cwd:i,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),t&&c.push("-u",t),o&&Object.keys(o).forEach(l=>c.push("-e",`${l}=${o[l]}`)),i&&c.push("-w",i),c.push(e);let u=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:u,args:c}}function Kd(e,t){return"dockerEnv"in e?{exec:e.common.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:X(X({},e.dockerEnv),er(e.dockerEnv)),output:e.common.output}:"cliHost"in e?{exec:e.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:X(X({},e.env),er(e.env)),output:e.output}:Ne(X({},e),{env:X(X({},e.env),er(e.env))})}function pN(e,t){return"dockerEnv"in e?{ptyExec:e.common.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:X(X({},e.dockerEnv),er(e.dockerEnv)),output:e.common.output}:"cliHost"in e?{ptyExec:e.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:X(X({},e.env),er(e.env)),output:e.output}:Ne(X({},e),{env:X(X({},e.env),er(e.env))})}function mN(e){return e.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(t,r)=>r.substr(0,r.length-1))}var hN="com.docker.compose.project",H6="com.docker.compose.service";async function gN(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m){return q6(e,t,r,n,o,i,B6(n),s,a,c,u,l,d,f,p,m)}async function q6(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m,h){var C,E;let{common:g}=e,{cliHost:v}=t,w;try{let b=await vs(v,n,v.env,v.cwd),I=v.path.join(v.cwd,".env"),T=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await v.isFile(I)?I:void 0,P=await jE(t,r,b),S=!u,k=X(X({},t.env),er(t.env)),A={cliHost:v,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:k,extensionPath:g.extensionPath,appRoot:g.appRoot,package:g.package,output:g.postCreate.output},{mergedConfiguration:N}=await Tu(A,i,p,g.getLogLevel(),h,f,a.Id,m,g.cliMode),z=N.remoteUser;w=await Iu(e,a.Id,s,z),d&&u&&w.user!=="root"&&(w.launchRootShellServer?await Ph(w,w.launchRootShellServer,s,n.configFilePath.path):g.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let Q=Pr(v,w.shellServer);S||await Hh(e,Q,n);let ee=N.shutdownAction;ee==="stopContainer"&&(ee="stopCompose");let ne={cwd:o,dockerCLI:e.dockerCLI,dockerComposeCLI:await e.dockerComposeCLI(),env:g.env,containerId:a.Id,user:w.user,sessionId:g.sessionId,shutdownAction:ee,projectName:P,composeFiles:b,envFile:T,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:g.getLogLevel(),delay:1e4},{shutdownArgs:U,doneWithDocuments:L}=await zh(e,Q,"dockerCompose",ne,S?n:void 0);g.backgroundTasks.push(L);let D=((E=(((C=N.customizations)==null?void 0:C.vscode)||[]).slice().reverse().find(_e=>typeof _e.devPort=="number"))==null?void 0:E.devPort)||ds,{hostOrContainerPort:j,hostPortServer:K,connectionToken:Y,webConnectionToken:Z,remoteEnv:me,serverDownloaded:Ee}=await Sh(g,w,n,N,D,Kh(e,t,i,f,a.Id,c,p,m));return U.hostPortServer=K,Su(g,w,j,Y,Z,a,r),{params:g,properties:w,config:n,resolvedAuthority:{host:Cs,port:j,connectionToken:Y,extensionHostEnv:me},webConnectionToken:Z,tunnelInformation:g.isLocalContainer?Pu(a):{},dockerParams:e,dockerContainerId:a.Id,serverDownloaded:Ee}}catch(b){let I=b instanceof je?b:new je({description:"An error occurred setting up the container.",originalError:b});throw a&&(I.manageContainer=!0,I.params=e.common,I.containerId=a.Id,I.dockerParams=e),w&&(I.containerProperties=w),I.config=n,I}}function B6(e){return e.workspaceFolder||"/"}async function vN(e,t,r){let n=await Ci(e,!0,[`${hN}=${t}`,`${H6}=${r}`]);return n&&n[0]}async function jE(e,t,r){let{cliHost:n}="cliHost"in e?e:e.common,o=await V6(e),i=Gh(n.env.COMPOSE_PROJECT_NAME||"",o);if(i)return i;try{let c=n.path.join(n.cwd,".env"),u=await n.readFile(c),l=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(u.toString()),d=l&&l[1].trim(),f=Gh(d||"",o);if(f)return f}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=t.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return uA(n.platform,a,n.path.join(s,".devcontainer"))?Gh(`${n.path.basename(s)}_devcontainer`,o):Gh(n.path.basename(a),o)}function $E(e){let t=(e.Config.Labels||{})[hN];return t||void 0}function Gh(e,t){return t?e.toLowerCase().replace(/[^-_a-z0-9]/g,""):e.toLowerCase().replace(/[^a-z0-9]/g,"")}async function V6(e){try{let t=hu((await e.dockerComposeCLI()).version);return t?!gu(t,[1,21,0]):!0}catch{return!0}}function zo(e,t,r){let n;return()=>n||(n=(async()=>{let o=!1,i;try{i=(await zd(Ne(X({},e),{cmd:r}),"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;i=(await zd(Ne(X({},e),{cmd:t}),"compose","version","--short")).stdout,o=!0}return{version:i.toString().trim(),cmd:o?t:r,args:o?["compose"]:[]}})())}var Ko=ie(require("url")),yN=ie(require("https"));var HE;(function(t){t[t.CannotAccessRepository=2]="CannotAccessRepository"})(HE||(HE={}));function Qo(e){return e.toLowerCase().indexOf("github.com")>=0?Q6(e):e.toLowerCase().indexOf("visualstudio.com")>=0?z6(e):e.toLowerCase().indexOf("dev.azure.com")>=0?G6(e):e.toLowerCase().indexOf("gitlab.com")>=0?K6(e):W6(e)}function _i(e){let t="owner",r="repository";return{repository:"unknown",repositoryUrl:e,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`}}function W6(e){var s;let t="unknown-owner",r,n=e,o;o=(s=Ko.parse(e))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?_i(e):(r=i[i.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`})}function G6(e){var i,s;let t,r,n=e,o;if(Qh(e)){let a=`http://${e}`;o=(i=Ko.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return _i(e);t=c[3],r=c[4]}else{o=(s=Ko.parse(e))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return _i(e);t=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`}}function z6(e){var i,s;let t,r,n=e,o;if(Qh(e)){let a=`http://${e}`;o=(i=Ko.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return _i(e);t=c[3],r=c[4]}else{o=(s=Ko.parse(e))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return _i(e);t=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`}}function K6(e){var i,s;let t,r,n=e,o;if(Qh(e)){let a=`http://${e}`;o=(i=Ko.parse(a))==null?void 0:i.path,o&&(o=o.replace("/:","/"));let c=o==null?void 0:o.split("/");if(!c||c.length<3)return _i(e);t=c[c.length-2],r=c[c.length-1]}else{o=(s=Ko.parse(e))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<3)return _i(e);t=a[a.length-2],r=a[a.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${t}/${r}`}}function Q6(e){var c,u;let t,r,n=e,o,i,s;if(Qh(e)){let l=`http://${e}`;s=(c=Ko.parse(l))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(u=Ko.parse(e))==null?void 0:u.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return _i(e);if(t=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let l=e.match(/\/tree\/|\/commit\//);l&&l.index&&(n=e.substring(0,l.index),o=e.substring(l.index+l[0].length))}if(a[3]==="pull"){i=a[4];let l=e.match(/\/pull\//);l&&l.index&&(n=e.substring(0,l.index))}}return{repository:"github",repositoryUrl:n,ref:o,commit:a[3]==="commit",repositoryOwner:t,repositoryName:r,pullRequestId:i,fullRepositoryName:`${t}/${r}`}}function Qh(e){return e=e.toLowerCase(),e.indexOf("://")<0?e.indexOf("@")<e.indexOf(":"):!1}var Yh=class extends Error{constructor(t,r){super();this.code=t,this.description=r}},Jh=class{constructor(t){this.inputUrl=t,this.gitUrlInfo=Qo(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(t,r,n,o){}installExtension(){return null}},wN=class extends Jh{constructor(t){super(t)}async parseUrl(t){var i,s,a;let r=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(t,r,n,o)}async getPullRequestInfo(t,r,n,o){var l,d,f,p,m,h,g,v,w,C,E;let i=await this.fetchPullRequestInfo(t,r,n,o),s=(d=(l=i.head)==null?void 0:l.repo)==null?void 0:d.clone_url,a=(p=(f=i.base)==null?void 0:f.repo)==null?void 0:p.clone_url;if(!a)throw new Yh(2,"Cannot access the head repository of the Pull Request.");let c=(m=i.head)==null?void 0:m.ref,u=((v=(g=(h=i.head)==null?void 0:h.repo)==null?void 0:g.owner)==null?void 0:v.login)===r?null:(E=(C=(w=i.head)==null?void 0:w.repo)==null?void 0:C.owner)==null?void 0:E.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:u}}async fetchPullRequestInfo(t,r,n,o){let i=`/repos/${r}/${n}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};t&&(s.authorization=`token ${t}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,u)=>{let l="",d=yN.request(a,f=>{if(f.statusCode<200||f.statusCode>=300)return u(new Error(`Status Code: ${f.statusCode}`));f.on("data",p=>{l+=p}),f.on("end",()=>{let p=JSON.parse(l.toString());c(p)})});d.on("error",u),d.end()})}cloneOptions(t){return{url:t.urlToClone,fullClone:!0}}async postClone(t,r,n,o){if(t.sourceOwner){let u=t.prRepositoryUrl.replace(/\.[^/.]+$/,"");await He({exec:r.exec,cmd:"git",args:["remote","add",t.sourceOwner,u],cwd:n,output:o}),await He({exec:r.exec,cmd:"git",args:["fetch",t.sourceOwner,t.ref],cwd:n,output:o});try{await He({exec:r.exec,cmd:"git",args:["checkout","-t",`${t.sourceOwner}/${t.ref}`],cwd:n,output:o})}catch(l){if(!(l.stderr&&l.stderr.startsWith(`fatal: A branch named '${t.ref}' already exists`)))throw l}await He({exec:r.exec,cmd:"git",args:["config","--local",`remote.${t.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:o})}else await He({exec:r.exec,cmd:"git",args:["checkout",t.ref],cwd:n,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await He({exec:r.exec,cmd:"git",args:["config","--local",`branch.${t.ref}.github-pr-owner-number`,c],cwd:n,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},CN=class extends Jh{constructor(t){super(t)}async parseUrl(t){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(t){let r=this.gitUrlInfo.commit;return{url:t.urlToClone,branch:!r&&t.ref||void 0,fullClone:r}}async postClone(t,r,n,o){this.gitUrlInfo.commit&&await He({exec:r.exec,cmd:"git",args:["checkout",t.ref],cwd:n,output:o})}},qE=class extends Jh{constructor(t,r){super(t);this.branch=r}async parseUrl(t){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(t){return{url:t.urlToClone,branch:t.ref||void 0}}};function ku(e,t){if(t)return new qE(e,t);let r=Qo(e);if(r.repository==="github"){if(r.pullRequestId)return new wN(e);if(r.ref)return new CN(e)}return new qE(e)}var Qd=ar.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function EN(e,t,r,n){if(t&&!/\/\.?devcontainer\.json$/.test(t.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${We(t,e.common.cliHost.platform)}).`);let o=e.parsedAuthority;if(!o||pr(o))return Y6(e,o,t,r,n);if(Or(o))return o.inspectVolume?BE(e,o):J6(e,o,t);if(xi(o))return o.inspectVolume?BE(e,o):X6(e,o,t);if(Jd(o))return BE(e,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function Y6(e,t,r,n,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=e,{cliHost:u,env:l,output:d}=i,f=u.cwd,p=e.originalCwd||f,m=t&&mt(u.path,gd(t.hostPath)?u.path.join(f,ar.basename(t.hostPath)):f),h;m&&(h=await eK(e,m),h&&(i.backgroundTasks.push(h==null?void 0:h.gitUnshallow),await h.gitClone()));let g={cliHost:u,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:l,output:d},v=o?void 0:[`${JE}=${p}`],w=o||[`${XE}=${p}`,`${tg}=${i.product.quality}`];return VE(e,g,v,w,p,f,r,n,m,t==null?void 0:t.settings,[],i.cliMode?"never":"on")}async function J6(e,t,r){let{repositoryPath:n,volumeName:o,folder:i}=t,s=Gn(n);o=await kN(e,s,o);let{labels:a,remoteWorkspaceFolder:c}=DN(s,n,i,o),u=[...a],l=[...a,`${tg}=${e.common.product.quality}`],{containerId:d,shellServer:f,config:p,preInstalledExtensions:m}=await s.cloneAndInitializeRepository(e,t,s,o,r),h=i?s.workspaceFolder(i):s.fullRepositoryName,g=KE(s,o,i);return _N(e,t,r,p,m,d,f,o,h,c,u,l,g)}async function X6(e,t,r){let{common:n}=e,{extensionPath:o,appRoot:i,loadNativeModule:s,output:a}=n,{volumeName:c,folder:u}=t,l=[`${PN}=${c}`,`${IN}=${u}`],d=l;await YE(e);let f=QE(c,Es()),{stdout:p}=await it(e,...f),m=p.toString().trim(),h=Go(e,m,"root"),g=await fo(h,a),v=[],w=Du(u),C=w,E=await Ei(e,m,"root",s),b=$n("container",w,{},h,E,()=>{throw new Error("not implemented")},"node",a),{configuration:I}=await Xh({cliHost:b,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:o,appRoot:i,package:n.package,output:a},w,r,e.common.getLogLevel(),l);return _N(e,t,r,I,v,m,g,c,w,C,l,d,f)}async function _N(e,t,r,n,o,i,s,a,c,u,l,d,f){var I,T,P;let p=mt(ar.posix,c),m=[`type=volume,source=${a},target=${ar.posix.dirname(p.rootFolderPath)},external=true`],h=await RN(e,i,u),g={},{HOME:v,USERPROFILE:w}=e.common.env;v!==void 0&&(g.HOME=v),w!==void 0&&(g.USERPROFILE=w);let C=h.cliHost,E,b=Ir(n)||"image"in n;if(b||"dockerComposeFile"in n&&n.workspaceFolder||o.length){let S=o.length?Ne(X({},n.customizations),{vscode:Ne(X({},(I=n.customizations)==null?void 0:I.vscode),{extensions:[...((P=(T=n.customizations)==null?void 0:T.vscode)==null?void 0:P.extensions)||[],...o]})}):n.customizations,k=b?Ne(X({},n),{configFilePath:void 0,workspaceFolder:void 0,workspaceMount:"",customizations:S}):Ne(X({},n),{configFilePath:void 0,workspaceFolder:p.rootFolderPath,customizations:S}),A=C.path.join(await C.tmpdir(),`devcontainer-${mn()}.json`),N=`EOF-${A}`,z=`${A}_${Date.now()}`;await s.exec(`cat <<'${N}' >${z}
${JSON.stringify(k)}
${N}
mv ${z} ${A}`),E=Qe.from({scheme:Ht.scheme,path:A})}try{return await VE(e,h,l,d,e.common.cliHost.cwd,C.cwd,r,E,p,t.settings,m,"off",f,!0,void 0,g)}finally{Promise.all(e.common.backgroundTasks.filter(S=>typeof S!="function").map(S=>S.catch(()=>{}))).then(()=>it(e,"rm","-f",i))}}async function BE(e,t){let{common:r,dockerCLI:n,dockerComposeCLI:o,dockerComposePath:i}=e,{cliHost:s,env:a,output:c}=r,{volumeName:u}=t,l,d,f=Jd(t);f?(l=eg,d="Inspect Volume"):(l=Gn(t.repositoryPath).volumeDestination,d="Recovery Container");let p=[`${Zh}=${u}`],m=[`${Zh}=${u}`,`${tg}=${r.product.quality}`],h=await TN(e),g=[`type=volume,source=${u},target=${l},external=true`],v={cliHost:s,dockerCLI:n,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},w=mt(s.path,h);return VE(e,v,p,m,h,h,void 0,void 0,w,t.settings,g,"never",void 0,!f,d)}async function VE(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m,h){let{common:g,userRepositoryConfigurationPaths:v}=e,{output:w,extensionPath:C,appRoot:E,postCreate:b}=g,{cliHost:I}=t;e.cacheMount==="bind"&&await oo(g.localCacheFolder);let T=e.cacheMount==="volume"?[...l,"type=volume,source=vscode,target=/vscode,external=true"]:e.cacheMount==="bind"?[...l,`type=bind,source=${g.localCacheFolder},target=/vscode`]:l;if(e.cacheMount==="volume"){let me="vscode";(await Wn(t)).indexOf(me)===-1&&await Wh(t,me)}let P=s||(c?await bi(I,c,v,!a,w):void 0);if((P==null?void 0:P.scheme)==="file"&&I.type!=="local"){let me=ar.dirname(P.fsPath),Ee=ar.basename(P.fsPath),_e=Ee===".devcontainer.json"?me:ar.dirname(me),Ie=I.path.join(await I.tmpdir(),`devcontainer-config-${mn()}`);await Na(_e,I,Ie,w),P=Qe.from({scheme:Ht.scheme,path:I.path.join(Ie,...Ee===".devcontainer.json"?[Ee]:[ar.basename(me),Ee])})}typeof e.removeOnStartup=="string"&&await wn(e,e.removeOnStartup)&&await it(e,"rm","-f",e.removeOnStartup);let S=await bN(t,n);S&&e.removeOnStartup===!0&&r&&(await it(e,"rm","-f",S.Id),S=void 0);let k=!!S||!r,A=k?n:r,N=e.removeOnStartup===!0||!(S||r&&await bN(t,r)),z=X(X(X({},h),t.env),er(t.env)),Q={cliHost:I,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:z,extensionPath:C,appRoot:E,package:g.package,postCreate:b,output:g.postCreate.output},ee=g.postCreate.output.dimensions||g.output.dimensions,ne=g.additionalFeaturesToInstall,U=await ys(Q,["up",...t.cliHost.type==="local"&&g.persistedFolder?["--user-data-folder",g.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...k?["--container-data-folder",Hn(e.common.product.serverDataFolderName)]:[],...k?["--container-system-data-folder",yu(e.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...e.workspaceMountConsistencyDefault?["--workspace-mount-consistency",e.workspaceMountConsistencyDefault]:[],...[].concat(...A.map(me=>["--id-label",me])),"--log-level",zi(g.getLogLevel()),"--log-format","json",...P?["--config",We(P,I.platform)]:[],...a?["--override-config",We(a,I.platform)]:[],"--default-user-env-probe",g.defaultUserEnvProbe,...e.buildNoCache?["--build-no-cache"]:[],...e.removeOnStartup===!0?["--remove-existing-container"]:[],...e.expectExistingContainer?["--expect-existing-container"]:[],...[].concat(...T.map(me=>["--mount",me])),"--skip-post-create","--update-remote-user-uid-default",d,"--mount-workspace-git-root",String(!g.cliMode),...ee?["--terminal-columns",String(ee.columns),"--terminal-rows",String(ee.rows)]:[],...Object.keys(ne).length>0?["--additional-features",JSON.stringify(ne)]:[]]);if((U==null?void 0:U.outcome)!=="success")throw new je({description:`devcontainer command failed: ${U?JSON.stringify(U):"data missing"}`});let L=await wn(e,U.containerId);if(!L)return ON(g.output,"Dev container not found.");let D=await Xh(Q,i,P,g.getLogLevel(),A,L.Id,a,g.cliMode),j=D.configuration,K=Ru(u),Y=m||(j.name?`Dev Container: ${j.name}${K}`:`Dev Container${K}`);g.setWorkspaceName(Y);let Z;if(Ir(j)||"image"in j)Z=await AN(e,t,c,j,D.workspace,o,i,L,k,N,p,A,P,a,g.additionalFeaturesToInstall);else if("dockerComposeFile"in j){if(!c)throw new je({description:"A Dev Container using Docker Compose requires a workspace folder."});Z=await gN(e,t,c,j,o,i,L,k,N,f,p,A,P,a,g.additionalFeaturesToInstall)}else throw new je({description:`Dev container config (${j.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return Z}async function bN(e,t){let r=await Ci(e,!0,t);return(await ws(e,r)).filter(o=>o.State.Status!=="removing")[0]}async function Xh(e,t,r,n,o,i,s,a=!1){let{cliHost:c,output:u}=e,l=await ys(e,["read-configuration",...e.dockerPath!=="docker"?["--docker-path",e.dockerPath]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],"--workspace-folder",t,...(o||[]).map(d=>["--id-label",d]).flat(),...i?["--container-id",i]:[],"--log-level",zi(n),"--log-format","json",...r?["--config",We(r,c.platform)]:[],...s?["--override-config",We(s,c.platform)]:[],"--mount-workspace-git-root",String(!a),...u.dimensions?["--terminal-columns",String(u.dimensions.columns),"--terminal-rows",String(u.dimensions.rows)]:[]]);return l.configuration.configFilePath=Qe.revive(l.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ht.scheme}),l}async function bi(e,t,r,n,o){let i=await WE(e,t,r,n,o);return i==null?void 0:i.uri}async function WE(e,t,r,n,o){let i=await Fk(e,t,pt),s=i&&await Yd(i,r);if(s)return{uri:s,location:"user"};let a=await Mh(e,t.configFolderPath);if(a)return{uri:a,location:"workspace"};let c=i&&await Yd(i,[Qd]);if(c)return{uri:c,location:"builtin"};n&&o&&((i==null?void 0:i.length)?o.write(`No dev container config found. Additional locations checked:
${[...GE(i,r),...GE(i,[Qd])].map(u=>`- ${ar.join(u,".devcontainer","devcontainer.json")}`).join(`
`)}`):o.write("No dev container config found. No repository connection string found."))}async function Yd(e,t){let r=GE(e,t);for(let n of r){let o=await KO(n);if(o)return Qe.file(o)}}function GE(e,t){let r=[],n=new Set(e.map(Z6).filter(o=>!!o));for(let o of n)for(let i of t){let s=ar.join(i,o);r.push(s)}return r}function xN(e,t,r){let n=e.path.relative(t.rootFolderPath,We(r,e.platform));return n&&!n.startsWith("..")&&!e.path.isAbsolute(n)}function SN(e){if(e.scheme!=="file")return;let t=ar.relative(Qd,e.fsPath);if(t&&!t.startsWith("..")&&!ar.isAbsolute(t))return t}function Z6(e){let t;if(e.startsWith("https://"))t=e.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(e);if(r)t=`${r[1]}/${r[2]}`;else return}if(!(t.toLowerCase().startsWith("github.com")&&(t=(/^[^/]+\/[^/]+\/[^/]+/.exec(t)||[])[0],!t)))return t.endsWith(".git")&&(t=t.substr(0,t.length-4)),t}async function eK(e,t){var p;let{common:r,gitClone:n}=e,{cliHost:o}=r;if(!n)return;let i=Od(r),s=Od(r),a=ku(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?o.env[n.tokenEnvVar]:void 0),u=a.cloneOptions(c),l=Ne(X(X({},n),u),{env:X(X({},n.env),u.env)}),d=await Bm(r,r.cliHost,t.rootFolderPath,l,i.output,s.output),f=(p=d.gitClone)==null?void 0:p.then(()=>a.postClone(c,o,t.rootFolderPath,i.output));return{gitClone:async()=>{i.flush(),await f},gitUnshallow:async()=>{i.flush(),s.flush(),await d.gitUnshallow}}}var PN="vsc.devcontainer.volume.name",IN="vsc.devcontainer.volume.folder";function zE(e){return e?`${e.volumeName}:${e.folder}`:void 0}function La(e){let t=(e.Config.Labels||{})[PN],r=(e.Config.Labels||{})[IN];return t&&r?{volumeName:t,folder:r}:void 0}function Gn(e){return{repositoryPath:e,fullRepositoryName:rg(e),repositoryName:tK(e),workspaceFolder:Du,volumeDestination:Es(),oldVolumeName:rK(e),alreadyCloned:!1,imageName:nK(e),uniqueVolumeName:oK(e),getWorkspaceConfiguration:(t,r)=>iK(t,r),getOldWorkspacePath:MN,cloneAndInitializeRepository:sK,getConfigurationFromImage:FN,gitUrlHandler:ku(e),gitUrlInfo:Qo(e)}}function rg(e){let t=Qo(e);return t==null?void 0:t.fullRepositoryName}function tK(e){let t=Qo(e);return t==null?void 0:t.repositoryName}function Es(){return"/workspaces"}function rK(e){let t=rg(e);return`vsc-${ho.posix.basename(t)}-${ZE(e)}`}function nK(e){let t=rg(e),r=ZE(e),n=ho.posix.basename(t);return mN(`vsc-${n}-${r}`)}function oK(e){let t=Qo(e),r="";t&&t.repositoryName&&(r=t.repositoryName,t.ref?r=`${r}-${t.ref.replace(/\//g,"-")}`:t.pullRequestId&&(r=`${r}-pull-${t.pullRequestId}`));let n=ZE(e);return`${r}-${n}`}function ZE(e){return NN.createHash("md5").update(e).digest("hex")}function iK(e,t){let r=Du(e),n=`type=volume,src=${t},dst=${Es()}`;return{workspaceFolder:r,workspaceMount:n}}function Du(e){return ho.posix.join(`${Es()}`,`${e}`)}async function sK(e,{folder:t,cloneInfo:r},n,o,i){var l;await YE(e);let{containerId:s,shellServer:a}=await aK(e,n,o,t,i,e.configProvider,r),{config:c}=await FN(e,n,t,i,a),u=(l=n.gitUrlHandler)==null?void 0:l.installExtension();return{repository:n,volumeName:o,containerId:s,shellServer:a,config:c,preInstalledExtensions:u?[u]:[]}}async function aK(e,t,r,n,o,i,s){let{common:a}=e,{output:c,loadNativeModule:u}=a,l=t.fullRepositoryName,d,f,p,m;e.common.progress(Ar.CloningRepository);let h=KE(t,r,n,e.buildContainerRunArgs);n?(c.write(`Cloning Github repository: ${l} into ${t.workspaceFolder(n)}
\r`),d=`fatal: destination path '${t.workspaceFolder(n)}' already exists`,m=t.workspaceFolder(n),p=`Repository '${l}' was already cloned into '${t.workspaceFolder(n)}'.
\r`):(c.write(`Cloning Github repository: ${l} into volume ${r}
\r`),d=`fatal: destination path '${l}' already exists`,m=`${l}`,p=`Repository '${l}' was already cloned into volume.`);let g=t.gitUrlHandler;if(!g)throw new je({description:"Could not analyze the URL."});s?f=g.cloneOptions(s):f={url:t.repositoryPath};let{stdout:v}=await it(e,...h),w=v.toString().trim(),C=Go(e,w,"root"),E=await fo(C,c),b,I,T=Promise.resolve(),P;if(!a.cliMode){let N=await xd(a,{remoteExec:C,user:"root",nodeExecutable:"node",shellServer:E});b=N.remoteContainersCLI,I=N.remoteEnv,T=N.ready,P=N.mrpcExec}let S=await Ei(e,w,"root",u),k=$n("container",m,{},await P||C,S,()=>{throw new Error("not implemented")},void 0,c);try{a.cliMode||(e.common.isCopyGitConfigEnabled&&(await Ta(e.common,{homeFolder:"/root",shellServer:E},[".gitconfig"],"git"),await Ih(e.common,{homeFolder:"/root",shellServer:E},{})),await wu({shellServer:E,nodeExecutable:"node"},b,c,"global"),await Ta(e.common,{homeFolder:"/root",shellServer:E},[".ssh","known_hosts"],"ssh"),await T);let N=Od(a),z=await Bm(a,k,m,Ne(X({},f),{env:X(X({},I),f.env)}),c,N.output);if(await z.gitClone,z.gitUnshallow&&(a.backgroundTasks.push(z.gitUnshallow.then(()=>{})),z.gitUnshallow.then(N.flush,N.flush)),z.gitClone&&s)try{await g.postClone(s,k,m,c)}catch{return e_(e,w,`Failed to checkout the repository ${s.urlToClone}.`)}}catch(N){let z=N&&(N.cmdOutput||N.stack||N.message)||String(N);if(z=z.replace(Dc,""),z.replace(/[\r\n]+/gm,"").includes(d))c.write(p),t.alreadyCloned=!0;else return e_(e,w,`Git clone failed. ${z}`)}let{configRaw:A}=await LN(e,t,n,o,E);if(!$h(A)&&i){c.write(`Repository ${l} has no dev container files.
\r`);let N=!0;for(;N;){let z=await i.createConfiguration(m,k);if(z)N=!1;else if(z=await i.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),z!=="Select Configuration")return e_(e,w,"Cancelled container configuration selection.")}}return{containerId:w,shellServer:E}}function KE(e,t,r,n=[]){let o=r?e.volumeDestination:e.fullRepositoryName;return QE(t,o,n)}function QE(e,t,r=[]){return["run","-d","--mount",`type=volume,src=${e},dst=${t}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...r,`${UN}`,"sleep","infinity"]}function e_(e,t,r){throw t&&it(e,"rm","-f",t),new je({description:r})}async function LN(e,t,r,n,o){let i,s;if(r?s=t.workspaceFolder(r):s=`${MN(t.repositoryPath)}`,n)return i=(await o.exec(`cat ${n.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&Rt(i),configFile:n,workspaceFolder:s};if(n=await Yd([t.repositoryPath],e.userRepositoryConfigurationPaths),n&&(i=(await vt(n.fsPath)).toString()),!n)for(let a of Aa(ho.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,n=Qe.from({scheme:"vscode-remote",path:a});break}catch{}return n||(n=await Yd([t.repositoryPath],[Qd]),n&&(i=(await vt(n.fsPath)).toString())),{configRaw:i&&Rt(i),configFile:n,workspaceFolder:s}}async function FN(e,t,r,n,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await LN(e,t,r,n,o);if(!s||!i)throw new je({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:c,configUpdater:u}=e,{cliHost:l,output:d}=c,f=Bd(X({},i)),p=f;u&&(f.configFilePath=s,p=u(f),delete p.configFilePath);let m=vh({platform:l.platform,configFile:s,env:l.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},p);return m.configFilePath=s,("workspaceMount"in m||"workspaceFolder"in m)&&d.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:m}}function MN(e){return`/workspaces/${ho.posix.basename(rg(e))}`}var UN="vsc-volume-bootstrap";var t_="bootstrap.Dockerfile",cK="volume.Dockerfile";async function YE(e,t,r,n){let{cliHost:o,output:i}="cliHost"in e?e:e.common;"cliHost"in e||(t=e.common.extensionPath,r=e.common.package.version,n=e.development);let s=o.path.join(await o_(o),"bootstrap-image",n?`${r}-dev-${Date.now()}`:r),a=o.path.join(s,t_),c=!await o.isFolder(s);if(!c&&!await o.isFile(a)){let l="Removing incomplete bootstrap-image folder.",d=i.start(l),f=`${s}-${mn()}`;await o.rename(s,f),await o.rm(f,{recursive:!0,force:!0}),c=!await o.isFolder(s),i.stop(l,d)}if(c){let l=`${s}-${mn()}`,d=o.path.join(l,".vscode-remote-containers","dist",`dev-containers-cli-${r}`);await o.mkdirp(o.path.join(d,"dist","spec-node")),await o.writeFile(o.path.join(l,t_),await vt(ho.join(t,"scripts",t_))),await o.writeFile(o.path.join(d,"package.json"),await vt(ho.join(t,"package.json"))),await o.writeFile(o.path.join(d,"dist","spec-node","devContainersSpecCLI.js"),await vt(ho.join(t,"dist","spec-node","devContainersSpecCLI.js")));let f=Uh(t),p=o.path.join(d,"dist","node_modules","vscode-dev-containers","container-features");await Na(f,o,p,i),await o.rename(l,s)}await lN(e,...["build","-f",a,"-t",UN,s])}async function TN(e){let{common:t,development:r}=e,{cliHost:n,output:o}=t,i=t.package.version,s=n.path.join(await o_(n),"inspect-volume",r?`${i}-dev-${Date.now()}`:i),a=n.path.join(s,cK),c=!await n.isFolder(s);if(!c&&!await n.isFile(a)){let u="Removing incomplete inspect-volume folder.",l=o.start(u),d=`${s}-${mn()}`;await n.rename(s,d),await n.rm(d,{recursive:!0,force:!0}),c=!await n.isFolder(s),o.stop(u,l)}if(c){let u=`${s}-${mn()}`;await Na(ho.join(t.extensionPath,"scripts","inspect-volume"),n,u,o),await n.rename(u,s)}return s}async function kN(e,t,r){let n=[`vsch.local.repository=${t.repositoryPath}`];return r?r===zn?(r=t.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=t.oldVolumeName,n.push("vsch.local.repository.unique=false")),t.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${t.gitUrlInfo.ref}`),t.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${t.gitUrlInfo.pullRequestId}`),(await Wn(e)).indexOf(r)===-1&&await Wh(e,r,n),r}var ng="vsch.local.repository",r_="vsch.local.repository.volume",n_="vsch.local.repository.folder";function DN(e,t,r,n){return r?{labels:[`${ng}=${t}`,`${r_}=${n}`,`${n_}=${r}`],remoteWorkspaceFolder:e.workspaceFolder(r)}:{labels:[`${ng}=${t}`],remoteWorkspaceFolder:e.getOldWorkspacePath(t)}}async function RN(e,t,r){let{loadNativeModule:n,output:o}=e.common,i=Go(e,t,"root"),s=await Ei(e,t,"root",n),a=$n("container",r,{},i,s,()=>{throw new Error("not implemented")},"node",o);return{cliHost:a,dockerCLI:"docker",dockerComposeCLI:zo({exec:a.exec,env:{},output:o},"docker","docker-compose"),dockerComposePath:"docker-compose",env:{},output:o}}var JE="devcontainer.local_folder",Zh="vsch.local.volume",eg="/volume",tg="vsch.quality",XE="vsch.local.folder";async function AN(e,t,r,n,o,i,s,a,c,u,l,d,f,p,m){let{common:h}=e,g;try{let v=!u,w=X(X({},t.env),er(t.env)),C={cliHost:t.cliHost,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:w,extensionPath:h.extensionPath,appRoot:h.appRoot,package:h.package,output:h.postCreate.output},{mergedConfiguration:E}=await Tu(C,s,f,h.getLogLevel(),m,d,a.Id,p,h.cliMode),b=E.remoteUser;return g=await Iu(e,a.Id,o.workspaceFolder,b),l&&u&&o.workspaceFolder&&g.user!=="root"&&(g.launchRootShellServer?await Ph(g,g.launchRootShellServer,o.workspaceFolder,n.configFilePath.path):h.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files.")),await lK(a,c,e,t,g,n,E,r,v,i,s,d,f,p)}catch(v){throw uK(v,a,e,g,n)}}function uK(e,t,r,n,o){let i=e instanceof je?e:new je({description:"An error occurred setting up the container.",originalError:e});return t&&(i.manageContainer=!0,i.params=r.common,i.containerId=t.Id,i.dockerParams=r),n&&(i.containerProperties=n),o&&(i.config=o),i}async function lK(e,t,r,n,o,i,s,a,c,u,l,d,f,p){var k,A;let{common:m}=r,h=Pr(m.cliHost,o.shellServer);c||await Hh(r,h,i);let g=s.shutdownAction;g==="stopCompose"&&(g="stopContainer");let v={cwd:u,dockerCLI:r.dockerCLI,env:m.env,containerId:e.Id,user:o.user,sessionId:m.sessionId,shutdownAction:g,logLevel:m.getLogLevel(),delay:1e4},{shutdownArgs:w}=await zh(r,h,"singleContainer",v,c?i:void 0),C=((A=(((k=s.customizations)==null?void 0:k.vscode)||[]).slice().reverse().find(N=>typeof N.devPort=="number"))==null?void 0:A.devPort)||ds,{hostOrContainerPort:E,hostPortServer:b,connectionToken:I,webConnectionToken:T,remoteEnv:P,serverDownloaded:S}=await Sh(m,o,i,s,C,Kh(r,n,l,d,e.Id,t,f,p));return w.hostPortServer=b,Su(m,o,E,I,T,e,a),{params:m,properties:o,config:i,resolvedAuthority:{host:Cs,port:E,connectionToken:I,extensionHostEnv:P},webConnectionToken:T,tunnelInformation:m.isLocalContainer?Pu(e):{},dockerParams:r,dockerContainerId:e.Id,serverDownloaded:S}}function Fa(e){let t=e.Config.Labels||{},r=t[JE]||t[XE];return r||void 0}function Ma(e){let t=(e.Config.Labels||{})[ng];return t||void 0}function og(e){let t=(e.Config.Labels||{})[r_];return t||void 0}function jN(e){let t=(e.Config.Labels||{})[Zh];return t||void 0}function $N(e){let t=(e.Config.Labels||{})[n_];return t||void 0}function ON(e,t){throw e.write(at(t)),new Error(t)}var HN=ie(require("path"));async function qN(e,t,r,n,o,i){let s,a=new Promise(m=>s=m),c=new OE,u=[],l=await oN("vscode-remote-containers",async(m,h)=>{let g=await sN(m),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let w=u[g.sequence];w&&(w(g.reply),delete u[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&n.event(g.event);h.write(JSON.stringify(v)),h.end()});l.server.unref();let d=HN.join(r,"dist","shutdown","shutdownMonitorProcess"),f=[l.ipcHandlePath,e,qe[t],o||"",i.getTime().toString()];n.write(`Forking shutdown monitor: ${d} ${f.join(" ")}\r
`);let p=pA(d,f,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",m=>{console.error(m)}),p.unref(),{queue:c,sequence:0,replies:u,done:a}}async function ig(e,t,r){let n=e.sequence++,o=new Promise(s=>e.replies[n]=s);return e.queue.push({type:"configure",sequence:n,options:t}),await o}async function BN({queue:e,done:t}){e.push({type:"cleanup"}),await t}var VN=ie(require("util"));var zn="__UNIQUE__",Cs="127.0.0.1";function Ou(e,t){let r=e.platform==="win32"&&!e.env.SSH_AUTH_SOCK?FC:e.type==="wsl"?e.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return t&&("context"in t?n.DOCKER_CONTEXT=t.context:(t.host&&(t.host.startsWith("ssh://")&&e.type==="ssh"?n.VSCODE_DOCKER_HOST=t.host:n.DOCKER_HOST=t.host),t.certPath&&(n.DOCKER_CERT_PATH=t.certPath),t.tlsVerify&&(n.DOCKER_TLS_VERIFY=t.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function cr(e){let t;if(e.DOCKER_CONTEXT&&e.DOCKER_CONTEXT!=="default")t={context:e.DOCKER_CONTEXT};else{t={};let r=e.VSCODE_DOCKER_HOST||e.DOCKER_HOST;r&&(t.host=r),e.DOCKER_CERT_PATH&&(t.certPath=e.DOCKER_CERT_PATH),e.DOCKER_TLS_VERIFY&&(t.tlsVerify=e.DOCKER_TLS_VERIFY),Object.keys(t).length||(t=void 0)}return t}function sg(e,t){t&&("context"in t&&t.context&&e.write(`Context: ${t.context}\r
`),"host"in t&&t.host&&e.write(`Host: ${t.host}\r
`),"certPath"in t&&t.certPath&&e.write(`CertPath: ${t.certPath}\r
`),"tlsVerify"in t&&t.tlsVerify&&e.write(`TLSVerify: ${t.tlsVerify}\r
`))}function ag(e){return!e.VSCODE_DOCKER_HOST&&!e.DOCKER_HOST&&(!e.DOCKER_CONTEXT||e.DOCKER_CONTEXT==="default")}function Ru(e){return e&&("context"in e||e.host)?` @ ${"context"in e?e.context:e.host}`:""}async function wn(e,t){try{return await Qr(e,t)}catch{return}}function Su(e,t,r,n,o,i,s){let a=i.Ports.filter(f=>!!f.PublicPort),c="";if(e.authority&&s){let f=s.isWorkspaceFile?"workspace":"folder",p=t.remoteWorkspaceFolder||"/",m=s.isWorkspaceFile?Au.posix.join(p,e.cliHost.path.basename(s.workspaceOrFolderPath)):p;c=`&${f}=${encodeURIComponent(`vscode-remote://${e.authority}${m}`)}`}let u=[...a.length?["Published Ports:"]:[],...a.map(f=>`${f.PrivatePort}/${f.Type} -> ${f.IP}:${f.PublicPort}`),...a.length?[""]:[],...e.web?[`VS Code Web: http://localhost:${r}?tkn=${n||o}${c}`,""]:[]],l=u.reduce((f,p)=>Math.max(p.length,f),0),d="-".repeat(l);l>0&&e.output.write(`\r
\r
${d}\r
${u.join(`\r
`)}${d}\r
\r
`)}async function cg(e){let{common:t}=e,{output:r}=t,n="Check Docker is running",o=r.start(n);try{let{stdout:i}=await it(e,"version","--format","{{.Server.APIVersion}}"),s=i.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(i){console.error(i);let s=i&&(i.stderr?i.stderr.toString():i.message)||"";s&&r.write(at(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=i&&(i.stderr?i.stderr.toString().toLowerCase():i.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new je({description:a,originalError:`Docker returned an error code ${i.code}, message: ${i.message}`})}finally{r.stop(n,o)}}function pr(e){return e.hostPath!==void 0}function Or(e){return e.repositoryPath!==void 0}function xi(e){return!Or(e)&&!!e.folder}function Jd(e){return!Or(e)&&!xi(e)&&e.volumeName!==void 0}function Cn(e){let t=GN("dev-container",e);if(!!t)return typeof t=="string"?{hostPath:t}:"repositoryPath"in t?t.dockerHost?{repositoryPath:t.repositoryPath,settings:{host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`,cloneInfo:t.cloneInfo}}:t:"hostPath"in t&&t.dockerHost?{hostPath:t.hostPath,settings:{host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`}}:t}function Xd(e,t,r,n){let o=r?JSON.stringify({hostPath:e,localDocker:n,settings:r}):e;return`vscode-remote://dev-container+${Buffer.from(o,"utf8").toString("hex")}${t}`}function go(e,t,r,n,o,i){if(e){let a=Gn(e);if(!t){let u=JSON.stringify({repositoryPath:e,settings:o,cloneInfo:i,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${a.getOldWorkspacePath(e)}`}let c=JSON.stringify({repositoryPath:e,volumeName:t,folder:r,settings:o,cloneInfo:i,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}if(r){let a={volumeName:t,folder:r,settings:o};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(a),"utf8").toString("hex")}${Du(r)}`}let s=JSON.stringify({volumeName:t,settings:o});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${eg}`}function ug(e){let t=GN("attached-container",e);if(!!t)return typeof t=="string"?{containerId:t}:(t.dockerHost&&(t.settings={host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`},delete t.dockerHost),t)}function WN(e,t,r){let n=JSON.stringify({containerName:e,settings:t,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function GN(e,t){try{let[r,n]=t.split("+"),o=r===e&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return o?o.startsWith("{")?JSON.parse(o):o:void 0}catch(r){console.warn(r);return}}async function zN(e,t,r,n=!1){return!n&&await yd(e,t,r)||t}function KN(e,t,r){let n=e.path.relative(e.path.dirname(t),r);return`/workspaces/${e.platform==="win32"?n.replace(/\\/g,"/"):n}`}function QN(e,t,r){if(e==="win32")return t;let n=`${dK(r,"/")}/`;return(e==="linux"?t.startsWith(n):t.toLowerCase().startsWith(n.toLowerCase()))&&(t=`~/${t.substr(n.length)}`),t}function dK(e,t){if(t.length===0)return e;for(;e.endsWith(t);)e=e.substr(0,e.length-t.length);return e}function tN(e,t){return e.with({path:Au.posix.resolve(e.path,t)})}async function zh(e,t,r,n,o){let{common:i,onRemoveOnShutdownChanged:s}=e;if(i.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let a=i.output.start("Setup shutdown monitor"),c=await qN(r,i.getLogLevel(),i.extensionPath,i.output,i.logFilePath?Au.dirname(i.logFilePath):void 0,i.sessionStart);ig(c,n,i.output).catch(f=>console.error(f)),s&&s(async f=>{n.rebuild=!!f,n.delay=0,await ig(c,n,i.output)}),i.onDidChangeLogLevel(async f=>{n.logLevel=f,await ig(c,n,i.output)});let u={},l=async()=>{let f=BN(c);u.hostPortServer&&await(0,VN.promisify)(u.hostPortServer.close.bind(u.hostPortServer))(),await f};i.shutdowns.push(l);let d=o?ZO(e,t,o).catch(console.error):Promise.resolve();return i.output.stop("Setup shutdown monitor",a),{monitor:c,shutdownArgs:u,doneWithDocuments:d}}function Pu(e){return{environmentTunnels:e.Ports.filter(t=>!!t.PublicPort).map(t=>({remoteAddress:{port:t.PrivatePort,host:t.IP},localAddress:t.IP+":"+t.PublicPort}))}}async function Iu(e,t,r,n,o){let{common:i}=e,s="Inspecting container",a=i.output.start(s),c=await Qr(e,t);i.output.stop(s,a);let u=n||c.Config.User||"root",[,l,,d]=/([^:]*)(:(.*))?/.exec(u),f=fK(c.Config.Env),p=Go(e,t,u),m=await Ei(e,t,u,i.loadNativeModule),h=Go(e,t,"root"),g=c.Mounts.find(C=>C.Type==="volume"&&C.Name==="vscode"),v=c.Mounts.find(C=>C.Type==="bind"&&C.Source===i.localCacheFolder),w=g&&Au.posix.join(g.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination);return Eh({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:w,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:l==="0"?"root":l,containerGroup:d,containerEnv:f,remoteExec:p,remotePtyExec:m,remoteExecAsRoot:h,rootShellServer:o})}function fK(e){return(e||[]).reduce((t,r)=>{let n=r.indexOf("=");return n!==-1&&(t[r.substr(0,n)]=r.substr(n+1)),t},{})}async function o_(e){return e.path.join(await e.tmpdir(),e.platform==="linux"?`vsch-${await e.getUsername()}`:"vsch")}async function YN(e){let{common:t,dockerCLI:r,dockerComposeCLI:n,dockerComposePath:o,dockerEnv:i}=e,{cliHost:s,output:a}=t;return{cliHost:s,dockerCLI:r,dockerComposeCLI:n,dockerComposePath:o,env:i,output:a}}async function JN(e,t){return e.type==="local"&&t?e.path.join(t,"data"):e.path.join(await e.homedir(),".vscode-remote-containers","data")}function Kh(e,t,r,n,o,i,s,a){return async(c,u,l,d)=>{let{common:f}=e,{cliHost:p}=t,m=X(X({},t.env),er(t.env)),h={cliHost:t.cliHost,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:m,extensionPath:f.extensionPath,appRoot:f.appRoot,package:f.package,postCreate:f.postCreate,output:f.postCreate.output},g=f.postCreate.output.dimensions||f.output.dimensions,v=await ys(h,["run-user-commands",...t.cliHost.type==="local"&&f.persistedFolder?["--user-data-folder",f.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...i?["--container-data-folder",Hn(e.common.product.serverDataFolderName)]:[],...i?["--container-system-data-folder",yu(e.common.product.serverDataFolderName)]:[],"--workspace-folder",r,...(n||[]).map(w=>["--id-label",w]).flat(),"--container-id",o,"--log-level",zi(f.getLogLevel()),"--log-format","json",...s?["--config",We(s,p.platform)]:[],...a?["--override-config",We(a,p.platform)]:[],"--default-user-env-probe",f.defaultUserEnvProbe,"--skip-non-blocking-commands",String(c),...f.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(l),"--stop-for-personalization",String(u),...[].concat(...Object.keys(d).map(w=>["--remote-env",`${w}=${d[w]}`])),"--mount-workspace-git-root",String(!f.cliMode),...g?["--terminal-columns",String(g.columns),"--terminal-rows",String(g.rows)]:[]]);if((v==null?void 0:v.outcome)!=="success")throw new je({description:`devcontainer command failed: ${v?JSON.stringify(v):"data missing"}`});return v.result}}async function Tu(e,t,r,n,o,i,s,a,c=!1){let{cliHost:u,output:l}=e,d=await ys(e,["read-configuration",...e.dockerPath!=="docker"?["--docker-path",e.dockerPath]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],"--workspace-folder",t,...(i||[]).map(f=>["--id-label",f]).flat(),...s?["--container-id",s]:[],"--log-level",zi(n),"--log-format","json",...r?["--config",We(r,u.platform)]:[],...a?["--override-config",We(a,u.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",String(!c),...l.dimensions?["--terminal-columns",String(l.dimensions.columns),"--terminal-rows",String(l.dimensions.rows)]:[],...Object.keys(o).length>0?["--additional-features",JSON.stringify(o)]:[]]);return d.configuration.configFilePath=Qe.revive(d.configuration.configFilePath).with({scheme:u.type==="local"?"file":Ht.scheme}),d}var At=ie(require("vscode"));var Ua={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(e,t)=>!t,execute:async e=>{await At.env.openExternal(At.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},ja={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(e,t)=>!t&&e.data.reload!==!1,execute:async e=>{e.manageContainer&&e.dockerParams&&e.containerId&&await it(e.dockerParams,"stop","-t","0",e.containerId),await At.commands.executeCommand("workbench.action.reloadWindow")}},XN={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(e,t)=>e.manageContainer&&!!e.dockerParams&&!!e.containerId&&!t,execute:async e=>{await it(e.dockerParams,"rm","-f",e.containerId),await At.commands.executeCommand("workbench.action.reloadWindow")}},Nu={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(e,t)=>!t,execute:async e=>{await At.commands.executeCommand("workbench.action.openRecent")}},ZN={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:e=>!!e.dockerParams&&!!e.containerId&&e.data.start===!0,execute:async e=>{await it(e.dockerParams,"start",e.containerId),await At.commands.executeCommand("workbench.action.reloadWindow")}},eL={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:e=>e.data.attach===!0,execute:async()=>{await At.commands.executeCommand("remote-containers.attachToRunningContainer")}},_s={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(e,t)=>{if(!t)return!1;let r=At.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||At.workspace.textDocuments.some(o=>o.isDirty))},execute:async e=>{await At.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Lu=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(e,t)=>t&&e.data.reload!==!1,execute:ja.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(e,t)=>t,execute:async e=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(e,t)=>t&&!!e.data.learnMoreUrl,async execute(e){await At.env.openExternal(At.Uri.parse(e.data.learnMoreUrl))}}];async function bs(e,t,r,n=!1,o){var f,p,m,h,g,v;let i=e instanceof je?e:new je({description:"An error occurred setting up the container.",originalError:e});if(o){o.show();let w=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(w!==void 0){o.log.write(at(String(w)));let C=(p=(f=i.originalError)==null?void 0:f.stdout)==null?void 0:p.toString().trim();C&&o.log.write(C);let E=(h=(m=i.originalError)==null?void 0:m.stderr)==null?void 0:h.toString().trim();E&&o.log.write(at(E)),((g=i.originalError)==null?void 0:g.code)&&o.log.write(`Exit code ${(v=i.originalError)==null?void 0:v.code}`)}}if(e.message.indexOf("Cancelled container configuration selection")!==-1)throw await At.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),At.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=i.actions;s.length||(s=[Ua]);let a=await s.reduce(async(w,C)=>await C.applicable(i,!0)?[...await w,C]:w,Promise.resolve([])),c=await At.window.showErrorMessage(i.description,{modal:!0},...a);if(c&&(tL(r,t,c.id),await c.execute(i)),c&&c.isLastAction){if(n)throw At.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await s.reduce(async(w,C)=>await C.applicable(i,!1)?[...await w,C]:w,Promise.resolve([])),l=u.map(w=>({label:w.title,action:w}));async function d(){let C=await(u.length?At.window.showQuickPick(l,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));C&&(tL(r,t,C.action.id),C.action.execute(i).catch(console.error),C.action.isLastAction||await d())}if(d().catch(console.error),n)throw At.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function tL(e,t,r){e.sendTelemetryEvent("errorAction",{resolver:t,action:r})}var pe=ie(require("vscode")),Av=ie(require("path"));var gj=ie(RM()),$s=ie(mj());var hj=ie(require("vscode"));function Ur(e){let t=hj.workspace.getConfiguration(),r=Nd(e),n=t.get(r),o=us(e),i=t.get(o);if(i!=null&&i!==n){let s=t.inspect(r);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return i}return n}function kx(e,t){return e.affectsConfiguration(Nd(t))||e.affectsConfiguration(us(t))}var jr="remote-containers.revealLogTerminal",Dx="remote-containers.revealPostCreateTerminal",wc="remote-containers.openDevContainerFile",vj="remote-containers.openRepositoryInVolume",Ov="remote-containers.openRepositoryInUniqueVolume",yj="remote-containers.openRepositoryFromRemoteHubWithEditSession",wj="remote-containers.openPullRequestInVolume",Cc=pe.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),Ec=pe.Uri.parse("https://aka.ms/vscode-dev-containers"),Cj=new by,Tr={onRemoveOnShutdownChangedEmitter:Cj,onRemoveOnShutdownChanged:Cj.event,results:new Map},_c,eo=e=>fh(e,pe.env.appRoot);function Nv(e,t,r,n,o){return async(i,s)=>{if(pe.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),s.resolveAttempt>1){let a=r.get(i);if(!a)throw new Error("Reconnect attempt without old result.");let c=`Reconnection attempt ${s.resolveAttempt-1}`,u=e.log.start(c),{cliHost:l}=a.params;if(l.reconnect)try{await l.reconnect()}catch(d){throw e.log.write(at(String(d&&(d.stack||d.message)||d))),pe.RemoteAuthorityResolverError.TemporarilyNotAvailable("Cannot reconnect to remote host.")}if(a.dockerContainerId){let d=await wn(a.dockerParams,a.dockerContainerId);if(!d)throw pe.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(d.State.Status==="paused")throw pe.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(d.State.Status!=="running")throw pe.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return e.log.stop(c,u),Ne(X({},a.resolvedAuthority),{isTrusted:a.isTrusted})}else{let a="Resolving Remote",c=e.log.start(a),u=await o(i,e,t);return yJ(u.params,u.properties).catch(l=>{}),r.set(i,u),n(),e.log.stop(a,c),pe.window.withProgress({location:pe.ProgressLocation.Window,title:FJ,cancellable:!1},async l=>{await nO(u.params.backgroundTasks)}).then(void 0,l=>{e.log.write(at(String(l&&(l.stack||l.message)||l)))}),Ne(X(X({},u.resolvedAuthority),u.tunnelInformation),{isTrusted:u.isTrusted})}}}async function yJ(e,t){if(!t.nodeExecutable)return;let r=await vt(Av.join(e.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await vi(e,t,[t.nodeExecutable,"-e",r],void 0,{silent:!0}),o=n.toString().trim();e.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var Rx;async function wJ(e){return Rx||(Rx=Wo(Av.join(__dirname,"..",".."),ji,e)),Rx}var Xf={};async function ji(e,t=!0){var r;if(e.counter&&((r=Xf[e.prompt])==null?void 0:r.from)===e.counter&&delete Xf[e.prompt],!Xf[e.prompt]){if(!t)return"";Xf[e.prompt]={result:Promise.resolve(pe.window.showInputBox({prompt:e.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:e.counter}}return Xf[e.prompt].result}async function ut(e,t,r,n=!0,o=wJ(t),i=!0){let s=!r;if(s){if(Tr.results.size){let g=[...Tr.results.values()].filter(v=>v.dockerParams)[0];return YN(g.dockerParams)}if(_c)return _c}r&&typeof r!="string"&&"scheme"in r&&(r.scheme==="file"?r=r.fsPath:r=du(r));let a;if(!r){let g=(pe.workspace.workspaceFolders||[])[0];if(pe.env.remoteName==="wsl")g?r=du(g.uri):r={wslDistro:ah(pe.env.remoteAuthority),wslPath:"/"};else if(pe.env.remoteName==="ssh-remote"){let v=CJ(pe.env.remoteAuthority);if(v){let{user:w,hostName:C,port:E}=v;a={host:`ssh://${w?`${w}@`:""}${C}${E?`:${E}`:""}`},g?r=g.uri.path:r="/"}}else(g==null?void 0:g.uri.scheme)==="file"&&(r=g.uri.fsPath);r||(r=process.cwd())}let c=a&&"host"in a&&a.host||void 0,u=n?ko():{executeInWSL:"never",defaultDistro:void 0},l=yn(c,r,eo,u,e.extensionPath,await Vn(),await kd(pe.env.appRoot),t,ni,{sshAskpassEnv:o,settings:Il()});i&&!await Promise.race([l,Bo(1e3)])&&await pe.window.withProgress({location:pe.ProgressLocation.Notification,title:`[Setting up Dev Containers (show log)](command:${jr} "Show details in terminal")`,cancellable:!1},async()=>{await l});let d=await l,f=To(),p=ri();if(!a){let g=pe.workspace.getConfiguration("docker"),v=g.get("environment")||{},w=v.DOCKER_CONTEXT||g.get("context")||d.env.DOCKER_CONTEXT;if(!w){let C={cliHost:d,dockerCLI:f,dockerComposeCLI:zo({exec:d.exec,env:{},output:pt},f,p),dockerComposePath:p,env:{},output:pt};w=await ME(C)||"default"}w&&w!=="default"?a={context:w}:(a=X(X(X({},cr(d.env)),["host","certPath","tlsVerify"].reduce((C,E)=>EJ(C,g,E),{})),cr(v)),Object.keys(a).length||(a=void 0))}let m=X(X({},await o),Ou(d,a)),h={cliHost:d,dockerCLI:f,dockerComposeCLI:zo({exec:d.exec,env:m,output:t},f,p),dockerComposePath:p,env:m,output:t};return s&&(_c=h),h}var Lv;function Ej(e){if(Lv)return Lv;let t=xJ(e);return e.subscriptions.push(t),e.subscriptions.push(t.event(()=>{let r=_c==null?void 0:_c.cliHost;_c=void 0,(r==null?void 0:r.terminate)&&r.terminate()})),Lv=t.event,Lv}function CJ(e){let t=/^ssh-remote\+(.*)$/.exec(e);if(!t)return;let r=t[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch{}return{hostName:r}}function EJ(e,t,r){let n=t.get(r);return n&&(e[r]=n),e}var _J=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment"],bJ=[Ct.dockerComposePath,Ct.executeInWSL,Ct.executeInWSLDistro];function xJ(e){let t=new pe.EventEmitter,r=pe.workspace.onDidChangeConfiguration(async c=>{(_J.some(u=>c.affectsConfiguration(u))||bJ.some(u=>kx(c,u)))&&t.fire()}),n,o,i,s=()=>{(async()=>{o||(o=await yn(void 0,process.cwd(),eo,ko(),e.extensionPath,await Vn(),void 0,pt,ni));let c={cliHost:o,dockerCLI:To(),dockerComposeCLI:zo({exec:o.exec,env:{},output:pt},To(),ri()),dockerComposePath:ri(),env:{},output:pt},u=await ME(c);u===void 0?i=setTimeout(s,2*60*1e3):(u!==n&&(n!==void 0&&t.fire(),n=u),i=setTimeout(s,2*1e3))})().catch(console.error)};s();let a=t.dispose;return t.dispose=()=>{r.dispose(),i&&clearTimeout(i),a.call(t)},t}async function bc(){let e=pe.workspace.workspaceFolders;if((e==null?void 0:e.length)===1){let t=e[0].uri;return Ax(t)}return null}async function Ax(e){if(e&&e.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(e.authority)){let r=Cn(e.authority);if(pr(r))return null;if(Or(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function Fv(e){return{getConfigurationState:()=>e.get("configurationState"),updateConfigurationState:async t=>e.update("configurationState",t),containerOutdated:SJ}}async function SJ(e){let t="Rebuild",r="Ignore",n=await pe.window.showInformationMessage(`Configuration file(s) changed: ${e.join(", ")}. The container might need to be rebuilt to apply the changes.`,t,r);if(n===t)return pe.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function PJ(e){return e?bj():Array.from(new Set([...Ur(Ct.defaultExtensions)||[],...bj()]))}function _j(){return Ur(Ct.defaultFeatures)||{}}function bj(){let e=pe.env.language,t=e.indexOf("-"),r=xj(e)||(t!==-1?xj(e.substr(0,t)):void 0);return r?[r]:[]}function xj(e){let t=e.toLowerCase();return pe.extensions.all.filter(r=>{var o;let n=r.packageJSON&&r.packageJSON.contributes;return((o=n==null?void 0:n.localizations)==null?void 0:o.length)?!!n.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===t}):!1}).map(r=>r.id)[0]}function Sj(){return!!pe.workspace.getConfiguration().get("workbench.enableExperiments")}function IJ(){return!!Ur(Ct.enableWebAccess)}function Mv(){return Ur(Ct.workspaceMountConsistency)||"cached"}function Uv(){return!!Ur(Ct.experimentalUpdateRemoteUserUIDOnMacOS)}function jv(){return Ur(Ct.cacheVolume)??!0}function TJ(){let e=Ur(Ct.copyGitConfig);return typeof e=="boolean"?e:!0}function kJ(){return Ur(Ct.gitCredentialHelperConfigLocation)||"global"}function To(){return Ur(Ct.dockerPath)||"docker"}function ko(){return{executeInWSL:Ox(),defaultDistro:Nx()}}function Ox(){return process.platform!=="win32"?"never":Ur(Ct.executeInWSL)?"always":"forWSLPath"}function Nx(){if(process.platform==="win32")return Ur(Ct.executeInWSLDistro)||void 0}function ri(){return Ur(Ct.dockerComposePath)||"docker-compose"}function Zf(){let e=Ur(Ct.logLevel)||"debug";return MS(e)}var DJ=e=>pe.workspace.onDidChangeConfiguration(t=>{kx(t,Ct.logLevel)&&e(Zf())});function RJ(){let e=pe.workspace.getConfiguration(),t=r=>(e.get(us(r),"")||e.get(r,"")).trim();return{repository:t(qo.repository)||void 0,installCommand:t(qo.installCommand)||void 0,targetPath:t(qo.targetPath)||"~/dotfiles"}}function Il(){let e=pe.workspace.getConfiguration();return{executablePath:e.get("remote.SSH.path"),configFilePath:e.get("remote.SSH.configFile")}}function $i(e,t,r,n,o,i,s){var l,d;let a={resolver:t,outcome:r};n&&(a.hostType=n.cliHost.type),o&&(a.configProperties=JSON.stringify(Object.keys(o)),a.configExtensions=JSON.stringify(((d=(l=o.customizations)==null?void 0:l.vscode)==null?void 0:d.extensions)||[]),a.configFeatures=JSON.stringify(Object.keys(o.features||{})),"image"in o?a.configType="image":Ir(o)?a.configType="dockerfile":"dockerComposeFile"in o&&(a.configType="dockerCompose")),i&&(a.hardwareId=i.osRelease.hardware,a.osReleaseId=i.osRelease.id,a.osReleaseVersion=i.osRelease.version);let c=s&&s.originalError,u=c&&(c.stack||c.message||String(c))||s&&s.description;u&&(a.errorMessage=u),e.sendTelemetryEvent("resolver",a)}var Pj=class{constructor(t){this.onClose=t;this.writeEmitter=new pe.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new pe.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(t=>this.writeEmitter.fire(t))}close(){this.ready=!1,this.onClose()}write(t){this.queue.push(t),this.ready&&this.writeEmitter.fire(t)}handleInput(t){this.inputEmitter.fire(t)}},$v=class{constructor(t,r,n=void 0){this.sessionStart=r;this.outputTerminal=new Pj(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=t?Av.join(t,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=AJ(o,Zf,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>pe.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}get name(){return this._name}set name(t){this._name=t}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(t){this._revealOnNextOutput=t}show(){this._terminal||(this._terminal=pe.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function AJ(e,t,r,n,o=void 0){let i=[];return r&&i.push(jS(r,()=>Math.min(qe.Debug,t()))),i.push($S(e,t,n)),An(US(i,o))}async function Lx(e,t){let r=await wn(e,t.Id);if(r&&r.State.Status==="running")try{await it(e,"stop",r.Id)}catch(n){pe.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function Hv(e,t){let r=await wn(e,t.Id);if(r&&r.State.Status!=="running")try{await it(e,"start",r.Id)}catch(n){pe.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function Ij(e,t){try{await it(e,"rm",t)}catch(r){pe.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function Fx(e,t){try{await it(e,"volume","rm","--force",t)}catch(r){pe.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function OJ(){return pe.env.sessionId!=="someValue.sessionId"?pe.env.sessionId:`${pe.env.sessionId}_${Date.now()}`}function NJ(e,t){let r=pe.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:e.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:t,tildify:!0}});e.shutdowns.push(r.dispose.bind(r))}async function Tj(e,t){if(e.globalState.get("removeOnStartup")===t)return await e.globalState.update("removeOnStartup",null),!0;let r=e.workspaceState.get("removeOnStartup",!1);return r&&await e.workspaceState.update("removeOnStartup",null),r}async function kj(e,t){await e.workspaceState.update("removeOnStartup",t)}async function Mx(e,t){await e.globalState.update("removeOnStartup",t)}async function Dj(e,t){return e.globalState.get("buildNoCache")===t?(await e.globalState.update("buildNoCache",null),!0):!1}async function ep(e,t){await e.globalState.update("buildNoCache",t)}async function tp(e,t,r,n,o){await e.globalState.update("openEditorsOnStartup",{workspaceFolder:t,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:o})}async function Rj(e){var r;let t=e.globalState.get("openEditorsOnStartup");if(t){await e.globalState.update("openEditorsOnStartup",void 0);let n=(r=pe.workspace.workspaceFolders)==null?void 0:r.some(i=>i.uri.fsPath===t.workspaceFolder||i.uri.path===t.workspaceFolder),o=await bc();if(n||o&&o.repositoryPath===t.workspaceFolder&&(n=!0),n){let i=t.fileWithError?Qe.parse(t.fileWithError):void 0;if(t.openLog==="onTheSide"&&await Oj(i),t.openLog&&t.logFile){let s={viewColumn:t.openLog==="onTheSide"?pe.ViewColumn.Beside:pe.ViewColumn.One,preserveFocus:!0},a=await pe.window.showTextDocument(pe.Uri.file(t.logFile),s),c=new pe.Position(a.document.lineCount-1,0);a.selection=new pe.Selection(c,c),a.revealRange(a.selection)}return t.openLog!=="onTheSide"&&await Oj(i),!0}}return!1}function Aj(e){return[`vscode-remote:/workspaces/${e}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${e}/.devcontainer.json`]}async function Oj(e){return e?pe.commands.executeCommand("vscode.open",pe.Uri.parse(e.toString()),{viewColumn:pe.ViewColumn.One}):pe.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:pe.ViewColumn.One})}async function Ux(e){if(Tr.results.size)return[...Tr.results.values()].filter(i=>i.config).map(i=>i.config.configFilePath);let t=Hi(),r=pe.workspace.workspaceFolders||[],n=await Promise.all(r.map(async i=>{let s=mt(e.path,We(i.uri,e.platform));return await bi(e,s,t)})),o=pe.workspace.workspaceFile;if(o&&o.scheme!=="untitled"){let i=mt(e.path,We(o,e.platform)),s=await bi(e,i,t);s&&n.indexOf(s)===-1&&n.unshift(s)}return n.filter(i=>!!i)}function Hi(){return Ur(Ct.repositoryConfigurationPaths)||[]}async function LJ(e,t,r="localhost"){await pe.workspace.openTunnel({remoteAddress:{host:r,port:t}})}function Nj(e,t){let r=new $v(void 0,t);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:mA(r.log,"postCreate",e),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("[1mDone. Press any key to close the terminal.[0m"),n=!0),o()},promise:new Promise(s=>o=s)};return{channel:r,postCreate:i}}async function Tl(e){let{authority:t,extensionContext:r,sessionStart:n,progress:o,cliHost:i,env:s,cwd:a,isLocalContainer:c,telemetry:u,output:l,logFilePath:d,allowSystemConfigChange:f,postCreate:p}=e,m=IJ(),h=Ne(X({computeExtensionHostEnv:!0},u),{appRoot:pe.env.appRoot,localCacheFolder:await Vn(),extensionPath:r.extensionPath,webConnectionToken:void 0,sessionId:OJ(),sessionStart:n,authority:t,cliHost:i,env:s,cwd:a,isLocalContainer:c,getAdditionalExtensionsToInstall:PJ,additionalFeaturesToInstall:_j(),isCopyGitConfigEnabled:TJ(),credentialHelperConfigLocation:kJ(),dotfilesConfiguration:RJ(),progress:jJ(o),output:l,logFilePath:d,allowSystemConfigChange:f,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,getTelemetryLevel:()=>u.getTelemetryLevel(),forwardServerPort:!0,web:m,getLogLevel:Zf,onDidChangeLogLevel:DJ,loadNativeModule:eo,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:g=>NJ(h,g),openTunnel:LJ,getTunnels:()=>Promise.resolve(pe.workspace.tunnels),onAdoptProcess:pe.window.onDidOpenTerminal,persistedFolder:await JN(i,r.globalStoragePath),alternateDownload:ni,skipPostAttach:!1});return h}async function ni(e,t){let r=await pe.commands.executeCommand("_workbench.downloadResource",pe.Uri.parse(e));if(!r)throw new je({description:"Downloading the VS Code Server failed. Please try again later."});await ai(r.fsPath,t)}var kl=`[Starting Dev Container (show log)](command:${jr} "Show details in terminal")`,FJ=`[Configuring Dev Container (show log)](command:${Dx} "Show details in terminal")`,MJ=`[Reading Dev Container Configuration (show log)](command:${jr} "Show details in terminal")`,UJ={[Ar.Begin]:"",[Ar.CloningRepository]:"Cloning Repository",[Ar.BuildingImage]:"Building image",[Ar.StartingContainer]:"Starting container",[Ar.InstallingServer]:"Installing server",[Ar.StartingServer]:"Starting server",[Ar.End]:""};function jJ(e){let t=0;return r=>{let n=Ar.End-r,o=(100-t)/(n+1);e.report({message:UJ[r],increment:o}),t+=o}}async function Lj(e,t,r){let{name:n,publisher:o,version:i,aiKey:s}=t;if(!s)return NS(t,r);let a=o?`${o}.${n}`:n,c=new gj.default(a,i,s);e.subscriptions.push(c);let u=new Fj(c),l=$J(r),d=Sj()?(0,$s.getExperimentationService)(a,i,l,u,e.globalState):void 0;return{sendTelemetryEvent:u.sendTelemetryEvent.bind(u),isCachedFlightEnabled:async f=>d&&Sj()?d.isCachedFlightEnabled(f):!1,product:r,package:t,getTelemetryLevel:()=>c.telemetryLevel}}var Fj=class{constructor(t){this.baseReporter=t;this.sharedProperties={}}sendTelemetryEvent(t,r,n){this.baseReporter.sendTelemetryEvent(t,X(X({},this.sharedProperties),r),n)}setSharedProperty(t,r){this.sharedProperties[t]=r}postEvent(t,r){let n={};for(let[o,i]of r)n[o]=i;this.sendTelemetryEvent(t,n)}};function $J(e){switch(e.quality){case"stable":return $s.TargetPopulation.Public;case"insider":return $s.TargetPopulation.Insiders;case"exploration":return $s.TargetPopulation.Internal;case void 0:return $s.TargetPopulation.Team;default:return $s.TargetPopulation.Public}}var rp="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",jx="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function np(e,t){if((t==null?void 0:t.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-"))||e.globalState.get(jx))return!0;let r="Got It",n="Learn More",o=await pe.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return o===r?(await e.globalState.update(jx,!0),!0):(o===n&&pe.env.openExternal(pe.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var $x="userConfirmedAttachToContainerRequiresTrust";async function Hs(e){if(e.globalState.get($x))return!0;let t="Got It",r="Learn More",n=await pe.window.showWarningMessage("Attaching to a container may execute arbitrary code.",{modal:!0,detail:"Only attach to a container if you trust its origin."},t,r);return n===t?(await e.globalState.update($x,!0),!0):(n===r&&pe.env.openExternal(pe.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function Mj(e){e.globalState.setKeysForSync([jx,$x,Hx])}function Uj(){let e=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(e)&&(process.env.PATH=`${e}:/usr/local/bin`)}var Hx="updatedToPreRelease2",HJ="2022-01-19T05:14:31.474Z";async function jj(e,t){try{t.quality==="insider"&&t.date&&t.date.localeCompare(HJ)>=0&&!e.globalState.get(Hx,!1)&&(await e.globalState.update(Hx,!0),await pe.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(r){console.error(r)}}async function op(e,t,r,n,o=!1){try{return Xh(e,t,r,Zf(),void 0,void 0,n,o)}catch{return}}async function qx(e,t,r,n,o=!1){let i=(async()=>{try{return Tu(e,t,r,Zf(),_j(),void 0,void 0,n,o)}catch{return}})(),s=await Promise.race([i,new Promise(a=>setTimeout(()=>a("timeout"),1e3))]);return s!=="timeout"?s:pe.window.withProgress({location:pe.ProgressLocation.Notification,title:MJ,cancellable:!0},async(a,c)=>Promise.race([i,new Promise(u=>{let l=c.onCancellationRequested(()=>{l.dispose(),u("canceled")})})]))}async function xc(e){return pe.commands.executeCommand("_workbench.addToRecentlyOpened",e)}var Sn=ie(require("vscode")),ii=ie(require("path"));var qv=ie(require("path"));var qs=ie(require("vscode"));async function Bv(){await qs.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}function Dl(e,t){let r=qs.workspace.fs;return{platform:e,path:e==="win32"?qv.win32:qv.posix,async isFile(n){try{return((await r.stat(qi(e,t,n))).type&qs.FileType.File)!=0}catch(o){if((o==null?void 0:o.code)==="FileNotFound")return!1;throw o}},async readFile(n){try{let o=await r.readFile(qi(e,t,n));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${n}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(n,o){try{let i=qi(e,t,n),s=qi(e,t,n);await r.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${n} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(n,o){await r.writeFile(qi(e,t,n),o)},async readDir(n){return(await r.readDirectory(qi(e,t,n))).map(i=>i[0])},async readDirWithTypes(n){return r.readDirectory(qi(e,t,n))},async mkdirp(n){await r.createDirectory(qi(e,t,n))},async toCommonURI(n){return qi(e,t,n)}}}function qi(e,t,r){let n=e==="win32"?"/"+r.replace(/\\/g,"/"):r;return t.with({path:n})}var Vv=class{async readDocument(t){try{let r=await qs.workspace.fs.readFile(t);return Buffer.from(r).toString()}catch{return}}async applyEdits(t,r,n){let o=Rn(n,r);await qs.workspace.fs.writeFile(t,Buffer.from(o))}};var Se=ie(require("vscode"));var Jx=ie(require("path"));var $j=ie(Nc()),Hj=ie(require("url"));function qj(e,t){return new Promise((r,n)=>{let o=new Hj.URL(e.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:e.type,headers:e.headers},s=$j.https.request(i,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),t&&t.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,qe.Error);else{a.on("error",n);let c=[];a.on("data",u=>c.push(u)),a.on("end",()=>r(Buffer.concat(c)))}});s.on("error",n),e.data&&s.write(e.data),s.end()})}async function Rl(e){let n=await qj({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},e),o=Rt(n.toString());if(o.collections.length===0||o.collections[0].features.length===0){e.write("No container features retrieved from index.",qe.Error);return}return o}var Yt=ie(require("vscode")),Bx=ie(require("os"));var sp=ie(require("path"));var nn=ie(require("vscode"));var Wv={iconPath:new nn.ThemeIcon("check-all"),tooltip:"Finish"};async function ip(e,t,r,n=[],o=!0,i=!1){if(!t.length)return{};let s={iconPath:new nn.ThemeIcon("info"),tooltip:"Open Documentation"},a=e.quickPick.onDidTriggerItemButton(m=>{let h=m.item.feature.documentationURL;nn.env.openExternal(nn.Uri.parse(h))}),c=t.map(m=>{let h=n.indexOf(m)!==-1,g;if(h)g="$(lock) Feature is included in base image and cannot be removed";else if(m.owner){let v=m.owner==="devcontainers"?"$(verified)":"";g=`${m.owner||"Unknown Publisher"} ${v}`}else g=void 0;return{label:m.name,detail:m.description,description:g,picked:r.indexOf(m)!==-1,buttons:m.documentationURL?[s]:void 0,feature:m,isAlreadyInstalledViaBaseImage:h,kind:nn.QuickPickItemKind.Default}}).sort((m,h)=>m.label.localeCompare(h.label)).sort((m,h)=>m.isAlreadyInstalledViaBaseImage===h.isAlreadyInstalledViaBaseImage?0:m.isAlreadyInstalledViaBaseImage?1:-1),u,l=e.quickPick,{matchOnDetail:d}=l;try{l.matchOnDetail=!0;let m=[];i&&m.push(nn.QuickInputButtons.Back),o&&m.push(Wv),u=await to(l,c,"Select additional features to install",void 0,!0,m)}finally{l.matchOnDetail=d}if(a.dispose(),!u)return;if(u.button===nn.QuickInputButtons.Back)return"back";let f=u.pick.filter(m=>!m.isAlreadyInstalledViaBaseImage).map(m=>m.feature),p={};for(let m of t){let h=f.indexOf(m)!==-1;p[m.id]=h?TE(m)||QO(m):!1}return u.button===Wv||!o?p:BJ(e,p,f,()=>ip(e,t,n,f))}function qJ(e){let t=Oa(e),r=t&&e.options&&e.options[t];return!!r&&r.type==="string"&&("enum"in r||"proposals"in r)}async function BJ(e,t,r,n){let o=r.filter(qJ);return async function i(s,a,c){if(!a.length)return s;let u=a[0],l=u.options[Oa(u)],d=("enum"in l&&l.enum||"proposals"in l&&l.proposals||[]).map(m=>({label:String(m),value:m,picked:TE(u)===m})),f=d.length===1?{pick:d[0],button:"ok"}:await to(e.quickPick,d,l.description||"Select a value",void 0,void 0,[nn.QuickInputButtons.Back,Wv],"proposals"in l);if(!f)return;if(f.button===nn.QuickInputButtons.Back)return c();let p=Ne(X({},s),{[u.id]:f.pick.value});return f.button===Wv?s:i(p,a.slice(1),()=>i(s,a,c))}(t,o,n)}var VJ=["png","md","json","txt","map"],WJ=["node_modules",".git","bin","out","dist",".vscode-test"],GJ=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],Bj={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},Vj={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},zJ=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function Wj(e,t){let r=new Map;for(let n of t)if(n.platforms){if(zJ.indexOf(n.id)>-1)continue;let o=0,i=0,s=n.platforms;if(s[0]==="Any")o+=5;else for(let a of s)if(Vj[a]){let c=Vj[a];for(let u of c)e.fileTypes.get(u.toLowerCase())&&(o+=10),e.mostPopularFileType===u&&(o+=10)}else if(Bj[a]){let c=Bj[a],u=!1;for(let l of c)e.configFiles.get(l)&&(u=!0,i+=20);u||(i-=20)}r.set(n,o+(i<0?-4:i))}return r}async function Gj(e,t){return KJ(e,t.rootFolderPath,WJ,VJ)}async function KJ(e,t,r,n){let o=new Map,i=new Map,s=500;function a(p,m,h,g){let v=[];(e.readDirWithTypes||e.readDir)(p).then(C=>{if(h.count>=s)return h.count+=C.length,h.maxReached=!0,g(v);let E=C.length;if(E===0)return g(v);let b=C;h.count+C.length>s&&(h.maxReached=!0,E=s-h.count,b=C.slice(0,E)),h.count+=C.length;for(let I of b){let T=Array.isArray(I)?I[0]:I;(Array.isArray(I)?Promise.resolve((I[1]&Gl.File)!=0):e.isFile(e.path.join(p,T))).then(S=>{S?(v.push(T),--E==0&&g(v)):m.indexOf(T)===-1?a(e.path.join(p,T),m,h,k=>{if(v=v.concat(k),--E==0)return g(v)}):--E==0&&g(v)},()=>{if(--E==0)return g(v)})}},()=>g(v))}let c=p=>{o.has(p)?o.set(p,o.get(p)+1):o.set(p,1)},u=p=>{for(let m of GJ)m.pattern.test(p)&&(i.has(m.tag)?i.set(m.tag,i.get(m.tag)+1):i.set(m.tag,1))},l=p=>{if(p.lastIndexOf(".")>=0){let m=p.split(".").pop();m&&!n.includes(m)&&c(m.toLowerCase())}u(p)},d=p=>[...p.entries()].reduce((m,h)=>h[1]>m[1]?h:m,["",0])[0],f={count:0,maxReached:!1};return new Promise((p,m)=>{a(t,r,f,async h=>{h.forEach(l),p({configFiles:i,fileTypes:o,fileCount:f.count,mostPopularFileType:d(o)})})})}var Vx=sp.default.join(__dirname,"..",".."),zj=Yt.env.appRoot,QJ=e=>fh(e,zj);async function Al(e){let{fileHost:t,output:r}=e;r.write(" -- CREATEDEVCONTAINER v2");let n=await Jj();if(n){let o=We(n,t.platform),i=mt(t.path,o),s=await Um(t,i);if(s){let c="Continue";if(await Yt.window.showInformationMessage(`The workspace could fail to open in a container: ${s}`,{modal:!0},c)!==c)return!1}let a=await Gx(e,i);if(a){let c=await t.toCommonURI(a);c&&Yt.window.showTextDocument(Yt.Uri.parse(c.toString()))}return!!a}return!1}async function Gv(e,t,r,n,o=(i,s)=>s){return Yt.window.withProgress({location:Yt.ProgressLocation.Notification,title:"Adding Dev Container Configuration Files...",cancellable:!1},async()=>Wx(e,t,r,n,o))}async function Wx(e,t,r,n,o=(i,s)=>s){let{output:i}=e,s=sp.default.join(Bx.tmpdir(),`tmp-output-dir-${Date.now()}`),a=sp.default.join(Bx.tmpdir(),`tmp-dir-${Date.now()}`);e.quickPick.busy=!0,e.quickPick.enabled=!1;let c={executeInWSL:"forWSLPath",defaultDistro:void 0},u=await Vn(),l=process.cwd(),f={cliHost:await yn(void 0,l,QJ,c,Vx,u,void 0,i,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:Vx,appRoot:zj,output:i,package:await Gr(Vx)},p=await ys(f,["templates","apply","--workspace-folder",s,"--template-id",n.id,"--template-args",n.options?JSON.stringify(n.options):"{}","--features",n.features?JSON.stringify(n.features):"[]","--tmp-dir",a]),m="Skip",h;for(let g of p.files){let v=t.path.join(r.workspaceOrFolderPath,g);if(await t.isFile(v)){let E=await Yt.window.showInformationMessage(`File '${g}' already exists, overwrite?`,{modal:!0},m,"Overwrite");if(!E)return;if(E===m)continue}await t.mkdirp(t.path.dirname(v));let w=await vt(sp.default.join(s,g)),C=o(g,w);await t.writeFile(v,C),!h&&Hd(t.path,g)&&(h=v)}return await Gi(s,{recursive:!0,force:!0}),await Gi(a,{recursive:!0,force:!0}),e.quickPick.busy=!1,e.quickPick.enabled=!0,h}async function Gx(e,t,r){let{fileHost:n,telemetry:o}=e,i=await Kv(n,t);if(i){oi(await o,"exists");let c=We(i.uri,n.platform);if(!await Yt.window.showWarningMessage(`Dev Container configuration '${n.path.relative(t.configFolderPath,c)}' file already exists.`,{modal:!0},"Continue")){let l=await n.toCommonURI(c);l&&Yt.window.showTextDocument(Yt.Uri.parse(l.toString()));return}}let s=await zx(e,r,!1),a=await ap(s,n,t,Kx);return s.quickPick.hide(),a}async function zx(e,t,r){let n=Yt.window.createQuickPick();n.ignoreFocusOut=!0,t&&(n.title=t);let o=await Rl(e.output);return Ne(X({},e),{quickPick:n,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await e.telemetry,index:o,skipOptions:r})}async function Kx(e,t,r,n){if(!e.index)return;let i=await zv(e,t,r);if(!!i)return i==="back"?n?n():void 0:Gv(e,t,r,i)}var Kj=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function zv(e,t,r){let{index:n,predefinedDefinitionsLearnMoreLink:o}=e,i=((n==null?void 0:n.collections.map(u=>u.templates).flat())||[]).filter(u=>!Kj.includes(u.id));if(!(i==null?void 0:i.length))return;let s=()=>zv(e,t,r),a=await YJ(e,t,r,i);if(!a.length)return Qx(e,[],i,s);let c=[{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"},...o?[Yx]:[]];return Qx(e,c,a,s)}async function YJ(e,t,r,n){let o=e.stats||t&&r&&(e.stats=await Gj(t,r));if(!(o==null?void 0:o.mostPopularFileType.length))return n.filter(a=>{var c;return(c=a.platforms)==null?void 0:c.includes("Any")});let i=Wj(o,n);return n.filter(a=>(i.get(a)||0)>0).sort(JJ.bind(null,i))}function JJ(e,t,r){let n=e.get(r)||0,o=e.get(t)||0;return n-o}async function Qx(e,t,r,n){let{index:o,predefinedDefinitionsLearnMoreLink:i,telemetry:s}=e,a={iconPath:new Yt.ThemeIcon("info"),tooltip:"Open Documentation"},c=e.quickPick.onDidTriggerItemButton(d=>{let f=d.item.template.documentationURL;Yt.env.openExternal(Yt.Uri.parse(f))}),u=r.map(d=>{let f;if(d.owner){let p=(d==null?void 0:d.owner)==="devcontainers"?"$(verified)":"";f=`${((d==null?void 0:d.owner)==="microsoft"&&d.id.includes("microsoft/vscode-dev-containers")?"community":d==null?void 0:d.owner)||"Unknown Publisher"} ${p}`}return{label:d.name,picked:r.indexOf(d)!==-1,detail:d==null?void 0:d.description,description:f,buttons:[a],template:d}}).sort((d,f)=>d.label.localeCompare(f.label)),l=await to(e.quickPick,[...t,...u],"Select a container configuration template",void 0,void 0,!1);if(c.dispose(),!l){oi(s,"canceled");return}if(l.type==="help"){oi(s,"help"),Yt.env.openExternal(i);return}if(l.type==="showAll"){let d=((o==null?void 0:o.collections.map(f=>f.templates).flat())||[]).filter(f=>!Kj.includes(f.id));return Qx(e,[],d,n)}if(l.template)return Ol(e,l.template,n)}async function Ol(e,t,r){let n={id:`${t.id}:latest`,options:{},features:[],metadata:{template:t,features:[]}};if(e.skipOptions)return n;if(!t.options){let c=await Yj(e,n,r);return c?c==="back"?r():c:void 0}let o=t.options,i=[],s=[];for(let c in o){let u=o[c];u.name=c,u.type==="boolean"?i.push(u):u.type==="string"&&s.push(u)}let a=await XJ(e,s,n,async()=>"back",(c,u)=>Qj(e,i,t.name,c,u));if(a==="back")return r();if(!!a)return a}async function XJ(e,t,r,n,o){let i=t.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0&&(a=s.enum);let c=s.default,u=a.map(d=>({label:d,description:d===c?"(default)":void 0,value:d})),l=u.findIndex(d=>d.value===c);return l!==-1&&u.unshift(...u.splice(l,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,items:u}});return async function s(a,c,u){if(!a.length)return o(c,u);let l=a[0],d=await to(e.quickPick,l.items,l.placeholder,void 0,void 0,!0);if(!d)return;if(d==="back")return u();let f=X({},c.options);return f[l.name]=d.value,c.options=X({},f),s(a.slice(1),c,()=>s(a,c,u))}(i,r,n)}async function Qj(e,t,r,n,o){let i=n,s=t.map(u=>{let l=u.default==="true";return{label:u.description||u.name,picked:l,name:u.name,default:l}}),a=s.length?await to(e.quickPick,s,`Select the options for the '${r}' dev container`,void 0,!0,!0):[];if(!a)return n;if(a==="back")return o();for(let u of s){let l=a.indexOf(u)!==-1,d=X({},n.options);d[u.name]=l.toString(),n.options=X({},d)}let c=await Yj(e,n,()=>t.length>0?Qj(e,t,r,i,o):o());if(!!c)return c==="back"?o():c}async function Yj(e,t,r){let{quickPick:n,telemetry:o,output:i,index:s}=e,a=s==null?void 0:s.collections.reduce((f,p)=>f.concat(p.features),[]);if(!(a==null?void 0:a.length))return t;let u=await ip({quickPick:n,telemetry:o,output:i},a,[],[],!1,!0);if(!u)return;if(u==="back")return r();let l=[],d=[];for(let f in u)if(u[f]===!0||typeof u[f]=="string"){let p=a.find(m=>m.id===f);if(p){d.push(p);let m=p.majorVersion||"latest",h={id:`${f}:${m}`,options:{}};l.push(h)}}return t.features=l,t.metadata.features=d,t}function Xj(e){return{provideCompletionItems(t,r,n){let o=DS(t.getText(),t.offsetAt(r)),i=t.getWordRangeAtPosition(r)||new Se.Range(r,r);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=Rt(t.getText());return s.configFilePath=t.uri,ZJ(s,i)}if(o.path[0]==="features"){let s=Rt(t.getText());s.configFilePath=t.uri;try{return eX(e,s,o,i)}catch(a){console.error(a)}}return[]}}}function ZJ(e,t){var n,o;let r=((e==null?void 0:e.extensions)||[]).concat(((o=(n=e==null?void 0:e.customizations)==null?void 0:n.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(r)){let i=Se.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||r.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new Se.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=Se.CompletionItemKind.Value,a.insertText=c,a.range=t,a.filterText=c,a})}}async function eX(e,t,r,n){var i;let o=t&&t.features||{};if(typeof o=="object"){if(t.configFilePath.scheme==="vscode-remote"&&e.fileHost.type==="local"){t=Ne(X({},t),{configFilePath:t.configFilePath.with({scheme:Ht.scheme,authority:""})});let c=Se.env.remoteName&&Se.env.remoteName!=="test"?"linux":process.platform,u=((i=(Se.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||Qe.file(process.cwd());e=Ne(X({},e),{fileHost:await Dl(c,u)})}let s=await Rl(e.output),a=(s==null?void 0:s.collections.map(c=>c.features).flat())||[];if(r.path.length===2)if(r.isAtPropertyKey){let c=a.filter(u=>!(u.id in o));if(c.length)return c.map(u=>{let l=new Se.CompletionItem(u.id),d=`"${u.id}": `;return l.kind=Se.CompletionItemKind.Property,l.insertText=d,l.range=n,l.filterText=d,l})}else{let c=r.path[1],u=a.find(l=>l.id===c);if(u){let l=Oa(u),d=l&&(u.options||{})[l]||{type:"boolean",description:"Set to true to install."},f=(d.type==="string"?("enum"in d&&d.enum||"proposals"in d&&d.proposals||[""]).map(p=>`"${p}"`):["true","false"]).map(p=>({label:p,text:p}));return f.push({label:"{}",text:new Se.SnippetString(`{
	$1
}$0`)}),f.map(({label:p,text:m},h)=>{let g=new Se.CompletionItem(p);return g.kind=Se.CompletionItemKind.Value,g.insertText=m,g.range=n,g.sortText=`${h}_${p}`,g})}}else if(r.path.length===3){let c=r.path[1],u=a.find(l=>l.id===c);if(u){let l=u.options||{};if(r.isAtPropertyKey)return Object.keys(l).filter(d=>!(d in(o[c]||{}))).map(d=>{let f=new Se.CompletionItem(d),p=`"${d}": `;return f.kind=Se.CompletionItemKind.Property,f.insertText=p,f.range=n,f.filterText=p,f.detail=l[d].description,f});{let d=r.path[2],f=l[d];if(f)return(f.type==="string"?("enum"in f&&f.enum||"proposals"in f&&f.proposals||[""]).map(m=>`"${m}"`):["true","false"]).map((m,h)=>{let g=new Se.CompletionItem(m),v=m;return g.kind=Se.CompletionItemKind.Value,g.insertText=v,g.range=n,g.filterText=v,g.sortText=`${h}_${m}`,g})}}}}}async function Zj(e){let t=await Xx(e);if((t==null?void 0:t.scheme)===Ht.scheme){let r=We(t,e.fileHost.platform);t=await e.fileHost.toCommonURI(r)}t&&await Se.window.showTextDocument(Se.Uri.parse(t.toString()))}async function Xx(e){let t=await e.findDevContainerFiles();if(!t.length){let n="Add Files...";await Se.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Al(e)&&(t=await e.findDevContainerFiles())}if(!t.length)return;let r;return t.length===1?r={uri:t[0]}:r=await Se.window.showQuickPick(t.map(n=>({label:n.scheme==="file"?n.fsPath:n.toString(),uri:n})),{placeHolder:"Select a container configuration file"}),r==null?void 0:r.uri}async function e$(e,t){var n,o,i,s,a,c,u;let r=await Xx(e);if(r){let l=Pr(e.fileHost);r.scheme==="file"&&!await Jt(r.fsPath)?await Bn(po,r,[],wi):r.scheme==="vscode-remote"&&(l=new Vv);let d=await l.readDocument(r);if(d){let f=!/\.?devcontainer\.json/.test(Jx.default.posix.basename(r.path)),p=Rt(d),m=!f&&(((o=(n=p.customizations)==null?void 0:n.vscode)==null?void 0:o.extensions)||!p.extensions),h=(m?(s=(i=p.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:p.extensions)||[],g=e.openConfigurationCommandId?`[Dev Container configuration](command:${e.openConfigurationCommandId})`:"Dev Container configuration";if((p.extensions||[]).concat(((c=(a=p.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(t)===-1){h.push(t);let v;m?((u=p.customizations)==null?void 0:u.vscode)?v=ir(d,["customizations","vscode","extensions"],h,{formattingOptions:{}}):p.customizations?v=ir(d,["customizations","vscode"],{extensions:h},{formattingOptions:{}}):v=ir(d,["customizations"],{vscode:{extensions:h}},{formattingOptions:{}}):v=ir(d,["extensions"],h,{formattingOptions:{}}),await l.applyEdits(r,v,d),await Se.window.showInformationMessage(`Extension has been added to the ${g}.`)}else await Se.window.showInformationMessage(`Extension is already included in the ${g}.`)}}}async function t$(e,t){let r=await Se.commands.executeCommand("remote.tunnel.label",t);if(r===void 0)return;let n=r.label,o=r.port,i=await Xx(e);if(i){let s=Pr(e.fileHost);i.scheme==="file"&&!await Jt(i.fsPath)?await Bn(po,i,[],wi):i.scheme==="vscode-remote"&&(s=new Vv);let a=await s.readDocument(i);if(a){let u=Rt(a).portsAttributes??{},l=u[`${o}`]??{},d=e.openConfigurationCommandId?`[Dev Container configuration](command:${e.openConfigurationCommandId})`:"Dev Container configuration";if(u&&l&&l.label===n)await Se.window.showInformationMessage(`Port attributes are already included in the ${d}.`);else{l.label=n,u[`${o}`]=l;let f=ir(a,["portsAttributes"],u,{formattingOptions:{}});await s.applyEdits(i,f,a),await Se.window.showInformationMessage(`Port attributes have been added to the ${d}.`)}}}}function r$(e,t){let r=Se.languages.createDiagnosticCollection("devcontainer");return Se.window.activeTextEditor&&Zx(Se.window.activeTextEditor.document,r,t.output),e.subscriptions.push(Se.workspace.onDidChangeTextDocument(n=>{n&&Zx(n.document,r,t.output)})),e.subscriptions.push(Se.workspace.onDidOpenTextDocument(n=>{n&&Zx(n,r,t.output)})),r.dispose}function Zx(e,t,r){let n=Jx.default.basename(e.uri.fsPath);if(/\.?devcontainer\.json/.test(n)){let o=Ep(e.getText());if(!o)return;let i=_p(o)||{},s=[...rX(e,i,r),...nX(o,e)];t.set(e.uri,s)}}function tX(e,t){let r=new RegExp("^[a-zA-Z0-9_-]*$");if(!e)return{type:void 0,tooltip:"Empty feature id"};if(!e.includes("/")&&!e.includes("\\")&&r.test(e))return{type:"local-cache",isLegacy:!0,level:Se.DiagnosticSeverity.Warning};if(e.startsWith("http://"))return{type:void 0,tooltip:"Direct tarball references must be served over HTTPS.",level:Se.DiagnosticSeverity.Error};if(e.startsWith("https://"))try{return Se.Uri.parse(e,!0).scheme==="https"?{type:"direct-tarball",level:void 0}:{type:void 0,level:Se.DiagnosticSeverity.Error,tooltip:"Failed to parse scheme of URI"}}catch{return{type:void 0,level:Se.DiagnosticSeverity.Error,tooltip:"Invalid URI"}}if(e.startsWith("/"))return{type:void 0,tooltip:"Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json.",level:Se.DiagnosticSeverity.Error};if(e.startsWith("./")||e.startsWith("../"))return{type:"file-path"};if(e.split("/").length===3&&e.length>=5&&!e.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(e)?{type:"github-repo",isLegacy:!0,level:Se.DiagnosticSeverity.Warning}:{type:void 0,tooltip:"GitHub release feature id contains invalid characters",level:Se.DiagnosticSeverity.Error};let o=e.split("/");return e.includes(".")&&o.length>1&&o[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(e)?{type:"oci"}:{type:void 0,level:Se.DiagnosticSeverity.Error,tooltip:"OCI Feature id contains invalid characters"}:{type:void 0,level:Se.DiagnosticSeverity.Error,tooltip:"Failed to parse feature identifier."}}function rX(e,t,r){let n=t==null?void 0:t.features;if(!n)return[];let o=[];return Object.keys(n).forEach(i=>{let s=tX(i,r);for(let a=0;a<e.lineCount;a++){let c=e.lineAt(a);if(c.text.includes(`"${i}"`)){let u=c.text.indexOf(i),l=u+i.length;if(s.hint){let f={message:s.hint,severity:Se.DiagnosticSeverity.Hint,range:new Se.Range(new Se.Position(a,u),new Se.Position(a,l))};o.push(f)}if(s.level!==void 0){let d=s.tooltip??"",f=s.level,p={message:d,severity:f,range:new Se.Range(new Se.Position(a,u),new Se.Position(a,l)),code:{target:Se.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"}};o.push(p)}break}}}),o}function nX(e,t){return["extensions","settings","devPort"].filter(r=>Vi(e,[r])&&Vi(e,["vscode",r])).map(r=>{var s,a;let n=(((a=(s=Vi(e,[r]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=t.positionAt(n.offset),i=t.positionAt(n.offset+n.length);return{message:`Legacy "${r}" property when "${r}" property under "vscode" is also present.`,range:new Se.Range(o,i),severity:Se.DiagnosticSeverity.Warning}})}var Qv=ie(require("vscode"));async function n$(e,t){let r=await oX(e);if(!r){e.output.write("Failed to find configuration.  Cannot configure container features.",qe.Error);return}await iX(e,r,(t==null?void 0:t.preInstalledInBaseImageFeatureIds)||[])}async function oX(e){var r;let t=await e.findDevContainerFiles();if(t.length){let n=t.length>1?(r=await Qv.window.showQuickPick(t.map(u=>({label:u.scheme==="file"?u.fsPath:u.toString(),uri:u})),{placeHolder:"Select a container configuration file"}))==null?void 0:r.uri:t[0];if(!n)return;let o=n.scheme==="file"?Dl(process.platform,hs(n)):e.fileHost,i=o.path.dirname(We(n,o.platform)),s=o.path.basename(i)===".devcontainer"?o.path.dirname(i):i,a=mt(o.path,s),c=await Kv(o,a);if(c)return{fileHost:o,workspace:a,config:c}}else{let n="Add Files...";await Qv.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Al(e)}}async function iX(e,t,r){var p,m;let{fileHost:n,workspace:o,config:i}=t,s=Qv.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:o,quickPick:s,telemetry:await e.telemetry,output:e.output},c=await Rl(e.output);if(!c)return;let u=c.collections.reduce((h,g)=>h.concat(g.features),[]),l=u.filter(h=>r.includes(h.id)),d=[];if(i.object.features&&Object.entries(i.object.features).length>0){let h=Object.keys(i.object.features);d=u.filter(g=>h.some(v=>v.split(":")[0]===g.id))}let f=await ip(a,u,d,l,!1,!1);if(!!f)try{if(f){let h=i.text,g=i.text;for(let v of u){let w=[],C=v.majorVersion?`${v.id}:${v.majorVersion}`:v.id,E=["features",C];if(!f[v.id]&&((p=i.object.features)==null?void 0:p[C]))w=w.concat(ir(g,E,void 0,{formattingOptions:{}}));else if(f[v.id]&&!((m=i.object.features)==null?void 0:m[C])){let I={};w=w.concat(ir(g,E,I,{formattingOptions:{}}))}w.length&&(g=Rn(g,w))}h!==g&&await Pr(n).applyEdits(i.uri,[{content:g,offset:0,length:i.text.length}],i.text)}}catch(h){e.output.write(`Error in selecting dev container features: ${h}`,qe.Error),console.log("Error in selecting dev container features: ",h)}finally{s.dispose()}}async function o$(e,t){return r$(e,t),{async openConfiguration(){return Zj(t)},async createConfiguration(r){return Al(t)},async addExtensionToConfiguration(r){return e$(t,r)},async addPortLabelToConfiguration(r){return t$(t,r)},async configureContainerFeatures(r){return n$(t,r)},createCompletionItemProvider(){return Xj(t)}}}async function Jj(){let e=Sn.workspace.workspaceFile,t=Sn.workspace.workspaceFolders,r;if(e){if(e.scheme==="untitled"){await Bv();return}r=e}else if(t&&t.length)if(t.length>1){let n=await Sn.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=t[0].uri;return r}function to(e,t,r,n,o,i,s){if(e.value="",e.title=n||e.title||"Add Dev Container Configuration Files",e.placeholder=r,e.canSelectMany=!!o,Array.isArray(t))if(e.items=t,o)e.selectedItems=t.filter(f=>f.picked);else{let f=t.find(p=>p.picked);f&&(e.activeItems=[f])}e.buttons=i?Array.isArray(i)?i:[Sn.QuickInputButtons.Back]:[];let a=[],c=e.items,u=c.filter(f=>f.isAlreadyInstalledViaBaseImage===!0),l={kind:Sn.QuickPickItemKind.Separator,label:"pre-installed features"};u.length&&(e.items=e.items.slice(0,c.length-u.length).concat(l).concat(e.items.slice(c.length-u.length)));let d=new Promise((f,p)=>{if(Array.isArray(t)||(e.busy=!0,t.then(m=>{if(e.busy=!1,e.items=m,o)e.selectedItems=m.filter(h=>h.picked);else{let h=m.find(g=>g.picked);h&&(e.activeItems=[h])}},m=>{e.busy=!1,p(m)})),a.push(e.onDidAccept(()=>{let m=o?e.selectedItems.slice():e.selectedItems[0];f(Array.isArray(i)?{pick:m,button:"ok"}:m),a.forEach(h=>h.dispose())})),a.push(e.onDidChangeSelection(m=>{if(!o)return;let h=u.filter(g=>!e.selectedItems.includes(g));h.length&&(e.selectedItems=e.selectedItems.concat(h))})),e.buttons.length&&a.push(e.onDidTriggerButton(m=>{let h=o?e.selectedItems.slice():e.activeItems[0];f(i===!0?"back":{pick:h,button:m}),a.forEach(g=>g.dispose())})),a.push(e.onDidHide(()=>{a.forEach(m=>m.dispose()),e.dispose(),f(void 0)})),s){let m;a.push(e.onDidChangeValue(h=>{let g=h.trim().toLowerCase(),v=!g||e.items.find(w=>w.label.toLowerCase()===g);if(v&&m)e.items=e.items.filter(w=>w!==m),m=void 0;else if(!v){let w=e.items.filter(C=>C!==m);w.push(m={label:`Other: ${h}`,value:h}),e.items=w}}))}});return e.show(),d}var Yx={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function Yv(e,t,r){return Gx(e,t,r)}async function ap(e,t,r,n=Kx){let{telemetry:o,existingFilesLearnMoreLink:i,index:s}=e,a=s==null?void 0:s.collections.find(w=>w.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),c=a==null?void 0:a.templates.find(w=>w.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),u=a==null?void 0:a.templates.find(w=>w.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),l=await t.readDir(r.rootFolderPath),d=c?l.filter(w=>/docker.*compose/i.test(w)).map(w=>t.path.join(r.rootFolderPath,w)):[],f=u?l.filter(w=>/dockerfile/i.test(w)).map(w=>t.path.join(r.rootFolderPath,w)):[],p=f.map(w=>{let C=t.path.basename(w);return{label:`From '${C}'`,description:i$(t,w),dockerfile:C,dockerfilePath:w,detail:`Refer to the existing '${C}' in the container configuration`,type:"dockerfile"}}),m=d.map(w=>{let C=t.path.basename(w);return{label:`From '${C}'`,description:i$(t,w),dockerComposeFile:C,dockerComposePath:w,detail:`Refer to the existing '${C}' in the container configuration`,type:"dockerComposeFile"}});if(!(f.length>0||d.length>0))return n(e,t,r,void 0);let g={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},v=await to(e.quickPick,[g,...p,...m,...i?[Yx]:[]],"How would you like to create your container configuration?");if(!v){oi(o,"canceled");return}if(v.type==="help"){oi(o,"help"),Sn.env.openExternal(i);return}if(v.type==="predefined")return n(e,t,r,()=>ap(e,t,r));if(v.type==="dockerComposeFile")return aX(e,t,r,v.dockerComposePath,c,()=>ap(e,t,r));if(v.type==="dockerfile")return sX(e,t,r,v.dockerfilePath,u,()=>ap(e,t,r))}function i$(e,t){let r=Sn.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(o=>e.platform==="win32"?t.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):t.startsWith(o.uri.fsPath));return n&&n.name}async function sX(e,t,r,n,o,i){let{telemetry:s}=e,a=await Ol(e,o,async()=>{});if(!a){oi(s,"canceled");return}if(a==="back")return i();let c=await Gv(e,t,r,a,(u,l)=>{if(!Hd(t.path,u))return l;let d=t.path.sep!==ii.sep?u.replace(ii.sep===ii.win32.sep?/\\/g:/\//g,t.path.sep):u,f=t.path.resolve(r.configFolderPath,d),p=t.path.relative(t.path.dirname(f),n),m=t.platform==="win32"?p.replace(/\\/g,"/"):p,h=l.toString(),g="dockerFile"in Rt(h)?["dockerFile"]:["build","dockerfile"],v=ir(h,g,m,{formattingOptions:{}}),w=Rn(h,v);return Buffer.from(w)});return c&&oi(s,"dockerFile"),c}async function aX(e,t,r,n,o,i){let{telemetry:s}=e,a=(await t.readFile(n)).toString(),c=$d(a);if(!c){await Sn.window.showErrorMessage(`Invalid docker-compose file "${n}"`,{modal:!0});return}let u=c.version,l=Object.keys(c&&c.services||{}),d=l.length<2?l[0]||"":await to(e.quickPick,l.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(d==="back")return i();if(d===void 0){oi(s,"canceled");return}let f=typeof d=="string"?d:d.label,p=await Ol(e,o,async()=>{});if(!p)return;if(p==="back")return i();let m=await Gv(e,t,r,p,(h,g)=>{if(Hd(t.path,h)){let v=t.path.sep!==ii.sep?h.replace(ii.sep===ii.win32.sep?/\\/g:/\//g,t.path.sep):h,w=t.path.resolve(r.configFolderPath,v),C=t.path.relative(t.path.dirname(w),n),E=t.platform==="win32"?C.replace(/\\/g,"/"):C,b=g.toString(),I=Rt(b).dockerComposeFile,T=Array.isArray(I)?I.slice(1):[],P=[E,...T],S=ir(b,["dockerComposeFile"],P,{formattingOptions:{}}),k=Rn(b,S),A=ir(k,["service"],f,{formattingOptions:{}}),N=Rn(k,A);return Buffer.from(N)}if(/compose.*\.ya?ml$/.test(ii.posix.basename(h))){let v=g.toString(),w=$d(v);w.version&&u&&w.version!==u&&(v=v.replace(new RegExp(`^(version:.*)(${w.version.replace(/\./g,"\\.")})`,"m"),`$1${u}`));let C=Object.keys(w&&w.services||{});return C.length&&(v=v.replace(new RegExp(`\\b${C[0]}\\b`),f)),Buffer.from(v)}return g});return m&&oi(s,"dockerComposeFile"),m}function oi(e,t,r){let n={outcome:t};r&&(n.definitionName=r),e.sendTelemetryEvent("createConfiguration",n)}async function Kv(e,t){let r=await Mh(e,t.configFolderPath);if(!r)return;let n=await Pr(e).readDocument(r);if(!n)return;let o=Rt(n);return{uri:r,text:n,object:o}}async function s$(e,t,r,n,o,i){let s=Cn(r);if(pr(s)&&!await tt.workspace.requestWorkspaceTrust({message:rp}))return Rr(s.hostPath)?(await tt.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await tt.commands.executeCommand("remote-containers.reopenInWSL")):(await tt.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await tt.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=Or(s);if(a&&!await np(e,s.repositoryPath))return await tt.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let c=xi(s);return Ne(X({},await cX(s,e,o,i,t,r,n)),{isTrusted:a||c||void 0})}async function cX(e,t,r,n,o,i,s){let{log:a,logFilePath:c}=r,u="hostPath"in e&&Rr(e.hostPath)&&!!tt.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&tt.commands.executeCommand("setContext","canReopenInWSL",!0);let l=e.settings,d="localDocker"in e&&e.localDocker,f=!!(l&&"host"in l&&l.host&&l.host.startsWith("ssh://")&&!d)&&(!!tt.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!tt.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));f&&tt.commands.executeCommand("setContext","canReopenInSSH",!0);let p=!(l&&"host"in l&&l.host&&l.host.startsWith("ssh://")&&!d);p&&tt.commands.executeCommand("setContext","canReopenLocally",!0);let m;return tt.window.withProgress({location:tt.ProgressLocation.Notification,title:kl,cancellable:!1},async h=>{let g=Wo(t.extensionPath,ji,a),{cliHost:v,originalCwd:w}=await uX(e,t.extensionPath,await Vn(),g,o.product,a),C=X(X({},await g),Ou(v,e.settings)),E=X(X({},v.env),C),b=await Tl({authority:i,extensionContext:t,sessionStart:r.sessionStart,progress:h,cliHost:v,env:E,cwd:v.cwd,isLocalContainer:ag(C),telemetry:o,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),I={async createConfiguration(T,P){return Yv({fileHost:P,telemetry:o,output:a,existingFilesLearnMoreLink:Cc,predefinedDefinitionsLearnMoreLink:Ec,openConfigurationCommandId:wc},mt(eS.posix,T))},async showError(T,...P){return await tt.window.showErrorMessage(T,{modal:!0},...P)}};return m={common:b,parsedAuthority:e,dockerCLI:To(),dockerComposePath:ri(),dockerComposeCLI:zo({exec:b.cliHost.exec,env:X(X({},C),er(C)),output:b.output},To(),ri()),dockerEnv:C,workspaceMountConsistencyDefault:Mv(),updateRemoteUserUIDOnMacOS:Uv(),cacheMount:jv()?"volume":"none",configurationTracking:Fv(t.workspaceState),removeOnStartup:await Tj(t,i),buildNoCache:await Dj(t,i),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:Hi(),originalCwd:w,configProvider:I,development:t.extensionMode===tt.ExtensionMode.Development},await cg(m),EN(m)}).then(h=>(s(async g=>{await kj(t,g&&h.dockerContainerId||!1),await ep(t,g==="rebuildNoCache"?i:!1)}),$i(o,tS(e),"success",m==null?void 0:m.common,h.config,h.properties),h),h=>{var T;let g=h instanceof je?h:new je({description:"An error occurred setting up the container.",originalError:h});Or(e)&&(g.volumeName=e.volumeName,g.volumeName===zn&&(g.volumeName=Gn(e.repositoryPath).uniqueVolumeName),g.repositoryPath=e.repositoryPath,g.folderPath=e.folder),$i(o,tS(e),"failure",m==null?void 0:m.common,g.config,g.containerProperties,g);let v="onTheSide",w=(T=g.data)==null?void 0:T.fileWithError,C=w&&(m==null?void 0:m.common.cliHost.path.basename(w))||"devcontainer.json",E=pr(e)?[{id:"openFileWithErrorLocally",title:`Edit ${C} Locally`,isLastAction:!0,applicable:async(P,S)=>p&&!(S&&u),async execute(){let P=m==null?void 0:m.common.cliHost,S=w?P.type==="wsl"?await P.toCommonURI(w):Qe.file(w):void 0;await tp(t,e.hostPath,S,c,v);let k=tt.Uri.file(e.hostPath);await tt.commands.executeCommand("vscode.openFolder",k)}},{id:"openFileWithErrorinWSL",title:`Edit ${C} in WSL`,isLastAction:!0,applicable:async()=>u,async execute(){let P=tt.Uri.parse((await lu(e.hostPath,a)).toString());await tp(t,P.path,w?P.with({path:w}):void 0,c,v),await tt.commands.executeCommand("vscode.openFolder",P)}},{id:"openFileWithErrorinSSH",title:`Edit ${C} in SSH`,isLastAction:!0,applicable:async()=>f,async execute(){let P=e.settings,S=tt.Uri.parse(Rd(P.host,e.hostPath).toString());await tp(t,S.path,w?S.with({path:w}):void 0,c,v),await tt.commands.executeCommand("vscode.openFolder",S)}}]:[],b=Or(e)?e.inspectVolume?[_s]:[{id:"reopenInRecoveryContainer",title:`Edit ${C} in Recovery Container`,isLastAction:!0,applicable:(P,S)=>!0,execute:async P=>{await tp(t,e.repositoryPath,w?Qe.file(w).with({scheme:"vscode-remote"}):void 0,c,v),await tt.commands.executeCommand("remote-containers.inspectVolume",P.volumeName,P.repositoryPath,P.folderPath)}},_s,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(P,S)=>!S,async execute(){tt.env.openExternal(tt.Uri.parse(e.repositoryPath))}}]:[],I=Jd(e)?[_s]:[];return g.actions=[...Lu,ja,XN,...E,...b,...I,Nu,Ua],lX(g),bs(g,tS(e),o,!0,r)})}async function uX(e,t,r,n,o,i){let{settings:s}=e,a=s&&"host"in s&&s.host||void 0;if(pr(e)){let c=mt(eS,e.hostPath),u=c.rootFolderPath,l=await yn(a,c.rootFolderPath,eo,ko(),t,r,o,i,ni,{sshAskpassEnv:n,settings:Il(),localDocker:e.localDocker});return l.cwd!==c.rootFolderPath&&(c=mt(l.path,c.isWorkspaceFile?l.path.join(l.cwd,eS.basename(e.hostPath)):l.cwd)),i.write(`Setting up container for folder or workspace: ${c.workspaceOrFolderPath}\r
`),sg(i,e.settings),e.localDocker&&i.write(`Local Docker: ${e.localDocker}\r
`),{cliHost:l,originalCwd:u}}else{let c=await yn(a,void 0,eo,ko(),t,r,o,i,ni,{sshAskpassEnv:n,settings:Il()});return{cliHost:c,originalCwd:await c.homedir()}}}function tS(e){return pr(e)?"config":Or(e)?e.inspectVolume?"volume":"repository":"volume"}function lX(e){let t=(e.originalError&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();t&&t.indexOf("drive has not been shared")!==-1?e.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":t&&(t.indexOf("port is already allocated")!==-1||t.indexOf("address already in use")!==-1)?e.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":t&&t.indexOf('invalid mount config for type "bind"')!==-1?e.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":t&&t.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(e.description="The base image references the obsolete Debian 8 update repository.",e.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){tt.env.openExternal(tt.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var si=ie(require("vscode"));var a$=ie(require("util"));var Do=ie(require("path"));async function c$(e,t,r){let{common:n}=e,o;try{let{commit:i}=n.product;if(!i)throw new je({description:"Cannot attach without commit id for the remote extension host."});o=await Iu(e,t.Id,r.workspaceFolder,r.remoteUser);let s=Pr(n.cliHost,o.shellServer),{hostOrContainerPort:a,hostPortServer:c,connectionToken:u,webConnectionToken:l,remoteEnv:d,serverDownloaded:f}=await xh(n,o,r,async()=>{},ds);if(dX(n,o,s,r.configFilePath),pX(n,o,s,r.configFilePath),Su(n,o,a,u,l,t,mt(Do.posix,"/")),c){let p=async()=>{await(0,a$.promisify)(c.close.bind(c))()};n.shutdowns.push(p)}return{params:n,properties:o,config:r,resolvedAuthority:{host:Cs,port:a,connectionToken:u,extensionHostEnv:d},webConnectionToken:l,tunnelInformation:n.isLocalContainer?Pu(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:f}}catch(i){let s=i instanceof je?i:new je({description:"An error occurred attaching to the container.",originalError:i});throw t&&(s.manageContainer=!1,s.params=e.common,s.containerId=t.Id,s.dockerParams=e),o&&(s.containerProperties=o),s.config=r,s}}function dX(e,t,r,n){t.installFolder&&u$(e,t,r,n).catch(console.error)}async function u$(e,t,r,n){try{await vi(e,t,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],HA(t),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await fX(e,t,r,n):(o==null?void 0:o.code)!==2&&await Bo(6e4)}return u$(e,t,r,n)}async function fX(e,t,r,n){let o=await GA(e,t);await SE(n,async()=>{var s,a;let i=await ey(e.cliHost,r,n,t.remoteWorkspaceFolder);if(!hX(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=ir(i.text,["extensions"],o,{formattingOptions:{}});await Bn(r,n,c,i.text)}})}function pX(e,t,r,n){l$(e,t,r,n).catch(console.error)}async function l$(e,t,r,n){try{let o=_h(t),i=Do.posix.dirname(o),s=Do.posix.basename(o);await vi(e,t,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await mX(e.cliHost,t,r,n):(o==null?void 0:o.code)!==2&&await Bo(6e4)}return l$(e,t,r,n)}async function mX(e,t,r,n){let{stdout:o}=await t.shellServer.exec(`cat ${_h(t)}`),i=Rt(o)||{};await SE(n,async()=>{var a,c;let s=await ey(e,r,n,t.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let u=ir(s.text,["settings"],i,{formattingOptions:{}});await Bn(r,n,u,s.text)}})}function hX(e,t){let r=new Set(e),n=new Set(t);return r.size===n.size&&e.every(o=>n.has(o))}async function d$(e,t){let r=Xv(e,t.Name),n=await y$(r);return n||(r=m$(e,t.Config.Image),n=await y$(r)),n}async function f$(e,t,r,n,o){let i=Qe.file(Xv(r,n.Name)),s=await ey(e,t,i,o);return s.exists||(i=Qe.file(m$(r,n.Config.Image)),s=await ey(e,t,i,o)),s}function Jv(e){return Do.join(e,"nameConfigs")}function Xv(e,t){let r=t.startsWith("/")?t.substr(1):t;return Do.join(Jv(e),`${g$(r)}.json`)}async function p$(e){try{let t=Jv(e);return(await Wi(t)).filter(n=>n.endsWith(".json")).map(n=>({name:v$(n.substr(0,n.length-5)),uri:Qe.file(Do.join(t,n))}))}catch(t){if(t&&t.code==="ENOENT")return[];throw t}}function Zv(e){return Do.join(e,"imageConfigs")}function m$(e,t){return Do.join(Zv(e),`${g$(t)}.json`)}async function h$(e){try{let t=Zv(e);return(await Wi(t)).filter(n=>n.endsWith(".json")).map(n=>({image:v$(n.substr(0,n.length-5)),uri:Qe.file(Do.join(t,n))}))}catch(t){if(t&&t.code==="ENOENT")return[];throw t}}function g$(e){return e.replace(/[:/%]/g,t=>`%${t.charCodeAt(0).toString(16)}`)}function v$(e){return e.replace(/%([0-9a-f]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}async function y$(e){if(!await Jt(e))return;let t=await vt(e),r=Rt(t.toString())||{},n=Bd(r);return n.configFilePath=Qe.file(e),n}async function ey(e,t,r,n){let o=await t.readDocument(r),i=o||wi,s=Rt(i)||{},a=Bd(s),c=vh({platform:e.platform,configFile:r,env:e.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},a);return c.configFilePath=r,{exists:!!o,text:i,config:c}}async function w$(e,t,r,n,o){return await Hs(e)?Ne(X({},await gX(e,t,r,n,o)),{isTrusted:!0}):(await si.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function gX(e,t,r,n,o){let i,s;return si.window.withProgress({location:si.ProgressLocation.Notification,title:kl,cancellable:!1},async a=>{var c,u;try{let l=ug(r),{settings:d}=l,f="containerName"in l?l.containerName:l.containerId;n.log.write(`Setting up container: ${f}\r
`),sg(n.log,d);let p=d&&"host"in d&&d.host||void 0,m=Wo(e.extensionPath,ji,n.log),h=await yn(p,l.cwd,eo,ko(),e.extensionPath,await Vn(),t.product,n.log,ni,{sshAskpassEnv:m,settings:Il()}),g=To(),v=X(X({},await m),Ou(h,d)),w=zo({exec:h.exec,env:X(X({},v),er(v)),output:n.log},To(),ri()),C=X(X({},h.env),v),E=await wn({cliHost:h,dockerCLI:g,dockerComposeCLI:w,dockerComposePath:ri(),env:C,output:n.log},"containerName"in l?l.containerName:l.containerId);if(!E)throw new je({description:`Cannot attach to the container with name/id ${f}, it no longer exists.`,data:{reload:!1,attach:!0}});let b=(u=(c=(si.workspace.workspaceFolders||[void 0])[0])==null?void 0:c.uri)==null?void 0:u.path,I=await f$(h,po,e.globalStoragePath,E,b);if(b&&I.config.workspaceFolder!==b){let k=ir(I.text,["workspaceFolder"],b,{formattingOptions:{}});await Bn(po,I.config.configFilePath,k,I.text)}i={common:await Tl({authority:r,extensionContext:e,sessionStart:n.sessionStart,progress:a,cliHost:h,env:C,cwd:l.cwd||await h.homedir(),isLocalContainer:ag(v),telemetry:t,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:o}),parsedAuthority:l,dockerCLI:g,dockerComposePath:ri(),dockerComposeCLI:w,dockerEnv:v,workspaceMountConsistencyDefault:Mv(),updateRemoteUserUIDOnMacOS:Uv(),cacheMount:jv()?"volume":"none",configurationTracking:Fv(e.workspaceState),userRepositoryConfigurationPaths:[],development:e.extensionMode===si.ExtensionMode.Development},await cg(i);let T=Ru(d),P=E.Name.startsWith("/")?E.Name.substr(1):E.Name,S=`Container ${E.Config.Image} (${P})${T}`;if(i.common.setWorkspaceName(S),E.State.Status!=="running")throw new je({description:`Cannot attach to the container ${E.Config.Image} (${P})${T}, it is not running.`,params:i.common,containerId:E.Id,dockerParams:i,data:{reload:!1,start:!0}});return await c$(i,E,I.config)}catch(l){let d=l instanceof je?l:new je({description:"An error occurred attaching to the container.",originalError:l});throw d.actions=[ZN,eL,...Lu,ja,_s,Nu,Ua],d}}).then(a=>($i(t,"attach","success",i==null?void 0:i.common,s,a.properties),a),a=>{let c=a instanceof je?a:new je({description:"An error occurred attaching to the container.",originalError:a});return $i(t,"attach","failure",i==null?void 0:i.common,s,c.containerProperties,c),bs(c,"attach",t,!0,n)})}var It=ie(require("vscode"));var jt=ie(require("vscode")),C$=ie(require("path")),Sc=ie(require("os")),cp=ie(require("fs")),E$=ie(require("child_process")),_$=ie(Nc());async function ty(e){wX()?await new b$().downloadAndInstallDocker(e):S$()?await new x$().downloadAndInstallDocker(e):await jt.env.openExternal(jt.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var rS=class{async downloadAndInstallDocker(t){if(await this.preInstallCheck(t)){let n="Downloading Docker installer...",o="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",i;try{i=await jt.window.withProgress({location:jt.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",u="Download";throw this.handleError(c,u,this.downloadUrl),a}let s=this.getInstallCommand(i);jt.window.showInformationMessage(o);try{await this.install(i,s,t)}catch(a){let c=`Docker Desktop installation failed. ${a}`,u="Install Instruction";throw this.handleError(c,u,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(t){let r=!0;if(await new P$(t).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",o="Reinstall";r=await jt.window.showInformationMessage(n,{modal:!0},o)!==void 0}return r}async downloadInstaller(){let t=`${yX()}.${this.fileExtension}`;return await EX(this.downloadUrl,t),t}handleError(t,r,n){jt.window.showErrorMessage(t,{title:r}).then(o=>{o&&jt.env.openExternal(jt.Uri.parse(n))})}},b$=class extends rS{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(t){return`"${t}"`}async install(t,r,n){try{n.write(`Executing command ${r}`),await T$(r,n)}finally{try{await cp.promises.stat(t),await cp.promises.unlink(t)}catch{}}}},x$=class extends rS{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(t){return`chmod +x '${t}' && open '${t}'`}async install(t){let r="Docker Install",n=this.getInstallCommand(t);await CX(n,r,{addDockerEnv:!1})}},vX=0;function yX(){return C$.join(Sc.tmpdir(),`${jt.env.sessionId}-${vX++}.tmp`)}function wX(){return Sc.platform()==="win32"}function S$(){return Sc.platform()==="darwin"}async function CX(e,t,r){var a,c;let n;r=r??{},r.addDockerEnv&&(n={});let o=new jt.Task({type:"shell"},r.workspaceFolder??jt.TaskScope.Workspace,t,"Docker",new jt.ShellExecution(e,{cwd:r.cwd||((c=(a=r.workspaceFolder)==null?void 0:a.uri)==null?void 0:c.fsPath)||Sc.homedir(),env:n}),[]);r.alwaysRunNew&&(o.definition.idRandomizer=Math.random()),r.focus&&(o.presentationOptions={focus:!0});let i=await jt.tasks.executeTask(o);return new Promise((u,l)=>{let d=jt.tasks.onDidEndTaskProcess(f=>{f.execution===i&&(d.dispose(),f.exitCode&&r.rejectOnError&&l(f.exitCode),u())})})}var P$=class{constructor(t){this.output=t;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new k$(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await T$("docker -v",this.output),!0}catch{return!1}}};async function EX(e,t){await new Promise((r,n)=>{let o=cp.createWriteStream(t);_$.https.get(e,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${e}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(o),s.on("end",r)}).on("error",n)})}var I$=10*1024;async function T$(e,t,r,n){let o=Buffer.alloc(r&&r.maxBuffer||I$),i=Buffer.alloc(r&&r.maxBuffer||I$);return await _X(e,t,r,n,o,n,i),{stdout:nS(o),stderr:nS(i)}}async function _X(e,t,r,n,o,i,s,a){return await new Promise((c,u)=>{let l,d=0,f=0;r=r||{},r.shell=!0,bX(r,t);let p=E$.spawn(e,r);p.on("error",m=>(l&&(l.dispose(),l=void 0),u(m))),p.on("close",(m,h)=>{if(l&&(l.dispose(),l=void 0),a&&a.isCancellationRequested)return u(new Error("User canceled"));if(m){let g=`Process '${e.length>50?`${e.substring(0,50)}...`:e}' exited with code ${m}`;s&&(g+=`
Error: ${nS(s)}`);let v=new Error(g);return v.code=m,v.signal=h,v.stdErrHandled=i!==null,u(v)}return c()}),(r==null?void 0:r.stdin)&&(p.stdin.write(r.stdin),p.stdin.end()),(n||o)&&p.stdout.on("data",m=>{let h=m.toString();n&&n(h,p),o&&(d+=o.write(h,d))}),(i||s)&&p.stderr.on("data",m=>{let h=m.toString();i&&i(h,p),s&&(f+=s.write(h,f))}),a&&(l=a.onCancellationRequested(()=>{p.kill()}))})}function bX(e,t){var r;!S$()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=e==null?void 0:e.env)==null?void 0:r.PATH)||process.env.PATH||"")||(e=e??{},e.env=e.env??X({},process.env),t.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),e.env.PATH=`${e.env.PATH}:/usr/local/bin`)}function nS(e){return e.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var k$=class{constructor(t,r){this.valueFactory=t;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let t=this._valuePromise===void 0;t&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(t&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&t){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function $r(e,t,r){var i;let n=(i=(It.workspace.workspaceFolders||[])[0])==null?void 0:i.uri;n&&(n.scheme==="file"&&Rr(n.fsPath)||du(n))&&(t=await ut(e,t.output,n));let o=await up(t,r);if(o==="permission")return await It.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&It.env.openExternal(It.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(o==="ssh")return await It.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&It.commands.executeCommand(jr),!1;if(o==="daemon")return await It.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&It.commands.executeCommand(jr),!1;if(!o||o==="command"){if(t.cliHost.type==="wsl")await It.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&It.env.openExternal(It.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let s="Install",a="License",c="Ignore",u=o===!1?[s,a,c]:[s,a],l=await It.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0,detail:"Check the license for details."},...u);if(l===s)ty(t.output).then(console.error);else if(l===a)It.env.openExternal(It.Uri.parse("https://aka.ms/docker-subscription-service-agreement"));else if(l===c)return!0}return!1}return o==="wsl1"?(await It.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&It.env.openExternal(It.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function up(e,t){var s,a,c,u;let r;try{let l=await it(e,"version","--format","{{.Server.APIVersion}}");r=l.stdout.toString(),e.output.write(r);let d=l.stderr.toString();d&&e.output.write(at(d))}catch(l){console.error(l);let d=(s=l==null?void 0:l.stdout)==null?void 0:s.toString();d&&e.output.write(d);let f=l&&(l.stderr?l.stderr.toString():l.message)||"";f&&e.output.write(at(f)),lp(t,"error",void 0,f);let p=f.toLowerCase();return p.indexOf("permission denied")!==-1?p.indexOf("ssh")!==-1?"ssh":"permission":p.indexOf("enoent")!==-1||p.indexOf("not found")!==-1?(e.output.write(`CLI host's PATH: ${e.cliHost.env.PATH}`),"command"):e.cliHost.type==="wsl"&&((u=(c=(a=l==null?void 0:l.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:u.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),o=hu(n);if(!o&&n.toLowerCase().indexOf("error during connect")!==-1)return lp(t,"error",void 0,n),"daemon";if(!o)return lp(t,"unparsed",n),!0;let i=!gu(o,[1,35]);return!i&&await UE(e)?(lp(t,"podman",n),!0):(lp(t,i?"success":"failure",n),i)}function lp(e,t,r,n){let o={outcome:t};r&&(o.version=r),n&&(o.errorMessage=n),e.sendTelemetryEvent("dockerVersion",o)}async function D$(e){try{return await zd(e,"version"),!0}catch{return await It.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&It.env.openExternal(It.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var Nl=ie(require("vscode"));var oS=class{constructor(t){this.fileHost=t}async provideDocumentLinks(t,r){let n=[],o=Ep(t.getText());if(!o)return n;let i=_p(o)||{};return i.configFilePath=t.uri,Ir(i)&&this._linksForDockerfile(n,i,o,t),"dockerComposeFile"in i&&await this._linksForDockerCompose(n,i,o,t),n}_tryAddDocumentLinkToBucket(t,r,n,o,i){let s=t.positionAt(r),a=t.positionAt(n);s.compareTo(a)!==0&&i.push(new Nl.DocumentLink(new Nl.Range(s,a),o))}_linksForDockerfile(t,r,n,o){let i=Vi(n,["build","dockerfile"])||Vi(n,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,gs(this.fileHost,r),t)}async _linksForDockerCompose(t,r,n,o){let s=(await vs(this.fileHost,r)).map(c=>Nl.Uri.file(c).path),a=Vi(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),t);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),t)}};var le=ie(require("vscode")),Pc=ie(require("path"));var R$="Stop Container",A$="Reopen Folder locally",O$="Close Workspace",Bs;(function(o){o.Placeholder="Placeholder",o.Group="Group",o.Container="Container",o.Folder="Folder"})(Bs||(Bs={}));var wr=class{static isGroupItem(t){return!!t&&t.type===Bs.Group}static isContainerItem(t){return!!t&&t.type===Bs.Container}static isFolderItem(t){return!!t&&t.type===Bs.Folder}},dp;(function(n){n[n.DevContainers=0]="DevContainers",n[n.AttachContainers=1]="AttachContainers",n[n.OtherContainers=2]="OtherContainers"})(dp||(dp={}));var iS=class extends wr{constructor(t,r){super();this.label=t;this.groupType=r;this.type=Bs.Group}async asTreeItem(t,r,n,o){return new le.TreeItem(this.label,le.TreeItemCollapsibleState.Expanded)}},Ao=class extends wr{constructor(t,r=[],n,o=!1){super();this.container=t;this.folders=r;this.parent=n;this.isDevContainer=o;this.type=Bs.Container;this._alreadyCheckedRepository=!1}async asTreeItem(t,r,n,o){let i=new le.TreeItem(this.getContainerLabel(),this.getCollapsibleState());i.description=this.containerDescription;let s=this.getContextBase();i.iconPath=ry(r,IX),i.contextValue="exited"+s;let a=!1;return n&&this.container.Id===n.Id?(i.iconPath=ry(r,PX),i.contextValue="active"+s,a=!0):t&&await this.setTreeItemIconAndContext(t,s,i),i.tooltip=this.getHover(a,i.iconPath instanceof le.ThemeIcon?i.iconPath:new le.ThemeIcon("vm"),i.label),this.folders.length===1&&(i.contextValue+="Folder"),i}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?le.TreeItemCollapsibleState.Expanded:le.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(t,r,n){switch(this.container.State.Status){case"created":{n.iconPath=new le.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"paused":{n.iconPath=new le.ThemeIcon("vm-outline"),n.contextValue="running"+r;break}case"restarting":{n.iconPath=new le.ThemeIcon("vm-outline"),n.contextValue="exited"+r;break}case"exited":{n.iconPath=new le.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"running":{n.iconPath=new le.ThemeIcon("vm-running"),n.contextValue="running"+r;break}}}getTimeElapsed(t){if(!t)return"";let r="",n=t.State.Status,o=new Date(t.State.StartedAt),i=new Date(t.State.FinishedAt);if(o.getFullYear()>1&&i.getFullYear()>1){let s=new Date,a=new Date(o>i?t.State.StartedAt:t.State.FinishedAt),c,u,l=s.getTime()-a.getTime();(u=Math.round(l/Ao.years))>0?u===1?c="year":c="years":(u=Math.round(l/Ao.days))>0?u===1?c="day":c="days":(u=Math.round(l/Ao.hours))>0?u===1?c="hour":c="hours":(u=Math.round(l/Ao.minutes))>0?u===1?c="minute":c="minutes":(u=Math.round(l/Ao.seconds),u===1?c="second":c="seconds"),r=` ${u} ${c}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+r}getContainerLabel(){if(Fa(this.container)&&this.folders.length>0)return`${Pc.basename(this.folders[0].folder.path)}`;{let r=$E(this.container);if(r)return r;let n=this.repository;if(n)return n.repositoryName;let o=La(this.container);return o?o.volumeName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(t,r,n){let o=new le.MarkdownString(void 0,!0);if(o.appendMarkdown(`$(${r.id}) ${n} (${this.container.Name.substr(1)})  
`),this.repository){let s=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";o.appendMarkdown(`${s} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let i=og(this.container);return i&&o.appendMarkdown(`$(file-symlink-directory) ${i}  
`),t?o.appendMarkdown("$(remote) Connected"):o.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),o}get repository(){if(!this._alreadyCheckedRepository){let t=Ma(this.container);t&&(this._repository=Gn(t)),this._alreadyCheckedRepository=!0}return this._repository}inspect(t){return Qr(t,this.container.Id)}},Hr=Ao;Hr.seconds=1e3,Hr.minutes=Ao.seconds*60,Hr.hours=Ao.minutes*60,Hr.days=Ao.hours*24,Hr.years=Ao.days*365;var Vs=class extends wr{constructor(t,r,n){super();this.container=t;this.folder=r;this.isDevContainer=n;this.type=Bs.Folder}async asTreeItem(t,r,n,o){let i=new le.TreeItem(Pc.basename(this.folder.path),le.TreeItemCollapsibleState.None);return i.description=this.folder.path,i.iconPath=ry(r,kX),i.contextValue="attachedFolder",this.isDevContainer&&!Ma(this.container)&&!La(this.container)&&(i.contextValue="devFolder"),n&&this.container.Id===n.Id&&o===this.folder.path&&(i.iconPath=ry(r,TX),i.tooltip=`Active Folder ${i.label}`,i.contextValue=`active${i.contextValue}`),i}};function xX(e,t,r,n){if(!(!le.env.remoteName||le.env.remoteName!=="attached-container"&&le.env.remoteName!=="dev-container"))return N$(e,t,r,n)}function N$(e,t,r,n){le.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new H$(e,t,n,t.output),i=le.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},e.subscriptions.push(r.onDidChangeActiveContainer(s=>o.refresh(s))),o}function SX(e,t){let r=[R$];return e&&e.Id===t.Id&&le.workspace.workspaceFolders&&le.workspace.workspaceFolders.length>0&&(r.push(O$),le.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push(A$)),r}var L$=class{constructor(t,r){this.dockerParams=t;this.containerId=r;this.writeEmitter=new le.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:t,env:r,output:n}=this.dockerParams;t.exec({cmd:To(),args:["logs","-f",this.containerId],env:r,output:n}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(t=>{t.destroy()})}write(t){this.writeEmitter.fire(t.replace(/\n/g,`\r
`))}},F$=class{constructor(t,r,n,o,i,s){this.targetsTreeData=t;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(t){this.dockerParams=t}registerCommands(){let t=[];return t.push(le.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),t.push(le.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),t.push(le.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),t.push(le.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),t.push(le.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),t.push(le.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),t.push(le.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),t.push(le.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),t.push(le.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),t.push(le.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),t.push(le.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),t.push(le.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),t.push(le.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),t.push(le.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),t.push(le.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),t.push(le.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),t.push(le.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),t}async commandStopContainer(t){if(!wr.isContainerItem(t))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===t.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${t.getContainerLabel()}?`,n=await le.window.showWarningMessage(r,{modal:!0},...SX(this.targetsTreeData.currentContainer,t.container));await this.targetsTreeData.withProgress(t,async()=>{switch(n){case R$:{await Lx(this.dockerParams,t.container),t.container=await Qr(this.dockerParams,t.container.Id);break}case O$:{await le.commands.executeCommand("workbench.action.closeFolder");break}case A$:{await le.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(t){if(!wr.isContainerItem(t))return;let r=await wn(this.dockerParams,t.container.Id);if(!r)return;let n=await le.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(t.parent,async()=>{n==="Remove"&&(await Lx(this.dockerParams,t.container),await Ij(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(t.container))})}async tryRemoveVolume(t){let r=og(t);if(r||(r=jN(t)),r){let n=await Bh(this.dockerParams,r);if((await LE(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await le.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await Fx(this.dockerParams,r)}}}async commandPruneVolumes(t){let r="Are you sure you want to remove all unused volumes?";await le.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(t,async()=>{await uN(this.dockerParams)})}async commandExplorerVolumesRefresh(t){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(t){!wr.isContainerItem(t)||await this.targetsTreeData.withProgress(t,async()=>{await Hv(this.dockerParams,t.container),t.container=await Qr(this.dockerParams,t.container.Id)})}async commandRemoveRecentFolder(t){!wr.isFolderItem(t)||(await le.commands.executeCommand("vscode.removeFromRecentlyOpened",t.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(t){!wr.isContainerItem(t)||(this.detailsTreeData||(this.detailsTreeData=N$(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(t))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(t){let r,n;wr.isFolderItem(t)?(n=t,r=t.container):Hr.isContainerItem(t)&&(n=t.folders[0],r=t.container),r&&(await Hv(this.dockerParams,r),await le.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(t){return this.attachToContainerInternal(t)}async commandAttachToContainerNewWindow(t){return this.attachToContainerInternal(t,!0)}async attachToContainerInternal(t,r=!1){let n;wr.isContainerItem(t)?n=t.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await Hv(this.dockerParams,n),await ny(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(t){let r;(wr.isContainerItem(t)||Ws.isImageItem(t)||Ws.isVolume(t)||Ws.isDevVolume(t))&&(r=await t.inspect(this.dockerParams)),r&&le.window.showTextDocument(await le.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(t){Ws.isDevVolume(t)&&await t.inspectInBasicDevContainer()}async commandCloneInVolume(t){Ws.isDevVolume(t)&&await t.cloneRepositoryInVolume()}async commandRemoveVolume(t){Ws.isDevVolume(t)&&await t.removeVolume(this.dockerParams)}async commandNewContainer(){let t=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Create Dev Container...",command:"remote-containers.createDevContainer"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await le.window.showQuickPick(t,{placeHolder:"Select an action to create a container"});if(r)return le.commands.executeCommand(r.command)}async commandShowContainerLog(t){if(!wr.isContainerItem(t))return;let r=new L$(this.dockerParams,t.container.Id);le.window.createTerminal({name:t.container.Config.Image,pty:r}).show()}};async function M$(e,t,r,n){le.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new U$(e,t,s,r,n),i=le.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,e.subscriptions.push(le.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0))));function s(a){let c=xX(e,a,o,r),u=new B$(e,r,n),l=le.window.createTreeView("devVolumes",{treeDataProvider:u});e.subscriptions.push(l);let d=new F$(o,c,u,a,e,r);e.subscriptions.push(...d.registerCommands()),e.subscriptions.push(Ej(e)(async()=>{o.refresh(void 0),u.refresh(void 0);let f=await ut(e,n);c&&c.updateDockerParameters(f),d.updateDockerParameters(f)}))}}var U$=class{constructor(t,r,n,o,i){this.context=t;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=o;this.output=i;this._onDidChangeTreeData=new le.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new le.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(t){this.setTreeMessage=t}get currentContainer(){return this._currentContainer}async getDockerParams(t=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Wo(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,ji(r,!1)),this.output));try{this.dockerParams=await ut(this.context,this.output,void 0,void 0,t?void 0:this.passiveSSHAskpassEnv,!1),await up(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)}catch(r){if(!this.needsSSHCredentials)throw r}}return this.dockerParams}handleDockerEvent(t){try{let r=JSON.parse(t.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let o=this.containerItems.get(r.Actor.ID);this.dockerParams&&o?(async()=>{o.container=await Qr(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)})():this._onDidChangeTreeData.fire(o);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let t=await this.getDockerParams();if(!!t)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await FE(t,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(t){return t.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(t){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==t)&&(this.needsDockerStartOrInstallContext=t,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await le.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await le.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(t){if(this.hasContainersContext===void 0||this.hasContainersContext!==t){this.hasContainersContext=t;let r=le.workspace.workspaceFolders&&le.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await le.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(t){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(t===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(t){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(t);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new iS("Dev Containers",0)),this.otherContainers.length>0&&r.push(new iS("Other Containers",2)),r}async getChildDevContainer(t,r){let n=await this.getWorkspaceFolderFromContainer(t),o=n?[new Vs(t,n,!0)]:[],i=Fa(t);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new Vs(t,a,!1))):i&&this.recentAttachEntries.has(t.Id)?o.push(...this.recentAttachEntries.get(t.Id).map(a=>new Vs(t,a,!1))):(i=Ma(t))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new Vs(t,a,!1))):(i=zE(La(t)))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new Vs(t,a,!1))):i===void 0&&this.recentDevComposeEntries.has(t.Id)&&o.push(...this.recentDevComposeEntries.get(t.Id).map(a=>new Vs(t,a,!1)));let s=new Hr(t,o,r,!0);return this.setContainerItems(s),s}setContainerItems(t){this.containerItems.set(t.container.Id,t),this._currentContainer&&t.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(t)}async getChildContainers(t){if(t.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,t));return r.push(...this.attachContainers.map(async n=>{let o=new Hr(n,this.recentAttachEntries.get(n.Id).map(i=>new Vs(n,i,!1)),t);return this.setContainerItems(o),o})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new Hr(r,[],t);return this.setContainerItems(n),n})}getChildFolders(t){return t.folders&&t.folders.length>1?t.folders:[]}async getChildItems(t){if(t===void 0){let r=await Ci(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await ws(this.dockerParams,r);return this.getChildGroups(n)}else{if(wr.isGroupItem(t))return this.getChildContainers(t);if(wr.isContainerItem(t))return this.getChildFolders(t)}return[]}async getChildren(t){return await this.action,await this.getDockerOrShowMessage(t)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(t)):[]}async refresh(t){t===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(t)}async setCurrents(){let t=le.workspace.workspaceFolders,r;if(this.dockerParams){if(t&&t.length>0){let n=this.resolverResults.get(t[0].uri.authority);n&&n.dockerContainerId&&(r=await wn(this.dockerParams,n.dockerContainerId),this.currentFolder=t[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await wn(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(t){if(Fa(t)){this.devContainers.push(t);return}else if(Ma(t)){this.devContainers.push(t);return}else if(La(t)){this.devContainers.push(t);return}else if($E(t)&&this.recentDevComposeEntries.has(t.Id)){this.devContainers.push(t);return}else if(this.recentAttachEntries.has(t.Id)){this.attachContainers.push(t);return}this.otherContainers.push(t)}async setContainerTypes(t){return await this.setRecentEntries(t),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,t.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(t){let{cliHost:r,dockerCLI:n,dockerComposePath:o}=this.dockerParams,i=mt(r.path,t),s=await bi(r,i,Hi()),a={cliHost:r,dockerPath:n,dockerComposePath:o,appRoot:le.env.appRoot,extensionPath:this.context.extensionPath,package:await Gr(this.context.extensionPath),output:this.output},c=s&&await op(a,i.rootFolderPath,s);if(c&&Ir(c.configuration)){let u=cr(this.dockerParams.env);return le.Uri.parse(Xd(t,c.workspace.workspaceFolder,u),!0)}}async getWorkspaceFolderFromContainer(t){let r=Fa(t);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=Ma(t),o=og(t),i=$N(t);if(n){let a=cr(this.dockerParams.env);return le.Uri.parse(go(n,o,i,!1,a,void 0))}let s=La(t);if(s){let a=cr(this.dockerParams.env);return le.Uri.parse(go(void 0,s.volumeName,s.folder,!1,a,void 0))}}}async getWorkspaceFolderFromHostPath(t){let r=this.dockerParams.cliHost,n=await zN(r,t,this.output),o=KN(r,n,t),i=cr(this.dockerParams.env);return le.Uri.parse(Xd(t,o,i),!0)}getWorkspaceFolderFromRepository(t,r,n){let o=cr(this.dockerParams.env);return le.Uri.parse(go(t,r,n,!1,o,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(t,r){let n=cr(this.dockerParams.env);return le.Uri.parse(go(void 0,t,r,!1,n,void 0),!0)}async findComposeTargetContainer(t,r){var n;return(n=r.find(o=>Fa(o)===t))==null?void 0:n.Id}trySetEntryWithAttachAuthority(t,r,n){let o;if("containerName"in r){let i=n.find(s=>s.Name===r.containerName);i&&(o=i.Id)}else o=r.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(t):this.recentAttachEntries.set(o,[t]))}async trySetEntryWithDevAuthority(t,r,n,o){let i=r.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),o[i]=s),s.path!==t.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(t):this.recentAttachDevContainerEntries.set(r.hostPath,[t]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(t):a&&this.recentDevComposeEntries.set(a,[t])}}trySetEntryWithRepoAuthority(t,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==t.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(t):this.recentAttachDevContainerEntries.set(r.repositoryPath,[t]))}trySetEntryWithDevContainerInVolumeAuthority(t,r){if(this.getWorkspaceFolderFromDevContainerInVolume(r.volumeName,r.folder).path!==t.path){let o=zE(r);this.recentAttachDevContainerEntries.has(o)?this.recentAttachDevContainerEntries.get(o).push(t):this.recentAttachDevContainerEntries.set(o,[t])}}trySetEntryWithVolumeAuthority(t,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(t):this.recentAttachEntries.set(n,[t]))}async trySetEntry(t,r,n){if(!t||!t.folderUri&&!t.workspace.configPath)return;let o=t.folderUri??t.workspace.configPath,i=ug(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,r);else{let s=Cn(o.authority);s&&(pr(s)?await this.trySetEntryWithDevAuthority(o,s,r,n):Or(s)?this.trySetEntryWithRepoAuthority(o,s):xi(s)?this.trySetEntryWithDevContainerInVolumeAuthority(o,s):this.trySetEntryWithVolumeAuthority(o,s))}}async setRecentEntries(t){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await le.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let o of r.workspaces)await this.trySetEntry(o,t,n)}}withProgress(t,r){return this.action=this.action.then(()=>r()),this.refresh(t)}},Ro;(function(s){s.Default="Default",s.Title="Title",s.Image="Image",s.Port="Port",s.Volume="Volume",s.DevVolume="DevVolume"})(Ro||(Ro={}));var Ws=class{constructor(t){this.label=t;this.type=Ro.Default}static isDetailItem(t){return!!t&&t.label!==void 0&&t.type!==void 0}static isImageItem(t){return!!t&&t.type===Ro.Image}static isVolume(t){return!!t&&t.type===Ro.Volume}static isDevVolume(t){return!!t&&t.type===Ro.DevVolume}},j$=class{constructor(t){this.detail=t;this.type=Ro.Image;this.context="image";this.label="Image"}inspect(t){return cN(t,this.detail)}},$$=class{constructor(t,r){this.label=t;this.volumeDetails=r;this.type=Ro.Volume;this.context="volume"}async inspect(t){return Bh(t,this.volumeDetails)}},H$=class{constructor(t,r,n,o){this.context=t;this.dockerParams=r;this.telemetry=n;this.output=o;this._onDidChangeTreeData=new le.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(t){this.dockerParams=t}set setTitle(t){this.setTreeTitle=t}get container(){return this._container?this._container.container:void 0}getTreeItem(t){let r=new le.TreeItem(t.label,Array.isArray(t.detail)&&t.detail.length>0?le.TreeItemCollapsibleState.Expanded:le.TreeItemCollapsibleState.None);return r.tooltip=t.label,t.detail&&!Array.isArray(t.detail)&&(r.description=t.detail,r.tooltip+=` ${r.description}`),r.contextValue=t.context,r.command=t.command,r}async getAttributes(t,r,n){let o=[];r&&o.push({label:"Workspace",detail:r});let i=Ma(t.container);i&&o.push({label:"Repository",detail:i});let s=La(t.container);return s&&(o.push({label:"Volume",detail:s.volumeName}),o.push({label:"Folder",detail:s.folder})),o.push({label:"Name",detail:t.container.Name}),o.push(new j$(t.container.Config.Image)),n&&o.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),o}async getMounts(t){let r=[];return t&&t.Mounts.forEach(n=>{if(n.Type==="volume"){let o=n.Name,i=new $$(`Volume: ${o}`,o),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[i,s]})}else if(n.Type==="bind"){let o={label:`Source: ${n.Source}`,detail:void 0},i={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[o,i]})}}),r}async getChildrenFromRoot(t){let r=[],n=Fa(t.container),o;if(this.dockerParams&&n){let a=await bi(this.dockerParams.cliHost,mt(this.dockerParams.cliHost.path,n),Hi());a&&(o=We(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(t,n,o),type:Ro.Title});let i;this.dockerParams&&(i=await Qr(this.dockerParams,t.container.Id));let s=await this.getMounts(i);return s.length>0&&r.push({label:"Mounts",detail:s,type:Ro.Title}),r}async testContainer(){let t=!0;try{(this.dockerParams?await Qr(this.dockerParams,this._container.container.Id):void 0)===void 0&&(t=!1)}catch{t=!1}return t||(this._container=void 0,this.setTreeTitle("Details (Containers)")),t}async getChildren(t){if(this._container===void 0)return[];let r=[];return t===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(t.detail)&&r.push(...t.detail),r}async refresh(t){this.dockerParams=await ut(this.context,this.output),await up(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=t||this._container,this._onDidChangeTreeData.fire(void 0)}},q$=class extends Ws{constructor(t){super(t.Name);this.type=Ro.DevVolume;this.volumeDetails=t,this.createdAt=void 0}async asTreeItem(){let t=this.getLabel(),r=new le.TreeItem(t,le.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){let t=this.volumeDetails.Labels;if(t){let r=t["vsch.local.repository.unique"];if(r&&r==="true")return!0}return!1}getLabel(){let t=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();n&&n.gitUrlInfo.repository!=="unknown"&&(t=n.gitUrlInfo.fullRepositoryName)}return t}getDescription(){let t="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();if(n&&n.gitUrlInfo.repository!=="unknown"){let o=this.getBranchName(),i=this.getPullRequestId();i?t=`#${i}`:o&&(t=`${o}`)}}return t}getBranchName(){let t=this.volumeDetails.Labels;if(t&&this.isUniqueVolume()&&t["vsch.local.repository.branch"])return t["vsch.local.repository.branch"]}getPullRequestId(){let t=this.volumeDetails.Labels;if(t&&this.isUniqueVolume()&&t["vsch.local.repository.pullRequestId"])return t["vsch.local.repository.pullRequestId"]}getRepository(){let t=this.volumeDetails.Labels;if(t){let r=t["vsch.local.repository.unique"];if(r&&r==="true"){let n=t["vsch.local.repository"];return Gn(n)}}}get iconPath(){return new le.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let t="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let n=new Date,o=new Date(this.volumeDetails.CreatedAt),i,s,a=n.getTime()-o.getTime();(s=Math.round(a/Hr.years))>0?s===1?i="year":i="years":(s=Math.round(a/Hr.days))>0?s===1?i="day":i="days":(s=Math.round(a/Hr.hours))>0?s===1?i="hour":i="hours":(s=Math.round(a/Hr.minutes))>0?s===1?i="minute":i="minutes":(s=Math.round(a/Hr.seconds),s===1?i="second":i="seconds"),t=` ${s} ${i} ago`}return this.createdAt=t,t}async inspect(t){return Bh(t,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await le.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await le.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(t){if(!((await LE(t)).indexOf(this.volumeDetails.Name)>=0)){await le.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await le.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await Fx(t,this.volumeDetails.Name)}},B$=class{constructor(t,r,n){this.context=t;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new le.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(t){return t.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await ut(this.context,this.output,void 0,void 0),await up(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(t){await le.commands.executeCommand("setContext","remote-containers:noDevVolumes",t)}async getDockerOrShowMessage(t){return!(!this.dockerParams&&(t===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(t){if(!await this.getDockerOrShowMessage(t))return[];let r=await ut(this.context,this.output),n=await Wn(r),o=await Gd(r,n),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let u=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-u.getTime()}),s.map(a=>new q$(a))}async resolveTreeItem(t,r){let n=await ut(this.context,this.output),o=await this.getAssociatedContainers(n,r),i=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),u=r.getTimeElapsed();return o.length>0?t.tooltip=this.renderMarkdown(i,s,a,c,u,o.join(", ")):t.tooltip=this.renderMarkdown(i,s,a,c,u,"*None*"),t}async getAssociatedContainers(t,r){let n=[],o=await Ci(t,!0),i=await ws(t,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(t,r,n,o,i,s){let a=new le.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",u=r.gitUrlInfo.repositoryUrl;u.startsWith("http")?(u=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${u}](${u})
`)):a.appendMarkdown(`${c} ${u})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${u}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${u}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${t}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(t){try{let r=JSON.parse(t.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let t=await this.getDockerParams();if(!!t)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await FE(t,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(t){t===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(t)}},PX="vm-active",IX="vm-default",TX="folder-active",kX="folder";function ry(e,t){let r=`${t}.svg`;return{light:le.Uri.file(e.asAbsolutePath(Pc.join("resources","light",r))),dark:le.Uri.file(e.asAbsolutePath(Pc.join("resources","dark",r))),highContrast:le.Uri.file(e.asAbsolutePath(Pc.join("resources","highContrast",r)))}}var aS=ie(require("util"));var ro=ie(require("vscode"));async function V$(e,t,r={}){let n=fu(t[0],t.slice(1),void 0),o=await lA(t[0],t.slice(1),void 0,e.loadNativeModule),i=await Eh({params:e,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:n,remotePtyExec:o,remoteExecAsRoot:void 0,rootShellServer:void 0}),{hostOrContainerPort:s,connectionToken:a,webConnectionToken:c,remoteEnv:u,serverDownloaded:l}=await xh(e,i,r,async()=>{},void 0);return{params:e,properties:i,config:void 0,resolvedAuthority:{host:Cs,port:s,connectionToken:a,extensionHostEnv:u},webConnectionToken:c,tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function W$(e,t,r){var n,o,i;if(!!await Hs(e))if(r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:u}=t,l=(await He({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:u})).stdout.toString().trim(),f=(await He({exec:a.exec,cmd:"kubectl",args:s,env:c,output:u})).stdout.toString(),p=JSON.parse(f),m=((n=p.spec)==null?void 0:n.containers)||[];if(!m.length){t.output.write(`No containers found. Pod details:
${f}`),await ro.window.showErrorMessage("No containers found.",{modal:!0},"Show Log")&&ro.commands.executeCommand(jr);return}let h=m.length>1?(o=await ro.window.showQuickPick(m.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:o.container:m[0];if(h){let g=((i=p.metadata)==null?void 0:i.namespace)||r.namespace,v={remoteAuthority:RX({context:l,podname:r.name,namespace:g,name:h.name,image:h.image})};/\d$/.test(e.extensionPath)||(v.reuseWindow=!0),await ro.commands.executeCommand("vscode.newWindow",v)}}else t.output.write(`No Pod name found. Pod object:
${JSON.stringify(r,void 0,"  ")}`),await ro.window.showErrorMessage("No Pod name found.",{modal:!0},"Show Log")&&ro.commands.executeCommand(jr)}async function G$(e,t,r,n,o){return await Hs(e)?Ne(X({},await DX(e,t,r,n,o)),{isTrusted:!0}):(await ro.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function DX(e,t,r,n,o){let i;return ro.window.withProgress({location:ro.ProgressLocation.Notification,title:kl,cancellable:!1},async s=>{try{let a=AX(r),c=process.cwd(),u=await yn(void 0,c,eo,ko(),e.extensionPath,await Vn(),t.product,n.log,ni);i=await Tl({authority:r,extensionContext:e,sessionStart:n.sessionStart,progress:s,cliHost:u,env:u.env,cwd:c,isLocalContainer:!0,telemetry:t,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:o}),i.setWorkspaceName(`${a.name} in ${a.podname} (${a.image})`);let l=["kubectl","exec","-it",a.podname];return a.context&&l.push("--context",a.context),a.namespace&&l.push("--namespace",a.namespace),l.push("--container",a.name,"--"),await V$(i,l)}catch(a){let c=a instanceof je?a:new je({description:"An error occurred attaching to the container.",originalError:a});throw c.actions=[...Lu,ja,_s,Nu,Ua],c}}).then(s=>($i(t,"k8s-container","success",i,void 0,s.properties),s),s=>{let a=s instanceof je?s:new je({description:"An error occurred attaching to the container.",originalError:s});return $i(t,"k8s-container","failure",i,void 0,a.containerProperties,a),bs(a,"k8s-container",t,!0,n)})}function RX(e){let t=[];for(let r in e){let n=e[r];n&&t.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${t.join("+")}`}function AX(e){return e.substr(e.indexOf("+")+1).split("+").reduce((t,r)=>{let n=r.indexOf("=");return n!==-1&&(t[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),t},{})}var Et=ie(require("vscode")),Ic=ie(require("fs")),Ll=ie(require("os")),Tc=ie(require("path")),oy=ie(require("child_process")),Fl=ie(require("util"));function iy(e){switch(e.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${e.quality}`}}async function z$(e,t){let r=e.globalStorageUri,n=hn.joinPath(r,"cli-bin");await Et.workspace.fs.createDirectory(n);let o="";try{o=(await Et.workspace.fs.readFile(hn.joinPath(n,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")return}if(o===e.extensionPath)return;let i=hn.joinPath(e.extensionUri,"dev-containers-user-cli","bin"),s=iy(t),a=`devcontainer${s}`,c=[{source:"devcontainer",destination:a},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let u of c)await Et.workspace.fs.copy(hn.joinPath(i,u.source),hn.joinPath(n,u.destination),{overwrite:!0});process.platform!=="win32"&&await Ic.promises.chmod(hn.joinPath(n,a).fsPath,493),await Et.workspace.fs.writeFile(hn.joinPath(n,"vscode-app-root"),Buffer.from(Et.env.appRoot,"utf-8")),await Et.workspace.fs.writeFile(hn.joinPath(n,"vscode-path"),Buffer.from(process.execPath,"utf-8")),await Et.workspace.fs.writeFile(hn.joinPath(n,"vscode-quality"),Buffer.from(t.quality??"","utf-8")),await Et.workspace.fs.writeFile(hn.joinPath(n,"vscode-machine-id"),Buffer.from(Et.env.machineId,"utf-8")),await Et.workspace.fs.writeFile(hn.joinPath(n,"remote-containers-path"),Buffer.from(e.extensionPath,"utf-8"))}async function OX(e,t){let r=iy(t),n="";try{if(n=(await(0,Fl.promisify)(oy.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(e)>=0)return await Et.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await Et.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,Fl.promisify)(oy.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${e}', 'User')`),a=Et.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await Et.env.clipboard.writeText(e),await Et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch{return!1}}async function NX(e,t){let n=(process.env.PATH??"").split(":"),o=[Tc.join(Ll.homedir(),"bin"),Tc.join(Ll.homedir(),".local/bin")],i="/usr/local/bin";Ll.platform()==="darwin"&&o.push(i);let s=(0,Fl.promisify)(Ic.stat);for(let a of o){if(n.findIndex(f=>f===a)<0)continue;try{await s(a)}catch{continue}let c=iy(t),u=Tc.join(a,`devcontainer${c}`);try{let f=await s(u);return console.log(f),await Et.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${a}`,{modal:!0,detail:`Try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(f){if((f==null?void 0:f.code)!=="ENOENT")return!1}let l=await Et.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${a}?`,modal:!0},"Create","Copy CLI Path"),d=Tc.join(e,`devcontainer${c}`);switch(l){case"Create":if(a===i){if(!await LX(d,u))break}else await(0,Fl.promisify)(Ic.symlink)(d,u);await Et.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${a}`,{modal:!0,detail:`Try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await Et.env.clipboard.writeText(e),await Et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function LX(e,t){try{return await Ic.promises.symlink(e,t),!0}catch(r){if(r.code!=="EACCES"&&r.code!=="ENOENT")throw r;if(await Et.window.showInformationMessage("This will now prompt with 'osascript' for Administrator privileges to install the shell command.",{modal:!0},"OK")==="OK"){let o=`osascript -e "do shell script \\"mkdir -p ${Tc.dirname(t)} && ln -sf '${e}' '${t}'\\" with administrator privileges"`;return await(0,Fl.promisify)(oy.exec)(o),!0}return!1}}async function K$(e,t){let r=e.globalStorageUri,n=hn.joinPath(r,"cli-bin").fsPath;switch(Ll.platform()){case"win32":if(await OX(n,t))return;break;case"darwin":case"linux":if(await NX(n,t))return;break}if(await Et.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await Et.env.clipboard.writeText(n);let i=iy(t);await Et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${i} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var ur=ie(require("vscode")),sS=ie(require("path"));var FX="Select Dev Container Configuration",MX=`[Creating Dev Container (show log)](command:${jr} "Show details in terminal")`,Q$="alpine:3.16.3",Y$=["devcontainers","microsoft"];async function J$(e,t,r){let n=await UX(e,t,r);if(!n)return;let{volumeAndFolderName:o}=n,i=cr(t.env),s=ur.Uri.parse(go(void 0,o,o,!1,i,void 0));await xc({uri:s,type:"folder",label:`${o} [Dev Container]`}),await ur.commands.executeCommand("vscode.openFolder",s)}async function UX(e,t,r){let{output:n}=t;it(t,"pull",Q$);let o=await zx({telemetry:r,output:n,existingFilesLearnMoreLink:Cc,predefinedDefinitionsLearnMoreLink:Ec,openConfigurationCommandId:wc},FX,!0),i=await Wn(t),s=async()=>{o.skipOptions=!0;let l=await zv(o,void 0,void 0);if(l==="back"||!l)return;let d=l.metadata.template;if(Y$.indexOf(d.owner)===-1){let f=`@${d.owner}`,p={label:`Trust ${f}`,description:"from GitHub",buttons:[{iconPath:new ur.ThemeIcon("info"),tooltip:"Open Documentation"}]},m={label:"Cancel"},h=o.quickPick.onDidTriggerItemButton(()=>{ur.env.openExternal(ur.Uri.parse(d.documentationURL))}),g=await to(o.quickPick,[p,m],`The ${d.name} is from the ${f} GitHub owner/organization.`,void 0,void 0,!0);if(h.dispose(),!g||g===m){o.quickPick.dispose();return}if(g==="back")return s()}return X$(o,l,i,jX(l.id,i),s)},a=await s();if(!a)return;let{selectedTemplate:c,volumeName:u}=a;return ur.window.withProgress({location:ur.ProgressLocation.Notification,title:MX,cancellable:!1},async()=>{let l;try{let{stdout:d}=await it(t,...$X(u,Es()));l=d.toString().trim();let f=sS.posix.join(Es(),u),p=Go(t,l,"root"),m=await Ei(t,l,"root",eo),h=$n("container",f,{},p,m,()=>{throw new Error("not implemented")},"node",n);await h.mkdirp(f);let g=mt(sS.posix,f),v=await Wx(o,h,g,c);return o.quickPick.hide(),v?{volumeAndFolderName:u}:void 0}finally{if(l)try{await it(t,"rm","-f",l)}catch{}}})}function jX(e,t){let r,n=(/([^/:]+)(:[^/:]+)?$/.exec(e)||[])[1]||"devcontainer",o=0;do r=`${n}${o++?`-${o}`:""}`;while(t.indexOf(r)!==-1);return r}async function X$(e,t,r,n,o){let{quickPick:i}=e;i.placeholder="Dev container name",i.selectedItems=[],i.value=n,i.buttons=[ur.QuickInputButtons.Back];let s={label:"Additional Options...",alwaysShow:!0},a=!1;function c(){a=!1,i.items=[{label:"Create Dev Container",description:i.value,alwaysShow:!0},s]}function u(p){a=!0,i.items=[{label:p,alwaysShow:!0}]}c();let l=[],d=await new Promise(p=>{l=[i.onDidAccept(()=>{i.value?a||p({volumeName:i.value,options:i.selectedItems[0]===s}):u("The name cannot be empty.")}),i.onDidHide(()=>p(void 0)),i.onDidChangeValue(m=>{r.indexOf(m)!==-1?u("A Docker volume with this name already exists."):m&&!/^[a-zA-Z0-9]/.test(m)?u("Only alphanumeric characters are allowed as the first character."):m&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(m)?u("Only alphanumeric characters, periods, underscores and hyphens are allowed."):c()}),i.onDidTriggerButton(()=>p("back"))]});if(l.forEach(p=>p.dispose()),!d)return;if(d==="back")return o();let{volumeName:f}=d;if(d.options){let p=async()=>{e.skipOptions=!1;let h=await Ol(e,t.metadata.template,async()=>{let w=await X$(e,t,r,f,o);if(!!w)return f=w.volumeName,w.selectedTemplate});if(h==="back"||!h)return;let v=h.metadata.features.filter(w=>Y$.indexOf(w.owner)===-1);if(v.length){let w=[...new Set(v.map(P=>P.owner))].sort().map(P=>`@${P}`),C=w.length===1?w[0]:`${w.slice(0,-1).join(", ")} and ${w[w.length-1]}`,E={label:`Trust ${C}`,description:"from GitHub",buttons:[{iconPath:new ur.ThemeIcon("info"),tooltip:"Open Documentation"}]},b={label:"Cancel"},I=e.quickPick.onDidTriggerItemButton(()=>{for(let P of v)ur.env.openExternal(ur.Uri.parse(P.documentationURL))}),T=await to(e.quickPick,[E,b],`Some features are from the ${C} GitHub owner/organization(s).`,void 0,void 0,!0);if(I.dispose(),!T||T===b){e.quickPick.dispose();return}if(T==="back")return p()}return h},m=await p();if(!m)return;t=m}return i.busy=!0,i.enabled=!1,{volumeName:f,selectedTemplate:t}}function $X(e,t){return["run","-d","--mount",`type=volume,src=${e},dst=${t}`,Q$,"sleep","infinity"]}var rH=class{constructor(t,r,n){this.context=t;this.telemetry=n,this.output=r}handleUri(t){switch(t.path){case"/cloneInVolume":this.cloneInVolume(t)}}async cloneInVolume(t){let r=tH.parse(t.query);if(!r.url){q.window.showErrorMessage(`Failed to handle the URI '${t}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let o=await ut(this.context,this.output.log);if(!await $r(this.context,o,await this.telemetry))return;if(await gC(o.cliHost,n,this.output.log)===!1){q.commands.executeCommand(jr),await q.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await q.commands.executeCommand(Ov,r.url)}};async function qX(e){var P;Uj();let t=new Date;Mj(e);let r=await Gr(e.extensionPath),n=await kd(q.env.appRoot);jj(e,n);let o=Lj(e,r,n),i=`Dev Containers ${r.version} in VS Code ${q.version} (${n.commit||"out-of-source"}).`,s=new $v(e.logPath,t,i);e.subscriptions.push(q.commands.registerCommand(jr,()=>s.show()));let{channel:a,postCreate:c}=Nj(s.log,t);e.subscriptions.push(q.commands.registerCommand(Dx,()=>a.show()));let u,l=new Promise(S=>u=S);e.subscriptions.push(q.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:Nv(s,c,Tr.results,u,async(S,k,A)=>s$(e,await o,S,Tr.onRemoveOnShutdownChanged,k,A)),async getCanonicalURI(S){var A;let k=Cn(S.authority);if(k&&pr(k)){let{hostPath:N,settings:z}=k;return Rr(N)?lu(N,s.log):z&&"host"in z&&((A=z.host)==null?void 0:A.startsWith("ssh://"))?Rd(z.host,N):q.Uri.file(N)}return S}}),q.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:Nv(s,c,Tr.results,u,async(S,k,A)=>w$(e,await o,S,k,A))}),q.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:Nv(s,c,Tr.results,u,async(S,k,A)=>G$(e,await o,S,k,A))}),q.window.registerUriHandler(new rH(e,s,o)));let d=async(S,k,A)=>{let N=await ut(e,s.log);if(!await $r(e,N,await o))return;let z;if(wr.isFolderItem(S)?(z=S.folder,A=zX()):z=S,z.scheme==="vscode-remote")return q.commands.executeCommand("vscode.openFolder",z,A);{let Q=mt(N.cliHost.path,We(z,N.cliHost.platform));return ay(e,Q,N,await o,k,A)}};e.subscriptions.push(q.commands.registerCommand("remote-containers.openFolder",async(S,k)=>S?d(S,!1,k):sH(e,!0,await o,!1,s.log))),e.subscriptions.push(q.commands.registerCommand("remote-containers.openWorkspace",async(S,k)=>S?d(S,!1,k):sH(e,!1,await o,!1,s.log))),e.subscriptions.push(q.commands.registerCommand(vj,async S=>fp(e,await o,s.log,S))),e.subscriptions.push(q.commands.registerCommand(Ov,async S=>fp(e,await o,s.log,S,zn))),e.subscriptions.push(q.commands.registerCommand(yj,async()=>{var Q;let S=q.workspace.workspaceFolders;if(!S)return;let k=S[0].uri;if(S.length>1){let ee=await q.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:"Choose a repository to clone in a Container Volume"});k=ee==null?void 0:ee[0]}let A,N;try{let ee=await q.commands.executeCommand("remoteHub.api.getRepositoryContext",k);if(!ee)throw new Error("Unable to get active repository context.");A=ee.name,N=ee.ref}catch{let U=await(await((Q=q.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:Q.activate())).getMetadata(k);if(!U)throw new Error("Unable to get active repository context.");A=`${U.repo.owner}/${U.repo.name}`,N=(await U.getRevision()).name}let z=`https://github.com/${A}`;return N&&(z=`${z}/tree/${N}`),fp(e,await o,s.log,z,zn)})),e.subscriptions.push(q.commands.registerCommand(wj,async S=>YX(e,await o,s.log,S,zn))),e.subscriptions.push(q.commands.registerCommand("remote-containers.inspectVolume",async(S,k,A)=>uH(e,S,k,A,await o,s.log))),e.subscriptions.push(q.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async S=>JX(e,S,await o,s.log))),e.subscriptions.push(q.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async S=>fp(e,await o,s.log,void 0,S))),e.subscriptions.push(q.commands.registerCommand("remote-containers.reopenInContainer",()=>f(!1))),e.subscriptions.push(q.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>f(!0))),e.subscriptions.push(q.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>f("rebuildNoCache")));let f=async S=>{if(!await q.workspace.requestWorkspaceTrust({message:rp}))return;let A=await ut(e,s.log);if(!await $r(e,A,await o))return;let N=q.workspace.workspaceFile;if(N&&N.scheme==="untitled"){await Bv();return}let z=q.workspace.workspaceFolders;if(!N&&z&&z.length){let ee=z.length>1?await q.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):z[0];ee&&(N=ee.uri)}let Q=await Ax(N);if(Q){await pp(e,Q.repositoryPath,Q.volumeName,Q.folder,A);return}if(N){let ee;if(A.cliHost.type==="wsl"&&N.scheme==="file"){let U=We(N,process.platform),L=uu(U)||Nx()||await sh(A.output)||(()=>{throw new Error("No default WSL distro found.")})();ee=await Pa(L,U,A.output)}else ee=We(N,A.cliHost.platform);let ne=mt(A.cliHost.path,ee);await ay(e,ne,A,await o,S,{forceReuseWindow:!0})}};e.subscriptions.push(q.commands.registerCommand("remote-containers.reopenLocally",async()=>{let S=q.workspace.workspaceFolders,k=q.workspace.workspaceFile||S&&S.length&&S[0].uri;if(k&&k.scheme==="vscode-remote"){let A=Cn(k.authority);if(A&&pr(A)){let N=q.Uri.file(A.hostPath),z={forceReuseWindow:!0};await q.commands.executeCommand("vscode.openFolder",N,z)}else q.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),e.subscriptions.push(q.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let S=q.workspace.workspaceFolders,k=q.workspace.workspaceFile||S&&S.length&&S[0].uri;if(k&&k.scheme==="vscode-remote"){let A=Cn(k.authority);if(A&&pr(A)&&Rr(A.hostPath)){let N=q.Uri.parse((await lu(A.hostPath,s.log)).toString()),z={forceReuseWindow:!0};await q.commands.executeCommand("vscode.openFolder",N,z)}else q.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}})),e.subscriptions.push(q.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let S=q.workspace.workspaceFolders,k=q.workspace.workspaceFile||S&&S.length&&S[0].uri;if(k&&k.scheme==="vscode-remote"){let A=Cn(k.authority),N=A==null?void 0:A.settings;if(A&&pr(A)&&N&&"host"in N&&N.host&&N.host.startsWith("ssh://")){let z=q.Uri.parse(Rd(N.host,A.hostPath).toString()),Q={forceReuseWindow:!0};await q.commands.executeCommand("vscode.openFolder",z,Q)}else q.window.showInformationMessage("'Reopen in SSH' not possible in current context.")}}));let p,m=async S=>{var z;if(!await Hs(e))return;let k,A=typeof S=="string"?S:(z=S==null?void 0:S.containerDesc)==null?void 0:z.Id;if(A){let Q=await ut(e,s.log);if(!await $r(e,Q,await o))return;k=await Qr(Q,A)}else{let Q=!1;p||(p=Wo(e.extensionPath,async ne=>(Q=!0,ji(ne)),s.log));let ee=await ut(e,s.log,void 0,void 0,p);if(k=await iZ(ee,$r(e,ee,await o),()=>Q),!k)return}let N=await ut(e,s.log);ny(N,k,e)};e.subscriptions.push(q.commands.registerCommand("remote-containers.attachToRunningContainer",m)),e.subscriptions.push(q.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",m)),e.subscriptions.push(q.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async S=>W$(e,await ut(e,s.log),S)));let h=async S=>{var N;let k=await ut(e,s.log);if(!await $r(e,k,await o))return;let A=(N=S==null?void 0:S.pullRequestModel)==null?void 0:N.html_url;fp(e,await o,s.log,A,zn)};e.subscriptions.push(q.commands.registerCommand("remote-containers.checkoutPRInVolume",h)),e.subscriptions.push(q.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let S=await bc();if(S){let k=await ut(e,s.log);await pp(e,S.repositoryPath,S.volumeName,S.folder,k,!0);return}return await Promise.all(Tr.onRemoveOnShutdownChangedEmitter.fire(!0)),q.commands.executeCommand("workbench.action.reloadWindow")})),e.subscriptions.push(q.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let S=await bc();if(S){let k=await ut(e,s.log);await pp(e,S.repositoryPath,S.volumeName,S.folder,k,"rebuildNoCache");return}return await Promise.all(Tr.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),q.commands.executeCommand("workbench.action.reloadWindow")}));let g=q.env.remoteName&&q.env.remoteName!=="test"?"linux":process.platform,v=((P=(q.workspace.workspaceFolders||[])[0])==null?void 0:P.uri)||Qe.file(process.cwd()),w=Dl(g,v),C={fileHost:w,findDevContainerFiles:()=>Ux(w),telemetry:o,output:s.log,existingFilesLearnMoreLink:Cc,predefinedDefinitionsLearnMoreLink:Ec,openConfigurationCommandId:wc},E=await o$(e,C);e.subscriptions.push(q.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!q.workspace.workspaceFolders){await q.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await q.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await lS(e,w,E,await o,s.log)})),e.subscriptions.push(q.commands.registerCommand("remote-containers.createDevContainer",async()=>{let S=await ut(e,s.log);!await $r(e,S,await o)||await J$(e,S,await o)})),e.subscriptions.push(q.commands.registerCommand("remote-containers.openDevContainerFile",async(S,k)=>{let A,N=await ut(e,s.log),z;if(typeof S=="string"?A=[Qe.file(S)]:(z=await Ux(N.cliHost),A=(await Promise.all(z.map(Q=>Q.scheme==="file"||Q.scheme==="vscode-remote"?Q:N.cliHost.toCommonURI(We(Q,N.cliHost.platform))))).filter(Q=>!!Q)),A.length){let Q;A.length===1?Q={uri:A[0]}:Q=await q.window.showQuickPick(A.map(ne=>({label:ne.scheme==="file"?ne.fsPath:ne.toString(),uri:ne})),{placeHolder:"Select container configuration file to open"});let ee=await bc();if(ee){let ne=Aj(ee.folder);for(let U of ne){try{await q.workspace.openTextDocument(q.Uri.parse(U.toString()))}catch{continue}await q.commands.executeCommand("vscode.open",q.Uri.parse(U.toString()),k);return}return}if(Q){let ne=Q.uri,U=SN(ne);if(U){let L=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?U.replace(/\\/g,"/"):U}`;return q.env.openExternal(q.Uri.parse(L))}else{if(ne.scheme==="file"&&await Jt(ne.fsPath))return await q.commands.executeCommand("vscode.open",q.Uri.parse(ne.toString()),k);if(ne.scheme==="file"&&Tr.results.size)return await Bn(po,ne,[],wi),await q.commands.executeCommand("vscode.open",q.Uri.parse(ne.toString()),k);if(ne.scheme==="vscode-remote"&&Tr.results.size)return await q.commands.executeCommand("vscode.open",q.Uri.parse(ne.toString()),k);if(S===void 0)return await lS(e,w,E,await o,s.log)}}}else if(S===void 0&&!(z==null?void 0:z.length))return await lS(e,w,E,await o,s.log)})),e.subscriptions.push(q.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:S,dockerParams:k}=[...Tr.results.values()][0];if(!S||!k)return q.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let A=await Qr(k,S),N=Xv(e.globalStoragePath,A.Name),z=q.Uri.file(N);return await Jt(N)?q.commands.executeCommand("vscode.open",z):(await Bn(po,z,[],wi),q.commands.executeCommand("vscode.open",z))})),e.subscriptions.push(q.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let S=[...(await p$(e.globalStoragePath)).map(A=>X({label:A.name},A)).sort((A,N)=>A.label.localeCompare(N.label)),...(await h$(e.globalStoragePath)).map(A=>X({label:A.image},A)).sort((A,N)=>A.label.localeCompare(N.label))],k=await q.window.showQuickPick(S.length?S:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(k&&"uri"in k)return q.commands.executeCommand("vscode.open",q.Uri.parse(k.uri.toString()))})),e.subscriptions.push(q.commands.registerCommand("remote-containers.settings",async()=>q.commands.executeCommand("workbench.action.openSettings",`@ext:${iH()}`))),e.subscriptions.push(q.commands.registerCommand("remote-containers.getHelp",async()=>q.env.openExternal(q.Uri.parse("https://aka.ms/vscode-remote/containers")))),e.subscriptions.push(q.commands.registerCommand("remote-containers.getStarted",async()=>q.env.openExternal(q.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),e.subscriptions.push(q.commands.registerCommand("remote-containers.reportIssue",async()=>q.commands.executeCommand("vscode.openIssueReporter",iH()))),e.subscriptions.push(q.commands.registerCommand("remote-containers.provideFeedback",async()=>q.env.openExternal(q.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),e.subscriptions.push(q.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new oS(w))),e.subscriptions.push(q.commands.registerCommand("remote-containers.trySample",async()=>{fZ(e,s.log)})),e.subscriptions.push(q.commands.registerCommand("remote-containers.openLogFile",()=>pZ(e))),e.subscriptions.push(q.commands.registerCommand("remote-containers.openLastLogFile",()=>mZ(e,"remoteContainers",s.logFilePath))),e.subscriptions.push(q.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>cZ(e))),e.subscriptions.push(q.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>VX(e))),e.subscriptions.push(q.commands.registerCommand("remote-containers.installDocker",()=>ty(s.log))),M$(e,Tr.results,await o,s.log),await z$(e,n),e.subscriptions.push(q.commands.registerCommand("remote-containers.installUserCLI",()=>K$(e,n))),(async()=>{let S=q.env.remoteAuthority,k=S&&Cn(S);k&&(Or(k)||xi(k))&&k.inspectVolume&&await l,await Rj(e)||await pH(e,w,await o,s.log)})().catch(console.error),WX(e);let b=q.env.remoteName,I=!b||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container"].indexOf(b)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];e.subscriptions.push(q.commands.registerCommand("remote-containers.addExtensionToConfig",E.addExtensionToConfiguration),q.languages.registerCompletionItemProvider([...I,{pattern:or.join(Zv(e.globalStoragePath),"*.json")},{pattern:or.join(Jv(e.globalStoragePath),"*.json")}],E.createCompletionItemProvider()),q.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{await E.configureContainerFeatures()}),q.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",E.addPortLabelToConfiguration)),await bc()&&q.commands.executeCommand("setContext","isRecoveryContainer",!0)}var nH="showRecoveryContainerNotification",oH="showReopenInContainerNotificationReset",BX=5e3;function VX(e){return e.globalState.update(oH,Date.now())}async function WX(e){setTimeout(async()=>{let t=e.globalState.get(oH);if(dS(e.globalState.get(nH),t))return;if(await bc()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",o="Reopen in Container",i="Don't Show Again",s=await q.window.showInformationMessage(n,o,i);s===o?q.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await e.globalState.update(nH,Date.now())}},BX)}async function GX(){await Promise.all([...Tr.results.values()].map(e=>Promise.all(e.params.shutdowns.map(t=>{try{t()}catch(r){console.error(r)}}))))}function iH(){let{name:e,publisher:t}=Z$();return`${t}.${e}`}async function sH(e,t,r,n,o){var d;let i=await ut(e,o);if(!await $r(e,i,r))return;let s,a=q.workspace.workspaceFolders;if(a&&a[0]){let f=a[0].uri;if(f.scheme==="vscode-remote"){let p=Cn(f.authority);if(p&&pr(p)){let m=mt(i.cliHost.path,p.hostPath);s=q.Uri.file(m.rootFolderPath)}else/^(wsl|ssh-remote)\+/.test(f.authority)&&(s=f)}else f.scheme==="file"&&(s=f)}s||(((d=q.env.remoteName)==null?void 0:d.match(/^(wsl|ssh-remote)$/))?s=q.Uri.from({scheme:"vscode-remote",authority:q.env.remoteAuthority,path:await i.cliHost.homedir()}):s=q.Uri.file(eH.homedir()));let c=t?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},u=await q.window.showOpenDialog(c),l=u&&u[0];if(l){let f=t?l:l.with({path:or.posix.dirname(l.path)}),p=await ut(e,i.output,f,Ox()==="always"),m=We(l,p.cliHost.platform),h=mt(p.cliHost.path,m);await ay(e,h,p,r,n)}}function zX(){return q.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function ay(e,t,r,n,o,i){var E;let{cliHost:s}=r;if(Rr(t.rootFolderPath)){if(r=await ut(e,r.output,t.rootFolderPath),s=r.cliHost,!await $r(e,r,n))return;t=mt(s.path,t.isWorkspaceFile?s.path.join(s.cwd,or.basename(t.workspaceOrFolderPath)):s.cwd)}let a=await Um(s,t);if(a){let b="Continue";if(await q.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},b)!==b)return}let c=await bi(s,t,Hi(),!0,r.output),u=!!(c&&Rt((await s.readFile(We(c,s.platform))).toString()).initializeCommand),{dockerCLI:l,dockerComposePath:d}=r,f={cliHost:s,dockerPath:l,dockerComposePath:d,appRoot:q.env.appRoot,extensionPath:e.extensionPath,package:await Gr(e.extensionPath),output:r.output},p=c&&await(u?op(f,t.rootFolderPath,c):qx(f,t.rootFolderPath,c));if(p==="canceled")return;if(!p||!$h(p.configuration)){let b=await Yv({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:Cc,predefinedDefinitionsLearnMoreLink:Ec,openConfigurationCommandId:wc},t);if(!b||(p=await qx(f,t.rootFolderPath,Qe.file(b).with({scheme:Ht.scheme})),!p||p==="canceled"))return}if(!await KX(r,"mergedConfiguration"in p?p.mergedConfiguration:p.configuration))return;let m=p.configuration,h=p.workspace.workspaceFolder;if(Ir(m)){let b=gs(s,m);if(!m.initializeCommand&&!await Pr(s).readDocument(b))return mp(`"${b.fsPath}" does not exist.`,s,m.configFilePath);if(m.workspaceFolder&&!or.posix.isAbsolute(m.workspaceFolder))return mp("Workspace folder in devcontainer.json must be an absolute path.",s,m.configFilePath)}else if(!("image"in m))if("dockerComposeFile"in m){if(!await D$(r)||!await sZ(t,r,m))return}else{let b=m.configFilePath;return mp(`Configuration "${s.path.relative(t.rootFolderPath,We(b,s.platform))}" not valid.`,s,b)}t.isWorkspaceFile&&(h=or.posix.join(h,s.path.basename(t.workspaceOrFolderPath)));let g=cr(r.env),v=s.type==="wsl"?(await s.toCommonURI(t.workspaceOrFolderPath)).fsPath:t.workspaceOrFolderPath,w=(s.type==="local"||s.type==="wsl")&&g&&"host"in g&&((E=g.host)==null?void 0:E.startsWith("ssh://")),C=q.Uri.parse(Xd(v,h,g,w));await xc({uri:C,type:t.isWorkspaceFile?"workspace":"folder",label:`${QN(s.platform,t.workspaceOrFolderPath,await s.homedir())}${Ru(g)} [Dev Container]`}),await Mx(e,o?C.authority:!1),await ep(e,o==="rebuildNoCache"?C.authority:!1),await q.commands.executeCommand("vscode.openFolder",C,i)}async function KX(e,{hostRequirements:t}){var n,o;let r=t&&QX(t);if(r&&(r.cpus||r.memory||r.gpu&&r.gpu!=="optional")){let i=await it(e,"info","--format","{{json .}}"),s=JSON.parse(i.stdout.toString()),a=s.NCPU&&r.cpus&&r.cpus>s.NCPU,c=s.MemTotal&&r.memory&&r.memory>s.MemTotal,u=((o=(n=s.Runtimes)==null?void 0:n.nvidia)==null?void 0:o.path)==="nvidia-container-runtime";if(a||c){let l=[];s.NCPU&&l.push(`CPUs ${s.NCPU}`),s.MemTotal&&l.push(`RAM ${cS(s.MemTotal)}`),u&&l.push("GPU");let d=[];r.cpus&&d.push(`CPUs ${r.cpus}`),r.memory&&d.push(`RAM ${cS(r.memory)}`),r.storage&&d.push(`disk ${cS(r.storage)}`),r.gpu&&r.gpu!=="optional"&&d.push("GPU");let f=`Docker daemon: ${l.join(", ")}
devcontainer.json: ${d.join(", ")}`;if(!await q.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:f},"Continue"))return!1}}return!0}function QX(e){return{cpus:e.cpus||0,memory:aH(e.memory||"0"),storage:aH(e.storage||"0"),gpu:e.gpu}}function aH(e){let t=/^(\d+)([tgmk]b)?$/.exec(e);if(t){let[,r,n]=t,o=parseInt(r,10),i=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return o*i}return 0}function cS(e){let t=Math.min(Math.floor(Math.log2(Math.max(Math.abs(e),1))/10),4),r=e/Math.pow(2,10*t),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),o=Math.round(r*n)/n,i=[" bytes","kb","mb","gb","tb"][t];return`${o}${i}`}async function fp(e,t,r,n,o){if(!await np(e))return;let i=await ut(e,r),s=null;if(!!await $r(e,i,t)){if(typeof n=="string")s=n;else{let a=await q.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(a){s=(typeof a=="string"?a:a.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=Qo(s);if(await gC(i.cliHost,c.repositoryUrl,i.output)===!1){q.commands.executeCommand(jr),await q.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}typeof a!="string"&&a.branch&&(s=`${s}/tree/${a.branch}`)}}s&&await cH(e,i,s,o)}}async function cH(e,t,r,n){if(n||(n=await ZX(t)),n){let o=uS(r);n!==zn&&(o=await tZ(r)),o&&await pp(e,r,n,o,t)}}async function YX(e,t,r,n,o){if(!await np(e))return;let i=await ut(e,r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await $r(e,i,t))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:l=>s.test(l)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await q.window.showInputBox(a),!c)return;let u=Qo(c);if(u.repository==="unknown"||!u.pullRequestId){await q.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await cH(e,i,c,o)}async function uH(e,t,r,n,o,i){let s=await ut(e,i);!await $r(e,s,o)||(t||(t=await XX(s)),t&&(r&&n?await oZ(t,r,n,s):await nZ(t,s)))}async function JX(e,t,r,n){let o=await ut(e,n);!await $r(e,o,await r)||t&&t.volumeName&&await uH(e,t.volumeName,void 0,void 0,r,n)}var cy=class{get detail(){return""}},lH=class extends cy{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},dH=class extends cy{constructor(t){super();this.volume=t}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},fH=class extends cy{constructor(t){super();this.volume=t}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function XX(e){let t=await Wn(e),n=(await Gd(e,t)).map(a=>new fH(a)),o="Select the volume to inspect with Visual Studio Code",i=q.window.createQuickPick();i.items=n,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function ZX(e){let t=await Wn(e,["vsch.local.repository.unique=false"]),n=(await Gd(e,t)).map(l=>new dH(l)),o=new lH,i=[o,...n],s="Select the volume for the cloned repository",a=q.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(l=>{a.onDidAccept(()=>l(a.activeItems[0])),a.onDidHide(()=>l(void 0))});if(a.hide(),!c)return null;let u=null;return c===o?u=await eZ(e):u=c.volumeName,u}async function eZ(e){let t="",r="vsc-remote-containers",n=await Wn(e);n.find(s=>s===r)||(t=r);let o={prompt:"Enter the volume name.",value:t,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},i=await q.window.showInputBox(o);return i?n.find(s=>s===i)?(await q.window.showErrorMessage("Volume already exists",{modal:!0}),null):i:null}async function tZ(e){let t={prompt:"Enter the target folder name.",value:uS(e),ignoreFocusOut:!0},r=await q.window.showInputBox(t);return r||null}function uS(e){return Gn(e).repositoryName}async function rZ(){return(await q.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function pp(e,t,r,n,o,i=!1){let s=cr(o.env),a=ku(t),c;try{c=await a.parseUrl(void 0)}catch(l){if(l instanceof Yh){q.window.showErrorMessage(l.description);return}let d=await rZ();try{c=await a.parseUrl(d)}catch{q.window.showErrorMessage(`Cannot access '${t}'.`,{modal:!0});return}}let u=q.Uri.parse(go(t,r,n,!1,s,c));r===zn&&(r="a unique volume"),await xc({uri:u,type:"folder",label:`${n} in ${r} [Dev Container]`}),await Mx(e,i?u.authority:!1),await ep(e,i==="rebuildNoCache"?u.authority:!1),await q.commands.executeCommand("vscode.openFolder",u)}async function nZ(e,t){let r=cr(t.env),n=q.Uri.parse(go(void 0,e,void 0,!0,r,void 0));await xc({uri:n,type:"folder",label:`Volume ${e} [Dev Container]`}),await q.commands.executeCommand("vscode.openFolder",n)}async function oZ(e,t,r,n){let o=cr(n.env),i=q.Uri.parse(go(t,e,r,!0,o,void 0));await xc({uri:i,type:"folder",label:`${r} in ${e} [Inspect Dev Container]`}),await q.commands.executeCommand("vscode.openFolder",i)}async function ny(e,t,r,n){if(!await Hs(r))return;let o,i=e.cliHost;if(i.type==="wsl"){let u=await i.toCommonURI(i.cwd);u&&u.scheme==="file"&&(o=u.fsPath)}let s=WN(t.Name,cr(e.env),o),a=await d$(r.globalStoragePath,t),c=r.extensionMode===q.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let u=q.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),l={};c?l.forceReuseWindow=!0:l.forceNewWindow=!0,await q.commands.executeCommand("vscode.openFolder",u,l)}else{let u={remoteAuthority:s};c&&!n&&(u.reuseWindow=!0),await q.commands.executeCommand("vscode.newWindow",u)}}async function iZ(e,t,r){let n=(async()=>{if(!await t)throw new Error("cancel");let o=await Ci(e),i=await ws(e,o),s=[];if(i.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw q.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let o={placeHolder:"Select the container to attach VS Code"},i=await q.window.showQuickPick(n,o);if(!i&&r()){if(!await t)throw new Error("cancel");i=await q.window.showQuickPick(n,o)}return i?i.containerInfo:void 0}catch(o){if(o&&o.message==="cancel")return;throw o}}async function sZ(e,t,r){if(!r.workspaceFolder)return mp("Workspace folder not specified in devcontainer.json.",t.cliHost,r.configFilePath),!1;if(!or.posix.isAbsolute(r.workspaceFolder))return mp("Workspace folder in devcontainer.json must be an absolute path.",t.cliHost,r.configFilePath),!1;let n=await vs(t.cliHost,r,t.cliHost.env,t.cliHost.cwd),o=await jE(t,e,n),i=await vN(t,o,r.service);return!(i&&await Qr(t,i)&&!await aZ(t.cliHost,n))}async function aZ(e,t){let r=[];for(let n=0;n<t.length;n++)await e.isFile(t[n])||r.push(t[n]);return r.length>0?(q.window.showErrorMessage(`The following referenced docker compose files do not exist: ${r.join(", ")}`,{modal:!0}),!1):!0}async function mp(e,t,r){if(await q.window.showErrorMessage(e,{modal:!0},"Open devcontainer.json")){let o=We(r,t.platform),i=await t.toCommonURI(o);i&&q.window.showTextDocument(q.Uri.parse(i.toString()))}}async function lS(e,t,r,n,o){await r.createConfiguration()&&await pH(e,t,n,o)}async function pH(e,t,r,n){if([void 0,"wsl","ssh-remote"].indexOf(q.env.remoteName)===-1)return;let o=q.workspace.workspaceFile,i=q.workspace.workspaceFolders,s=o||i&&i.length&&i[0].uri||void 0;if(s&&s.scheme!=="vscode-vfs"){let a=We(s,t.platform),c=mt(t.path,a),u=await WE(t,c,Hi());u&&await uZ(e,u,c,t,r,n)}}var uy="showReopenInContainerNotification",mH="showReopenInContainerNotificationReset";function cZ(e){return e.globalState.update(mH,Date.now())}async function uZ(e,t,r,n,o,i){let s=e.globalState.get(mH);if(dS(e.globalState.get(uy),s)||dS(e.workspaceState.get(uy),s))return;let a=xN(n,r,t.uri),c,u="";if(n.platform!=="linux"&&q.env.remoteName!=="wsl"&&!(n.platform==="win32"&&Rr(r.rootFolderPath))&&q.env.remoteName!=="ssh"){let w=await ut(e,i);if(c=await Lk(w.cliHost,r,w.output),c&&a){let C=await yd(w.cliHost,r.rootFolderPath,w.output);C&&await Uk(w.cliHost,r,w.cliHost.path.relative(C,We(t.uri,w.cliHost.platform)),w.output)||(c=void 0)}if(c){let{cliHost:C,dockerCLI:E,dockerComposePath:b}=w,I={cliHost:C,dockerPath:E,dockerComposePath:b,appRoot:q.env.appRoot,extensionPath:e.extensionPath,package:await Gr(e.extensionPath),output:i},T=await op(I,r.rootFolderPath,t.uri);(!T||!Ir(T.configuration)&&!("image"in T.configuration))&&(c=void 0)}c&&(u=" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo).")}let l;a?r.isWorkspaceFile?l="Workspace contains a Dev Container configuration file.":l="Folder contains a Dev Container configuration file.":l="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let d="Reopen in Container",f="Clone in Volume",p="Don't Show Again...",m=r.isWorkspaceFile?`${l} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${u}`:`${l} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${u}`,h=c?[d,f,p]:[d,p];lZ(o,t.location);let g=await q.window.showInformationMessage(m,...h);if(dZ(o,g===d?"reopen":g===f?"openRepository":g===p?"dontShowAgain":"cancel",t.location),g===d){if(!await q.workspace.requestWorkspaceTrust({message:rp}))return;let C=await ut(e,i);if(!await $r(e,C,o))return;if(C.cliHost.type==="wsl"&&n.platform==="win32"){let{cwd:E}=await WC(r.workspaceOrFolderPath,ko(),i);r=mt(C.cliHost.path,E)}try{await ay(e,r,C,o,!1,{forceReuseWindow:!0})}catch(E){await bs(E,"ui",o)}}else if(g===f){let w=await ut(e,i),C=await Mk(w.cliHost,r,w.output),E="OK",b="Cancel";(!C||E===await q.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",E,b))&&await q.window.withProgress({location:q.ProgressLocation.Notification,title:"Clone in Volume"},async(I,T)=>{I.report({message:"Follow the prompts at the top of the window."}),await q.commands.executeCommand(Ov,c)})}else if(g===p){let w=r.isWorkspaceFile?"Any Workspace":"Any Folder",C=r.isWorkspaceFile?"Current Workspace":"Current Folder",E=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",b=await q.window.showInformationMessage(E,w,C);b===w?await e.globalState.update(uy,Date.now()):b===C&&await e.workspaceState.update(uy,Date.now())}}function lZ(e,t){e.sendTelemetryEvent("reopenNotificationOpen",{location:t})}function dZ(e,t,r){e.sendTelemetryEvent("reopenNotificationResult",{result:t,location:r})}function dS(e,t){return e===!1?e=1:e===void 0&&(e=-1),t===void 0&&(t=0),t<e}async function fZ(e,t){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},o=await q.window.showQuickPick(r,n);if(!o)return;let i=await ut(e,t);o.detail&&await pp(e,o.detail,zn,uS(o.detail),i)}async function pZ(e){let t=await Promise.all((await hH(e)).map(async n=>{let o=await(0,aS.promisify)(sy.stat)(n.path),i=n.time;return{label:n.prefix,description:`${Ml(i.getFullYear())}-${Ml(i.getMonth()+1)}-${Ml(i.getDate())} ${Ml(i.getHours())}:${Ml(i.getMinutes())}:${Ml(i.getSeconds())} - ${o.size} bytes`,path:n.path}}));t.length||t.push({label:"No log files found."});let r=await q.window.showQuickPick(t,{placeHolder:"Choose a log file"});r&&r.path&&await q.window.showTextDocument(q.Uri.file(r.path))}function Ml(e,t=2){return e.toString().padStart(t,"0")}async function mZ(e,t,r){let n=(await hH(e)).find(o=>o.name.startsWith(t)&&o.path!==r);n?await q.window.showTextDocument(q.Uri.file(n.path)):await q.window.showInformationMessage("No previous log file found.",{modal:!0})}async function hH(e){let t=[],r=or.basename(e.logPath),n=or.dirname(or.dirname(or.dirname(e.logPath)));for(let o of(await fS(n)).sort().reverse()){let i=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/.exec(o);if(i){let s=or.join(n,o);for(let a of await fS(s)){let c=or.join(s,a),u=or.join(c,r);for(let l of(await fS(u)).sort()){let d=or.join(u,l),f=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(l),p=f?new Date(`${f[1]}-${f[2]}-${f[3]}T${f[4]}:${f[5]}:${f[6]}.${f[7]}Z`):new Date(`${i[1]}-${i[2]}-${i[3]}T${i[4]}:${i[5]}:${i[6]}Z`);t.push({name:l,path:d,time:p,prefix:f?l.substr(0,f.index-1):l.substr(0,l.length-4)})}}}}return t.sort((o,i)=>o.time>i.time?-1:o.time<i.time?1:o.path.localeCompare(i.path)),t}async function fS(e){try{return await(0,aS.promisify)(sy.readdir)(e)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=extension.js.map
